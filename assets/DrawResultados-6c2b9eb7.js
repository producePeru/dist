import{r as p,a as T,j as D,T as q,b as c,o as n,d as i,c as r,w as l,e as A,F as _,q as B,v as C,h as E,x as F,i as N,K as P,m as U}from"./index-e79988f3.js";import{u as I}from"./selectes-43282fae.js";import{Q as O}from"./quill.snow-d9b7b900.js";const V={class:"grid-event-resultado"},j={__name:"DrawResultados",props:["dataRow"],emits:["closeDraw"],setup(y,{emit:g}){const d=I();d.$patch({officesPnte:d.officesPnte}),d.fetchOfficesPnte();const v=g,s=y,u=p(!1),b={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}],["link"]]},contentType:"html"},w=p({resultados:{type:"iTextArea",label:"DESCRIBIR RESULTADOS",name:"resultados",required:!1,message:"Escribe los resultados de los evento",max:500}}),a=T({resultado:null}),R=async()=>{const e={resultado:a.resultado};u.value=!0;try{const t=await P({url:`event/update/${s.dataRow.id}`,method:"PUT",data:e});t.status===200&&(U.success(t.message),v("closeDraw"))}catch(t){console.error("Failed to update record",t)}finally{u.value=!1}},m=e=>{console.log("Setting",e),e.resultado?a.resultado=e.resultado:a.resultado="</p>"};return D(()=>{s.dataRow&&m(s.dataRow)}),q(()=>s.dataRow,e=>{e&&m(e)}),(e,t)=>{const f=c("a-form-item"),h=c("a-button"),x=c("a-form");return n(),i("div",null,[r(x,{class:"form-events",layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:R},{default:l(()=>[A("div",V,[(n(!0),i(_,null,B(w.value,(o,k)=>(n(),i(_,{key:k},[o.type==="iTextArea"?(n(),C(f,{key:0,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:l(()=>[r(E(O),{class:"quill-editor",content:a.resultado,"onUpdate:content":t[0]||(t[0]=S=>a.resultado=S),options:b,contentType:"html"},null,8,["content"])]),_:2},1032,["name","label","rules"])):F("",!0)],64))),128))]),r(f,null,{default:l(()=>[r(h,{type:"primary","html-type":"submit",loading:u.value,style:{"margin-top":"1rem"}},{default:l(()=>t[1]||(t[1]=[N("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}};export{j as _};
