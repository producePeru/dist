import{l as m,a9 as x,r as v,G as te,Z as oe,j as ne,b as d,o as i,d as c,e as n,t as _,c as s,w as p,x as y,i as z,y as r,h as a,L as se,F as L,aa as R,O as ie,q as re}from"./index-98fb0e30.js";import{_ as de}from"./icoexcel-1b303edf.js";import{u as ue}from"./selectes-cb426210.js";import"./es-1de2032e.js";import{M as ce}from"./MoreOutlined-c0a90f8c.js";const pe={class:"table-component"},me={class:"title-produce"},ve={class:"table-filters"},ge={key:0,class:"filter-year"},fe={key:1,class:"filter-type"},_e={key:2,class:"filter-type"},ye={key:3,class:"filter-offices"},he={key:4,class:"filter-range-date"},we={key:5,class:"filter-asesor"},be={key:6,class:"filter-asesor"},Se={key:7,class:"filter-asesor"},Ce={class:"filter-search"},ke={key:1},Oe={class:"paginator"},xe="DD/MM/YYYY",Re={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(E,{emit:U}){m.locale("es");const h=ue();h.$patch({cities:h.cities}),h.fetchCities();const l=E,w=U,A=JSON.parse(localStorage.getItem("role"))||[],o=x("search"),N=x("loading"),I=x("loadingFile"),b=v(window.innerHeight-100),S=v({page:1}),T=v(1200),F=v([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),P=v([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),Y=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),B=v([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),M=u=>A.some(e=>u.includes(e.id)),G=te(()=>u=>(S.value.page-1)*l.pageSize+u+1),H=()=>{w("handleNew")},V=async()=>{w("handleDownloadExcel")},j=()=>{S.value.page=1,w("handleSearch",!0)},$=u=>{S.value.page=u,w("handlePaginator",u)},C=()=>{if(l.heightTable)return b.value=window.innerHeight-l.heightTable;b.value=window.innerHeight-310},k=(u,e)=>{const g=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)};return oe(()=>{window.removeEventListener("resize",C)}),ne(()=>{window.addEventListener("resize",C),C()}),(u,e)=>{const g=d("a-button"),O=d("a-col"),q=d("a-date-picker"),f=d("a-select"),J=d("a-range-picker"),X=d("a-input"),Z=d("a-row"),K=d("a-menu"),Q=d("a-dropdown"),W=d("a-table"),ee=d("a-tag"),le=d("a-pagination");return i(),c(L,null,[n("div",pe,[n("h3",me,_(l.title),1),s(Z,{style:{margin:"1rem 0"}},{default:p(()=>[s(O,{xs:24,md:5},{default:p(()=>[l.new?(i(),y(g,{key:0,type:"primary",onClick:H,style:{"margin-right":".6rem"}},{default:p(()=>[z(_(l.textNuevo),1)]),_:1})):r("",!0),E.downloadExcel?r("",!0):(i(),y(g,{key:1,class:"btn-excel",onClick:V,loading:a(I),type:"primary"},{default:p(()=>e[10]||(e[10]=[n("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:de},null,-1)])),_:1},8,["loading"]))]),_:1}),s(O,{xs:24,md:19},{default:p(()=>[n("div",ve,[l.searchYear?(i(),c("div",ge,[e[11]||(e[11]=n("small",null,"AÑO",-1)),s(q,{allowClear:!1,value:a(o).year,"onUpdate:value":e[0]||(e[0]=t=>a(o).year=t),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):r("",!0),l.tipoformalizacion?(i(),c("div",fe,[e[12]||(e[12]=n("small",null,"TIPO",-1)),s(f,{value:a(o).type,"onUpdate:value":e[1]||(e[1]=t=>a(o).type=t),options:Y.value},null,8,["value","options"])])):r("",!0),l.tipoformalizacion?(i(),c("div",_e,[e[13]||(e[13]=n("small",null,"TIPO CDE",-1)),s(f,{allowClear:!0,value:a(o).typeCdes,"onUpdate:value":e[2]||(e[2]=t=>a(o).typeCdes=t),options:P.value},null,8,["value","options"])])):r("",!0),l.tipooficina?(i(),c("div",ye,[e[14]||(e[14]=n("small",null,"OFICINA",-1)),s(f,{value:a(o).offices,"onUpdate:value":e[3]||(e[3]=t=>a(o).offices=t),options:B.value},null,8,["value","options"])])):r("",!0),l.rangeDate?(i(),c("div",he,[e[15]||(e[15]=n("small",null,"POR RANGO DE FECHAS",-1)),s(J,{value:a(o).range,"onUpdate:value":e[4]||(e[4]=t=>a(o).range=t),presets:F.value,format:xe},null,8,["value","presets"])])):r("",!0),M([1,5])&&l.asesoresList?(i(),c("div",we,[e[16]||(e[16]=n("small",null,"POR ASESOR",-1)),l.asesoresList?(i(),y(f,{key:0,allowClear:!0,value:a(o).asesor,"onUpdate:value":e[5]||(e[5]=t=>a(o).asesor=t),placeholder:"Selecciona Asesor","show-search":"",options:l.asesoresList,"filter-option":k},null,8,["value","options"])):r("",!0)])):r("",!0),l.cityList?(i(),c("div",be,[e[17]||(e[17]=n("small",null,"POR REGIÓN",-1)),s(f,{allowClear:!0,value:a(o).city_id,"onUpdate:value":e[6]||(e[6]=t=>a(o).city_id=t),placeholder:"Selecciona región","show-search":"",options:a(h).cities,"filter-option":k},null,8,["value","options"])])):r("",!0),l.othersList?(i(),c("div",Se,[e[18]||(e[18]=n("small",null,"ORDENAR POR",-1)),s(f,{allowClear:!0,value:a(o).orderby,"onUpdate:value":e[7]||(e[7]=t=>a(o).orderby=t),placeholder:"Filtrador por:","show-search":"",options:l.othersList,"filter-option":k},null,8,["value","options"])])):r("",!0),n("div",Ce,[n("small",null,_(l.titleSearch),1),s(X,{value:a(o).name,"onUpdate:value":e[8]||(e[8]=t=>a(o).name=t),placeholder:l.placeholderSearch},null,8,["value","placeholder"])]),s(g,{type:"primary",onClick:j},{default:p(()=>[a(N)?(i(),y(a(se),{key:0})):(i(),c("span",ke,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),s(W,{bordered:"",scroll:{x:T.value,y:b.value},class:"table-pnte",columns:l==null?void 0:l.columns,"data-source":l==null?void 0:l.dataSource,pagination:!1,loading:a(N),size:"small"},{bodyCell:p(({column:t,record:D,index:ae})=>[t.dataIndex=="idx"?(i(),c(L,{key:0},[z(_(G.value(ae)),1)],64)):r("",!0),R(u.$slots,"data-cell",{column:t,record:D}),t.dataIndex=="actions"?(i(),y(Q,{key:1,trigger:["click"]},{overlay:p(()=>[s(K,null,{default:p(()=>[R(u.$slots,"custom-options",{record:D})]),_:2},1024)]),default:p(()=>[n("a",{class:"ant-dropdown-link",onClick:e[9]||(e[9]=ie(()=>{},["prevent"]))},[s(g,{shape:"circle",icon:re(a(ce)),size:"small"},null,8,["icon"])])]),_:2},1024)):r("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),n("div",Oe,[n("span",null,[s(ee,{color:"blue"},{default:p(()=>[n("b",null,_(l==null?void 0:l.total),1)]),_:1}),z(_(l.nameTotal),1)]),s(le,{size:"small",total:l==null?void 0:l.total,pageSize:l.pageSize,onChange:$,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Re as _};
