import{u as ie}from"./selectes-c87c38aa.js";import{e as t,A as xe,x as pe,r as h,g as ae,h as c,o as a,c as b,w as n,d,F as N,s as Z,u as S,i as m,k as l,T as de,j as A,t as w,U as _e,y as Y,m as B,N as Ue,O as we,q as Ce,a as Ie,V as De,p as qe,f as Ae,S as Re}from"./index-6912df85.js";/* empty css                                                      */import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Fe}from"./DrawerSolicitante.componente-09814143.js";import"./es-4b6de458.js";var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const ze=$e;function me($){for(var k=1;k<arguments.length;k++){var r=arguments[k]!=null?Object(arguments[k]):{},x=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(x=x.concat(Object.getOwnPropertySymbols(r).filter(function(R){return Object.getOwnPropertyDescriptor(r,R).enumerable}))),x.forEach(function(R){Ne($,R,r[R])})}return $}function Ne($,k,r){return k in $?Object.defineProperty($,k,{value:r,enumerable:!0,configurable:!0,writable:!0}):$[k]=r,$}var ce=function(k,r){var x=me({},k,r.attrs);return t(xe,me({},x,{icon:ze}),null)};ce.displayName="RedoOutlined";ce.inheritAttrs=!1;const Oe=ce,Te={codesunarp:{type:"iText",label:"Código SID sunarp",name:"codesunarp",required:!0,message:"Escribir apellido",disabled:!1},economicsector_id:{type:"iSelect",label:"Sector económico",name:"economicsector_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},comercialactivity_id:{type:"iSelectWrite",label:"Actividad comercial",name:"comercialactivity_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},regime_id:{type:"iSelect",label:"Tipo de régimen societario",name:"regime_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"Dirección del negocio",name:"address",required:!1,message:"Escribir apellido",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1}},Ee={name:{type:"iText",label:"Nombre empresa",name:"name",required:!0,message:"Escribir apellido",disabled:!1},numbernotary:{type:"iText",label:"Número de solicitud de envio a Notaría",name:"numbernotary",required:!1,message:"Seleccionar departamento",disabled:!1},notary_id:{type:"iSelect",label:"Notaría",name:"notary_id",required:!1,message:"Seleccionar notaría",disabled:!1}},Pe={ruc:{type:"iText",label:"Número de RUC",name:"ruc",required:!0,message:"Escribir número de RUC",disabled:!1,max:9,min:9}},Le={detailprocedure_id:{type:"iSelect",label:"Detalle del trámite",name:"detailprocedure_id",required:!0,message:"Escribir número de RUC",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},economicsector_id:{type:"iSelect",label:"Sector económico",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelectWrite",label:"Actividad comercial",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1}},Me={component_id:{type:"iSelect",label:"Componente",name:"component_id",required:!0,message:"Seleccionar un componente",disabled:!1},theme_id:{type:"iSelectWrite",label:"Tema del componente",name:"theme_id",required:!0,message:"Seleccionar un tema del componente",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},observations:{type:"iTextarea",label:"Observaciones",name:"observations",required:!1,message:"Seleccionar tipo de documento",disabled:!1}},Ve={class:"wrapper-booking"},We={class:"grid-booking"},Ge={__name:"ReservaNombre",props:["info"],emits:["closeDraw"],setup($,{emit:k}){const r=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),x=pe(),R=JSON.parse(localStorage.getItem("profile")),H=$,L=k,z=h(!1),s=h(null),O=h(!0),u=h(!1),v=ie();v.$patch({cities:v.cities}),v.$patch({modalities:v.modalities}),v.$patch({economicSectors:v.economicSectors}),v.$patch({comercialActivities:v.comercialActivities}),v.$patch({regimes:v.regimes}),v.fetchEconomicSectors(),v.fetchComercialActivities(),v.fetchRegimes(),v.fetchCities(),v.fetchModalities();const e=ae({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:R.user_id}),V=()=>{var o;(o=v.regimes)!=null&&o.length&&(O.value=!1)},W=async()=>{try{z.value=!0;const o={name:s.value};(await Y({url:"create/comercial-activities",method:"POST",data:o})).status==200&&(s.value=null,v.fetchComercialActivities())}catch(o){console.log(o)}finally{z.value=!1}},y=o=>{e.province_id=null,e.district_id=null,v.fetchProvinces(o)},i=o=>{e.district_id=null,v.fetchDistricts(o)},g=(o,C)=>{const I=o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return C.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},q=async()=>{u.value=!0,e.people_id=H.info.id;try{const o=await Y({url:"formalization/ruc20-step1",method:"POST",data:e});if(o.status===200){if(x.query.formalizaciondigital){let C={id:+x.query.formalizaciondigital,documentnumber:x.query.number};await Y({url:"formalization/digital/update-attended",method:"PUT",data:C})}B.success(o.message),e.codesunarp=null,e.economicsector_id=null,e.comercialactivity_id=null,e.regime_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.modality_id=null,L("closeDraw",!0)}}catch(o){console.log("Error: "+o)}finally{u.value=!1}},F=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(o,C)=>{const I=c("a-select"),G=c("a-form-item"),f=c("a-divider"),J=c("a-input"),P=c("a-button"),K=c("a-space"),ee=c("a-form"),_=c("a-spin");return a(),b("div",Ve,[t(_,{spinning:O.value},{default:n(()=>[t(ee,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:q,onFinishFailed:F},{default:n(()=>[d("div",We,[(a(!0),b(N,null,Z(S(Te),(p,T)=>(a(),b(N,{key:T},[p.type==="iSelect"?(a(),m(G,{key:0,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:n(()=>[p.name=="regime_id"?(a(),m(I,{key:0,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,options:S(v).regimes},null,8,["value","onUpdate:value","options"])):l("",!0),p.name=="economicsector_id"?(a(),m(I,{key:1,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,options:S(v).economicSectors},null,8,["value","onUpdate:value","options"])):l("",!0),p.name=="modality_id"?(a(),m(I,{key:2,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,options:S(v).modalities},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),p.type==="iSelectWrite"?(a(),m(G,{key:1,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:n(()=>[p.name=="comercialactivity_id"?(a(),m(I,{key:0,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,"show-search":"",options:S(v).comercialActivities,"filter-option":g},{dropdownRender:n(({menuNode:E})=>[t(S(r),{vnodes:E},null,8,["vnodes"]),t(f,{style:{margin:"4px 0"}}),t(K,{style:{padding:"4px 8px"}},{default:n(()=>[t(J,{ref_for:!0,ref:"inputRef",value:s.value,"onUpdate:value":C[0]||(C[0]=Q=>s.value=Q),placeholder:"Nueva actividad"},null,8,["value"]),t(P,{type:"text",onClick:W,loading:z.value},{icon:n(()=>[t(S(de))]),default:n(()=>[A(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):l("",!0),p.name=="city_id"?(a(),m(I,{key:1,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,"show-search":"",options:S(v).cities,"filter-option":g,onChange:y},null,8,["value","onUpdate:value","options"])):l("",!0),p.name=="province_id"?(a(),m(I,{key:2,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,"show-search":"",options:S(v).provinces,"filter-option":g,onChange:i},null,8,["value","onUpdate:value","options"])):l("",!0),p.name=="district_id"?(a(),m(I,{key:3,value:e[p.name],"onUpdate:value":E=>e[p.name]=E,"show-search":"",options:S(v).districts,"filter-option":g},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),p.type==="iText"?(a(),m(G,{key:2,name:p.name,label:p.label,rules:[{required:p.required,message:p.message,type:p.email,max:p.max}]},{default:n(()=>[t(J,{value:e[p.name],"onUpdate:value":E=>e[p.name]=E,disabled:p.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),d("div",null,w(V()),1),t(G,null,{default:n(()=>[t(P,{class:"btn-produce",type:"primary","html-type":"submit",loading:u.value},{default:n(()=>[A("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},je=X(Ge,[["__scopeId","data-v-2535c4cf"]]);const Be={class:"wrapper-booking"},He={class:"grid-booking"},Ye={__name:"ActoConstitutivo",props:["info","itemSelectedF20"],emits:["closeDraw"],setup($,{emit:k}){const r=JSON.parse(localStorage.getItem("profile")),x=ie(),R=$,H=k;x.$patch({notaries:x.notaries}),x.fetchNotaries();const L=h(!0),z=h(!1),s=ae({task:2,name:null,numbernotary:null,notary_id:null,user_id:r.user_id,userupdated_id:r.id}),O=()=>{var e;(e=x.notaries)!=null&&e.length&&(L.value=!1)},u=async()=>{z.value=!0,s.people_id=R.info.id;try{const e=await Y({url:`formalization/ruc20-step2/${R.itemSelectedF20.codesunarp}`,method:"POST",data:s});e.status===200&&(B.success(e.message),s.name=null,s.numbernotary=null,s.notary_id=null,H("closeDraw",!0))}catch(e){console.log("Error: "+e)}finally{z.value=!1}},v=()=>{B.error("Debes de completar todos los espacios requeridos")};return(e,V)=>{const W=c("a-select"),y=c("a-form-item"),i=c("a-input"),g=c("a-button"),q=c("a-form"),F=c("a-spin");return a(),b("div",Be,[t(F,{spinning:L.value},{default:n(()=>[t(q,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:u,onFinishFailed:v},{default:n(()=>[d("div",He,[(a(!0),b(N,null,Z(S(Ee),(o,C)=>(a(),b(N,{key:C},[o.type==="iSelect"?(a(),m(y,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:n(()=>[o.name=="notary_id"?(a(),m(W,{key:0,value:s[o.name],"onUpdate:value":I=>s[o.name]=I,options:S(x).notaries},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),o.type==="iText"?(a(),m(y,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email,max:o.max}]},{default:n(()=>[t(i,{value:s[o.name],"onUpdate:value":I=>s[o.name]=I},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),d("div",null,w(O()),1),t(y,null,{default:n(()=>[t(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:z.value},{default:n(()=>[A("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Je=X(Ye,[["__scopeId","data-v-cbf26e50"]]);const Ke={class:"wrapper-booking"},Qe={class:"grid-booking"},Ze={class:"emp-20"},Xe={__name:"MypeFinal",props:["itemSelectedF20"],emits:["closeDraw"],setup($,{emit:k}){const r=$,x=k,R=h(!1),H=h(!0),L=ae({task:3,ruc:null}),z=async()=>{R.value=!0,L.mype_id=r.itemSelectedF20.mype.id;try{const O=await Y({url:`formalization/ruc20-step3/${r.itemSelectedF20.codesunarp}`,method:"POST",data:L});O.status===200&&(B.success(O.message),L.ruc=null,x("closeDraw",!0))}catch(O){console.log("Error: "+O)}finally{R.value=!1}},s=()=>{B.error("Debes de completar todos los espacios requeridos")};return(O,u)=>{const v=c("a-input"),e=c("a-form-item"),V=c("a-button"),W=c("a-form");return a(),b("div",Ke,[t(W,{layout:"vertical",model:L,name:"basic",autocomplete:"off",onFinish:z,onFinishFailed:s},{default:n(()=>[d("div",Qe,[(a(!0),b(N,null,Z(S(Pe),(y,i)=>(a(),b(N,{key:i},[y.type==="iText"?(a(),m(e,{key:0,name:y.name,label:y.label,rules:[{required:y.required,message:y.message,type:y.email,max:y.max,min:y.min}]},{default:n(()=>[t(v,{value:L[y.name],"onUpdate:value":g=>L[y.name]=g,disabled:y.disabled,maxlength:9},{prefix:n(()=>[Ue(d("span",Ze,"20",512),[[we,H.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),t(e,null,{default:n(()=>[t(V,{class:"btn-produce",type:"primary","html-type":"submit",loading:R.value},{default:n(()=>[A("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ea=X(Xe,[["__scopeId","data-v-9faa4d7d"]]);const aa={class:"wrapper-booking"},ta={class:"grid-booking"},na={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup($,{emit:k}){const r=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),x=JSON.parse(localStorage.getItem("profile")),R=$,H=k,L=h(!1),z=h(null),s=h(null),O=h(!1),u=ie(),v=h(!1);u.$patch({cities:u.cities}),u.$patch({provinces:u.provinces}),u.$patch({districts:u.districts}),u.$patch({modalities:u.modalities}),u.$patch({detailProcedures:u.detailProcedures}),u.$patch({economicSectors:u.economicSectors}),u.$patch({comercialActivities:u.comercialActivities}),u.fetchDetailProcedures(),u.fetchModalities(),u.fetchEconomicSectors(),u.fetchComercialActivities(),u.fetchCities();const e=ae({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:x.user_id}),V=async()=>{try{v.value=!0;const o={name:z.value};(await Y({url:"create/comercial-activities",method:"POST",data:o})).status==200&&(z.value=null,u.fetchComercialActivities())}catch(o){console.log(o)}finally{v.value=!1}},W=o=>{e.province_id=null,e.district_id=null,u.fetchProvinces(o)},y=o=>{e.district_id=null,u.fetchDistricts(o)},i=(o,C)=>{const I=o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return C.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},g=async()=>{try{O.value=!0;const o={name:s.value};(await Y({url:"create/economic-sector",method:"POST",data:o})).status==200&&(s.value=null,u.fetchEconomicSectors())}catch(o){console.log(o)}finally{O.value=!1}},q=async()=>{L.value=!0,e.people_id=R.info.id;try{const o=await Y({url:"formalization/create-ruc-10",method:"POST",data:e});o.status===200&&(B.success(o.message),e.detailprocedure_id=null,e.modality_id=null,e.economicsector_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,H("closeDraw",!0))}catch(o){console.log("Error: "+o)}finally{L.value=!1}},F=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(o,C)=>{const I=c("a-select"),G=c("a-divider"),f=c("a-input"),J=c("a-button"),P=c("a-space"),K=c("a-form-item"),ee=c("a-form");return a(),b("div",aa,[t(ee,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:q,onFinishFailed:F},{default:n(()=>[d("div",ta,[(a(!0),b(N,null,Z(S(Le),(_,p)=>(a(),b(N,{key:p},[_.type==="iSelect"?(a(),m(K,{key:0,class:"item-max",name:_.name,label:_.label,rules:[{required:_.required,message:_.message}]},{default:n(()=>[_.name=="detailprocedure_id"?(a(),m(I,{key:0,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,options:S(u).detailProcedures},null,8,["value","onUpdate:value","options"])):l("",!0),_.name=="modality_id"?(a(),m(I,{key:1,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,options:S(u).modalities},null,8,["value","onUpdate:value","options"])):l("",!0),_.name=="economicsector_id"?(a(),m(I,{key:2,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,"show-search":"",options:S(u).economicSectors,"filter-option":i},{dropdownRender:n(({menuNode:T})=>[t(S(r),{vnodes:T},null,8,["vnodes"]),t(G,{style:{margin:"4px 0"}}),t(P,{style:{padding:"4px 8px"}},{default:n(()=>[t(f,{ref_for:!0,ref:"inputRef",value:s.value,"onUpdate:value":C[0]||(C[0]=E=>s.value=E),placeholder:"Nuevo registro"},null,8,["value"]),t(J,{type:"text",onClick:g,loading:O.value},{icon:n(()=>[t(S(de))]),default:n(()=>[A(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),_.type==="iText"?(a(),m(K,{key:1,name:_.name,label:_.label,rules:[{required:_.required,message:_.message,type:_.email,max:_.max}]},{default:n(()=>[t(f,{value:e[_.name],"onUpdate:value":T=>e[_.name]=T,disabled:_.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):l("",!0),_.type==="iSelectWrite"?(a(),m(K,{key:2,class:"item-max",name:_.name,label:_.label,rules:[{required:_.required,message:_.message}]},{default:n(()=>[_.name=="comercialactivity_id"?(a(),m(I,{key:0,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,"show-search":"",options:S(u).comercialActivities,"filter-option":i},{dropdownRender:n(({menuNode:T})=>[t(S(r),{vnodes:T},null,8,["vnodes"]),t(G,{style:{margin:"4px 0"}}),t(P,{style:{padding:"4px 8px"}},{default:n(()=>[t(f,{ref_for:!0,ref:"inputRef",value:z.value,"onUpdate:value":C[1]||(C[1]=E=>z.value=E),placeholder:"Nueva actividad"},null,8,["value"]),t(J,{type:"text",onClick:V,loading:v.value},{icon:n(()=>[t(S(de))]),default:n(()=>[A(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):l("",!0),_.name=="city_id"?(a(),m(I,{key:1,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,"show-search":"",options:S(u).cities,"filter-option":i,onChange:W},null,8,["value","onUpdate:value","options"])):l("",!0),_.name=="province_id"?(a(),m(I,{key:2,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,"show-search":"",options:S(u).provinces,"filter-option":i,onChange:y},null,8,["value","onUpdate:value","options"])):l("",!0),_.name=="district_id"?(a(),m(I,{key:3,value:e[_.name],"onUpdate:value":T=>e[_.name]=T,"show-search":"",options:S(u).districts,"filter-option":i},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),t(K,null,{default:n(()=>[t(J,{type:"primary",class:"btn-produce","html-type":"submit",loading:L.value},{default:n(()=>[A("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},oa=X(na,[["__scopeId","data-v-67c2634c"]]);const la={class:"wrapper-booking"},ia={class:"grid-booking"},sa={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup($,{emit:k}){const r=ie(),x=JSON.parse(localStorage.getItem("profile")),R=h(!1),H=$,L=k;r.$patch({components:r.components}),r.$patch({componentThemes:r.componentThemes}),r.$patch({modalities:r.modalities}),r.$patch({cities:r.cities}),r.fetchComponents(),r.fetchComponentThemes(),r.fetchModalities(),r.fetchCities(),r.fetchGenders();const z=h(!0),s=ae({observations:null,user_id:x.user_id,people_id:H.info.id,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),O=()=>{r.cities&&(z.value=!1)},u=i=>{s.theme_id=null,r.fetchComponentThemes(i)},v=i=>{s.province_id=null,s.district_id=null,r.fetchProvinces(i)},e=i=>{s.district_id=null,r.fetchDistricts(i)},V=(i,g)=>{const q=i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return g.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(q)},W=async()=>{R.value=!0;try{const i=await Y({url:"advisory/create",method:"POST",data:s});i.status===200&&(B.success(i.message),s.component_id=null,s.theme_id=null,s.modality_id=null,s.city_id=null,s.province_id=null,s.district_id=null,s.observations=null,L("closeDraw",!0))}catch(i){console.log("Error: "+i)}finally{R.value=!1}},y=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(i,g)=>{const q=c("a-select"),F=c("a-form-item"),o=c("a-textarea"),C=c("a-button"),I=c("a-form"),G=c("a-spin");return a(),b("div",la,[t(G,{spinning:z.value},{default:n(()=>[t(I,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:W,onFinishFailed:y},{default:n(()=>[d("div",ia,[(a(!0),b(N,null,Z(S(Me),(f,J)=>(a(),b(N,{key:J},[f.type==="iSelect"?(a(),m(F,{key:0,class:"item-max",name:f.name,label:f.label,rules:[{required:f.required,message:f.message}]},{default:n(()=>[f.name=="component_id"?(a(),m(q,{key:0,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,options:S(r).components,onChange:u},null,8,["value","onUpdate:value","options"])):l("",!0),f.name=="modality_id"?(a(),m(q,{key:1,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,options:S(r).modalities},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),f.type==="iTextarea"?(a(),m(F,{key:1,name:f.name,label:f.label,rules:[{required:f.required,message:f.message}]},{default:n(()=>[t(o,{value:s[f.name],"onUpdate:value":P=>s[f.name]=P,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):l("",!0),f.type==="iSelectWrite"?(a(),m(F,{key:2,class:"item-max",name:f.name,label:f.label,rules:[{required:f.required,message:f.message}]},{default:n(()=>[f.name=="theme_id"?(a(),m(q,{key:0,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,"show-search":"",options:S(r).componentThemes,"filter-option":V},null,8,["value","onUpdate:value","options"])):l("",!0),f.name=="city_id"?(a(),m(q,{key:1,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,"show-search":"",options:S(r).cities,"filter-option":V,onChange:v},null,8,["value","onUpdate:value","options"])):l("",!0),f.name=="province_id"?(a(),m(q,{key:2,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,"show-search":"",options:S(r).provinces,"filter-option":V,onChange:e},null,8,["value","onUpdate:value","options"])):l("",!0),f.name=="district_id"?(a(),m(q,{key:3,value:s[f.name],"onUpdate:value":P=>s[f.name]=P,"show-search":"",options:S(r).districts,"filter-option":V},null,8,["value","onUpdate:value","options"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),d("div",null,w(O()),1),t(F,null,{default:n(()=>[t(C,{type:"primary",class:"btn-produce","html-type":"submit",loading:R.value},{default:n(()=>[A("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},ra=X(sa,[["__scopeId","data-v-89fa55d3"]]);const da={key:0},ca={key:0},ua={key:4,class:"steps"},ma={style:{"text-align":"right"}},pa={key:0},_a={__name:"AsesoriasHistorial",props:["info"],setup($){const k=$,r=h("1"),x=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"}],R=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"component"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"}],H=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"}];return(L,z)=>{const s=c("a-empty"),O=c("a-table"),u=c("a-card"),v=c("a-tab-pane"),e=c("a-progress"),V=c("a-space"),W=c("a-tabs");return a(),m(W,{activeKey:r.value,"onUpdate:activeKey":z[0]||(z[0]=y=>r.value=y),type:"card",class:"box-hist"},{default:n(()=>[t(v,{key:"1",tab:"ASESORÍAS"},{default:n(()=>[t(u,null,{default:n(()=>{var y,i,g;return[((y=k.info)==null?void 0:y.idadvisory.length)==0?(a(),m(s,{key:0})):l("",!0),((i=k.info)==null?void 0:i.idadvisory.length)>=1?(a(),m(O,{key:1,columns:H,"data-source":(g=k.info)==null?void 0:g.idadvisory,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:q,column:F,record:o})=>{var C,I,G;return[F.dataIndex==="idx"?(a(),b("span",da,w(q+1),1)):l("",!0),F.dataIndex==="date_start"?(a(),b(N,{key:1},[A(w(o.created_at),1)],64)):l("",!0),F.dataIndex==="component"?(a(),b(N,{key:2},[A(w((C=o.component)==null?void 0:C.name),1)],64)):l("",!0),F.dataIndex==="tema_compoment"?(a(),b(N,{key:3},[A(w((I=o.theme)==null?void 0:I.name),1)],64)):l("",!0),F.dataIndex==="modality"?(a(),b(N,{key:4},[A(w((G=o.modality)==null?void 0:G.name),1)],64)):l("",!0)]}),_:1},8,["data-source"])):l("",!0)]}),_:1})]),_:1}),t(v,{key:"2",tab:"RUC 20"},{default:n(()=>[t(u,null,{default:n(()=>[k.info.idformalization20.length==0?(a(),m(s,{key:0})):l("",!0),k.info.idformalization20.length>=1?(a(),m(O,{key:1,columns:x,"data-source":k.info.idformalization20,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:y,column:i,record:g})=>{var q,F,o,C;return[i.dataIndex==="idx"?(a(),b("span",ca,w(y+1),1)):l("",!0),i.dataIndex==="date_start"?(a(),b(N,{key:1},[A(w(g.created_at),1)],64)):l("",!0),i.dataIndex==="date_last"?(a(),b(N,{key:2},[A(w(g.updated_at),1)],64)):l("",!0),i.dataIndex==="sector"?(a(),b(N,{key:3},[A(w((q=g.economicsector)==null?void 0:q.name),1)],64)):l("",!0),i.dataIndex==="progress"?(a(),b("div",ua,[d("span",ma,w(g.task==1?"Reserva de nombre":g.task==2?"Proceso de notaría":"Formalizado"),1),t(V,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[t(e,{percent:g.task*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):l("",!0),i.dataIndex==="asesor_update"?(a(),b(N,{key:5},[A(w((F=g.user.profile)==null?void 0:F.name)+" "+w((o=g.userupdater)==null?void 0:o.profile.lastname)+" "+w((C=g.user)==null?void 0:C.profile.middlename),1)],64)):l("",!0)]}),_:1},8,["data-source"])):l("",!0)]),_:1})]),_:1}),t(v,{key:"3",tab:"RUC 10"},{default:n(()=>[t(u,null,{default:n(()=>[k.info.idformalization10.length==0?(a(),m(s,{key:0})):l("",!0),k.info.idformalization10.length>=1?(a(),m(O,{key:1,columns:R,"data-source":k.info.idformalization10,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:y,column:i,record:g})=>{var q,F,o;return[i.dataIndex==="idx"?(a(),b("span",pa,w(y+1),1)):l("",!0),i.dataIndex==="date_start"?(a(),b(N,{key:1},[A(w(g.created_at),1)],64)):l("",!0),i.dataIndex==="component"?(a(),b(N,{key:2},[A(w((q=g.detailprocedure)==null?void 0:q.name),1)],64)):l("",!0),i.dataIndex==="sector"?(a(),b(N,{key:3},[A(w((F=g.economicsector)==null?void 0:F.name),1)],64)):l("",!0),i.dataIndex==="modality"?(a(),b(N,{key:4},[A(w((o=g.modality)==null?void 0:o.name),1)],64)):l("",!0)]}),_:1},8,["data-source"])):l("",!0)]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},va=X(_a,[["__scopeId","data-v-beaf5b43"]]);const M=$=>(qe("data-v-64988591"),$=$(),Ae(),$),fa={class:"asesorias"},ya=M(()=>d("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),ga=M(()=>d("br",null,null,-1)),ba={class:"wrapper-s"},ha=M(()=>d("label",{class:"label"},"Seleccione el tipo de documento",-1)),Sa=M(()=>d("label",{class:"label"},"Digite el número de documento",-1)),ka={class:"column-2"},xa={class:"info-update"},Ua=M(()=>d("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),wa={class:"info-personal"},Ca=M(()=>d("span",null,"Apellidos y nombres: ",-1)),Ia=M(()=>d("span",null,"Número de celular:",-1)),Da=M(()=>d("span",null,"Correo electrónico:",-1)),qa=M(()=>d("span",null,"Asesorías:",-1)),Aa=M(()=>d("span",null,"Formalizaciones RUC 20:",-1)),Ra={class:"alert-incomplete"},Fa=M(()=>d("span",null,"Formalizaciones RUC 10:",-1)),$a=M(()=>d("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),za={class:"card-as-btn"},Na=M(()=>d("h4",null,"HISTORIAL",-1)),Oa={class:"steps-content"},Ta=["onClick"],Ea={class:"pendient"},Pa={key:0,class:"info-tag"},La=M(()=>d("b",null,"Paso",-1)),Ma={key:1,class:"info-tag"},Va=M(()=>d("b",null,"Siguiente paso",-1)),Wa={key:2,class:"info-tag"},Ga=M(()=>d("b",null,"Siguiente paso",-1)),ja={class:"info"},Ba=M(()=>d("b",null,"Código SID SUNARP",-1)),Ha={class:"code-number"},Ya=M(()=>d("b",null,"Última consulta",-1)),Ja=M(()=>d("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),Ka=[Ja],Qa={__name:"AsesoriasFormalizaciones",setup($){const k=Ce(),r=pe(),x=h(0),R=h(null),H=h([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),L=h(null),z=h(!1),s=h(null),O=h(!1),u=h(!1),v=h(!1),e=h(!1),V=h(!1),W=h(!1),y=h(""),i=h([]),g=h(!1),q=h(0),F=h(!1),o=h([]),C=h(null),I=()=>{ue(y.value),z.value=!1},G=j=>Re(j).format("DD/MM/YYYY HH:mm A"),f=()=>{P()},J=()=>{y.value=y.value.replace(/\D/g,"")},P=()=>{y.value="",i.value=[],o.value=[],k.push({name:"asesorias-formalizaciones"})},K=()=>{if(s.value=null,s.value=i.value,!R.value)return B.warning("Seleccionar un tipo de servicio");R.value=="asesoria"&&(W.value=!0),R.value=="ruc10"&&(V.value=!0),R.value=="ruc20"&&T()},ee=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],_=()=>{L.value=i.value,z.value=!0},p=()=>{q.value=0,e.value=!0,u.value=!1},T=async()=>{try{F.value=!0;const j=await Y({url:`formalization/list-ruc-20/${i.value.id}`,method:"GET"});if(j.length<1)return p();v.value=j,u.value=!0}catch(j){console.log(j)}finally{F.value=!1}},E=async j=>{O.value=!0,q.value=j.task,C.value=j,setTimeout(()=>{O.value=!1,e.value=!0,u.value=!1},400)},Q=async()=>{g.value=!0;const j=await Y({url:`person/found/${x.value}/${y.value}`,method:"GET"});if(j.status==200)return i.value=j.data,g.value=!1},ue=async j=>{if(g.value=!0,!j)return B.warning("Ingresa un número de documento"),g.value=!1;if(x.value==0)return B.warning("Seleccionar el tipo de documento"),g.value=!1;if(x.value==1&&y.value.length<8){B.warning("El número de DNI está incompleto"),g.value=!1;return}const D=await Y({url:`person/found/${x.value}/${y.value}`,method:"GET"});if(D.status==200)return i.value=D.data,g.value=!1;if(D.status===404){const te={type:x.value,access:"asesorias",number:y.value};k.push({name:"registrar-persona",query:te})}};return Ie(()=>{r.query.type&&(console.log("ooaoooaoaa",r.query.type),x.value=r.query.type,y.value=r.query.number)}),(j,D)=>{const te=c("a-radio"),ve=c("a-radio-group"),fe=c("a-input-search"),ne=c("a-card"),ye=c("a-select"),ge=c("a-button"),be=c("a-step"),he=c("a-steps"),oe=c("a-drawer"),se=c("a-tag"),Se=c("a-spin"),ke=c("a-modal");return a(),b(N,null,[d("div",fa,[ya,ga,t(ne,{class:"card-as"},{default:n(()=>[S(r).query.dni?(a(),m(S(Oe),{key:0,class:"ico-reload",onClick:f})):l("",!0),d("div",ba,[d("div",null,[ha,t(ve,{value:x.value,"onUpdate:value":D[0]||(D[0]=U=>x.value=U),onChange:P,class:"radio-produce"},{default:n(()=>[t(te,{value:"1"},{default:n(()=>[A("DNI")]),_:1}),t(te,{value:"2"},{default:n(()=>[A("CE")]),_:1})]),_:1},8,["value"])]),d("div",null,[Sa,t(fe,{"enter-button":"BUSCAR",value:y.value,"onUpdate:value":D[1]||(D[1]=U=>y.value=U),placeholder:"",loading:g.value,onSearch:ue,onInput:J,class:"search-produce",maxlength:x.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),d("div",ka,[i.value.length!=0?(a(),m(ne,{key:0,class:"card-as"},{default:n(()=>{var U,le,re;return[d("div",xa,[Ua,t(S(De),{class:"ico-edit",onClick:_})]),d("div",wa,[Ca,d("span",null,w(i.value.lastname)+" "+w(i.value.middlename)+", "+w(i.value.name),1),Ia,d("span",null,[d("span",null,w(i.value.phone?i.value.phone:"-"),1)]),Da,d("span",null,w(i.value.email?i.value.email:"-"),1),qa,d("b",null,w((U=i.value)==null?void 0:U.idadvisory.length),1),Aa,d("div",Ra,[d("b",null,w((le=i.value)==null?void 0:le.idformalization20.length),1)]),Fa,d("b",null,w((re=i.value)==null?void 0:re.idformalization10.length),1)])]}),_:1})):l("",!0),i.value.length!=0?(a(),m(ne,{key:1,class:"card-as"},{default:n(()=>[$a,d("div",za,[t(ye,{style:{"min-width":"200px"},value:R.value,"onUpdate:value":D[2]||(D[2]=U=>R.value=U),options:H.value},null,8,["value","options"]),t(ge,{class:"btn-produce",type:"primary",onClick:K},{default:n(()=>[A("REGISTRAR")]),_:1})])]),_:1})):l("",!0)]),i.value.length!=0?(a(),m(ne,{key:0,class:"card-as"},{default:n(()=>[Na,t(va,{info:i.value},null,8,["info"])]),_:1})):l("",!0)]),d("section",null,[t(oe,{width:"510",title:"Formalización con RUC 20",open:e.value,"onUpdate:open":D[6]||(D[6]=U=>e.value=U),placement:"right"},{default:n(()=>[t(he,{current:q.value,size:"small",class:"steps"},{default:n(()=>[(a(),b(N,null,Z(ee,U=>t(be,{key:U.title,title:U.title},null,8,["title"])),64))]),_:1},8,["current"]),d("div",Oa,[q.value==0?(a(),m(je,{key:0,info:s.value,onCloseDraw:D[3]||(D[3]=U=>(e.value=!1,Q()))},null,8,["info"])):l("",!0),q.value==1?(a(),m(Je,{key:1,info:s.value,itemSelectedF20:C.value,onCloseDraw:D[4]||(D[4]=U=>(e.value=!1,Q()))},null,8,["info","itemSelectedF20"])):l("",!0),q.value==2?(a(),m(ea,{key:2,itemSelectedF20:C.value,onCloseDraw:D[5]||(D[5]=U=>(e.value=!1,Q()))},null,8,["itemSelectedF20"])):l("",!0)])]),_:1},8,["open"]),t(oe,{title:"Formalización con RUC 10",open:V.value,"onUpdate:open":D[8]||(D[8]=U=>V.value=U),placement:"right"},{default:n(()=>[t(oa,{info:i.value,onCloseDraw:D[7]||(D[7]=U=>(V.value=!1,Q()))},null,8,["info"])]),_:1},8,["open"]),t(oe,{title:"Nueva asesoría",open:W.value,"onUpdate:open":D[10]||(D[10]=U=>W.value=U),placement:"right"},{default:n(()=>[t(ra,{info:i.value,onCloseDraw:D[9]||(D[9]=U=>(W.value=!1,Q()))},null,8,["info"])]),_:1},8,["open"]),t(ke,{open:u.value,"onUpdate:open":D[11]||(D[11]=U=>u.value=U),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:n(()=>[t(Se,{spinning:O.value},{default:n(()=>[(a(!0),b(N,null,Z(v.value,(U,le)=>(a(),b("div",{key:le,onClick:re=>E(U)},[d("div",Ea,[U.task==0?(a(),b("div",Pa,[La,A(),t(se,{color:"error"},{default:n(()=>[A("Reserva de nombre")]),_:1})])):l("",!0),U.task==1?(a(),b("div",Ma,[Va,A(),t(se,{color:"warning"},{default:n(()=>[A("Acto constitutivo")]),_:1})])):l("",!0),U.task==2?(a(),b("div",Wa,[Ga,A(),t(se,{color:"success"},{default:n(()=>[A("Formalizar")]),_:1})])):l("",!0),d("div",ja,[Ba,d("span",null,[d("b",Ha,w(U.codesunarp),1)]),Ya,d("span",null,w(G(U.updated_at)),1)])])],8,Ta))),128)),d("div",{class:"pendient pendient-btn btn-produce",onClick:p},Ka)]),_:1},8,["spinning"])]),_:1},8,["open"]),t(oe,{open:z.value,"onUpdate:open":D[12]||(D[12]=U=>z.value=U),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:n(()=>[t(Fe,{onCloseDraw:I,updateValues:L.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},ot=X(Qa,[["__scopeId","data-v-64988591"]]);export{ot as default};
