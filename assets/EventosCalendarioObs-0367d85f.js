import{c as r,A as K,q as b,r as d,a as ee,j as te,W as de,a6 as Q,o as f,d as _,Q as ue,v as ce,b as S,e as t,t as v,w as C,h as y,L as me,f as W,F as pe,x as ve,y as x,ah as fe,i as U,z as _e,B as A,D as he,E as ge}from"./index-33156783.js";import"./es-0551194b.js";import{_ as ye}from"./DrawResultados-78bee54b.js";import{_ as be}from"./FormComponent-ca4904c7.js";import{u as Oe}from"./selectes-83c146c9.js";import{H as Ee}from"./HomeOutlined-ec2185a5.js";import{E as Se}from"./EnvironmentOutlined-2c001125.js";import{T as Ce}from"./TeamOutlined-3f87611f.js";import{U as De}from"./UserOutlined-e83b29b1.js";import{C as Me}from"./ChromeOutlined-5fd18540.js";/* empty css             */import"./quill.snow-b83b6008.js";var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const we=Ae;function Z(i){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?Object(arguments[l]):{},p=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),p.forEach(function(m){ke(i,m,a[m])})}return i}function ke(i,l,a){return l in i?Object.defineProperty(i,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[l]=a,i}var B=function(l,a){var p=Z({},l,a.attrs);return r(K,Z({},p,{icon:we}),null)};B.displayName="FilterOutlined";B.inheritAttrs=!1;const Ne=B;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};const Le=Te;function X(i){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?Object(arguments[l]):{},p=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),p.forEach(function(m){Re(i,m,a[m])})}return i}function Re(i,l,a){return l in i?Object.defineProperty(i,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[l]=a,i}var j=function(l,a){var p=X({},l,a.attrs);return r(K,X({},p,{icon:Le}),null)};j.displayName="FormOutlined";j.inheritAttrs=!1;const Ie=j;const He={class:"f-20"},Ve={__name:"EventosObservaciones",props:["info"],emits:["closeDraw"],setup(i,{emit:l}){b.locale("es");const a=d({obs_id:{type:"iSelect",label:"TIPO DE OBSERVACIÓN",name:"obs_id",required:!0,message:"Seleccionar una opción",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const p=l,m=i,w=d("ACTUALIZAR"),u=ee({}),D=d(!1);Oe();const s=d(null),k=d({obs_id:[]}),T=c=>{console.log("handleInputEvent",c)},H=async c=>{c=="dateReception"&&(u.dateTramite&&(u.dateTramite=null),a.value.dateTramite.disabled=!1)},V=async c=>{c=="obs_id"&&(delete a.value.rescheduled,delete a.value.date,delete a.value.hours,delete a.value.canceled,u.obs_id===1?a.value.canceled={type:"iTextArea",label:"ESCRIBIR MOTIVO DE LA CANCELACIÓN",name:"canceled",required:!0,message:"Escribir el motivo",rows:5}:u.obs_id===2&&(a.value.date={type:"iDatePicker",label:"SELECCIONAR FECHA DEL EVENTO",name:"date",message:"Seleccionar una opción"},a.value.hours={type:"iHour",label:"SELECCIONAR HORA DEL EVENTO",name:"hours",message:"Seleccionar la hora",required:!1},a.value.rescheduled={type:"iTextArea",label:"ESCRIBIR MOTIVO DE LA CANCELACIÓN",name:"rescheduled",required:!0,message:"Escribir el motivo",rows:5}))},M=async c=>{c=="obs_id"&&L()},F=c=>{},L=()=>{k.value.obs_id=[{value:1,label:"CANCELADO"},{value:2,label:"REPROGRAMADO"}]},R=async()=>{let c=null;u.obs_id===1?c={canceled:u.canceled}:u.obs_id===2&&(c={dateStart:b(u.date.start).format("YYYY-MM-DD"),dateEnd:b(u.date.end).format("YYYY-MM-DD"),...u.hours?{start:b(u.hours[0]).format("HH:mm"),end:b(u.hours[1]).format("HH:mm")}:{start:null,end:null},rescheduled:u.rescheduled});try{(await ue({url:`event/update-obs/${m.info}`,method:"PUT",data:c})).status===200&&(P(),p("closeDraw",!0))}catch(I){console.error("Error:",I);const N=document.getElementsByClassName("ant-drawer-body")[0];N&&(N.scrollTop=0)}finally{D.value=!1}},P=()=>{u.ruc=null},$=async c=>{};return te(()=>{m.info&&$(m.info)}),de(()=>m.info,c=>{c&&$()}),Q("formState",u),Q("loadingState",D),(c,I)=>(f(),_("div",He,[r(be,{fields:a.value,options:k.value,btnSaveName:w.value,onHandleInputEvent:T,resetSelect:s.value,onHandleChangeSelect:V,onHandleFocusSelect:M,onHandleBlurSelect:F,onHandleChangeClock:H,onOnSubmit:R},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const Fe={class:"container-events"},$e={class:"schedule"},Pe={class:"schedule-header"},Ye={class:"schedule-date"},xe={class:"schedule-filter"},Ue={key:0,class:"event-time"},Be={key:1,class:"event-time"},je={class:"event-hour-2"},ze={class:"ugger-options"},qe={class:"title"},Ge={class:"event-description"},Je=["onClick"],Qe={class:"modal-calendar-detail"},We={style:{"line-height":"1.3","margin-bottom":".5rem"}},Ze=["innerHTML"],Xe={key:0},Ke={style:{"margin-left":".5rem"}},et={key:1},tt={style:{"margin-left":".5rem"}},at={key:2},nt={style:{"margin-left":".5rem"}},lt={style:{"margin-left":".5rem"}},st={key:0},ot={style:{"margin-left":".5rem"}},rt={key:3},it={style:{"margin-left":".5rem"}},dt={key:4},ut=["href"],ct={key:5},mt=["innerHTML"],Dt={__name:"EventosCalendarioObs",setup(i){b.locale("es");const l=ee({value1:["ugo","ugse"]}),a=["ugo","ugse"],p=ce(me,{style:{fontSize:"24px"},spin:!0}),m=d(null),w=d(!1),u=d(null),D=d(!1);d(!1);const s=d(null),k=d(!1),T=d(null),H=d(null),V=d(new Date),M=d([]),F=d(null),L=d([]),R=d(!1),P=n=>{w.value=!0,m.value=n.id},$=n=>{const e={id:n.id,resultado:n.resultado};u.value=e,D.value=!0},c=n=>{s.value=n,k.value=!0},I=n=>{if(Array.isArray(n)&&n.length>0&&n[0].id){const e=n[0].id;T.value=e,F.value!==e&&(F.value=e,q(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},N=n=>({1:"#808080",2:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",6:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[n],z=n=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[n],ae=n=>{if(!Array.isArray(n)||n.length===0)return"";const e=b(n[0]).locale("es").format("DD [de] MMMM"),h=n.length>1?b(n[n.length-1]).locale("es").format("DD [de] MMMM"):null;return h?`Desde: ${e} Hasta: ${h}`:`${e}`},ne=async()=>{T.value&&(await Y("nodata"),await q(T.value))},Y=async(n={date:b().format("YYYY-MM-DD")},e)=>{R.value=!0;const h=b(n.date).format("YYYY-MM-DD");H.value=b(n.date).format("dddd DD [de] MMMM [de] YYYY"),e!="nodata"&&M.value.length>0&&M.value[0].dates&&(M.value[0].dates=n.date);const O={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let E=[];l.value1.forEach(g=>{O[g]&&E.push(...O[g])}),E=[...new Set(E)];try{const g=await W({url:`pnte/events-day/${h}`,method:"GET",params:E});g.data&&Array.isArray(g.data)?L.value=g.data:console.warn("⚠️ Respuesta inesperada de la API:",g)}catch(g){console.error("❌ Error al obtener eventos:",g)}finally{R.value=!1}},q=async n=>{try{const e={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let h=[];l.value1.forEach(E=>{e[E]&&h.push(...e[E])}),h=[...new Set(h)];const O=await W({url:`pnte/dots/${n}`,method:"GET",params:h});O.data&&Array.isArray(O.data)?M.value=[{key:"today",highlight:"",dates:[new Date]},...O.data]:console.warn("⚠️ Respuesta de API inesperada:",O)}catch(e){console.error("❌ Error al obtener eventos:",e)}},le=async()=>{await Y()};return te(()=>{le()}),(n,e)=>{const h=S("VCalendar"),O=S("a-checkbox-group"),E=S("a-menu"),g=S("a-dropdown"),se=S("a-empty"),oe=S("a-spin"),re=S("a-modal"),G=S("a-drawer");return f(),_("section",Fe,[e[14]||(e[14]=t("h1",{class:"title-pc"},"CALENDARIO ADMIN PNTE 2025",-1)),t("div",null,[r(h,{ref:"calendar",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=o=>V.value=o),attributes:M.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":I,onDayclick:Y},null,8,["modelValue","attributes"])]),t("div",$e,[t("div",Pe,[e[7]||(e[7]=t("h4",null,"EVENTOS",-1)),t("span",Ye,v(H.value),1),r(g,{trigger:["click"]},{overlay:C(()=>[r(E,null,{default:C(()=>[t("div",xe,[r(O,{value:l.value1,"onUpdate:value":e[1]||(e[1]=o=>l.value1=o),options:a,onChange:ne},null,8,["value"])])]),_:1})]),default:C(()=>[t("span",null,[r(y(Ne))])]),_:1})]),r(oe,{indicator:y(p),spinning:R.value},{default:C(()=>[L.value.length>0?(f(!0),_(pe,{key:0},ve(L.value,(o,ie)=>(f(),_("div",{key:ie,class:"event"},[o.start?(f(),_("div",Be,[t("div",null,v(o.start),1),e[9]||(e[9]=t("br",null,null,-1)),t("div",je,v(o.end),1)])):(f(),_("div",Ue,e[8]||(e[8]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:x({"border-color":N(o.id_pnte)})},[t("small",{class:"schedule-tag",style:x({"background-color":N(o.id_pnte)})},[t("span",null,v(z(o.id_pnte)),1)],4),t("div",ze,[t("span",null,[r(y(fe),{onClick:J=>P(o)},null,8,["onClick"])]),t("span",null,[r(y(Ie),{onClick:J=>$(o)},null,8,["onClick"])])]),t("div",qe,v(o.title),1),t("div",Ge,[U(v(o.descriptionparse)+" ",1),t("span",{onClick:J=>c(o),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,Je)])],4)]))),128)):(f(),_e(se,{key:1,class:"no-events"},{description:C(()=>e[10]||(e[10]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),r(re,{open:k.value,"onUpdate:open":e[2]||(e[2]=o=>k.value=o),title:"",footer:""},{default:C(()=>[t("div",Qe,[t("div",null,[t("h3",We,v(s.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:x({"background-color":N(s.value.id_pnte)})},v(z(s.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:s.value.descripionAll},null,8,Ze),s.value.organiza?(f(),_("div",Xe,[r(y(Ee)),t("span",Ke,v(s.value.organiza),1)])):A("",!0),s.value.gps?(f(),_("div",et,[r(y(Se)),t("span",tt,v(s.value.gps),1)])):A("",!0),s.value.numMypes?(f(),_("div",at,[t("span",null,[r(y(Ce))]),t("span",nt,v(s.value.numMypes),1)])):A("",!0),t("div",null,[t("div",null,[r(y(he)),t("span",lt,v(ae(s.value.dates)),1)]),s.value.start?(f(),_("div",st,[r(y(ge)),t("span",ot,v(s.value.start),1),e[11]||(e[11]=U(" - ")),t("span",null,v(s.value.end),1)])):A("",!0)]),s.value.nameUser?(f(),_("div",rt,[r(y(De)),t("span",it,[U(v(s.value.nameUser)+" ",1),e[12]||(e[12]=t("small",null,"(Representante)",-1))])])):A("",!0),s.value.link?(f(),_("div",dt,[r(y(Me)),t("a",{style:{"margin-left":".5rem"},href:s.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,ut)])):A("",!0),s.value.resultado?(f(),_("div",ct,[e[13]||(e[13]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:s.value.resultado},null,8,mt)])):A("",!0)])]),_:1},8,["open"]),r(G,{open:D.value,"onUpdate:open":e[4]||(e[4]=o=>D.value=o),title:"RESULTADOS",placement:"right",width:"550"},{default:C(()=>[r(ye,{dataRow:u.value,onCloseDraw:e[3]||(e[3]=o=>{D.value=!1})},null,8,["dataRow"])]),_:1},8,["open"]),r(G,{open:w.value,"onUpdate:open":e[6]||(e[6]=o=>w.value=o),title:"OBSERVACIONES",placement:"right",width:"550"},{default:C(()=>[r(Ve,{info:m.value,onCloseDraw:e[5]||(e[5]=o=>{w.value=!1})},null,8,["info"])]),_:1},8,["open"])])}}};export{Dt as default};
