import{r as u,a as de,H as re,v as ce,k as ue,b as r,o as l,d as p,e as _,c as n,w as t,i as c,F as m,z as U,t as i,s as d,q as I,h as V,Q as pe,I as me,M as _e,p as fe,j as ge,X as he,m as ve}from"./index-1a628bf0.js";import{S as Ie}from"./DrawerSolicitante.componente-9a8d8c74.js";import{u as xe}from"./selectes-dca61d51.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";import{M as ye}from"./MoreOutlined-5292b69b.js";import"./es-6b790cb3.js";const G=x=>(fe("data-v-b2c52cae"),x=x(),ge(),x),Se=G(()=>_("h3",{class:"title-produce"},"SOLICITANTES",-1)),ke={key:9,class:"uppercase"},Ce=["onClick"],be=G(()=>_("a",null,"Eliminar",-1)),Ee={class:"paginator-asesories"},F=50,Oe={__name:"SolicitantesLista",setup(x){JSON.parse(localStorage.getItem("profile")),xe();const b=u(window.innerHeight-100),H=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",width:120},{title:"NOMBRES",dataIndex:"name",width:170},{title:"APELLIDOS",dataIndex:"apellidos",width:170},{title:"REGIÓN",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:200},{title:"GÉNERO",dataIndex:"gender",align:"center",width:90},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"HIJOS",dataIndex:"hasSoon",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:200},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],f=de({names:""}),S=u(0),g=u({page:0}),$=u(1200),E=u([]),k=u(!1),w=u(!1),O=u(null);u(null);const q=()=>{f.names||console.log("Res")},J=s=>({DNI:"blue",CE:"yellow",PAS:"red",PTP:"purple"})[s],Q=()=>{h(f.names)},X=s=>{g.value.page=s,h()},C=()=>{b.value=window.innerHeight-280},j=()=>{h(),w.value=!1},Y=async s=>{try{const e=await U({url:`person/delete/${s.id}`,method:"DELETE"});e.status==500?he.warning({title:"Aviso",content:e.message}):(h(),ve.success(e.message))}catch(e){console.error("Error de red:",e)}},K=s=>{O.value=s,w.value=!0},W=re(()=>s=>((g.value.page==0?1:g.value.page)-1)*F+s+1),h=async s=>{try{k.value=!0;let e;s?e={...f.names&&{search:s},page:1}:e={...g.value.page!=0&&{page:g.value.page}};const y=await U({url:"person/list",method:"GET",params:e});E.value=y.data,S.value=y.total}catch(e){console.error("Error de red:",e)}finally{k.value=!1}};return ce(()=>{window.removeEventListener("resize",C)}),ue(()=>{window.addEventListener("resize",C),C(),h()}),(s,e)=>{const y=r("a-input"),D=r("a-form-item"),N=r("a-button"),Z=r("a-form"),v=r("a-tag"),A=r("a-menu-item"),ee=r("a-popconfirm"),te=r("a-menu"),ae=r("a-dropdown"),ne=r("a-table"),oe=r("a-pagination"),le=r("a-drawer");return l(),p(m,null,[_("div",null,[Se,n(Z,{layout:"inline",model:f,onFinish:Q,class:"form-filter"},{default:t(()=>[n(D,null,{default:t(()=>[n(y,{value:f.names,"onUpdate:value":e[0]||(e[0]=o=>f.names=o),placeholder:"BUSCAR por Nombres o Apellidos",style:{width:"240px"},onInput:q},null,8,["value"])]),_:1}),n(D,null,{default:t(()=>[n(N,{type:"primary","html-type":"submit",disabled:f.names===""},{default:t(()=>[c(" BUSCAR ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),n(ne,{bordered:"",scroll:{x:$.value,y:b.value},class:"asesores-table",columns:H,"data-source":E.value,pagination:!1,loading:k.value,size:"small"},{bodyCell:t(({column:o,record:a,index:se})=>{var R,L,T,z,M,P,B;return[o.dataIndex=="idx"?(l(),p(m,{key:0},[c(i(W.value(se)),1)],64)):d("",!0),o.dataIndex=="tdocument"?(l(),I(v,{key:1,color:J(a.typedocument.avr)},{default:t(()=>[c(i(a.typedocument.avr),1)]),_:2},1032,["color"])):d("",!0),o.dataIndex=="apellidos"?(l(),p(m,{key:2},[c(i(a.lastname)+" "+i(a.middlename),1)],64)):d("",!0),o.dataIndex=="city"?(l(),p(m,{key:3},[c(i((R=a.city)==null?void 0:R.name),1)],64)):d("",!0),o.dataIndex=="province"?(l(),p(m,{key:4},[c(i((L=a.province)==null?void 0:L.name),1)],64)):d("",!0),o.dataIndex=="district"?(l(),p(m,{key:5},[c(i((T=a.district)==null?void 0:T.name),1)],64)):d("",!0),o.dataIndex=="gender"?(l(),p(m,{key:6},[c(i((z=a.gender)==null?void 0:z.name),1)],64)):d("",!0),o.dataIndex=="sickx"?(l(),I(v,{key:7,color:a.sick=="no"?"blue":"pink"},{default:t(()=>[c(i(a.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),o.dataIndex=="hasSoon"?(l(),p(m,{key:8},[a.hasSoon=="no"?(l(),I(v,{key:0,color:"pink"},{default:t(()=>[c("NO")]),_:1})):d("",!0),a.hasSoon=="si"?(l(),I(v,{key:1,color:"green"},{default:t(()=>[c("SI")]),_:1})):d("",!0)],64)):d("",!0),o.dataIndex=="registerby"?(l(),p("span",ke,i((M=a.user[0])==null?void 0:M.profile.name)+" "+i((P=a.user[0])==null?void 0:P.profile.lastname)+" "+i((B=a.user[0])==null?void 0:B.profile.middlename),1)):d("",!0),o.dataIndex=="actions"?(l(),I(ae,{key:10,trigger:["click"]},{overlay:t(()=>[n(te,null,{default:t(()=>[n(A,null,{default:t(()=>[_("a",{onClick:ie=>K(a)},"Editar",8,Ce)]),_:2},1024),n(A,null,{default:t(()=>[n(ee,{title:"¿Seguro de eliminar?",onConfirm:ie=>Y(a)},{icon:t(()=>[n(V(pe),{style:{color:"red"}})]),default:t(()=>[be]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:t(()=>[_("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=me(()=>{},["prevent"]))},[n(N,{shape:"circle",icon:_e(V(ye)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading"])]),_("div",Ee,[_("span",null,[n(v,{color:"blue"},{default:t(()=>[_("b",null,i(S.value),1)]),_:1}),c("Solicitantes")]),n(oe,{size:"small",total:S.value,pageSize:F,onChange:X,showSizeChanger:!1},null,8,["total"])]),n(le,{width:"600",open:w.value,"onUpdate:open":e[2]||(e[2]=o=>w.value=o),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:t(()=>[n(Ie,{onCloseDraw:j,updateValues:O.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},ze=we(Oe,[["__scopeId","data-v-b2c52cae"]]);export{ze as default};
