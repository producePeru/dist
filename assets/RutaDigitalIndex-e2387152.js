import{p as P,r as u,a as re,b as p,o as r,d as M,c,w as d,N as ae,O as de,e as x,F as Z,v as pe,y as g,i as U,z as h,M as Ee,j as K,_ as le,h as T,f as te,m as Y,g as _e,K as Se,G as Ie,a3 as we,k as De,t as ue,a2 as Ce,s as xe}from"./index-ac49fc64.js";import{_ as Re}from"./icoexcel-1b303edf.js";import{u as ve}from"./selectes-c6bf1abf.js";import{u as Oe}from"./useBusinessman-3f3e8519.js";import"./es-7f81e3a4.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";import{M as Ne}from"./MoreOutlined-9b4fac6c.js";const Te={class:"agreement-wrapper"},ke={class:"grid-item"},Ue="DD/MM/YYYY",Ae={__name:"RutaDigitalEmpresario",emits:["stepNumber"],setup(j,{emit:R}){P.locale("es");const o=ve(),v=Oe();o.$patch({typeDocuments:o.typeDocuments}),o.$patch({cities:o.countries}),o.$patch({cities:o.cities}),o.$patch({provinces:o.provinces}),o.$patch({districts:o.districts}),o.$patch({genders:o.genders}),o.fetchTypeDocuments(),o.fetchCountries(),o.fetchCities(),o.fetchGenders();const m=u({typedocument_id:{type:"iSelect",label:"TIPO DE DOCUMENTO",name:"typedocument_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},documentnumber:{type:"iSearch",label:"NÚMERO DOCUMENTO",name:"documentnumber",required:!0,message:"Escribe número de documento",disabled:!0},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribir apellido paterno",disabled:!0},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribir apellido materno",disabled:!0},name:{type:"iText",label:"NOMBRES",name:"name",required:!0,message:"Escribir nombre",disabled:!0},country_id:{type:"iSelect",label:"PAÍS ORIGEN",name:"country_id",required:!0,message:"Seleccionar país de origen",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN RESIDENTE",name:"city_id",required:!0,message:"Seleccionar región",disabled:!0},province_id:{type:"iSelect",label:"PROVINCIA RESIDENTE",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO RESIDENTE",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Escribir dirección",disabled:!0},birthday:{type:"iDate",label:"FECHA DE NACIMIENTO",name:"birthday",required:!0,message:"Seleccionar fecha",disabled:!0},phone:{type:"iText",label:"CELULAR",name:"phone",required:!0,message:"Número de celular",min:9,max:9,disabled:!0},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!1,message:"Ingresar email",email:"email",disabled:!0},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},sick:{type:"iSelect",label:"¿TIENE DISCAPACIDAD?",name:"sick",required:!0,message:"¿Tiene discapacidad?",disabled:!0},hasSoon:{type:"iSelect",label:"¿TIENE HIJOS?",name:"hasSoon",required:!0,message:"¿Tiene hijos?",disabled:!0}}),f=u(null),C=u(null),O=u(!1),I=u(!1);u(!0);const z=[{value:"yes",label:"SI"},{value:"no",label:"NO"}],i=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}],e=re({typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,country_id:null,city_id:null,province_id:null,district_id:null,address:null,birthday:null,phone:null,email:null,gender_id:null,sick:null,hasSoon:null}),A=s=>{s&&(m.value.documentnumber.disabled=!1,D(),e.documentnumber=null,m.value.name.disabled=!0,m.value.lastname.disabled=!0,m.value.middlename.disabled=!0)},F=s=>{const t=e[s]?e[s].trim():"";e[s]=t},q=(s,t)=>{if(!t)return Promise.reject("La fecha es requerida");const _=new Date,a=new Date(t);let k=_.getFullYear()-a.getFullYear();const E=_.getMonth()-a.getMonth();return(E<0||E===0&&_.getDate()<a.getDate())&&k--,k<18||k>99?Promise.reject("La edad debe estar entre 18 y 99 años"):Promise.resolve()},w=async s=>{try{const{data:t}=await te({url:`select/provinces/${s}`,method:"GET"});f.value=t}catch(t){console.error("Error de red:",t)}},B=async s=>{try{const{data:t}=await te({url:`select/districts/${s}`,method:"GET"});C.value=t}catch(t){console.error("Error de red:",t)}},$=(s,t)=>{const _=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)},H=()=>{m.value.city_id.disabled=!1,m.value.province_id.disabled=!1,m.value.district_id.disabled=!1,m.value.address.disabled=!1,m.value.phone.disabled=!1,m.value.email.disabled=!1,m.value.birthday.disabled=!1,m.value.gender_id.disabled=!1,m.value.sick.disabled=!1,m.value.hasSoon.disabled=!1},G=async s=>{try{const t={documentnumber:s},_=await v.get(t);if(_.status===200){const{data:a}=_;return m.value.documentnumber.disabled=!0,e.lastname=a.lastname,e.middlename=a.middlename,e.name=a.name,e.country_id=a.country_id,e.city_id=a.city_id,w(a.city_id),e.province_id=a.province_id,B(a.province_id),e.district_id=a.district_id,e.address=a.address,a.birthday&&(e.birthday=P(a.birthday,"YYYY-MM-DD")),e.phone=a.phone,e.email=a.email,e.gender_id=a.gender_id,e.sick=a.sick,e.hasSoon=a.hasSoon,H()}if(_.status===404)return V(t)}catch{console.log("Error:",v.error)}},V=async s=>{try{if(e.typedocument_id==1){const t=await v.reniec(s);e.lastname=t.name,e.middlename=t.middlename,e.name=t.name}else m.value.lastname.disabled=!1,m.value.middlename.disabled=!1,m.value.name.disabled=!1,H()}catch{le.warning({message:"Aviso",description:v.error})}},Q=()=>{e.documentnumber=e.documentnumber.replace(/\D/g,"")},y=()=>{e.phone=e.phone.replace(/\D/g,"")},l=s=>{e.province_id=null,e.district_id=null,w(s)},S=s=>{e.district_id=null,B(s)},D=()=>{["lastname","middlename","name","city_id","province_id","district_id","address","phone","email","birthday","gender_id","sick","country_id","hasSoon"].forEach(t=>{e[t]=null})},N=async()=>{if(I.value=!0,e.typedocument_id!==1&&e.country_id==155)return I.value=!1,T.error("Por favor cambiar el país, no está permitido para esta opción, Gracias");const s={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,country_id:e.country_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,birthday:P(e.birthday).format("YYYY-MM-DD"),phone:e.phone,email:e.email,gender_id:e.gender_id,sick:e.sick,hasSoon:e.hasSoon};try{const t=await v.create(s);console.log("Response",t)}catch{console.log("Error:",o.error)}},J=()=>{T.error("COMPLETA LOS VALORES REQUERIDOS")};return(s,t)=>{const _=p("a-select"),a=p("a-form-item"),k=p("a-input-search"),E=p("a-input"),ne=p("a-date-picker"),ie=p("a-button"),se=p("a-form"),W=p("a-spin");return r(),M("div",Te,[c(W,{spinning:O.value},{default:d(()=>[c(se,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:J,onKeydown:t[0]||(t[0]=ae(de(()=>{},["prevent"]),["enter"]))},{default:d(()=>[x("div",ke,[(r(!0),M(Z,null,pe(m.value,(n,oe)=>(r(),M(Z,{key:oe},[n.type==="iSelect"?(r(),g(a,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:d(()=>[n.name=="typedocument_id"?(r(),g(_,{key:0,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:U(o).typeDocuments,disabled:n.disabled,onChange:A},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),n.name=="country_id"?(r(),g(_,{key:1,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:U(o).countries,"show-search":"","filter-option":$},null,8,["value","onUpdate:value","options"])):h("",!0),n.name=="city_id"?(r(),g(_,{key:2,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:U(o).cities,"show-search":"","filter-option":$,onChange:l,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),n.name=="province_id"?(r(),g(_,{key:3,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:f.value,"show-search":"","filter-option":$,onChange:S,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),n.name=="district_id"?(r(),g(_,{key:4,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:C.value,"show-search":"","filter-option":$,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),n.name=="gender_id"?(r(),g(_,{key:5,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:U(o).genders,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),n.name=="sick"?(r(),g(_,{key:6,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:z,disabled:n.disabled},null,8,["value","onUpdate:value","disabled"])):h("",!0),n.name=="hasSoon"?(r(),g(_,{key:7,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:i,disabled:n.disabled},null,8,["value","onUpdate:value","disabled"])):h("",!0)]),_:2},1032,["name","label","rules"])):h("",!0),n.type==="iSearch"?(r(),g(a,{key:1,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:d(()=>[c(k,{loading:U(v).loading,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,onKeyup:ae(G,["enter"]),onSearch:G,onInput:Q,maxlength:e.typedocument_id==1?8:20,disabled:n.disabled},null,8,["loading","value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):h("",!0),n.type==="iText"?(r(),g(a,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email,max:n.max,min:n.min}]},{default:d(()=>[n.name=="phone"?(r(),g(E,{key:0,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,disabled:n.disabled,maxlength:n.max,onInput:y},null,8,["value","onUpdate:value","disabled","maxlength"])):(r(),g(E,{key:1,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,disabled:n.disabled,maxlength:n.max,onBlur:b=>F(n.name)},null,8,["value","onUpdate:value","disabled","maxlength","onBlur"]))]),_:2},1032,["name","label","rules"])):h("",!0),n.type==="iDate"?(r(),g(a,{key:3,name:n.name,label:n.label,rules:[{required:n.required,message:n.message},{validator:q,message:"La edad debe estar entre 18 y 99 años"}]},{default:d(()=>[c(ne,{locale:U(Ee),value:e[n.name],"onUpdate:value":b=>e[n.name]=b,style:{width:"100%"},format:Ue,placeholder:"día/mes/año",disabled:n.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):h("",!0)],64))),128))]),c(a,null,{default:d(()=>[c(ie,{class:"btn-produce",type:"primary","html-type":"submit",loading:I.value},{default:d(()=>t[1]||(t[1]=[K("SIGUIENTE")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Le=ce(Ae,[["__scopeId","data-v-597b1106"]]);const Me={class:"agreement-wrapper"},qe={class:"grid-item"},$e={key:3},Pe={__name:"RutaDigitalEmpresa",props:["dataStepOne"],emits:["close"],setup(j,{emit:R}){const o=ve(),v=R,m=j;o.$patch({cities:o.cities}),o.$patch({provinces:o.provinces}),o.$patch({districts:o.districts}),o.$patch({economicSectors:o.economicSectors}),o.$patch({comercialActivities:o.comercialActivities}),o.fetchCities(),o.fetchEconomicSectors(),o.fetchComercialActivities();const f=u({ruc:{type:"iSearch",label:"NÚMERO RUC",name:"ruc",required:!0,message:"Escribe número de documento",disabled:!1,max:11},space:{type:"space"},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Escribir nombre comercial",disabled:!0},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Escribir razón social",disabled:!0},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!0},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Escribir dirección",disabled:!0},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!0},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar sector económico",disabled:!0}}),C=u(null),O=u(null),I=u(!1);u(null);const z=u(!1);u(!0);const i=re({}),e=y=>{const l=i[y]?i[y].trim():"";i[y]=l},A=async y=>{try{const{data:l}=await te({url:`select/provinces/${y}`,method:"GET"});C.value=l}catch(l){console.error("Error de red:",l)}},F=async y=>{try{const{data:l}=await te({url:`select/districts/${y}`,method:"GET"});O.value=l}catch(l){console.error("Error de red:",l)}},q=(y,l)=>{const S=y.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return l.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(S)},w=()=>{f.value.comercialName.disabled=!1,f.value.socialReason.disabled=!1,f.value.city_id.disabled=!1,f.value.province_id.disabled=!1,f.value.district_id.disabled=!1,f.value.address.disabled=!1,f.value.comercialactivity_id.disabled=!1,f.value.economicsector_id.disabled=!1},B=async y=>{if(y.length!==11)return T.warning("El RUC debe tener exactamente 11 caracteres.");if(!/^\d+$/.test(y))return T.warning("El RUC debe contener solo números.");if(!/^(10|15|20)/.test(y))return T.warning("El RUC debe comenzar con 10, 15 o 20.");I.value=!0;try{const l=await Y({url:`mype/get-by-ruc/${i.ruc}`,method:"GET"});if(l.status===200&&(i.comercialName=l.data.comercialName,i.socialReason=l.data.socialReason,i.city_id=l.data.city_id,A(l.data.city_id),i.province_id=l.data.province_id,F(l.data.province_id),i.district_id=l.data.district_id,i.address=l.data.address,i.comercialactivity_id=l.data.comercialactivity_id,i.economicsector_id=l.data.economicsector_id,w()),l.status===404)if(G(),i.ruc.length>=11)try{const S=await Y({url:`api/consult-company-ruc/${i.ruc}`,method:"POST"});S.status===404?le.open({message:"ALERTA",description:"Se superó el número de consultas, coméntale a tu supervisor para que actualice el token"}):S.status===200&&(i.socialReason=S.data.socialReason,i.address=S.data.direccion),w()}catch(S){console.error("Error fetching DNI data:",S),le.open({message:"Error",description:"Hubo un problema al consultar el RUC. Por favor, revise el número registrado."})}else return T.error("COMPLETA EL NÚMERO DEL RUC")}catch{console.log("There was an error")}finally{I.value=!1}},$=y=>{i.province_id=null,i.district_id=null,A(y)},H=y=>{i.district_id=null,F(y)},G=()=>{i.comercialName=null,i.socialReason=null,i.city_id=null,i.province_id=null,i.district_id=null,i.address=null,i.comercialactivity_id=null,i.economicsector_id=null},V=async()=>{z.value=!0;const y={ruc:i.ruc,comercialName:i.comercialName,socialReason:i.socialReason,city_id:i.city_id,province_id:i.province_id,district_id:i.district_id,address:i.address,comercialactivity_id:i.comercialactivity_id,economicsector_id:i.economicsector_id};try{const l=await Y({url:"ruta-digital/mype",method:"POST",data:y});if(l.status==200){const S={ruc:l.ruc,dni:m.dataStepOne.dni,person_id:m.dataStepOne.id,mype_id:l.id},D=await Y({url:"ruta-digital/create",method:"POST",data:S});if(D.status==409)return T.error(D.message);D.status==200&&(G(),i.ruc=null,T.success(D.message),v("close"))}}catch{T.error("No se pudo registrar a este usuario")}finally{z.value=!1}},Q=()=>{T.error("COMPLETA LOS VALORES REQUERIDOS")};return(y,l)=>{const S=p("a-select"),D=p("a-form-item"),N=p("a-input-search"),J=p("a-input"),s=p("a-button"),t=p("a-form"),_=p("a-spin");return r(),M("div",Me,[c(_,{spinning:I.value},{default:d(()=>[c(t,{layout:"vertical",model:i,name:"basic",autocomplete:"off",onFinish:V,onFinishFailed:Q,onKeydown:l[0]||(l[0]=ae(de(()=>{},["prevent"]),["enter"]))},{default:d(()=>[x("div",qe,[(r(!0),M(Z,null,pe(f.value,(a,k)=>(r(),M(Z,{key:k},[a.type==="iSelect"?(r(),g(D,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:d(()=>[a.name=="city_id"?(r(),g(S,{key:0,value:i[a.name],"onUpdate:value":E=>i[a.name]=E,options:U(o).cities,"show-search":"","filter-option":q,onChange:$,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),a.name=="province_id"?(r(),g(S,{key:1,value:i[a.name],"onUpdate:value":E=>i[a.name]=E,options:C.value,"show-search":"","filter-option":q,onChange:H,disabled:!i.city_id},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),a.name=="district_id"?(r(),g(S,{key:2,value:i[a.name],"onUpdate:value":E=>i[a.name]=E,options:O.value,"show-search":"","filter-option":q,disabled:!i.province_id},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),a.name=="economicsector_id"?(r(),g(S,{key:3,value:i[a.name],"onUpdate:value":E=>i[a.name]=E,"show-search":"",options:U(o).economicSectors,"filter-option":q,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):h("",!0),a.name=="comercialactivity_id"?(r(),g(S,{key:4,value:i[a.name],"onUpdate:value":E=>i[a.name]=E,"show-search":"",options:U(o).comercialActivities,"filter-option":q,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):h("",!0)]),_:2},1032,["name","label","rules"])):h("",!0),a.type==="iSearch"?(r(),g(D,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max},{pattern:/^(10|15|20)\d{9,}$/,message:"El número debe comenzar con 10, 15 o 20, tener solo números, y al menos 11 caracteres"}]},{default:d(()=>[c(N,{value:i[a.name],"onUpdate:value":E=>i[a.name]=E,loading:I.value,maxlength:a.max,onSearch:B,onKeyup:ae(B,["enter"])},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):h("",!0),a.type==="iText"?(r(),g(D,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max,min:a.min}]},{default:d(()=>[c(J,{value:i[a.name],"onUpdate:value":E=>i[a.name]=E,disabled:a.disabled,maxlength:a.max,onBlur:E=>e(a.name)},null,8,["value","onUpdate:value","disabled","maxlength","onBlur"])]),_:2},1032,["name","label","rules"])):h("",!0),a.type==="space"?(r(),M("div",$e)):h("",!0)],64))),128))]),c(D,null,{default:d(()=>[c(s,{class:"btn-produce",type:"primary","html-type":"submit",loading:z.value},{default:d(()=>l[1]||(l[1]=[K("FINALIZAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ye=ce(Pe,[["__scopeId","data-v-8d236d74"]]),ze={__name:"RutaDigitalNuevo",emits:["closeDraw"],setup(j,{emit:R}){const o=R,v=u(1),m=u(null),f=O=>{m.value=O,v.value=O.step+1},C=()=>{v.value=1,o("closeDraw")};return(O,I)=>(r(),M("section",null,[v.value==1?(r(),g(Le,{key:0,onStepNumber:f})):h("",!0),v.value==2?(r(),g(Ye,{key:1,dataStepOne:m.value,onClose:C},null,8,["dataStepOne"])):h("",!0)]))}},me=(localStorage.getItem("token")||_e.get("token")||"").replace(/"/g,""),Fe=me?`Bearer ${me}`:"",Be="https://apituempresa.soporte-pnte.com/api/",Ge="http://127.0.0.1:8000/api/",Ve=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?Ge:Be;async function je(j,R,o){try{const v=await Se({url:`${Ve}${j}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${Fe}`},method:"POST",responseType:"blob",data:o}),m=window.URL.createObjectURL(new Blob([v.data])),f=document.createElement("a");f.href=m;const C=`${R}.xlsx`;f.setAttribute("download",C),document.body.appendChild(f),f.click(),document.body.removeChild(f)}catch(v){console.error("Error al descargar el archivo:",v)}}const He={class:"layout-content"},Ke=["onClick"],Qe={class:"paginator"},Je={__name:"RutaDigitalIndex",props:["idConvenio"],setup(j){P.locale("es"),_e.get("token");const R=JSON.parse(localStorage.getItem("role")),o=u(null),v=u(null);u(null);const m=u(!1),f=u(null),C=u(0),O=u(50),I=u({page:1}),z=u(1200),i=u([]),e=u(!1),A=u(!1);u(!1),u(!1),u(!1),u(null);const F=u(window.innerHeight-100),q=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"FECHA DE REGISTRO",dataIndex:"date",fixed:"left",align:"center",width:140},{title:"DNI ASESOR",dataIndex:"asesor_documentnumber",fixed:"left",align:"center",width:100},{title:"NOMBRE DEL ASESOR",dataIndex:"asesor_name",width:180},{title:"CDE/MAC",dataIndex:"asesor_cde",width:160,align:"center"},...R.some(s=>s.id!==1)?[{title:"SUPERVISOR",dataIndex:"supervisador",width:180}]:[],{title:"TIPO DOCUMENTO",dataIndex:"typedocument",align:"center",width:130},{title:"NRO DOCUMENTO",dataIndex:"documentnumber",align:"center",width:130},{title:"NACIONALIDAD (NOMBRE DEL PAIS)",dataIndex:"country",align:"center",width:140},{title:"FECHA DE NACIMIENTO",dataIndex:"birthdate",align:"center",width:120},{title:"APELLIDOS",dataIndex:"lastname",width:150},{title:"NOMBRES",dataIndex:"name",width:150},...R.some(s=>s.id!==1)?[{title:"SEXO (F/M)",dataIndex:"gender",width:60}]:[],...R.some(s=>s.id!==1)?[{title:"DISCAPACIDAD (SI/NO)",dataIndex:"sick",width:120}]:[],...R.some(s=>s.id!==1)?[{title:"CELULAR",dataIndex:"phone",width:100}]:[],...R.some(s=>s.id!==1)?[{title:"CORREO",dataIndex:"email",width:150}]:[],{title:"NÚMERO DE RUC",dataIndex:"ruc",align:"center",width:120},{title:"REGION DE LA MYPE",dataIndex:"region",align:"center",width:120},{title:"PROVINCIA DE LA MYPE",dataIndex:"province",align:"center",width:150},{title:"DISTRITO DE LA MYPE",dataIndex:"district",align:"center",width:130},{title:"DIRECCIÓN",dataIndex:"address",width:240},{title:"SECTOR ECONOMICO",dataIndex:"comercialactivity",align:"center",width:180},{title:"ACTIVIDAD COMERCIAL",dataIndex:"economicsector",align:"center",width:140},{title:"AUTODIAGNÓSTICO",dataIndex:"status",align:"center",fixed:"right",width:140}],w=re({search:""}),B=()=>{I.value.page=1,w.search,N()},$=()=>{w.search||N()},H=s=>{f.value=s,A.value=!0},G=s=>{params.value.page=s,N()},V=()=>{F.value=window.innerHeight-320},Q=()=>{f.value=null,A.value=!0},y=()=>{A.value=!1,N()},l=async s=>{try{const t=await Y({url:`agreement/delete/${s.id}`,method:"DELETE"});t.status==200&&(N(),T.success(t.message))}catch(t){console.error("Error de red:",t)}},S=Ie(()=>s=>(I.value.page-1)*O.value+s+1),D=async s=>{try{const t=await Y({url:`ruta-digital/status/${s}`,method:"PUT"});t.status==200&&(N(),T.success(t.message))}catch(t){console.error("Error de red:",t)}},N=async s=>{try{e.value=!0;const t={};v.value&&(t.start=P(v.value[0]).format("YYYY-MM-DD"),t.end=P(v.value[1]).format("YYYY-MM-DD")),w.search&&(t.search=w.search),I.value.page&&(t.page=I.value.page);const _=await Y({url:"ruta-digital/list",method:"GET",params:t}),a=_.data;i.value=a.data,C.value=a.total,O.value=a.per_page,o.value=_.role}catch(t){console.error("Error de red:",t)}finally{e.value=!1}},J=async()=>{try{m.value=!0;const s={};v.value&&(s.start=P(v.value[0]).format("YYYY-MM-DD"),s.end=P(v.value[1]).format("YYYY-MM-DD")),w.search&&(s.search=w.search),I.value.page&&(s.page=I.value.page);const{data:t}=await Y({url:"ruta-digital/list-all",method:"GET",params:s});await je("download/digital-routes","ruta-digital",t)}catch(s){console.error("Error de red:",s)}finally{m.value=!1}};return we(()=>{window.removeEventListener("resize",V)}),De(()=>{window.addEventListener("resize",V),V(),N()}),(s,t)=>{const _=p("a-button"),a=p("a-range-picker"),k=p("a-col"),E=p("a-input"),ne=p("a-input-group"),ie=p("a-row"),se=p("a-switch"),W=p("a-menu-item"),n=p("a-popconfirm"),oe=p("a-menu"),b=p("a-dropdown"),be=p("a-table"),ge=p("a-tag"),he=p("a-pagination"),ye=p("a-drawer");return r(),M("div",He,[x("div",null,[t[11]||(t[11]=x("h3",{class:"title-produce"},"RUTA DIGITAL - UGO",-1)),c(ie,{style:{margin:"1rem 0"}},{default:d(()=>[c(k,{xs:24,md:16,lg:18},{default:d(()=>[c(_,{type:"primary",onClick:Q,style:{}},{default:d(()=>t[4]||(t[4]=[K("REGISTRAR")])),_:1}),c(_,{class:"btn-excel",onClick:J,loading:m.value,type:"primary",style:{margin:"0 0.6rem"}},{default:d(()=>t[5]||(t[5]=[x("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:Re},null,-1)])),_:1},8,["loading"]),c(a,{value:v.value,"onUpdate:value":t[0]||(t[0]=L=>v.value=L),style:{width:"240px","font-size":"13px"},onChange:N},null,8,["value"])]),_:1}),c(k,{xs:24,md:8,lg:6},{default:d(()=>[c(ne,{compact:""},{default:d(()=>[c(E,{value:w.search,"onUpdate:value":t[1]||(t[1]=L=>w.search=L),style:{width:"calc(100% - 80px)"},onInput:$,placeholder:"Buscar por RUC o DNI"},null,8,["value"]),c(_,{type:"primary",disabled:w.search==="",onClick:B},{default:d(()=>t[6]||(t[6]=[K("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),c(be,{bordered:"",scroll:{x:z.value,y:F.value},class:"table-agreements-ugse",columns:q,"data-source":i.value,pagination:!1,loading:e.value,size:"small"},{headerCell:d(({column:L})=>t[7]||(t[7]=[])),bodyCell:d(({column:L,record:X,index:fe})=>[L.dataIndex=="idx"?(r(),M(Z,{key:0},[K(ue(S.value(fe)),1)],64)):h("",!0),L.dataIndex=="status"?(r(),g(se,{key:1,checked:X.status,"onUpdate:checked":ee=>X.status=ee,checkedValue:1,unCheckedValue:0,onChange:ee=>D(X.id)},{checkedChildren:d(()=>t[8]||(t[8]=[x("span",{style:{"font-size":"12px"}},"Si",-1)])),unCheckedChildren:d(()=>t[9]||(t[9]=[x("span",{style:{"font-size":"12px"}},"No",-1)])),_:2},1032,["checked","onUpdate:checked","onChange"])):h("",!0),L.dataIndex=="actions"?(r(),g(b,{key:2,trigger:["click"]},{overlay:d(()=>[c(oe,null,{default:d(()=>[c(W,null,{default:d(()=>[x("a",{onClick:ee=>H(X)},"Editar",8,Ke)]),_:2},1024),c(W,null,{default:d(()=>[c(n,{title:"¿Seguro de eliminar?",onConfirm:ee=>l(X)},{icon:d(()=>[c(U(Ce),{style:{color:"red"}})]),default:d(()=>[t[10]||(t[10]=x("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:d(()=>[x("a",{class:"ant-dropdown-link",onClick:t[2]||(t[2]=de(()=>{},["prevent"]))},[c(_,{shape:"circle",icon:xe(U(Ne)),size:"small"},null,8,["icon"])])]),_:2},1024)):h("",!0)]),_:1},8,["scroll","data-source","loading"])]),x("div",Qe,[x("span",null,[c(ge,{color:"blue"},{default:d(()=>[x("b",null,ue(C.value),1)]),_:1}),t[12]||(t[12]=K("Registros"))]),c(he,{size:"small",total:C.value,pageSize:O.value,onChange:G,showSizeChanger:!1},null,8,["total","pageSize"])]),c(ye,{open:A.value,"onUpdate:open":t[3]||(t[3]=L=>A.value=L),"root-class-name":"root-class-name",title:"Ruta Digital",placement:"right",width:"650"},{default:d(()=>[c(ze,{onCloseDraw:y})]),_:1},8,["open"])])}}},ia=ce(Je,[["__scopeId","data-v-a9dfdd3f"]]);export{ia as default};
