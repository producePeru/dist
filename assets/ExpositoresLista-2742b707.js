import{x as F,r as u,a as V,b as s,o as r,y as p,w as o,c as i,e as m,d as x,q as B,F as h,n as f,f as z,g as v,t as L,k as P,m as $,j as D,C as G,E as O}from"./index-96f21589.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{M as H}from"./MoreOutlined-99b8e153.js";const J={documentType:{type:"iSelect",label:"Tipo de documento",name:"documentType",required:!0,message:"Seleccionar tipo de documento"},documentNumber:{type:"iText",label:"Número de documento",name:"documentNumber",required:!0,message:"Error en el tipo de documento"},firstName:{type:"iText",label:"Nombres",name:"firstName",required:!0,message:"Escribe el nombre"},lastName:{type:"iText",label:"Apellido paterno",name:"lastName",required:!0,message:"Escribe el apellido paterno"},middleName:{type:"iText",label:"Apellido materno",name:"middleName",required:!0,message:"Escribe el apellido materno"},gender:{type:"iSelect",label:"Género",name:"gender",required:!0,message:"Seleccionar tipo de género"},email:{type:"iText",label:"Correo",name:"email",required:!0,email:"email",message:"Escribe el correo del usuario"},rucNumber:{type:"iText",label:"Número de RUC",name:"rucNumber",required:!1,message:"Registra el Número de RUC"},phoneNumber:{type:"iText",label:"Celular",name:"phoneNumber",required:!1,message:"Escribe el celular del usuario"},specialty:{type:"iText",label:"Especialidad",name:"specialty",required:!1,message:"Registra la especialidad del expositor"},profession:{type:"iText",label:"Profesión",name:"profession",required:!1,message:"Registra la especialidad del expositor"},cvLink:{type:"iText",label:"Link de CV",name:"cvLink",required:!1,message:"Registra la especialidad del expositor"}};const K={class:"grid-item"},Q={class:"wrapper-form_btn"},W={__name:"AgregarExpositor",props:["isIdUpdate"],emits:["handleCloseModal","refreshTable"],setup(C,{emit:N}){const t=C,_=N;F(()=>{t.isIdUpdate?(e.documentType=t.isIdUpdate.document_type,e.documentNumber=t.isIdUpdate.document_number,e.firstName=t.isIdUpdate.first_name,e.lastName=t.isIdUpdate.last_name,e.middleName=t.isIdUpdate.middle_name,e.gender=t.isIdUpdate.gender=="h"?1:2,e.email=t.isIdUpdate.email,e.rucNumber=t.isIdUpdate.ruc_number,e.phoneNumber=t.isIdUpdate.phone_number,e.specialty=t.isIdUpdate.specialty,e.profession=t.isIdUpdate.profession,e.cvLink=t.isIdUpdate.cv_link):U()});const b=u(!0),g=u(!1),e=V({documentType:null,documentNumber:null,firstName:null,lastName:null,middleName:null,gender:null,email:null,rucNumber:null,phoneNumber:null,specialty:null,profession:null,cvLink:null,user_id:1}),w=[{label:"Masculino",value:1},{label:"Femenino",value:2},{label:"...",value:3}],q=[{label:"DNI",value:"dni"},{label:"CE",value:"ce"},{label:"PAS",value:"pas"},{label:"PTP",value:"ptp"}],I=()=>{_("handleCloseModal",!0),b.value=!1},U=()=>{e.documentType=null,e.documentNumber=null,e.firstName=null,e.lastName=null,e.middleName=null,e.gender=null,e.email=null,e.rucNumber=null,e.phoneNumber=null,e.specialty=null,e.profession=null,e.cvLink=null},S=async()=>{const y=e;g.value=!0;let l,n;t.isIdUpdate?(l=`/exponents/${t.isIdUpdate.id}`,n="PUT"):(l="/exponents",n="POST");try{const c=await P({url:l,method:n,data:y});U(),_("refreshTable",!0),$.success(c.message),I()}catch{$.error("No se pudo registrar al exponente")}finally{g.value=!1}};return(y,l)=>{const n=s("a-select"),c=s("a-form-item"),T=s("a-input"),k=s("a-button"),M=s("a-form"),A=s("a-modal");return r(),p(A,{open:b.value,"onUpdate:open":l[0]||(l[0]=a=>b.value=a),title:"Agregar expositor",style:{top:"40px"},footer:"",onCancel:I,width:"700px"},{default:o(()=>[i(M,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:S},{default:o(()=>[m("div",K,[(r(!0),x(h,null,B(z(J),(a,R)=>(r(),x(h,{key:R},[a.type==="iSelect"?(r(),p(c,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:o(()=>[a.name=="documentType"?(r(),p(n,{key:0,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:q},null,8,["value","onUpdate:value"])):f("",!0),a.name=="gender"?(r(),p(n,{key:1,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:w},null,8,["value","onUpdate:value"])):f("",!0)]),_:2},1032,["name","label","rules"])):f("",!0),a.type==="iText"?(r(),p(c,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:o(()=>[i(T,{value:e[a.name],"onUpdate:value":d=>e[a.name]=d},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):f("",!0)],64))),128))]),m("div",Q,[i(k,{type:"primary","html-type":"submit",loading:g.value},{default:o(()=>[v(L(C.isIdUpdate?"Actualizar":"Registrar")+" expositor",1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open"])}}},X=j(W,[["__scopeId","data-v-2b85a570"]]);const Y=m("h3",null,"Expositores",-1),Z={class:"filters"},ee=["onClick"],ae=m("a",null,"Eliminar",-1),te={class:"paginator"},re={__name:"ExpositoresLista",setup(C){const N=u([]),t=u(!1);u(1e3),u(8e4);const _=u(!1),b=u(0),g=u(null),e=u({page:1}),w=[{title:"Nombres",dataIndex:"firstName",fixed:"left",width:40},{title:"Apellidos",dataIndex:"lastNames",fixed:"left",width:50},{title:"RUC",dataIndex:"rucNumber",align:"center",width:40},{title:"Tipo documento",dataIndex:"documentType",align:"center",width:30},{title:"N° documento",dataIndex:"documentNumber",align:"center",width:40},{title:"Correo electrónico",dataIndex:"email",width:60},{title:"Celular",dataIndex:"phoneNumber",align:"center",width:20},{title:"Especialidad",dataIndex:"specialty",align:"center",width:40},{title:"Profesión",dataIndex:"profession",align:"center",width:50},{title:"Género",dataIndex:"sex",align:"center",width:30},{title:"",dataIndex:"actions",align:"center",width:15}],q=l=>{l&&y()},I=l=>{e.value.page=l,y()},U=async l=>{try{const n=await P({url:`/exponents/${l.id}`,method:"GET"});g.value=n.data,_.value=!0}catch(n){console.error("Error de red:",n),$.warning("Error de red")}},S=()=>{g.value=null,_.value=!0},y=async()=>{try{t.value=!0;const l=await P({url:"/exponents",method:"GET",params:e.value});N.value=l.data,b.value=l.meta.total}catch(l){console.error("Error de red:",l)}finally{t.value=!1}};return D(y),(l,n)=>{const c=s("a-button"),T=s("a-tag"),k=s("a-menu-item"),M=s("a-menu"),A=s("a-dropdown"),a=s("a-table"),R=s("a-pagination");return r(),x(h,null,[m("div",null,[Y,m("div",Z,[i(c,{type:"primary",onClick:S},{default:o(()=>[v("Agregar expositor")]),_:1})]),i(a,{bordered:"",scroll:{x:2e3},class:"ant-table-striped",columns:w,"data-source":N.value,pagination:!1,loading:t.value,size:"small"},{bodyCell:o(({column:d,record:E})=>[d.dataIndex=="lastNames"?(r(),x(h,{key:0},[v(L(E.lastName)+" "+L(E.middleName),1)],64)):f("",!0),d.dataIndex=="sex"?(r(),x(h,{key:1},[E.gender=="h"?(r(),p(T,{key:0,color:"blue"},{default:o(()=>[v("Hombre")]),_:1})):(r(),p(T,{key:1,color:"pink"},{default:o(()=>[v("Mujer")]),_:1}))],64)):f("",!0),d.dataIndex=="actions"?(r(),p(A,{key:2,trigger:["click"]},{overlay:o(()=>[i(M,null,{default:o(()=>[i(k,null,{default:o(()=>[m("a",{onClick:le=>U(E)},"Editar",8,ee)]),_:2},1024),i(k,null,{default:o(()=>[ae]),_:1})]),_:2},1024)]),default:o(()=>[m("a",{class:"ant-dropdown-link",onClick:n[0]||(n[0]=G(()=>{},["prevent"]))},[i(c,{shape:"circle",icon:O(z(H)),size:"small"},null,8,["icon"])])]),_:2},1024)):f("",!0)]),_:1},8,["data-source","loading"])]),m("div",te,[i(R,{size:"small",total:b.value,pageSize:20,onChange:I,showSizeChanger:!1},null,8,["total"])]),i(X,{open:_.value,onRefreshTable:q,onHandleCloseModal:n[1]||(n[1]=d=>_.value=!1),isIdUpdate:g.value},null,8,["open","isIdUpdate"])],64)}}};export{re as default};
