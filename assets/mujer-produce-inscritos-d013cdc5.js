import{_ as q}from"./TableComponent-2ac2e7f0.js";import{E as X,r as u,u as K,a as W,p as w,k as Z,X as O,b as k,o as s,d as c,c as m,w as i,m as R,y as f,z as o,e as g,t as d,F,j as v,i as x,a2 as ee,h as ae}from"./index-0ccf5cab.js";import{d as te}from"./downloadExcel-e13a3a8d.js";import"./es-bba8e92f.js";import{_ as ne}from"./ParticipanteSed-99f97fc5.js";import{F as se,I as oe}from"./InstagramOutlined-6ac4f81b.js";import{C as le}from"./ChromeOutlined-f2f2f3a4.js";import"./icoexcel-1b303edf.js";import"./selectes-9440f846.js";import"./SyncOutlined-881cf5d8.js";import"./MoreOutlined-8201c17d.js";import"./FormComponent-a6845ebf.js";import"./quill.snow-066ab1df.js";const re={class:"layout-content app-table"},ie={key:1,class:"app-table-cell"},de={key:2,class:"app-table-cell"},ce={key:5,class:"sed-socials"},ue=["href"],me=["href"],pe=["href"],fe=["onClick"],be={__name:"mujer-produce-inscritos",setup(ge){const D=X(),$=JSON.parse(localStorage.getItem("role"))||[],N=u([]),T=u(0),A=u(150),y=u(!1);K();const Y=u(!1),E=u(null),S=u(!1),M=u({name:"Cargando..."}),n=W({year:w("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),H=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center",fixed:"left"},{title:"TIPO DE DOCUMENTO",dataIndex:"typedocument_name",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"EMPRESARIO",dataIndex:"empresario",width:350},{title:"GÃ‰NERO",dataIndex:"gender_name",width:80,align:"center"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],B=e=>{E.value=e,y.value=!0},V=()=>{h(),y.value=!1},j=()=>{E.value=null,y.value=!0},z=async(e,t)=>{const p=D.params.slug,I=w().format("DD/MM/YYYY HH:mm"),C={slug:p,documentnumber:t.documentnumber,check:e.target.checked,date:I};try{const _=await R({url:"fair/update-attended-status",method:"PUT",data:C});_.status==200&&console.log("status",_.message)}catch(_){console.error("Error de red:",_)}},G=async e=>{try{const t=await R({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});t.status==200&&(h(),ae.success(t.message))}catch(t){console.error("Error de red:",t)}},L=async()=>{S.value=!0;try{const e={},t=D.params.slug;n.year&&(e.year=w(n.year).format("YYYY")),n.range&&(e.dateStart=n.range[0].format("YYYY/MM/DD"),e.dateEnd=n.range[1].format("YYYY/MM/DD")),n.name&&(e.name=n.name);let p=`download/sed-asistentes/${t}`;await te(p,"sed",e)}catch(e){console.error("Error de red:",e)}finally{S.value=!1}},J=async e=>{n.page=e,await h()},Q=async e=>{e&&(n.page=1,await h())},U=e=>$.some(t=>e.includes(t.id)),h=async()=>{try{Y.value=!0;const e={page:n.page},t=D.params.slug;n.year&&(e.year=w(n.year).format("YYYY")),n.range&&(e.dateStart=n.range[0].format("YYYY/MM/DD"),e.dateEnd=n.range[1].format("YYYY/MM/DD")),n.name&&(e.name=n.name),n.orderby&&(e.orderby=n.orderby);let p=`events-ugse/users-registered-list/${t}`;const r=await R({url:p,method:"GET",params:e});M.value=r.event,N.value=r.data.data,T.value=r.data.total,A.value=r.data.per_page}catch(e){console.error("Error de red:",e)}finally{Y.value=!1}};return Z(async()=>{await h()}),O("search",n),O("loading",Y),O("loadingFile",S),(e,t)=>{var P;const p=k("a-checkbox"),r=k("a-tag"),I=k("a-menu-item"),C=k("a-popconfirm"),_=k("a-drawer");return s(),c("div",re,[m(q,{title:`MUJER PRODUCE - INSCRITOS ðŸ“€ ${(P=M.value)==null?void 0:P.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/mujer-produce",searchYear:!0,rangeDate:!0,columns:H,titleSearch:"FILTRAR POR RUC O DNI",pageSize:A.value,nameTotal:"Inscritos SED",dataSource:N.value,total:T.value,btnUpdate:!0,onHandleNew:j,onHandleCallFetchData:h,onHandleDownloadExcel:L,onHandleSearch:Q,onHandlePaginator:J},{"data-cell":i(({column:l,record:a})=>[l.dataIndex=="asistio"?(s(),f(p,{key:0,checked:a.asistio,"onUpdate:checked":b=>a.asistio=b,onChange:b=>z(b,a)},null,8,["checked","onUpdate:checked","onChange"])):o("",!0),l.dataIndex=="empresario"?(s(),c("div",ie,[g("b",null,d(a.name)+" "+d(a.lastname)+" "+d(a.middlename),1),g("span",null,d(a.phone)+" / "+d(a.email),1)])):o("",!0),l.dataIndex=="empresa"?(s(),c("div",de,[g("b",null,d(a.nombreComercial),1),g("span",null,d(a.razonSocial)+" / "+d(a.ruc),1),g("span",null,d(a.city)+" - "+d(a.province)+" - "+d(a.district),1)])):o("",!0),l.dataIndex=="sick"?(s(),c(F,{key:3},[a.sick=="SI"?(s(),f(r,{key:0,color:"red"},{default:i(()=>t[1]||(t[1]=[v("SI")])),_:1})):o("",!0),a.sick=="NO"?(s(),f(r,{key:1,color:"green"},{default:i(()=>t[2]||(t[2]=[v("NO")])),_:1})):o("",!0)],64)):o("",!0),l.dataIndex=="typeAsistente"?(s(),c(F,{key:4},[a.typeAsistente==1?(s(),f(r,{key:0,color:"blue"},{default:i(()=>t[3]||(t[3]=[v("Representante")])),_:1})):o("",!0),a.typeAsistente==2?(s(),f(r,{key:1,color:"pink"},{default:i(()=>t[4]||(t[4]=[v("Invitado")])),_:1})):o("",!0)],64)):o("",!0),l.dataIndex=="redesSociales"?(s(),c("div",ce,[a.instagram?(s(),c("a",{key:0,href:a.instagram,target:"_blank"},[m(x(se),{class:"ico-sed-socials"})],8,ue)):o("",!0),a.facebook?(s(),c("a",{key:1,href:a.facebook,target:"_blank"},[m(x(oe),{class:"ico-sed-socials"})],8,me)):o("",!0),a.web?(s(),c("a",{key:2,href:a.web,target:"_blank"},[m(x(le),{class:"ico-sed-socials"})],8,pe)):o("",!0)])):o("",!0)]),"custom-options":i(({record:l})=>[U([1,5])?(s(),f(I,{key:0},{default:i(()=>[g("a",{onClick:a=>B(l)},"Editar",8,fe)]),_:2},1024)):o("",!0),U([1,5])?(s(),f(I,{key:1},{default:i(()=>[m(C,{placement:"rightBottom",title:`Â¿Quieres eliminar ${l.documentnumber} ?`,onConfirm:a=>G(l)},{icon:i(()=>[m(x(ee),{style:{color:"red"}})]),default:i(()=>[t[5]||(t[5]=g("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):o("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),m(_,{open:y.value,"onUpdate:open":t[0]||(t[0]=l=>y.value=l),title:E.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:i(()=>[m(ne,{onCloseDraw:V,info:E.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{be as default};
