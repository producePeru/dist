import{a as ge,f as be,r as ke,b as xe,R as Se}from"./ReservaNombre-d9be5e4f.js";import{u as se}from"./selectes-5a75139f.js";import{c as l,A as Ue,r as R,a as ee,b as p,o as e,d as v,w as n,e as u,F as C,B as Y,h as z,q as y,s as a,i as U,m as B,g as V,N as Ie,O as we,T as Ce,U as Re,t as f,u as Ae,y as Fe,k as De,V as $e,p as ze,j as Oe,Q as qe}from"./index-245dffd0.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Ne=Ee;function ie(F){for(var g=1;g<arguments.length;g++){var o=arguments[g]!=null?Object(arguments[g]):{},S=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(S=S.concat(Object.getOwnPropertySymbols(o).filter(function(w){return Object.getOwnPropertyDescriptor(o,w).enumerable}))),S.forEach(function(w){Te(F,w,o[w])})}return F}function Te(F,g,o){return g in F?Object.defineProperty(F,g,{value:o,enumerable:!0,configurable:!0,writable:!0}):F[g]=o,F}var le=function(g,o){var S=ie({},g,o.attrs);return l(Ue,ie({},S,{icon:Ne}),null)};le.displayName="RedoOutlined";le.inheritAttrs=!1;const Pe=le;const Le={class:"wrapper-booking"},Me={class:"grid-booking"},Ge={__name:"ActoConstitutivo",props:["info","itemSelectedF20"],emits:["closeDraw"],setup(F,{emit:g}){const o=JSON.parse(localStorage.getItem("profile")),S=se(),w=F,G=g;S.$patch({notaries:S.notaries}),S.fetchNotaries();const O=R(!1),s=ee({task:2,name:null,numbernotary:null,notary_id:null,user_id:o.id,userupdated_id:o.id}),m=async()=>{O.value=!0,s.people_id=w.info.id;try{const i=await B({url:`formalization/ruc20-step2/${w.itemSelectedF20.codesunarp}`,method:"POST",data:s});i.status===200&&(V.success(i.message),s.name=null,s.numbernotary=null,s.notary_id=null,G("closeDraw",!0))}catch(i){console.log("Error: "+i)}finally{O.value=!1}},E=()=>{V.error("Debes de completar todos los espacios requeridos")};return(i,P)=>{const L=p("a-select"),D=p("a-form-item"),c=p("a-input"),h=p("a-button"),_=p("a-form");return e(),v("div",Le,[l(_,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:m,onFinishFailed:E},{default:n(()=>[u("div",Me,[(e(!0),v(C,null,Y(z(ge),(t,q)=>(e(),v(C,{key:q},[t.type==="iSelect"?(e(),y(D,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="notary_id"?(e(),y(L,{key:0,value:s[t.name],"onUpdate:value":b=>s[t.name]=b,options:z(S).notaries},null,8,["value","onUpdate:value","options"])):a("",!0)]),_:2},1032,["name","label","rules"])):a("",!0),t.type==="iText"?(e(),y(D,{key:1,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:n(()=>[l(c,{value:s[t.name],"onUpdate:value":b=>s[t.name]=b},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):a("",!0)],64))),128))]),l(D,null,{default:n(()=>[l(h,{class:"btn-produce",type:"primary","html-type":"submit",loading:O.value},{default:n(()=>[U("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Ve=J(Ge,[["__scopeId","data-v-ec339c60"]]);const Be={class:"wrapper-booking"},He={class:"grid-booking"},je={class:"emp-20"},Ye={__name:"MypeFinal",props:["itemSelectedF20"],emits:["closeDraw"],setup(F,{emit:g}){const o=F,S=g,w=R(!1),G=R(!0),O=ee({task:3,ruc:null}),s=async()=>{w.value=!0,O.mype_id=o.itemSelectedF20.mype.id;try{const E=await B({url:`formalization/ruc20-step3/${o.itemSelectedF20.codesunarp}`,method:"POST",data:O});E.status===200&&(V.success(E.message),O.ruc=null,S("closeDraw",!0))}catch(E){console.log("Error: "+E)}finally{w.value=!1}},m=()=>{V.error("Debes de completar todos los espacios requeridos")};return(E,i)=>{const P=p("a-input"),L=p("a-form-item"),D=p("a-button"),c=p("a-form");return e(),v("div",Be,[l(c,{layout:"vertical",model:O,name:"basic",autocomplete:"off",onFinish:s,onFinishFailed:m},{default:n(()=>[u("div",He,[(e(!0),v(C,null,Y(z(be),(h,_)=>(e(),v(C,{key:_},[h.type==="iText"?(e(),y(L,{key:0,name:h.name,label:h.label,rules:[{required:h.required,message:h.message,type:h.email,max:h.max,min:h.min}]},{default:n(()=>[l(P,{value:O[h.name],"onUpdate:value":t=>O[h.name]=t,disabled:h.disabled,maxlength:9},{prefix:n(()=>[Ie(u("span",je,"20",512),[[we,G.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):a("",!0)],64))),128))]),l(L,null,{default:n(()=>[l(D,{class:"btn-produce",type:"primary","html-type":"submit",loading:w.value},{default:n(()=>[U("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Je=J(Ye,[["__scopeId","data-v-9faa4d7d"]]);const Ke={class:"wrapper-booking"},Qe={class:"grid-booking"},We={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(F,{emit:g}){const o=Re({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),S=JSON.parse(localStorage.getItem("profile")),w=F,G=g,O=R(!1),s=R(null),m=se(),E=R(!1);m.$patch({cities:m.cities}),m.$patch({provinces:m.provinces}),m.$patch({districts:m.districts}),m.$patch({modalities:m.modalities}),m.$patch({detailProcedures:m.detailProcedures}),m.$patch({economicSectors:m.economicSectors}),m.$patch({comercialActivities:m.comercialActivities}),m.fetchDetailProcedures(),m.fetchModalities(),m.fetchEconomicSectors(),m.fetchComercialActivities(),m.fetchCities();const i=ee({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:S.id}),P=async()=>{try{E.value=!0;const t={name:s.value};(await B({url:"create/comercial-activities",method:"POST",data:t})).status==200&&(s.value=null,m.fetchComercialActivities())}catch(t){console.log(t)}finally{E.value=!1}},L=t=>{i.province_id=null,i.district_id=null,m.fetchProvinces(t)},D=t=>{i.district_id=null,m.fetchDistricts(t)},c=(t,q)=>{const b=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return q.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(b)},h=async()=>{O.value=!0,i.people_id=w.info.id;try{const t=await B({url:"formalization/create-ruc-10",method:"POST",data:i});t.status===200&&(V.success(t.message),i.detailprocedure_id=null,i.modality_id=null,i.economicsector_id=null,i.comercialactivity_id=null,i.city_id=null,i.province_id=null,i.district_id=null,G("closeDraw",!0))}catch(t){console.log("Error: "+t)}finally{O.value=!1}},_=()=>{V.warning("Debes de completar todos los espacios requeridos")};return(t,q)=>{const b=p("a-select"),$=p("a-form-item"),r=p("a-input"),M=p("a-divider"),I=p("a-button"),H=p("a-space"),j=p("a-form");return e(),v("div",Ke,[l(j,{layout:"vertical",model:i,name:"basic",autocomplete:"off",onFinish:h,onFinishFailed:_},{default:n(()=>[u("div",Qe,[(e(!0),v(C,null,Y(z(ke),(d,Q)=>(e(),v(C,{key:Q},[d.type==="iSelect"?(e(),y($,{key:0,class:"item-max",name:d.name,label:d.label,rules:[{required:d.required,message:d.message}]},{default:n(()=>[d.name=="detailprocedure_id"?(e(),y(b,{key:0,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,options:z(m).detailProcedures},null,8,["value","onUpdate:value","options"])):a("",!0),d.name=="modality_id"?(e(),y(b,{key:1,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,options:z(m).modalities},null,8,["value","onUpdate:value","options"])):a("",!0),d.name=="economicsector_id"?(e(),y(b,{key:2,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,options:z(m).economicSectors},null,8,["value","onUpdate:value","options"])):a("",!0)]),_:2},1032,["name","label","rules"])):a("",!0),d.type==="iText"?(e(),y($,{key:1,name:d.name,label:d.label,rules:[{required:d.required,message:d.message,type:d.email,max:d.max}]},{default:n(()=>[l(r,{value:i[d.name],"onUpdate:value":N=>i[d.name]=N,disabled:d.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):a("",!0),d.type==="iSelectWrite"?(e(),y($,{key:2,class:"item-max",name:d.name,label:d.label,rules:[{required:d.required,message:d.message}]},{default:n(()=>[d.name=="comercialactivity_id"?(e(),y(b,{key:0,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,"show-search":"",options:z(m).comercialActivities,"filter-option":c},{dropdownRender:n(({menuNode:N})=>[l(z(o),{vnodes:N},null,8,["vnodes"]),l(M,{style:{margin:"4px 0"}}),l(H,{style:{padding:"4px 8px"}},{default:n(()=>[l(r,{ref_for:!0,ref:"inputRef",value:s.value,"onUpdate:value":q[0]||(q[0]=te=>s.value=te),placeholder:"Nueva actividad"},null,8,["value"]),l(I,{type:"text",onClick:P,loading:E.value},{icon:n(()=>[l(z(Ce))]),default:n(()=>[U(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):a("",!0),d.name=="city_id"?(e(),y(b,{key:1,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,"show-search":"",options:z(m).cities,"filter-option":c,onChange:L},null,8,["value","onUpdate:value","options"])):a("",!0),d.name=="province_id"?(e(),y(b,{key:2,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,"show-search":"",options:z(m).provinces,"filter-option":c,onChange:D},null,8,["value","onUpdate:value","options"])):a("",!0),d.name=="district_id"?(e(),y(b,{key:3,value:i[d.name],"onUpdate:value":N=>i[d.name]=N,"show-search":"",options:z(m).districts,"filter-option":c},null,8,["value","onUpdate:value","options"])):a("",!0)]),_:2},1032,["name","label","rules"])):a("",!0)],64))),128))]),l($,null,{default:n(()=>[l(I,{type:"primary",class:"btn-produce","html-type":"submit",loading:O.value},{default:n(()=>[U("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Ze=J(We,[["__scopeId","data-v-861d2d78"]]);const Xe={class:"wrapper-booking"},et={class:"grid-booking"},tt={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(F,{emit:g}){const o=se(),S=JSON.parse(localStorage.getItem("profile")),w=R(!1),G=F,O=g;o.$patch({components:o.components}),o.$patch({componentThemes:o.componentThemes}),o.$patch({modalities:o.modalities}),o.$patch({cities:o.cities}),o.$patch({provinces:o.provinces}),o.$patch({districts:o.districts}),o.fetchComponents(),o.fetchComponentThemes(),o.fetchModalities(),o.fetchCities(),o.fetchGenders();const s=ee({observations:null,user_id:S.id,people_id:G.info.id,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),m=c=>{s.theme_id=null,o.fetchComponentThemes(c)},E=c=>{s.province_id=null,s.district_id=null,o.fetchProvinces(c)},i=c=>{s.district_id=null,o.fetchDistricts(c)},P=(c,h)=>{const _=c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return h.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)},L=async()=>{w.value=!0;try{const c=await B({url:"advisory/create",method:"POST",data:s});c.status===200&&(V.success(c.message),s.component_id=null,s.theme_id=null,s.modality_id=null,s.city_id=null,s.province_id=null,s.district_id=null,s.observations=null,O("closeDraw",!0))}catch(c){console.log("Error: "+c)}finally{w.value=!1}},D=()=>{V.warning("Debes de completar todos los espacios requeridos")};return(c,h)=>{const _=p("a-select"),t=p("a-form-item"),q=p("a-textarea"),b=p("a-button"),$=p("a-form");return e(),v("div",Xe,[l($,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:L,onFinishFailed:D},{default:n(()=>[u("div",et,[(e(!0),v(C,null,Y(z(xe),(r,M)=>(e(),v(C,{key:M},[r.type==="iSelect"?(e(),y(t,{key:0,class:"item-max",name:r.name,label:r.label,rules:[{required:r.required,message:r.message}]},{default:n(()=>[r.name=="component_id"?(e(),y(_,{key:0,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,options:z(o).components,onChange:m},null,8,["value","onUpdate:value","options"])):a("",!0),r.name=="modality_id"?(e(),y(_,{key:1,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,options:z(o).modalities},null,8,["value","onUpdate:value","options"])):a("",!0)]),_:2},1032,["name","label","rules"])):a("",!0),r.type==="iTextarea"?(e(),y(t,{key:1,name:r.name,label:r.label,rules:[{required:r.required,message:r.message}]},{default:n(()=>[l(q,{value:s[r.name],"onUpdate:value":I=>s[r.name]=I,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):a("",!0),r.type==="iSelectWrite"?(e(),y(t,{key:2,class:"item-max",name:r.name,label:r.label,rules:[{required:r.required,message:r.message}]},{default:n(()=>[r.name=="theme_id"?(e(),y(_,{key:0,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,"show-search":"",options:z(o).componentThemes,"filter-option":P},null,8,["value","onUpdate:value","options"])):a("",!0),r.name=="city_id"?(e(),y(_,{key:1,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,"show-search":"",options:z(o).cities,"filter-option":P,onChange:E},null,8,["value","onUpdate:value","options"])):a("",!0),r.name=="province_id"?(e(),y(_,{key:2,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,"show-search":"",options:z(o).provinces,"filter-option":P,onChange:i},null,8,["value","onUpdate:value","options"])):a("",!0),r.name=="district_id"?(e(),y(_,{key:3,value:s[r.name],"onUpdate:value":I=>s[r.name]=I,"show-search":"",options:z(o).districts,"filter-option":P},null,8,["value","onUpdate:value","options"])):a("",!0)]),_:2},1032,["name","label","rules"])):a("",!0)],64))),128))]),l(t,null,{default:n(()=>[l(b,{type:"primary",class:"btn-produce","html-type":"submit",loading:w.value},{default:n(()=>[U("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},at=J(tt,[["__scopeId","data-v-c7a3f86e"]]);const nt={key:0},ot={key:0},st={key:4,class:"steps"},lt={style:{"text-align":"right"}},it={key:0},rt={__name:"AsesoriasHistorial",props:["info"],setup(F){const g=F,o=R("1"),S=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"},{title:"Registrado por",dataIndex:"asesor_create"},{title:"Último asesor atendido",dataIndex:"asesor_update"}],w=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"component"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],G=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}];return(O,s)=>{const m=p("a-empty"),E=p("a-table"),i=p("a-card"),P=p("a-tab-pane"),L=p("a-progress"),D=p("a-space"),c=p("a-tabs");return e(),y(c,{activeKey:o.value,"onUpdate:activeKey":s[0]||(s[0]=h=>o.value=h),type:"card",class:"box-hist"},{default:n(()=>[l(P,{key:"1",tab:"ASESORÍAS"},{default:n(()=>[l(i,null,{default:n(()=>{var h,_,t;return[((h=g.info)==null?void 0:h.idadvisory.length)==0?(e(),y(m,{key:0})):a("",!0),((_=g.info)==null?void 0:_.idadvisory.length)>=1?(e(),y(E,{key:1,columns:G,"data-source":(t=g.info)==null?void 0:t.idadvisory,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:q,column:b,record:$})=>{var r,M,I,H,j,d;return[b.dataIndex==="idx"?(e(),v("span",nt,f(q+1),1)):a("",!0),b.dataIndex==="date_start"?(e(),v(C,{key:1},[U(f($.created_at),1)],64)):a("",!0),b.dataIndex==="component"?(e(),v(C,{key:2},[U(f((r=$.component)==null?void 0:r.name),1)],64)):a("",!0),b.dataIndex==="tema_compoment"?(e(),v(C,{key:3},[U(f((M=$.theme)==null?void 0:M.name),1)],64)):a("",!0),b.dataIndex==="modality"?(e(),v(C,{key:4},[U(f((I=$.modality)==null?void 0:I.name),1)],64)):a("",!0),b.dataIndex==="asesor_create"?(e(),v(C,{key:5},[U(f((H=$.user)==null?void 0:H.profile.name)+" "+f((j=$.user)==null?void 0:j.profile.lastname)+" "+f((d=$.user)==null?void 0:d.profile.middlename),1)],64)):a("",!0)]}),_:1},8,["data-source"])):a("",!0)]}),_:1})]),_:1}),l(P,{key:"2",tab:"RUC 20"},{default:n(()=>[l(i,null,{default:n(()=>[g.info.idformalization20.length==0?(e(),y(m,{key:0})):a("",!0),g.info.idformalization20.length>=1?(e(),y(E,{key:1,columns:S,"data-source":g.info.idformalization20,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:h,column:_,record:t})=>{var q,b,$,r,M,I,H;return[_.dataIndex==="idx"?(e(),v("span",ot,f(h+1),1)):a("",!0),_.dataIndex==="date_start"?(e(),v(C,{key:1},[U(f(t.created_at),1)],64)):a("",!0),_.dataIndex==="date_last"?(e(),v(C,{key:2},[U(f(t.updated_at),1)],64)):a("",!0),_.dataIndex==="sector"?(e(),v(C,{key:3},[U(f((q=t.economicsector)==null?void 0:q.name),1)],64)):a("",!0),_.dataIndex==="progress"?(e(),v("div",st,[u("span",lt,f(t.task==1?"Reserva de nombre":t.task==2?"Proceso de notaría":"Formalizado"),1),l(D,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[l(L,{percent:t.task*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):a("",!0),_.dataIndex==="asesor_create"?(e(),v(C,{key:5},[U(f((b=t.user)==null?void 0:b.profile.name)+" "+f(($=t.user)==null?void 0:$.profile.lastname)+" "+f((r=t.user)==null?void 0:r.profile.middlename),1)],64)):a("",!0),_.dataIndex==="asesor_update"?(e(),v(C,{key:6},[U(f((M=t.user)==null?void 0:M.profile.name)+" "+f((I=t.userupdater)==null?void 0:I.profile.lastname)+" "+f((H=t.user)==null?void 0:H.profile.middlename),1)],64)):a("",!0)]}),_:1},8,["data-source"])):a("",!0)]),_:1})]),_:1}),l(P,{key:"3",tab:"RUC 10"},{default:n(()=>[l(i,null,{default:n(()=>[g.info.idformalization10.length==0?(e(),y(m,{key:0})):a("",!0),g.info.idformalization10.length>=1?(e(),y(E,{key:1,columns:w,"data-source":g.info.idformalization10,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:h,column:_,record:t})=>{var q,b,$,r,M,I;return[_.dataIndex==="idx"?(e(),v("span",it,f(h+1),1)):a("",!0),_.dataIndex==="date_start"?(e(),v(C,{key:1},[U(f(t.created_at),1)],64)):a("",!0),_.dataIndex==="component"?(e(),v(C,{key:2},[U(f((q=t.detailprocedure)==null?void 0:q.name),1)],64)):a("",!0),_.dataIndex==="sector"?(e(),v(C,{key:3},[U(f((b=t.economicsector)==null?void 0:b.name),1)],64)):a("",!0),_.dataIndex==="modality"?(e(),v(C,{key:4},[U(f(($=t.modality)==null?void 0:$.name),1)],64)):a("",!0),_.dataIndex==="asesor_create"?(e(),v(C,{key:5},[U(f((r=t.user)==null?void 0:r.profile.name)+" "+f((M=t.user)==null?void 0:M.profile.lastname)+" "+f((I=t.user)==null?void 0:I.profile.middlename),1)],64)):a("",!0)]}),_:1},8,["data-source"])):a("",!0)]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},ut=J(rt,[["__scopeId","data-v-387ae259"]]);const T=F=>(ze("data-v-3c49da96"),F=F(),Oe(),F),ct={class:"asesorias"},dt=T(()=>u("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),mt=T(()=>u("br",null,null,-1)),pt={class:"wrapper-s"},_t=T(()=>u("label",{class:"label"},"Seleccione el tipo de documento",-1)),vt=T(()=>u("label",{class:"label"},"Digite el número de documento",-1)),ft={class:"column-2"},yt={class:"info-update"},ht=T(()=>u("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),gt={class:"info-personal"},bt=T(()=>u("span",null,"Apellidos y nombres: ",-1)),kt=T(()=>u("span",null,"Número de celular:",-1)),xt=T(()=>u("span",null,"Correo electrónico:",-1)),St=T(()=>u("span",null,"Asesorías:",-1)),Ut=T(()=>u("span",null,"Formalizaciones RUC 20:",-1)),It={class:"alert-incomplete"},wt=T(()=>u("span",null,"Formalizaciones RUC 10:",-1)),Ct=T(()=>u("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Rt={class:"card-as-btn"},At=T(()=>u("h4",null,"HISTORIAL",-1)),Ft={class:"steps-content"},Dt=["onClick"],$t={class:"pendient"},zt={key:0,class:"info-tag"},Ot=T(()=>u("b",null,"Paso",-1)),qt={key:1,class:"info-tag"},Et=T(()=>u("b",null,"Siguiente paso",-1)),Nt={key:2,class:"info-tag"},Tt=T(()=>u("b",null,"Siguiente paso",-1)),Pt={class:"info"},Lt=T(()=>u("b",null,"Código SID SUNARP",-1)),Mt={class:"code-number"},Gt=T(()=>u("b",null,"Última consulta",-1)),Vt=T(()=>u("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),Bt=[Vt],Ht={__name:"AsesoriasFormalizaciones",setup(F){const g=Ae(),o=Fe(),S=R(1),w=R(null),G=R([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),O=R(null),s=R(!1),m=R(!1),E=R(!1),i=R(!1),P=R(!1),L=R(!1),D=R(""),c=R([]),h=R(!1),_=R(0),t=R(!1),q=R([]),b=R(null),$=A=>qe(A).format("DD/MM/YYYY HH:mm A"),r=()=>{I()},M=()=>{D.value=D.value.replace(/\D/g,"")},I=()=>{D.value="",c.value=[],q.value=[],g.push({name:"asesorias-formalizaciones"})},H=()=>{if(O.value=null,O.value=c.value,!w.value)return V.warning("Seleccionar un tipo de servicio");w.value=="asesoria"&&(L.value=!0),w.value=="ruc10"&&(P.value=!0),w.value=="ruc20"&&N()},j=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],d=()=>{const A={rol:"solicitante",access:3,dni:D.value,type:"asesoria",typedoc:S.value==1?"dni":"ce"};g.push({name:"actualizar-persona",query:A})},Q=()=>{_.value=0,i.value=!0,m.value=!1},N=async()=>{try{t.value=!0;const A=await B({url:`formalization/list-ruc-20/${c.value.id}`,method:"GET"});if(A.length<1)return Q();E.value=A,m.value=!0}catch(A){console.log(A)}finally{t.value=!1}},te=async A=>{s.value=!0,_.value=A.task,b.value=A,setTimeout(()=>{s.value=!1,i.value=!0,m.value=!1},400)},re=async A=>{q.value=[];try{const k=await B({url:`/historial-formalization/${A.number_document}/${A.id}`,method:"GET"});q.value=[...q.value,k]}catch(k){console.log(k)}},K=async()=>{h.value=!0;const A=await B({url:`person/found/${S.value}/${D.value}`,method:"GET"});if(A.status==200)return c.value=A.data,h.value=!1},ue=async A=>{if(h.value=!0,!A)return V.warning("Ingresa un número de documento"),h.value=!1;if(S.value==1&&D.value.length<8){V.warning("El número de DNI está incompleto"),h.value=!1;return}const k=await B({url:`person/found/${S.value}/${D.value}`,method:"GET"});if(k.status==200)return c.value=k.data,h.value=!1;if(k.status===404){const W={type:S.value,access:"asesorias",number:D.value};g.push({name:"registrar-persona",query:W})}},ce=async()=>{o.query.typedoc=="ce"?S.value=2:S.value=1;const A=await B({url:`/applicant-new/${o.query.dni}`,method:"GET"});D.value=A.number_document,c.value=A,await re(A)};return De(()=>{o.query.dni&&ce()}),(A,k)=>{const W=p("a-radio"),de=p("a-radio-group"),me=p("a-input-search"),Z=p("a-card"),pe=p("a-select"),_e=p("a-button"),ve=p("a-step"),fe=p("a-steps"),ae=p("a-drawer"),ne=p("a-tag"),ye=p("a-spin"),he=p("a-modal");return e(),v(C,null,[u("div",ct,[dt,mt,l(Z,{class:"card-as"},{default:n(()=>[z(o).query.dni?(e(),y(z(Pe),{key:0,class:"ico-reload",onClick:r})):a("",!0),u("div",pt,[u("div",null,[_t,l(de,{value:S.value,"onUpdate:value":k[0]||(k[0]=x=>S.value=x),onChange:I,class:"radio-produce"},{default:n(()=>[l(W,{value:1},{default:n(()=>[U("DNI")]),_:1}),l(W,{value:2},{default:n(()=>[U("CE")]),_:1})]),_:1},8,["value"])]),u("div",null,[vt,l(me,{"enter-button":"BUSCAR",value:D.value,"onUpdate:value":k[1]||(k[1]=x=>D.value=x),placeholder:"",loading:h.value,onSearch:ue,onInput:M,class:"search-produce",maxlength:S.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),u("div",ft,[c.value.length!=0?(e(),y(Z,{key:0,class:"card-as"},{default:n(()=>{var x,X,oe;return[u("div",yt,[ht,l(z($e),{class:"ico-edit",onClick:d})]),u("div",gt,[bt,u("span",null,f(c.value.lastname)+" "+f(c.value.middlename)+", "+f(c.value.name),1),kt,u("span",null,[u("span",null,f(c.value.phone?c.value.phone:"-"),1)]),xt,u("span",null,f(c.value.email?c.value.email:"-"),1),St,u("b",null,f((x=c.value)==null?void 0:x.idadvisory.length),1),Ut,u("div",It,[u("b",null,f((X=c.value)==null?void 0:X.idformalization20.length),1)]),wt,u("b",null,f((oe=c.value)==null?void 0:oe.idformalization10.length),1)])]}),_:1})):a("",!0),c.value.length!=0?(e(),y(Z,{key:1,class:"card-as"},{default:n(()=>[Ct,u("div",Rt,[l(pe,{style:{"min-width":"200px"},value:w.value,"onUpdate:value":k[2]||(k[2]=x=>w.value=x),options:G.value},null,8,["value","options"]),l(_e,{class:"btn-produce",type:"primary",onClick:H},{default:n(()=>[U("REGISTRAR")]),_:1})])]),_:1})):a("",!0)]),c.value.length!=0?(e(),y(Z,{key:0,class:"card-as"},{default:n(()=>[At,l(ut,{info:c.value},null,8,["info"])]),_:1})):a("",!0)]),u("section",null,[l(ae,{width:"510",title:"Formalización con RUC 20",open:i.value,"onUpdate:open":k[6]||(k[6]=x=>i.value=x),placement:"right"},{default:n(()=>[l(fe,{current:_.value,size:"small",class:"steps"},{default:n(()=>[(e(),v(C,null,Y(j,x=>l(ve,{key:x.title,title:x.title},null,8,["title"])),64))]),_:1},8,["current"]),u("div",Ft,[_.value==0?(e(),y(Se,{key:0,info:O.value,onCloseDraw:k[3]||(k[3]=x=>(i.value=!1,K()))},null,8,["info"])):a("",!0),_.value==1?(e(),y(Ve,{key:1,info:O.value,itemSelectedF20:b.value,onCloseDraw:k[4]||(k[4]=x=>(i.value=!1,K()))},null,8,["info","itemSelectedF20"])):a("",!0),_.value==2?(e(),y(Je,{key:2,itemSelectedF20:b.value,onCloseDraw:k[5]||(k[5]=x=>(i.value=!1,K()))},null,8,["itemSelectedF20"])):a("",!0)])]),_:1},8,["open"]),l(ae,{title:"Formalización con RUC 10",open:P.value,"onUpdate:open":k[8]||(k[8]=x=>P.value=x),placement:"right"},{default:n(()=>[l(Ze,{info:c.value,onCloseDraw:k[7]||(k[7]=x=>(P.value=!1,K()))},null,8,["info"])]),_:1},8,["open"]),l(ae,{title:"Nueva asesoría",open:L.value,"onUpdate:open":k[10]||(k[10]=x=>L.value=x),placement:"right"},{default:n(()=>[l(at,{info:c.value,onCloseDraw:k[9]||(k[9]=x=>(L.value=!1,K()))},null,8,["info"])]),_:1},8,["open"]),l(he,{open:m.value,"onUpdate:open":k[11]||(k[11]=x=>m.value=x),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:n(()=>[l(ye,{spinning:s.value},{default:n(()=>[(e(!0),v(C,null,Y(E.value,(x,X)=>(e(),v("div",{key:X,onClick:oe=>te(x)},[u("div",$t,[x.task==0?(e(),v("div",zt,[Ot,U(),l(ne,{color:"error"},{default:n(()=>[U("Reserva de nombre")]),_:1})])):a("",!0),x.task==1?(e(),v("div",qt,[Et,U(),l(ne,{color:"warning"},{default:n(()=>[U("Acto constitutivo")]),_:1})])):a("",!0),x.task==2?(e(),v("div",Nt,[Tt,U(),l(ne,{color:"success"},{default:n(()=>[U("Formalizar")]),_:1})])):a("",!0),u("div",Pt,[Lt,u("span",null,[u("b",Mt,f(x.codesunarp),1)]),Gt,u("span",null,f($(x.updated_at)),1)])])],8,Dt))),128)),u("div",{class:"pendient pendient-btn btn-produce",onClick:Q},Bt)]),_:1},8,["spinning"])]),_:1},8,["open"])])],64)}}},Qt=J(Ht,[["__scopeId","data-v-3c49da96"]]);export{Qt as default};
