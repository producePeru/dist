import{_ as q}from"./icoexcel-a1d0882d.js";import{a as G,r as i,K as Z,Q as K,l as Q,d as g,o as l,e as I,f as u,q as k,c as R,w as p,F as f,L as X,h as Y,m as J,j as c,t as m,v as x,s as w,p as W,k as ee}from"./index-1d39f797.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";const ae=v=>(W("data-v-b4d1c771"),v=v(),ee(),v),ie={class:"header-rep"},oe={class:"filters"},de=ae(()=>u("img",{width:"20",style:{"margin-right":"6px"},src:q},null,-1)),ne={class:"paginator"},U=20,le={__name:"AsesoriasLista",setup(v){const D="https://apituempresa.soporte-pnte.com/api/v1",B="http://127.0.0.1:8000/api/v1",F=window.location.hostname=="127.0.0.1"?B:D,O=G.get("token"),z=i([]),y=i(!1),S=i(!1),N=i(0),s=i({page:0}),d=i("asesorias"),T=i(1200),E=i(window.innerHeight-100),b=()=>{E.value=window.innerHeight-315};Z(()=>{window.removeEventListener("resize",b)});const _=i([]),L=i([{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"Fecha",dataIndex:"ase_fecha",fixed:"left",align:"center",width:100},{title:"Asesor",dataIndex:"reg_nombres",width:200},{title:"Solicitante Apellidos",dataIndex:"sol_apellidos",width:180},{title:"Solicitante Nombres",dataIndex:"sol_nombres",width:180},{title:"Solicitante género",dataIndex:"sol_genero",width:140,align:"center"},{title:"Solicitante discapacidad",dataIndex:"sol_discapacidad",width:176,align:"center"},{title:"Solicitante telf.",dataIndex:"sol_telefono",width:120,align:"center"},{title:"Solicitante correo",dataIndex:"sol_correo",width:180},{title:"Supervisor",dataIndex:"misupervisor",width:200},{title:"Región",dataIndex:"mype_region",width:140},{title:"Provincia",dataIndex:"mype_provincia",width:160},{title:"Distrito",dataIndex:"mype_distrito",width:160},{title:"Componente",dataIndex:"componente",width:200},{title:"Tema",dataIndex:"tema_componente",width:180},{title:"Modalidad",dataIndex:"modality",width:120,align:"center"}]),M=i([{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"Fecha",dataIndex:"ase_fecha",fixed:"left",align:"center",width:100},{title:"Asesor",dataIndex:"reg_nombres",width:200},{title:"Solicitante Apellidos",dataIndex:"sol_apellidos",width:180},{title:"Solicitante Nombres",dataIndex:"sol_nombres",width:180},{title:"Solicitante género",dataIndex:"sol_genero",width:140,align:"center"},{title:"Solicitante discapacidad",dataIndex:"sol_discapacidad",width:176,align:"center"},{title:"Solicitante telf.",dataIndex:"sol_telefono",width:120,align:"center"},{title:"Solicitante correo",dataIndex:"sol_correo",width:180},{title:"Supervisor",dataIndex:"misupervisor",width:180},{title:"Región",dataIndex:"mype_region",width:130},{title:"Provincia",dataIndex:"mype_provincia",width:180},{title:"Distrito",dataIndex:"mype_distrito",width:180},{title:"Detalle del trámite",dataIndex:"detalle_tramite",width:180},{title:"Sector económico",dataIndex:"sector_economico",width:180},{title:"Actividad comercial",dataIndex:"atividad_comercial",width:180},{title:"Modalidad",dataIndex:"modality",width:120,align:"center"}]),$=i([{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"Fecha",dataIndex:"ase_fecha",fixed:"left",align:"center",width:100},{title:"Asesor",dataIndex:"reg_nombres",width:180},{title:"Solicitante Apellidos",dataIndex:"sol_apellidos",width:180},{title:"Solicitante Nombres",dataIndex:"sol_nombres",width:180},{title:"Solicitante género",dataIndex:"sol_genero",width:140,align:"center"},{title:"Solicitante discapacidad",dataIndex:"sol_discapacidad",width:176,align:"center"},{title:"Solicitante telf.",dataIndex:"sol_telefono",width:120,align:"center"},{title:"Solicitante correo",dataIndex:"sol_correo",width:180},{title:"Supervisor",dataIndex:"misupervisor",width:180},{title:"Tipo de formalización",dataIndex:"tipo_formalizacion",width:130},{title:"Sector económico",dataIndex:"sector_economico",width:130},{title:"Actividad comercial",dataIndex:"atividad_comercial",width:160},{title:"Región",dataIndex:"mype_region",width:130},{title:"Provincia",dataIndex:"mype_provincia",width:180},{title:"Distrito",dataIndex:"mype_distrito",width:180},{title:"Dirección",dataIndex:"mype_direccion",width:230},{title:"Nombre empresa",dataIndex:"mype_nombre",width:180},{title:"Régimen",dataIndex:"tipo_regimen",width:80,align:"center"},{title:"Número de notaría",dataIndex:"numero_envio_notaria",width:140},{title:"Notaría",dataIndex:"notaria",width:150},{title:"Modalidad",dataIndex:"modality",width:120,align:"center"},{title:"RUC",dataIndex:"ruc",width:100,align:"center"}]),P=a=>{s.value.page=a,h()},V=async()=>{S.value=!0;const a={};let e="",r="";d.value=="asesorias"&&(e="download-asesorias",r="asesorias.xlsx"),d.value=="ruc10"&&(e="download-formalizations-10",r="formalizacionesRUC10.xlsx"),d.value=="ruc20"&&(e="download-formalizations-20",r="formalizacionesRUC20.xlsx");try{const{data:o}=await X.post(`${F}/${e}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${O}`},responseType:"blob"}),A=new Blob([o]),C=window.URL.createObjectURL(A),t=document.createElement("a");t.href=C,t.download=r,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch{Y.error("Error")}finally{S.value=!1}},h=async a=>{try{y.value=!0;let e="/asesorias";_.value=L.value,a=="asesorias"&&(s.value.page=0,d.value=a,_.value=L.value,e="/asesorias"),a=="ruc10"&&(s.value.page=0,d.value=a,_.value=M.value,e="/formalizations-10"),a=="ruc20"&&(s.value.page=0,d.value=a,_.value=$.value,e="/formalizations-20");let r=s.value.page==0?"":s.value;const o=await J({url:e,method:"GET",params:r});z.value=o.data,N.value=o.total}catch(e){console.error("Error de red:",e)}finally{y.value=!1}},H=K(()=>a=>((s.value.page==0?1:s.value.page)-1)*U+a+1);return Q(()=>{h(),window.addEventListener("resize",b),b()}),(a,e)=>{const r=g("a-button"),o=g("a-tag"),A=g("a-table"),C=g("a-pagination");return l(),I(f,null,[u("div",null,[u("div",ie,[u("h3",{class:k({hdactive:d.value=="asesorias"}),onClick:e[0]||(e[0]=t=>h("asesorias"))},"ASESORÍAS",2),u("h3",{class:k({hdactive:d.value=="ruc10"}),onClick:e[1]||(e[1]=t=>h("ruc10"))},"FORMALIZACIONES RUC 10",2),u("h3",{class:k({hdactive:d.value=="ruc20"}),onClick:e[2]||(e[2]=t=>h("ruc20"))},"FORMALIZACIONES RUC 20",2)]),u("div",oe,[R(r,{onClick:V,loading:S.value},{default:p(()=>[de,c(" DESCARGAR ")]),_:1},8,["loading"])]),R(A,{bordered:"",scroll:{x:T.value,y:E.value},class:"ant-table-striped",columns:_.value,"data-source":z.value,pagination:!1,loading:y.value,size:"small"},{bodyCell:p(({column:t,record:n,index:j})=>[t.dataIndex=="idx"?(l(),I(f,{key:0},[c(m(H.value(j)),1)],64)):x("",!0),t.dataIndex=="solName"?(l(),I(f,{key:1},[c(m(n.person.last_name)+" "+m(n.person.middle_name)+", "+m(n.person.name),1)],64)):x("",!0),t.dataIndex==="sol_discapacidad"?(l(),w(o,{key:2,color:n.sol_discapacidad=="NO"?"blue":"pink"},{default:p(()=>[c(m(n.sol_discapacidad),1)]),_:2},1032,["color"])):x("",!0),t.dataIndex==="sol_genero"?(l(),w(o,{key:3,class:"uppercase",color:n.sol_genero=="H"?"default":"error"},{default:p(()=>[c(m(n.sol_genero),1)]),_:2},1032,["color"])):x("",!0),t.dataIndex==="modality"?(l(),I(f,{key:4},[n.modalidad==0?(l(),w(o,{key:0,color:"orange"},{default:p(()=>[c("PRESENCIAL")]),_:1})):n.modalidad==1?(l(),w(o,{key:1,color:"green"},{default:p(()=>[c("VIRTUAL")]),_:1})):(l(),w(o,{key:2},{default:p(()=>[c("-")]),_:1}))],64)):x("",!0)]),_:1},8,["scroll","columns","data-source","loading"])]),u("div",ne,[R(C,{size:"small",total:N.value,pageSize:U,onChange:P,showSizeChanger:!1,defaultCurrent:2},null,8,["total"])])],64)}}},ue=te(le,[["__scopeId","data-v-b4d1c771"]]);export{ue as default};
