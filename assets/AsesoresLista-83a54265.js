import{E as K,r as f,a as Q,b as p,o as l,v as m,w as i,c as u,e as A,d as $,F as M,z as ee,h as I,q as _,G as ae,t as Y,i as O,N as B,m as H,M as re,I as P,H as be,j as ie,f as ye,U as he,J as we,K as Se}from"./index-07516d46.js";import{u as te}from"./selectes-f152b9e3.js";import"./es-832d8edb.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{f as xe}from"./nuevoUsuario-39eedf3b.js";import{M as De}from"./MoreOutlined-b841f8ea.js";const Ue={email:{type:"iText",label:"Correo",name:"email",required:!1,email:"email",message:"Escribe el correo del usuario",disabled:!0},documentnumber:{type:"iText",label:"Número de DNI",name:"documentnumber",required:!0,message:"Número de DNI",max:8,disabled:!1},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el apellido paterno"},lastname:{type:"iText",label:"Apellido paterno",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"Apellido materno",name:"middlename",required:!0,message:"Escribe el apellido paterno"},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!1,message:"año-mes-día",placeholder:"año-mes-día"},phone:{type:"iText",label:"Ingresar número celular",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"Género",name:"gender_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},cde_id:{type:"iSelect",label:"CDE",name:"cde_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},office_id:{type:"iSelect",label:"Oficina",name:"office_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0}};const Ee={class:"grid-profile"},ke="DD/MM/YYYY",Re={__name:"DrawerEditarDatosAsesor",props:["record"],emits:["closeDraw"],setup(W,{emit:k}){K.locale("es");const r=te(),h=JSON.parse(localStorage.getItem("profile")),R=k;r.$patch({genders:r.genders}),r.$patch({cdes:r.cdes}),r.$patch({Offices:r.Offices}),r.$patch({roles:r.roles}),r.$patch({supervisores:r.supervisores}),r.fetchGenders(),r.fetchCdes(),r.fetchOffices(),r.fetchRoles();const N=W,z=f(!0),t=f(!1),C=f(Ue),e=Q({name:null,lastname:null,middlename:null,birthday:null,sick:null,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:h.id}),F=c=>{var d;c&&(e.name=c.profile_name,e.lastname=c.profile_lastname,e.middlename=c.profile_middlename,e.documentnumber=c.profile_documentnumber,e.phone=c.profile_phone,e.gender_id=c.gender_id,e.cde_id=c.cde_id,e.office_id=c.office_id,e.email=c.email,c.profile_birthday&&(e.birthday=K(c.profile_birthday,"YYYY-MM-DD"))),(d=r.genders)!=null&&d.length&&(z.value=!1)},q=c=>{const d={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0};if(c===2)r.fetchSupervisores(),C.value={...C.value,supervisor_id:d};else{const{supervisor_id:y,...E}=C.value;C.value=E}},L=async()=>{t.value=!0;const c={name:e.name,lastname:e.lastname,middlename:e.middlename,birthday:e.birthday?K(e.birthday).format("YYYY-MM-DD"):null,sick:e.sick,phone:e.phone,gender_id:e.gender_id,cde_id:e.cde_id,office_id:e.office_id,user_id:h.id};try{const d=await B({url:`user/update/${N.record._id}`,method:"PUT",data:c});H.success(d.message),R("closeDraw")}catch(d){console.log("NOOo",d)}finally{t.value=!1}},G=()=>{H.error("Debes de completar todos los espacios requeridos")};return(c,d)=>{const y=p("a-select"),E=p("a-form-item"),g=p("a-input"),S=p("a-date-picker"),b=p("a-button"),U=p("a-form"),o=p("a-spin");return l(),m(o,{spinning:z.value},{default:i(()=>[u(U,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:L,onFinishFailed:G},{default:i(()=>[A("div",Ee,[(l(!0),$(M,null,ee(C.value,(s,v)=>(l(),$(M,{key:v},[s.type==="iSelect"?(l(),m(E,{key:0,class:"item-max",name:s.name,label:s.label,rules:[{required:s.required,message:s.message}]},{default:i(()=>[s.name=="gender_id"?(l(),m(y,{key:0,value:e[s.name],"onUpdate:value":w=>e[s.name]=w,options:I(r).genders},null,8,["value","onUpdate:value","options"])):_("",!0),s.name=="cde_id"?(l(),m(y,{key:1,value:e[s.name],"onUpdate:value":w=>e[s.name]=w,options:I(r).cdes},null,8,["value","onUpdate:value","options"])):_("",!0),s.name=="office_id"?(l(),m(y,{key:2,value:e[s.name],"onUpdate:value":w=>e[s.name]=w,options:I(r).Offices},null,8,["value","onUpdate:value","options"])):_("",!0),s.name=="role_id"?(l(),m(y,{key:3,value:e[s.name],"onUpdate:value":w=>e[s.name]=w,options:I(r).roles,onChange:q},null,8,["value","onUpdate:value","options"])):_("",!0),s.name=="supervisor_id"?(l(),m(y,{key:4,value:e[s.name],"onUpdate:value":w=>e[s.name]=w,options:I(r).supervisores},null,8,["value","onUpdate:value","options"])):_("",!0)]),_:2},1032,["name","label","rules"])):_("",!0),s.type==="iText"?(l(),m(E,{key:1,name:s.name,label:s.label,rules:[{required:s.required,message:s.message,type:s.email}]},{default:i(()=>[u(g,{value:e[s.name],"onUpdate:value":w=>e[s.name]=w,maxlength:s.max,disabled:s.disabled},null,8,["value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):_("",!0),s.type==="iDate"?(l(),m(E,{key:2,name:s.name,label:s.label,rules:[{required:s.required,message:s.message}]},{default:i(()=>[u(S,{locale:I(ae),value:e[s.name],"onUpdate:value":w=>e[s.name]=w,style:{width:"100%"},format:ke,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):_("",!0)],64))),128))]),A("div",null,Y(F(N.record)),1),u(E,null,{default:i(()=>[u(b,{class:"btn-produce",type:"primary","html-type":"submit",loading:t.value},{default:i(()=>d[0]||(d[0]=[O("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},Ae=ne(Re,[["__scopeId","data-v-f5cfd002"]]);const Ie={class:"grid-item"},Ne="DD/MM/YYYY",Oe={__name:"DrawerRegistrarAsesor",setup(W){K.locale("es");const k=JSON.parse(localStorage.getItem("profile")),r=te();r.$patch({genders:r.genders}),r.$patch({cdes:r.cdes}),r.$patch({Offices:r.Offices}),r.$patch({roles:r.roles}),r.$patch({supervisores:r.supervisores}),r.fetchGenders(),r.fetchCdes(),r.fetchOffices(),r.fetchRoles();const h=f(xe),R=f(null),N=f(!1),z=f(!1),t=f(!1);f(!1),f(null);const C=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],e=Q({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:k.user_id,email:null,password:null}),F=()=>{e.name=null,e.lastname=null,e.middlename=null,e.documentnumber=null,R.value=null,e.phone=null,e.gender_id=null,e.cde_id=null,e.office_id=null,e.email=null,e.password=null,e.role_id=null},q=g=>{e[g]=e[g].replace(/\D/g,"")},L=(g,S)=>{const b=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(b)},G=g=>{const S={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},b={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},U={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},o={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},s={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(g===2){r.fetchSupervisores(),h.value={...h.value,supervisor_id:S};const{city:v,province:w,district:T,address:n,...x}=h.value;h.value=x}else if(g===7){h.value={...h.value,city:b,province:U,district:o,address:s};const{supervisor_id:v,...w}=h.value;h.value=w,h.value.cde_id.required=!1}else{let{city:v,province:w,district:T,address:n,supervisor_id:x,...a}=h.value;h.value=a}},c=async()=>{N.value=!0,e.email=e.name.replace(/\s/g,"").toLowerCase()+e.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",e.password=e.documentnumber,e.birthday=R.value?K(R.value).format("YYYY-MM-DD"):null;try{const g=await B({url:"user/create",method:"POST",data:e});re.success({title:"La cuenta ha sido registrada",content:P("div",{},[P("br"),P("p",`Correo: ${e.email}`),P("p","Contraseña es el número de DNI ingresado")]),onOk(){F(),H.success(g.message);const{supervisor_id:S,...b}=h.value;h.value=b}})}catch{H.error("No se pudo registrar este usuario")}finally{N.value=!1}},d=()=>{H.error("Debes de completar todos los espacios requeridos")},y=async g=>{console.log("Hello",g)},E=()=>{e.document_number=e.document_number.replace(/\D/g,"")};return(g,S)=>{const b=p("a-select"),U=p("a-form-item"),o=p("a-input-search"),s=p("a-input"),v=p("a-date-picker"),w=p("a-button"),T=p("a-form");return l(),$("div",null,[u(T,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:c,onFinishFailed:d},{default:i(()=>[A("div",Ie,[(l(!0),$(M,null,ee(h.value,(n,x)=>(l(),$(M,{key:x},[n.type==="iSelect"?(l(),m(U,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:i(()=>[n.name=="gender_id"?(l(),m(b,{key:0,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,options:I(r).genders},null,8,["value","onUpdate:value","options"])):_("",!0),n.name=="cde_id"?(l(),m(b,{key:1,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,options:I(r).cdes},null,8,["value","onUpdate:value","options"])):_("",!0),n.name=="role_id"?(l(),m(b,{key:2,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,options:C,onChange:G},null,8,["value","onUpdate:value"])):_("",!0),n.name=="supervisor_id"?(l(),m(b,{key:3,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,options:I(r).supervisores},null,8,["value","onUpdate:value","options"])):_("",!0),n.name=="office_id"?(l(),m(b,{key:4,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,"show-search":"",options:I(r).Offices,"filter-option":L},null,8,["value","onUpdate:value","options"])):_("",!0)]),_:2},1032,["name","label","rules"])):_("",!0),n.type==="iSearch"?(l(),m(U,{key:1,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message,max:n.max}]},{default:i(()=>[u(o,{maxlength:15,loading:z.value,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,onSearch:y,onInput:E,disabled:t.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):_("",!0),n.type==="iText"?(l(),m(U,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email}]},{default:i(()=>[n.name=="documentnumber"?(l(),m(s,{key:0,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,maxlength:n.max,onInput:S[0]||(S[0]=a=>q("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):n.name=="phone"?(l(),m(s,{key:1,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,maxlength:n.max,onInput:S[1]||(S[1]=a=>q("phone"))},null,8,["value","onUpdate:value","maxlength"])):(l(),m(s,{key:2,value:e[n.name],"onUpdate:value":a=>e[n.name]=a,maxlength:n.max,disabled:n.disabled},null,8,["value","onUpdate:value","maxlength","disabled"]))]),_:2},1032,["name","label","rules"])):_("",!0),n.type==="iDate"?(l(),m(U,{key:3,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:i(()=>[u(v,{locale:I(ae),value:R.value,"onUpdate:value":S[2]||(S[2]=a=>R.value=a),style:{width:"100%"},format:Ne},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):_("",!0)],64))),128))]),u(U,null,{default:i(()=>[u(w,{class:"btn-produce",type:"primary","html-type":"submit",loading:N.value},{default:i(()=>S[3]||(S[3]=[O("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Ce=ne(Oe,[["__scopeId","data-v-1f072082"]]),qe={agentname:{type:"iText",label:"ASESOR AGENTE",name:"agentname",required:!0,message:"Seleccionar una notaría",disabled:!1},name:{type:"iText",label:"NOMBRE ASESOR",name:"name",required:!0,message:"Ingresar los nombres"},lastname:{type:"iText",label:"APELLIDO PATERNO ASESOR",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"APELLIDO MATERNO ASESOR",name:"middlename",required:!0,message:"Escribe el apellido paterno"},documentnumber:{type:"iText",label:"NÚMERO DE DNI ASESOR",name:"documentnumber",required:!0,message:"Ingresa el número de DNI",max:8},birthday:{type:"iDate",label:"FECHA DE NACIMIENTO - día/mes/año",name:"birthday",required:!1,message:"año-mes-día"},phone:{type:"iText",label:"NÚMERO CELULAR",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0}};const Te={class:"grid-item"},$e={class:"select-notaries"},Fe={class:"name"},Le={class:"city"},Ye={class:"address"},Me="DD/MM/YYYY",Pe={__name:"DrawerRegistrarAsesorAgente",setup(W){K.locale("es");const k=te();JSON.parse(localStorage.getItem("profile")),k.$patch({genders:k.genders}),k.$patch({cdes:k.cdes}),k.fetchGenders(),k.fetchCdes();const r=f([]),h=f(qe),R=f(null);be();const N=f(!1),z=[{label:"Notaria",value:7}],t=Q({}),C=(c,d)=>{const y=c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),E=d.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),g=d.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),S=d.province.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),b=d.district.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return E.includes(y)||g.includes(y)||S.includes(y)||b.includes(y)},e=async()=>{try{const{data:c}=await ye({url:"public/notaries-filters",method:"GET"});r.value=c.map(d=>({value:d.id,name:d.name,city:d.city.name,province:d.province.name,district:d.district.name,address:d.address}))}catch(c){console.error("Error de red:",c)}},F=()=>{t.agentname=null,t.name=null,t.lastname=null,t.middlename=null,t.documentnumber=null,R.value=null,t.phone=null,t.gender_id=null,t.cde_id=null,t.office_id=null,t.email=null,t.password=null,t.notary_id=null},q=c=>{t[c]=t[c].replace(/\D/g,"")},L=async()=>{N.value=!0,t.email=`${t.name.replace(/\s/g,"").toLowerCase()}${t.lastname.replace(/\s/g,"").toLowerCase()}@pnte.com`,t.password=t.documentnumber,t.birthday=R.value?K(R.value).format("YYYY-MM-DD"):null;try{const c={email:t.email,documentnumber:t.documentnumber,password:t.documentnumber},d=await B({url:"user/register-user",method:"POST",data:c});if(d.status!==200)throw new Error("User registration failed");const y={name:t.name,lastname:t.lastname,middlename:t.middlename,documentnumber:t.documentnumber,birthday:t.birthday,phone:t.phone,gender_id:t.gender_id,cde_id:12,agentname:t.agentname,office_id:5,user_id:d.data.id,notary_id:null};if((await B({url:"user/register-profile",method:"POST",data:y})).status!==200)throw new Error("Profile registration failed");const g={role_id:13,user_id:d.data.id,documentnumber:t.documentnumber};if((await B({url:"user/register-roles",method:"POST",data:g})).status!==200)throw new Error("Role registration failed");const b={user_id:d.data.id},U=await B({url:"user/register-views",method:"POST",data:b});re.success({title:"La cuenta ha sido registrada",content:P("div",{},[P("br"),P("p",`Correo: ${t.documentnumber} o ${t.email}`),P("p","Contraseña es el número de DNI ingresado")]),onOk(){F()}})}catch(c){H.error("No se pudo registrar este usuario"),console.log("error",c)}finally{N.value=!1}},G=()=>{H.error("Debes de completar todos los espacios requeridos")};return ie(()=>{e()}),(c,d)=>{const y=p("a-select"),E=p("a-form-item"),g=p("a-input"),S=p("a-date-picker"),b=p("a-button"),U=p("a-form");return l(),m(U,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:L,onFinishFailed:G},{default:i(()=>[A("div",Te,[(l(!0),$(M,null,ee(h.value,(o,s)=>(l(),$(M,{key:s},[o.type==="iSelect"?(l(),m(E,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:i(()=>[o.name=="notary_id"?(l(),m(y,{key:0,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,options:r.value,"option-label-prop":"name","show-search":"","filter-option":C},{option:i(({value:v,name:w,city:T,province:n,district:x,address:a})=>[A("div",$e,[A("span",Fe,Y(w),1),A("span",Le,Y(T)+" - "+Y(n)+" - "+Y(x),1),A("span",Ye,Y(a),1)])]),_:2},1032,["value","onUpdate:value","options"])):_("",!0),o.name=="gender_id"?(l(),m(y,{key:1,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,options:I(k).genders},null,8,["value","onUpdate:value","options"])):_("",!0),o.name=="cde_id"?(l(),m(y,{key:2,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,options:I(k).cdes},null,8,["value","onUpdate:value","options"])):_("",!0),o.name=="role_id"?(l(),m(y,{key:3,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,options:z},null,8,["value","onUpdate:value"])):_("",!0),o.name=="supervisor_id"?(l(),m(y,{key:4,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,options:I(k).supervisores},null,8,["value","onUpdate:value","options"])):_("",!0)]),_:2},1032,["name","label","rules"])):_("",!0),o.type==="iText"?(l(),m(E,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email}]},{default:i(()=>[o.name=="documentnumber"?(l(),m(g,{key:0,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,maxlength:o.max,onInput:d[0]||(d[0]=v=>q("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):o.name=="phone"?(l(),m(g,{key:1,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,maxlength:o.max,onInput:d[1]||(d[1]=v=>q("phone"))},null,8,["value","onUpdate:value","maxlength"])):(l(),m(g,{key:2,value:t[o.name],"onUpdate:value":v=>t[o.name]=v,maxlength:o.max,disabled:o.disabled},null,8,["value","onUpdate:value","maxlength","disabled"]))]),_:2},1032,["name","label","rules"])):_("",!0),o.type==="iDate"?(l(),m(E,{key:2,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:i(()=>[u(S,{locale:I(ae),value:R.value,"onUpdate:value":d[2]||(d[2]=v=>R.value=v),style:{width:"100%"},format:Me},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):_("",!0)],64))),128))]),u(E,null,{default:i(()=>[u(b,{class:"btn-produce",type:"primary","html-type":"submit",loading:N.value},{default:i(()=>d[3]||(d[3]=[O("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}},ze=ne(Pe,[["__scopeId","data-v-99fee411"]]);const Ge=["onClick"],Ve=["onClick"],Be={class:"paginator"},We={__name:"AsesoresLista",setup(W){const k=f(50),r=f([]),h=f(!1),R=f(0),N=f({page:1}),z=f("user/list-asesories"),t=f(1200),C=f(window.innerHeight-100),e=f(!1),F=f(!1),q=f(!1),L=f(!1),G=f(null),c=f(null),d=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOMBRES",dataIndex:"profile_name",width:160},{title:"APELLIDOS",dataIndex:"lastname",width:160},{title:"DNI",dataIndex:"profile_documentnumber",width:100,align:"center"},{title:"CELULAR",dataIndex:"profile_phone",width:100,align:"center"},{title:"CDE",dataIndex:"cde_name",width:160},{title:"FECHA NAC.",dataIndex:"profile_birthday",width:100,align:"center"},{title:"GÉNERO",dataIndex:"gender",width:120,align:"center"},{title:"OFICINA",dataIndex:"office_name",width:100,align:"center"},{title:"ROL",dataIndex:"role",width:140,align:"center"},{title:"CUENTA",dataIndex:"email",width:180},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],y=()=>{C.value=window.innerHeight-300},E=x=>{e.value=!0,G.value=x},g=x=>{F.value=!0,c.value=x},S=()=>{e.value=!1,T()},b=Q({search:""}),U=Q({password:""}),o=async()=>{const x={id:c.value.user_id,password:U.password};try{const a=await B({url:"user/update-password",method:"POST",data:x});a.status===200&&(H.success(a.message),U.password=null,F.value=!1)}catch(a){console.error("Failed to update record",a)}},s=()=>{T({search:b.search})},v=()=>{b.search||T()},w=x=>{N.value.page=x,T()},T=async x=>{try{h.value=!0;const a=N.value.page===1?"":N.value,J=x?{...a,...x}:a,j=await B({url:z.value,method:"GET",params:J});r.value=j.data,R.value=j.total,k.value=j.per_page}catch(a){console.error("Error de red:",a)}finally{h.value=!1}},n=he(()=>x=>(N.value.page-1)*k.value+x+1);return ie(()=>{T(),window.addEventListener("resize",y),y()}),(x,a)=>{const J=p("a-button"),j=p("a-col"),oe=p("a-input"),de=p("a-input-group"),ue=p("a-row"),X=p("a-tag"),le=p("a-menu-item"),me=p("a-menu"),ce=p("a-dropdown"),pe=p("a-table"),_e=p("a-pagination"),Z=p("a-drawer"),se=p("a-form-item"),ve=p("a-form");return l(),$(M,null,[A("div",null,[a[18]||(a[18]=A("h3",{class:"title-produce"},"LISTA DE USUARIOS - UGO",-1)),u(ue,{style:{margin:"1rem 0"}},{default:i(()=>[u(j,{xs:24,md:12,lg:18},{default:i(()=>[u(J,{type:"primary",onClick:a[0]||(a[0]=D=>q.value=!0),style:{"background-color":"#e20613"}},{default:i(()=>a[11]||(a[11]=[O("ASESOR PNTE")])),_:1}),u(J,{type:"primary",onClick:a[1]||(a[1]=D=>L.value=!0),style:{"background-color":"#00952f","margin-left":".8rem"}},{default:i(()=>a[12]||(a[12]=[O("ASESOR AGENTE")])),_:1})]),_:1}),u(j,{xs:24,md:12,lg:6},{default:i(()=>[u(de,{compact:""},{default:i(()=>[u(oe,{value:b.search,"onUpdate:value":a[2]||(a[2]=D=>b.search=D),style:{width:"calc(100% - 80px)"},onInput:v,onKeyup:we(s,["enter"])},null,8,["value"]),u(J,{type:"primary",disabled:b.search==="",onClick:s},{default:i(()=>a[13]||(a[13]=[O("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),u(pe,{bordered:"",scroll:{x:t.value,y:C.value},class:"table-users",columns:d,"data-source":r.value,pagination:!1,loading:h.value,size:"small"},{bodyCell:i(({column:D,record:V,index:fe})=>[D.dataIndex==="idx"?(l(),$(M,{key:0},[O(Y(n.value(fe)),1)],64)):_("",!0),D.dataIndex==="lastname"?(l(),$(M,{key:1},[O(Y(V.profile_lastname)+" "+Y(V.profile_middlename),1)],64)):_("",!0),D.dataIndex==="role"?(l(),$(M,{key:2},[V.role_user==1?(l(),m(X,{key:0,color:"blue"},{default:i(()=>a[14]||(a[14]=[O("SUPERVISOR")])),_:1})):_("",!0),V.role_user==2?(l(),m(X,{key:1,color:"red"},{default:i(()=>a[15]||(a[15]=[O("ASESOR PNTE")])),_:1})):_("",!0),V.role_user==7?(l(),m(X,{key:2,color:"purple"},{default:i(()=>a[16]||(a[16]=[O("ASESOR - NOTARÍA")])),_:1})):_("",!0),V.role_user==13?(l(),m(X,{key:3,color:"green"},{default:i(()=>a[17]||(a[17]=[O("ASESOR - AGENTE")])),_:1})):_("",!0)],64)):_("",!0),D.dataIndex=="actions"?(l(),m(ce,{key:3,trigger:["click"]},{overlay:i(()=>[u(me,null,{default:i(()=>[u(le,null,{default:i(()=>[A("a",{onClick:ge=>E(V)},"Editar datos",8,Ge)]),_:2},1024),u(le,null,{default:i(()=>[A("a",{onClick:ge=>g(V)},"Resetear contraseña",8,Ve)]),_:2},1024)]),_:2},1024)]),default:i(()=>[A("a",{class:"ant-dropdown-link",onClick:a[3]||(a[3]=Se(()=>{},["prevent"]))},[u(J,{shape:"circle",icon:P(I(De)),size:"small"},null,8,["icon"])])]),_:2},1024)):_("",!0)]),_:1},8,["scroll","data-source","loading"])]),A("div",Be,[A("span",null,[u(X,{color:"blue"},{default:i(()=>[A("b",null,Y(R.value),1)]),_:1}),a[19]||(a[19]=O("Usuarios"))]),u(_e,{size:"small",total:R.value,pageSize:k.value,onChange:w,showSizeChanger:!1},null,8,["total","pageSize"])]),u(Z,{width:"550",open:e.value,"onUpdate:open":a[4]||(a[4]=D=>e.value=D),class:"draw",title:"Editar datos del asesor",placement:"right"},{default:i(()=>[u(Ae,{onCloseDraw:S,record:G.value},null,8,["record"])]),_:1},8,["open"]),u(Z,{width:"550",open:q.value,"onUpdate:open":a[6]||(a[6]=D=>q.value=D),class:"draw",title:"REGISTRAR UN ASESOR",placement:"right"},{default:i(()=>[u(Ce,{onCloseDraw:a[5]||(a[5]=D=>q.value=!1)})]),_:1},8,["open"]),u(Z,{width:"550",open:L.value,"onUpdate:open":a[8]||(a[8]=D=>L.value=D),class:"draw",title:"REGISTRAR UN ASESOR AGENTE",placement:"right"},{default:i(()=>[u(ze,{onCloseDraw:a[7]||(a[7]=D=>L.value=!1)})]),_:1},8,["open"]),u(Z,{width:"350",open:F.value,"onUpdate:open":a[10]||(a[10]=D=>F.value=D),class:"draw",title:"Cambiar contraseña",placement:"right"},{default:i(()=>[u(ve,{layout:"vertical",model:U,name:"basic",autocomplete:"off",onFinish:o,onFinishFailed:x.onFinishFailed},{default:i(()=>[u(se,{label:"Contraseña",name:"password",rules:[{required:!0,message:"Escribir contraseña"}]},{default:i(()=>[u(oe,{value:U.password,"onUpdate:value":a[9]||(a[9]=D=>U.password=D)},null,8,["value"])]),_:1}),u(se,null,{default:i(()=>[u(J,{type:"primary","html-type":"submit"},{default:i(()=>a[20]||(a[20]=[O("CAMBIAR")])),_:1})]),_:1})]),_:1},8,["model","onFinishFailed"])]),_:1},8,["open"])],64)}}};export{We as default};
