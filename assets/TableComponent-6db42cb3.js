import{c as l,A as de,l as y,a9 as D,r as _,G as ce,Z as pe,j as me,b as i,o as n,d as v,e as s,x as b,w as u,h as a,a7 as ve,t as h,i as E,y as p,q as F,L as fe,F as I,aa as P,O as ge}from"./index-d009a9fe.js";import{_ as ye}from"./icoexcel-1b303edf.js";import{u as _e}from"./selectes-a9db2795.js";import"./es-ef39e894.js";import{M as be}from"./MoreOutlined-75fa9444.js";var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const Se=he;function T(d){for(var m=1;m<arguments.length;m++){var c=arguments[m]!=null?Object(arguments[m]):{},t=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(c).filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable}))),t.forEach(function(g){we(d,g,c[g])})}return d}function we(d,m,c){return m in d?Object.defineProperty(d,m,{value:c,enumerable:!0,configurable:!0,writable:!0}):d[m]=c,d}var N=function(m,c){var t=T({},m,c.attrs);return l(de,T({},t,{icon:Se}),null)};N.displayName="SyncOutlined";N.inheritAttrs=!1;const Ce=N;const Oe={class:"table-component"},ke={class:"title-produce"},xe={key:1,class:"title-produce"},ze={class:"table-filters"},Ae={key:0,class:"filter-year"},De={key:1,class:"filter-type"},Ee={key:2,class:"filter-type"},Ne={key:3,class:"filter-offices"},Le={key:4,class:"filter-range-date"},Ue={key:5,class:"filter-asesor"},Re={key:6,class:"filter-asesor"},Fe={key:7,class:"filter-asesor"},Ie={class:"filter-search"},Pe={key:1},Te={class:"paginator"},Be="DD/MM/YYYY",He={__name:"TableComponent",props:["title","bread","routeBack","btnUpdate","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator","handleCallFetchData"],setup(d,{emit:m}){y.locale("es");const c=_e();c.$patch({cities:c.cities}),c.fetchCities();const t=d,g=m,B=JSON.parse(localStorage.getItem("role"))||[],r=D("search"),L=D("loading"),j=D("loadingFile"),C=_(window.innerHeight-100),O=_({page:1}),M=_(1200),Y=_([{label:"Últimos 7 días",value:[y().add(-7,"d"),y()]},{label:"Últimos 14 días",value:[y().add(-14,"d"),y()]},{label:"Último mes",value:[y().add(-30,"d"),y()]}]),G=_([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),$=_([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),H=_([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),V=f=>B.some(e=>f.includes(e.id)),q=ce(()=>f=>(O.value.page-1)*t.pageSize+f+1),J=()=>{g("handleCallFetchData")},X=()=>{g("handleNew")},Z=async()=>{g("handleDownloadExcel")},Q=()=>{O.value.page=1,g("handleSearch",!0)},W=f=>{O.value.page=f,g("handlePaginator",f)},k=()=>{if(t.heightTable)return C.value=window.innerHeight-t.heightTable;C.value=window.innerHeight-310},x=(f,e)=>{const z=f.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(z)};return pe(()=>{window.removeEventListener("resize",k)}),me(()=>{window.addEventListener("resize",k),k()}),(f,e)=>{const z=i("router-link"),A=i("a-breadcrumb-item"),K=i("a-breadcrumb"),w=i("a-button"),U=i("a-col"),ee=i("a-date-picker"),S=i("a-select"),te=i("a-range-picker"),ae=i("a-input"),le=i("a-row"),oe=i("a-menu"),ne=i("a-dropdown"),se=i("a-table"),re=i("a-tag"),ie=i("a-pagination");return n(),v(I,null,[s("div",Oe,[d.bread?(n(),b(K,{key:0},{default:u(()=>[l(A,null,{default:u(()=>[l(z,{to:d.routeBack},{default:u(()=>[l(a(ve)),e[10]||(e[10]=s("span",{class:"fs-13"}," Atrás",-1))]),_:1},8,["to"])]),_:1}),l(A,null,{default:u(()=>[s("h3",ke,h(t.title),1)]),_:1})]),_:1})):(n(),v("h3",xe,h(t.title),1)),l(le,{style:{margin:"1rem 0"}},{default:u(()=>[l(U,{xs:24,md:5},{default:u(()=>[t.new?(n(),b(w,{key:0,type:"primary",onClick:X,style:{"margin-right":".6rem"}},{default:u(()=>[E(h(t.textNuevo),1)]),_:1})):p("",!0),d.downloadExcel?p("",!0):(n(),b(w,{key:1,class:"btn-excel",onClick:Z,loading:a(j),type:"primary"},{default:u(()=>e[11]||(e[11]=[s("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:ye},null,-1)])),_:1},8,["loading"])),d.btnUpdate?(n(),b(w,{key:2,style:{"margin-left":".6rem"},icon:F(a(Ce)),onClick:J},null,8,["icon"])):p("",!0)]),_:1}),l(U,{xs:24,md:19},{default:u(()=>[s("div",ze,[t.searchYear?(n(),v("div",Ae,[e[12]||(e[12]=s("small",null,"AÑO",-1)),l(ee,{allowClear:!1,value:a(r).year,"onUpdate:value":e[0]||(e[0]=o=>a(r).year=o),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):p("",!0),t.tipoformalizacion?(n(),v("div",De,[e[13]||(e[13]=s("small",null,"TIPO",-1)),l(S,{value:a(r).type,"onUpdate:value":e[1]||(e[1]=o=>a(r).type=o),options:$.value},null,8,["value","options"])])):p("",!0),t.tipoformalizacion?(n(),v("div",Ee,[e[14]||(e[14]=s("small",null,"TIPO CDE",-1)),l(S,{allowClear:!0,value:a(r).typeCdes,"onUpdate:value":e[2]||(e[2]=o=>a(r).typeCdes=o),options:G.value},null,8,["value","options"])])):p("",!0),t.tipooficina?(n(),v("div",Ne,[e[15]||(e[15]=s("small",null,"OFICINA",-1)),l(S,{value:a(r).offices,"onUpdate:value":e[3]||(e[3]=o=>a(r).offices=o),options:H.value},null,8,["value","options"])])):p("",!0),t.rangeDate?(n(),v("div",Le,[e[16]||(e[16]=s("small",null,"POR RANGO DE FECHAS",-1)),l(te,{value:a(r).range,"onUpdate:value":e[4]||(e[4]=o=>a(r).range=o),presets:Y.value,format:Be},null,8,["value","presets"])])):p("",!0),V([1,5])&&t.asesoresList?(n(),v("div",Ue,[e[17]||(e[17]=s("small",null,"POR ASESOR",-1)),t.asesoresList?(n(),b(S,{key:0,allowClear:!0,value:a(r).asesor,"onUpdate:value":e[5]||(e[5]=o=>a(r).asesor=o),placeholder:"Selecciona Asesor","show-search":"",options:t.asesoresList,"filter-option":x},null,8,["value","options"])):p("",!0)])):p("",!0),t.cityList?(n(),v("div",Re,[e[18]||(e[18]=s("small",null,"POR REGIÓN",-1)),l(S,{allowClear:!0,value:a(r).city_id,"onUpdate:value":e[6]||(e[6]=o=>a(r).city_id=o),placeholder:"Selecciona región","show-search":"",options:a(c).cities,"filter-option":x},null,8,["value","options"])])):p("",!0),t.othersList?(n(),v("div",Fe,[e[19]||(e[19]=s("small",null,"ORDENAR POR",-1)),l(S,{allowClear:!0,value:a(r).orderby,"onUpdate:value":e[7]||(e[7]=o=>a(r).orderby=o),placeholder:"Filtrador por:","show-search":"",options:t.othersList,"filter-option":x},null,8,["value","options"])])):p("",!0),s("div",Ie,[s("small",null,h(t.titleSearch),1),l(ae,{value:a(r).name,"onUpdate:value":e[8]||(e[8]=o=>a(r).name=o),placeholder:t.placeholderSearch},null,8,["value","placeholder"])]),l(w,{type:"primary",onClick:Q},{default:u(()=>[a(L)?(n(),b(a(fe),{key:0})):(n(),v("span",Pe,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),l(se,{bordered:"",scroll:{x:M.value,y:C.value},class:"table-pnte",columns:t==null?void 0:t.columns,"data-source":t==null?void 0:t.dataSource,pagination:!1,loading:a(L),size:"small"},{bodyCell:u(({column:o,record:R,index:ue})=>[o.dataIndex=="idx"?(n(),v(I,{key:0},[E(h(q.value(ue)),1)],64)):p("",!0),P(f.$slots,"data-cell",{column:o,record:R}),o.dataIndex=="actions"?(n(),b(ne,{key:1,trigger:["click"]},{overlay:u(()=>[l(oe,null,{default:u(()=>[P(f.$slots,"custom-options",{record:R})]),_:2},1024)]),default:u(()=>[s("a",{class:"ant-dropdown-link",onClick:e[9]||(e[9]=ge(()=>{},["prevent"]))},[l(w,{shape:"circle",icon:F(a(be)),size:"small"},null,8,["icon"])])]),_:2},1024)):p("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),s("div",Te,[s("span",null,[l(re,{color:"blue"},{default:u(()=>[s("b",null,h(t==null?void 0:t.total),1)]),_:1}),E(h(t.nameTotal),1)]),l(ie,{size:"small",total:t==null?void 0:t.total,pageSize:t.pageSize,onChange:W,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{He as _};
