import{g as G,r as p,k as q,b as u,o as b,y as H,w as n,e,c as l,d as x,t as v,i as U,$ as K,z as P,j as f,h as y,K as M,F as O,v as W}from"./index-3b1ed654.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{S as J}from"./SaveOutlined-8c0c9b2c.js";const Q={class:"modal-container"},X={key:0,class:"preview-card"},Y={class:"preview-header"},Z={class:"file-name"},ee={class:"video-wrapper"},oe=["src"],te={style:{"margin-bottom":"14px"}},ae={class:"char-count"},le={__name:"UploadVideoModal",props:{visible:{type:Boolean,default:!1}},emits:["close","uploaded"],setup(V,{emit:_}){const c=_,g=G.get("token"),C="https://apituempresa.soporte-pnte.com/api/",k="http://127.0.0.1:8000/api/",d=window.location.hostname=="localhost"?k:C,o=p(null),i=p(null),r=p(""),a=p(""),m=p(!1),h=()=>{o.value=null,i.value=null},I=s=>["video/mp4","video/webm","video/avi","video/quicktime"].includes(s.type)?!0:(y.error("Formato no permitido"),!1),j=s=>{const t=s.file.originFileObj;o.value=t,i.value=URL.createObjectURL(t)},z=()=>{$(),c("close")},F=async()=>{if(!o.value){y.error("Debe seleccionar un video");return}m.value=!0;const s=new FormData;s.append("video",o.value),s.append("title",r.value),s.append("description",a.value);try{const{data:t}=await M.post(`${d}google/drive-videos-pnte`,s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${g}`}});y.success("Video subido correctamente a Google Drive"),c("uploaded",t.data),$(),c("close")}catch(t){console.error(t),y.error("Error al subir el video")}finally{m.value=!1}},$=()=>{o.value=null,i.value=null,r.value="",a.value=""},S=async()=>{const s=await M.get(`${d}google/videos-pnte`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}});console.log("response",s)};return q(async()=>{await S()}),(s,t)=>{const A=u("a-upload-dragger"),D=u("a-button"),N=u("a-tooltip"),T=u("a-input"),R=u("a-textarea"),L=u("a-modal");return b(),H(L,{open:V.visible,onCancel:z,width:"500px",centered:"",footer:null,class:"video-modal"},{default:n(()=>{var E;return[e("div",Q,[t[5]||(t[5]=e("div",{class:"header"},[e("h2",null,"Subir Nuevo Video")],-1)),l(A,{name:"file",multiple:!1,"before-upload":I,"show-upload-list":!1,onChange:j},{default:n(()=>t[2]||(t[2]=[e("p",{class:"ant-upload-text"},"Haz clic para seleccionar un video",-1),e("p",{class:"formats"},"MP4, WebM, AVI, MOV",-1)])),_:1}),t[6]||(t[6]=e("br",null,null,-1)),i.value?(b(),x("div",X,[e("div",Y,[e("span",Z,v((E=o.value)==null?void 0:E.name),1),l(N,{title:"Eliminar video"},{default:n(()=>[l(D,{type:"text",class:"delete-btn",onClick:h},{default:n(()=>[l(U(K))]),_:1})]),_:1})]),e("div",ee,[e("video",{src:i.value,controls:"",class:"video-preview"},null,8,oe)])])):P("",!0),e("div",te,[t[3]||(t[3]=e("label",{class:"label"},"TÃ­tulo del Video",-1)),l(T,{value:r.value,"onUpdate:value":t[0]||(t[0]=w=>r.value=w),placeholder:"Ingresa el tÃ­tulo del video"},null,8,["value"])]),t[7]||(t[7]=e("label",{class:"label"},"DescripciÃ³n",-1)),l(R,{value:a.value,"onUpdate:value":t[1]||(t[1]=w=>a.value=w),placeholder:"Agrega una descripciÃ³n para tu video",maxlength:500,rows:"4"},null,8,["value"]),e("div",ae,v(a.value.length)+"/500 caracteres",1),l(D,{type:"primary",block:"",class:"btn-upload",loading:m.value,disabled:!o.value||!r.value||!a.value,onClick:F},{default:n(()=>[l(U(J)),t[4]||(t[4]=f(" GUARDAR VIDEO "))]),_:1},8,["loading","disabled"])])]}),_:1},8,["open"])}}},se=B(le,[["__scopeId","data-v-6490aa1e"]]);const ne={class:"layout-content"},ie={class:"video-head"},de={class:"video-grid"},re={class:"thumb"},ue=["src"],ce={class:"duration"},pe={class:"info"},ve={class:"desc"},_e={class:"meta"},me={class:"actions"},fe={style:{display:"flex",gap:"8px","align-items":"center"}},be={__name:"videos-index",setup(V){const _=p(!1),c=p([{title:"Consejos con Tu Empresa",description:"terter",duration:"0:24",date:"25 nov 2025",size:"12.15 MB",thumbnail:"https://placehold.co/600x340?text=Miniatura"},{title:"Ejemplo Video 2",description:"Otro video de ejemplo",duration:"1:12",date:"26 nov 2025",size:"8.42 MB",thumbnail:"https://placehold.co/600x340/EEE/000?text=Otro+Video"}]),g=d=>console.log("Editar",d),C=d=>console.log("Descargar",d),k=d=>{c.value=c.value.filter(o=>o!==d)};return(d,o)=>{const i=u("a-button"),r=u("a-tooltip");return b(),x(O,null,[e("div",ne,[e("div",ie,[o[3]||(o[3]=e("h3",null,"VIDEOS SUBIDOS",-1)),l(i,{type:"primary",onClick:o[0]||(o[0]=a=>_.value=!0)},{default:n(()=>o[2]||(o[2]=[f(" NUEVO ")])),_:1})]),e("div",de,[(b(!0),x(O,null,W(c.value,(a,m)=>(b(),x("div",{key:m,class:"video-card"},[e("div",re,[e("img",{src:a.thumbnail,alt:"Miniatura"},null,8,ue),e("span",ce,v(a.duration),1)]),e("div",pe,[e("h3",null,v(a.title),1),e("p",ve,v(a.description),1),e("div",_e,[e("span",null,v(a.date),1),e("span",null,v(a.size),1)]),e("div",me,[l(i,{class:"edit",onClick:h=>g(a)},{default:n(()=>o[4]||(o[4]=[f("âœï¸ Editar")])),_:2},1032,["onClick"]),e("div",fe,[l(r,{title:"Descargar"},{default:n(()=>[l(i,{class:"options-icon",onClick:h=>C(a)},{default:n(()=>o[5]||(o[5]=[f("â¬‡ï¸")])),_:2},1032,["onClick"])]),_:2},1024),l(r,{title:"Eliminar"},{default:n(()=>[l(i,{class:"options-icon delete",onClick:h=>k(a)},{default:n(()=>o[6]||(o[6]=[f("ðŸ—‘ï¸")])),_:2},1032,["onClick"])]),_:2},1024)])])])]))),128))])]),l(se,{visible:_.value,onClose:o[1]||(o[1]=a=>_.value=!1)},null,8,["visible"])],64)}}},xe=B(be,[["__scopeId","data-v-22ed3bb3"]]);export{xe as default};
