import{f as E,r as h,a as N,b as u,o as l,d as _,e as d,c as r,w as s,F as f,M as q,g as p,B as L,q as g,h as b,i as y,s as S,t as j,p as H,j as P}from"./index-35a7835d.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{U as $}from"./UploadOutlined-6ceef510.js";const z={pdfDocument:{type:"iUpload",label:"",name:"pdfDocument",required:!1,message:""}};const x=i=>(H("data-v-18520774"),i=i(),P(),i),J=x(()=>d("h3",null,"SUBIR ARCHIVOS",-1)),M=x(()=>d("br",null,null,-1)),W={class:"agreement-wrapper"},G={class:"grid-item"},K={__name:"DriveSubirArchivo",setup(i){const D=JSON.parse(localStorage.getItem("user")),w=E.get("token"),I="https://apituempresa.soporte-pnte.com/api/",k="http://127.0.0.1:8000/api/",B=window.location.hostname=="127.0.0.1"?k:I,m=h(!1),e=h([]),c=N({pdfDocument:null}),C=t=>{c.pdfDocument=null;const o=e.value.indexOf(t),a=e.value.slice();a.splice(o,1),e.value=a},F=t=>{const o=["pdf","xls","xlsx","doc","docx","ppt","pptx","png","jpg","jpeg","gif"],a=t.name.split(".").pop().toLowerCase();return o.includes(a)?(e.value=[...e.value,t],c.pdfDocument="file",!1):(p.error("Solo se permiten archivos PDF, Excel, Word, PowerPoint e imÃ¡genes."),!1)},U=async()=>{m.value=!0;const t={created_by:D.id,files:e.value};try{const{data:o}=await q.post(`${B}/drive/up-files`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${w}`}});p.success(o.message),e.value=[]}catch{p.error("Error al subir")}finally{m.value=!1}},A=()=>{e.value>=1?c.pdfDocument="file":p.error("Debes al menos subir un archivo")};return(t,o)=>{const a=u("a-button"),R=u("a-upload"),v=u("a-form-item"),V=u("a-form");return l(),_(f,null,[J,M,d("div",W,[r(V,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:U,onFinishFailed:A},{default:s(()=>[d("div",G,[(l(!0),_(f,null,L(b(z),(n,O)=>(l(),_(f,{key:O},[n.type==="iUpload"?(l(),g(v,{key:0,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:s(()=>[r(R,{"file-list":e.value,"before-upload":F,onRemove:C},{default:s(()=>[r(a,null,{default:s(()=>[r(b($)),y(" Seleccionar archivo ")]),_:1})]),_:1},8,["file-list"])]),_:2},1032,["name","label","rules"])):S("",!0)],64))),128))]),e.value.length>=1?(l(),g(v,{key:0},{default:s(()=>[r(a,{type:"primary","html-type":"submit",loading:m.value},{default:s(()=>[y("SUBIR "+j(e.value.length==1?"ARCHIVO":"ARCHIVOS"),1)]),_:1},8,["loading"])]),_:1})):S("",!0)]),_:1},8,["model"])])],64)}}},Z=T(K,[["__scopeId","data-v-18520774"]]);export{Z as default};
