import{c as g,A as U,r as p,j as B,X as N,b,o as y,d as _,w,h as z,e as O,y as A,K as D}from"./index-14868efa.js";/* empty css                                                                */import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";var M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};const T=M;function I(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?Object(arguments[n]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),l.forEach(function(o){R(r,o,a[o])})}return r}function R(r,n,a){return n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}var v=function(n,a){var l=I({},n,a.attrs);return g(U,I({},l,{icon:T}),null)};v.displayName="FileImageOutlined";v.inheritAttrs=!1;const E=v,$={class:"clearfix"},k={key:0},q=["src"],X={__name:"UpImage",props:{acceptFormats:{type:Array,default:()=>["image/jpeg","image/png","image/jpg","image/gif","image/webp"]},maxImages:{type:Number,default:1},imageLoad:{type:Object,default:()=>null}},emits:["uploadSuccess"],setup(r,{emit:n}){const a=r,l=n,o=p([]),f=p(!1),m=p(""),u=p(""),F=e=>new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=c=>i(c)}),x=async e=>{var t;!e.url&&!e.preview&&(e.preview=await F(e.originFileObj)),m.value=e.url||e.preview,f.value=!0,u.value=e.name||((t=e.url)==null?void 0:t.substring(e.url.lastIndexOf("/")+1))},j=()=>{f.value=!1,u.value=""},L=e=>a.acceptFormats.includes(e.type)?o.value.length<a.maxImages:(alert("Formato de imagen no permitido."),!1),P=async({file:e,onSuccess:t,onError:i})=>{const s=new FormData;s.append("file",e),s.append("from_origin","feria");try{const d=(await D.post("http://127.0.0.1:8000/api/image/upload-image",s,{headers:{"Content-Type":"multipart/form-data"}})).data;if(d.status===200){const S={id:d.data.id};l("uploadSuccess",S)}const C={uid:e.uid,name:e.name,status:"done",url:d.thumb};o.value=[C],t(d,e)}catch(c){console.error(c),i(c)}},V=async e=>{};function h(e){const t=e.name||"imagen-cargada",i={uid:"-1",name:t,status:"done",url:e.url};o.value=[i],m.value=e.url,u.value=t}return B(()=>{a.imageLoad&&h(a.imageLoad)}),N(()=>a.imageLoad,e=>{e?h(e):(o.value=[],m.value="",u.value="")}),(e,t)=>{const i=b("a-upload"),s=b("a-modal");return y(),_("div",$,[g(i,{"file-list":o.value,"onUpdate:fileList":t[0]||(t[0]=c=>o.value=c),"custom-request":P,"before-upload":L,"on-remove":V,accept:r.acceptFormats.join(","),"list-type":"picture-card",onPreview:x},{default:w(()=>[o.value.length<a.maxImages?(y(),_("div",k,[g(z(E)),t[1]||(t[1]=O("div",{style:{"margin-top":"8px"}},"Cargar",-1))])):A("",!0)]),_:1},8,["file-list","accept"]),g(s,{open:f.value,title:u.value,footer:null,onCancel:j},{default:w(()=>[O("img",{alt:"example",style:{width:"100%"},src:m.value},null,8,q)]),_:1},8,["open","title"])])}}},W=H(X,[["__scopeId","data-v-2af5f06b"]]);export{W as U};
