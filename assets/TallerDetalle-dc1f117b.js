import{u as X,i as H,r as h,j as J,b as g,o as e,d as t,e as l,c as _,w as u,t as s,F as o,k as T,m as K,g as y,q as k,f as N,Q as V,n,y as W,p as Y,h as Z}from"./index-96f21589.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const $=v=>(Y("data-v-8ec92b94"),v=v(),Z(),v),te=$(()=>l("br",null,null,-1)),ae=$(()=>l("span",null,"Resultados de las evaluaciones",-1)),ne={class:"c-primary"},le=$(()=>l("span",null,"fecha del taller",-1)),se={class:"average"},oe={key:0},ie={key:0},de={key:0},re={class:"ncheck"},ue={key:0},ce={class:"ncheck"},_e={key:0},pe={key:0},he={key:0},ge={class:"average-final"},ye={key:0},ve={key:0},ke={key:0},fe={key:0},me={class:"paginator"},xe={__name:"TallerDetalle",setup(v){X();const z=H(),C=h([]),f=h([]),m=h(!1),x=h(!1),P=h(1e3);h("60vh");const I=h(!1),w=h(!1),S=h(0);h(null);const E=h({page:1}),B=[{title:"RUC",dataIndex:"ruc_mype",fixed:"left",width:150},{title:"TE1",dataIndex:"te1",align:"center",width:60,key:"te1"},{title:"TE2",dataIndex:"te2",align:"center",width:60,key:"te2"},{title:"TE3",dataIndex:"te3",align:"center",width:60,key:"te3"},{title:"TE4",dataIndex:"te4",align:"center",width:60,key:"te4"},{title:"TE5",dataIndex:"te5",align:"center",width:60,key:"te5"},{title:"Nota",dataIndex:"te_note",align:"center",width:70},{title:"TS1",dataIndex:"ts1",align:"center",width:60,key:"ts1"},{title:"TS2",dataIndex:"ts2",align:"center",width:60,key:"ts2"},{title:"TS3",dataIndex:"ts3",align:"center",width:60,key:"ts3"},{title:"TS4",dataIndex:"ts4",align:"center",width:60,key:"ts4"},{title:"TS5",dataIndex:"ts5",align:"center",width:60,key:"ts5"},{title:"Nota",dataIndex:"ts_note",align:"center",width:70},{title:"Promedio Final",dataIndex:"average_final",align:"center",width:120},{title:"C1",dataIndex:"c1",align:"center",width:70},{title:"C2",dataIndex:"c2",align:"center",width:70},{title:"C3",dataIndex:"c3",align:"center",width:70},{title:"Promedio Satisfacción",dataIndex:"average_satisfaction",align:"center",width:120},{title:"Sugerencias",dataIndex:"suggest",align:"center",width:100}],F=i=>{E.value.page=i,b()},U=async()=>{try{x.value=!0;const i=await T({url:"/workshop/details/average",method:"PUT"});b(),K.success(i.message)}catch(i){console.error("Error de red:",i)}finally{x.value=!1}},A=i=>{w.value=i,I.value=!0},b=async()=>{var i;try{m.value=!0;const d=await T({url:`/workshop/details/${z.query.id}`,method:"GET",params:E.value});if(C.value=d.data,S.value=d.total,d.data.length<1)return;M((i=d==null?void 0:d.data[0])==null?void 0:i.workshop_id)}catch(d){console.error("Error de red:",d)}finally{m.value=!1}},M=async i=>{try{const d=await T({url:`/test-all-questions/${i}`,method:"GET"});f.value=d}catch(d){console.error("Error de red:",d)}};return J(b),(i,d)=>{const Q=g("router-link"),q=g("a-breadcrumb-item"),G=g("a-breadcrumb"),D=g("a-button"),R=g("a-tooltip"),O=g("a-table"),j=g("a-pagination"),L=g("a-modal");return e(),t(o,null,[l("div",null,[_(G,null,{default:u(()=>[_(q,null,{default:u(()=>[_(Q,{to:"/admin/ruta-digital/talleres"},{default:u(()=>[y("Volver a Talleres de Ruta Digital")]),_:1})]),_:1}),_(q,null,{default:u(()=>[y("Detalles del taller")]),_:1})]),_:1}),te,l("div",null,[ae,l("h3",ne,s(i.$route.query.taller),1),le,l("h3",null,s(i.$route.query.date),1)]),l("div",se,[_(D,{type:"primary",loading:x.value,onClick:U},{default:u(()=>[y("Promediar")]),_:1},8,["loading"])]),_(O,{bordered:"",class:"ant-table-striped",scroll:{x:P.value},columns:B,"data-source":C.value,pagination:!1,loading:m.value,size:"small"},{headerCell:u(({column:r})=>[(e(),t(o,null,k(5,(a,c)=>(e(),t(o,{key:c},[r.key===`te${c+1}`?(e(),t("div",oe,[l("span",null,[_(R,null,{title:u(()=>[y(s(f.value[`q_testin_${c+1}`]),1)]),default:u(()=>[y(" "+s(`TE${c+1}`)+" ",1),_(N(V),{class:"tooltip-table"})]),_:2},1024)])])):n("",!0)],64))),64)),(e(),t(o,null,k(5,(a,c)=>(e(),t(o,{key:c},[r.key===`ts${c+1}`?(e(),t("div",ie,[l("span",null,[_(R,null,{title:u(()=>[y(s(f.value[`q_testout_${c+1}`]),1)]),default:u(()=>[y(" "+s(`TS${c+1}`)+" ",1),_(N(V),{class:"tooltip-table"})]),_:2},1024)])])):n("",!0)],64))),64))]),bodyCell:u(({column:r,record:a})=>[(e(),t(o,null,k(5,(c,p)=>(e(),t(o,{key:p},[r.dataIndex===`te${p+1}`?(e(),t("div",de,[l("span",re,s(a[`te${p+1}`]===4?"✔️":a[`te${p+1}`]===0?"❌":a[`te${p+1}`]===null?"-":""),1)])):n("",!0)],64))),64)),(e(),t(o,null,k(5,(c,p)=>(e(),t(o,{key:p},[r.dataIndex===`ts${p+1}`?(e(),t("div",ue,[l("span",ce,s(a[`ts${p+1}`]===4?"✔️":a[`ts${p+1}`]===0?"❌":a[`ts${p+1}`]===null?"-":""),1)])):n("",!0)],64))),64)),r.dataIndex=="te_note"?(e(),t(o,{key:0},[a.te_note?(e(),t("span",_e,[l("b",null,s(a.te_note),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="ts_note"?(e(),t(o,{key:1},[a.ts_note?(e(),t("span",pe,[l("b",null,s(a.ts_note),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="average_final"?(e(),t(o,{key:2},[a.average_final?(e(),t("span",he,[l("b",ge,s(a.average_final),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="average_satisfaction"?(e(),t(o,{key:3},[a.average_satisfaction?(e(),t("span",ye,[l("b",null,s(a.average_satisfaction)+" %",1)])):n("",!0)],64)):n("",!0),r.dataIndex=="c1"?(e(),t(o,{key:4},[a.c1?(e(),t("span",ve,s(a.c1*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="c2"?(e(),t(o,{key:5},[a.c1?(e(),t("span",ke,s(a.c2*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="c3"?(e(),t(o,{key:6},[a.c1?(e(),t("span",fe,s(a.c3*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="suggest"?(e(),t(o,{key:7},[a.suggestions?(e(),W(D,{key:0,size:"small",onClick:c=>A(a)},{default:u(()=>[y("Ver")]),_:2},1032,["onClick"])):n("",!0)],64)):n("",!0)]),_:1},8,["scroll","data-source","loading"])]),l("div",me,[_(j,{size:"small",total:S.value,pageSize:20,onChange:F,showSizeChanger:!1},null,8,["total"])]),_(L,{open:I.value,"onUpdate:open":d[0]||(d[0]=r=>I.value=r),title:"Sugerencias",footer:null},{default:u(()=>[l("h4",null,"RUC: "+s(w.value.ruc_mype),1),l("p",null,s(w.value.suggestions),1)]),_:1},8,["open"])],64)}}},be=ee(xe,[["__scopeId","data-v-8ec92b94"]]);export{be as default};
