import{r as _,a as C,b as l,o as F,d as O,c as e,w as a,e as c,t as p,j as d,h as j}from"./index-3d734e37.js";const S={style:{"max-width":"900px",margin:"0 auto",padding:"24px"}},V={style:{"text-align":"center"}},B={style:{"margin-top":"12px","font-weight":"600"}},J={style:{color:"#888"}},L={style:{"text-align":"right"}},M={style:{"text-align":"right"}},$={__name:"mi-perfil-index",setup(A){const b=_(null),v=_(!1),t=C({fullName:"",email:"",phone:"",document:"",company:""}),k={fullName:[{required:!0,message:"Ingrese su nombre completo"}],email:[{required:!0,type:"email",message:"Ingrese un correo válido"}],phone:[{pattern:/^\d{9,15}$/g,message:"Ingrese solo números (9 a 15 dígitos)"}]},R=async()=>{try{v.value=!0,await b.value.validate(),await new Promise(r=>setTimeout(r,600)),j.success("Datos personales actualizados")}finally{v.value=!1}},U=()=>Object.keys(t).forEach(r=>t[r]=""),x=_(null),g=_(!1),s=C({currentPassword:"",newPassword:"",confirmPassword:""}),X={currentPassword:[{required:!0,message:"Ingrese su contraseña actual"}],newPassword:[{required:!0,message:"Ingrese una nueva contraseña"},{min:8,message:"Mínimo 8 caracteres"}],confirmPassword:[{required:!0,message:"Confirme la nueva contraseña"},{validator:(r,o)=>o!==s.newPassword?Promise.reject("Las contraseñas no coinciden"):Promise.resolve()}]},E=async()=>{try{g.value=!0,await x.value.validate(),await new Promise(r=>setTimeout(r,600)),j.success("Contraseña actualizada correctamente"),h()}finally{g.value=!1}},h=()=>Object.keys(s).forEach(r=>s[r]="");return(r,o)=>{const D=l("a-page-header"),I=l("a-avatar"),T=l("a-divider"),w=l("a-descriptions-item"),q=l("a-descriptions"),y=l("a-card"),i=l("a-col"),m=l("a-input"),u=l("a-form-item"),N=l("a-row"),f=l("a-button"),z=l("a-form"),P=l("a-input-password");return F(),O("div",S,[e(D,{title:"Perfil del Usuario","sub-title":"Visualiza y actualiza tu información personal",style:{padding:"0","margin-bottom":"16px"}}),e(N,{gutter:16},{default:a(()=>[e(i,{xs:24,md:8},{default:a(()=>[e(y,{bordered:""},{default:a(()=>[c("div",V,[e(I,{size:128,src:"https://img.freepik.com/premium-vector/user-icon-icon_1076610-59410.jpg"}),c("h3",B,p(t.fullName||"Juan Pérez"),1),c("p",J,p(t.email||"correo@ejemplo.com"),1),e(T),e(q,{column:1,size:"small"},{default:a(()=>[e(w,{label:"Teléfono"},{default:a(()=>[d(p(t.phone||"—"),1)]),_:1}),e(w,{label:"Documento"},{default:a(()=>[d(p(t.document||"—"),1)]),_:1}),e(w,{label:"Organización"},{default:a(()=>[d(p(t.company||"—"),1)]),_:1})]),_:1})])]),_:1})]),_:1}),e(i,{xs:24,md:16},{default:a(()=>[e(y,{title:"Datos personales",style:{"margin-bottom":"16px"}},{default:a(()=>[e(z,{layout:"vertical",model:t,rules:k,ref_key:"formRef",ref:b,onFinish:R},{default:a(()=>[e(N,{gutter:16},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{label:"Nombres y apellidos",name:"fullName"},{default:a(()=>[e(m,{value:t.fullName,"onUpdate:value":o[0]||(o[0]=n=>t.fullName=n),placeholder:"Ej. Juan Pérez"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"Correo electrónico",name:"email"},{default:a(()=>[e(m,{value:t.email,"onUpdate:value":o[1]||(o[1]=n=>t.email=n),placeholder:"correo@ejemplo.com"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"Teléfono",name:"phone"},{default:a(()=>[e(m,{value:t.phone,"onUpdate:value":o[2]||(o[2]=n=>t.phone=n),placeholder:"9XXXXXXXX"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"Documento",name:"document"},{default:a(()=>[e(m,{value:t.document,"onUpdate:value":o[3]||(o[3]=n=>t.document=n),placeholder:"DNI / CE"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:24},{default:a(()=>[e(u,{label:"Organización",name:"company"},{default:a(()=>[e(m,{value:t.company,"onUpdate:value":o[4]||(o[4]=n=>t.company=n),placeholder:"Ej. PNTE"},null,8,["value"])]),_:1})]),_:1})]),_:1}),c("div",L,[e(f,{onClick:U,style:{"margin-right":"8px"}},{default:a(()=>o[8]||(o[8]=[d("Restablecer")])),_:1}),e(f,{type:"primary","html-type":"submit",loading:v.value},{default:a(()=>o[9]||(o[9]=[d("Guardar cambios")])),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1}),e(y,{title:"Seguridad - Cambiar contraseña"},{default:a(()=>[e(z,{layout:"vertical",model:s,rules:X,ref_key:"passwordFormRef",ref:x,onFinish:E},{default:a(()=>[e(u,{label:"Contraseña actual",name:"currentPassword"},{default:a(()=>[e(P,{value:s.currentPassword,"onUpdate:value":o[5]||(o[5]=n=>s.currentPassword=n),placeholder:"••••••••"},null,8,["value"])]),_:1}),e(u,{label:"Nueva contraseña",name:"newPassword"},{default:a(()=>[e(P,{value:s.newPassword,"onUpdate:value":o[6]||(o[6]=n=>s.newPassword=n),placeholder:"Mínimo 8 caracteres"},null,8,["value"])]),_:1}),e(u,{label:"Confirmar nueva contraseña",name:"confirmPassword"},{default:a(()=>[e(P,{value:s.confirmPassword,"onUpdate:value":o[7]||(o[7]=n=>s.confirmPassword=n),placeholder:"Repite la nueva contraseña"},null,8,["value"])]),_:1}),c("div",M,[e(f,{onClick:h,style:{"margin-right":"8px"}},{default:a(()=>o[10]||(o[10]=[d("Limpiar")])),_:1}),e(f,{type:"primary","html-type":"submit",loading:g.value},{default:a(()=>o[11]||(o[11]=[d("Actualizar contraseña")])),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}};export{$ as default};
