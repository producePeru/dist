import{r,H as ne,v as oe,k as le,b as c,o as l,d as p,e as _,c as i,w as s,F as m,y as V,i as u,t as o,s as d,q as y,h as P,Q as se,I as ie,M as de,p as re,j as ce,X as ue,m as pe}from"./index-2bac41c5.js";import{S as me}from"./DrawerSolicitante.componente-0338f1d7.js";import{u as _e}from"./selectes-079326d6.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import{M as fe}from"./MoreOutlined-fca8cf64.js";import"./es-532c7b8a.js";const S=f=>(re("data-v-69fbcbfb"),f=f(),ce(),f),ve=S(()=>_("h3",{class:"title-produce"},"SOLICITANTES",-1)),Ie=S(()=>_("div",{class:"filters-notary"},[_("div")],-1)),he=["onClick"],xe=S(()=>_("a",null,"Eliminar",-1)),we={class:"paginator"},B=20,ye={__name:"SolicitantesLista",setup(f){JSON.parse(localStorage.getItem("profile"));const h=_e();h.$patch({cities:h.cities}),h.fetchCities();const C=r(window.innerHeight-100),U=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",align:"center",width:120},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"DEPARTAMENTO",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:260},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],b=r(0),g=r({page:0}),$=r(1200),k=r([]),x=r(!1),v=r(!1),E=r(null);r(null);const G=t=>{g.value.page=t,I()},w=()=>{C.value=window.innerHeight-280},H=t=>{console.log("open",t)},q=()=>{I(),v.value=!1},F=async t=>{try{const a=await V({url:`person/delete/${t.id}`,method:"DELETE"});a.status==500?ue.warning({title:"Aviso",content:a.message}):(I(),pe.success(a.message))}catch(a){console.error("Error de red:",a)}},Q=t=>{E.value=t,v.value=!0},X=ne(()=>t=>((g.value.page==0?1:g.value.page)-1)*B+t+1),I=async()=>{try{x.value=!0;let t=g.value.page==0?"":g.value;const a=await V({url:"person/list",method:"GET",params:t});k.value=a.data,b.value=a.total}catch(t){console.error("Error de red:",t)}finally{x.value=!1}};return oe(()=>{window.removeEventListener("resize",w)}),le(()=>{window.addEventListener("resize",w),w(),I()}),(t,a)=>{const D=c("a-tag"),j=c("a-button"),O=c("a-menu-item"),J=c("a-popconfirm"),Y=c("a-menu"),K=c("a-dropdown"),W=c("a-table"),Z=c("a-pagination"),ee=c("a-drawer");return l(),p(m,null,[_("div",null,[ve,Ie,i(W,{bordered:"",scroll:{x:$.value,y:C.value},class:"ant-table-striped",columns:U,"data-source":k.value,pagination:!1,loading:x.value,size:"small","row-class-name":(n,e)=>e%2===1?"table-striped":null},{bodyCell:s(({column:n,record:e,index:te})=>{var N,A,L,T,M,R,z;return[n.dataIndex=="idx"?(l(),p(m,{key:0},[u(o(X.value(te)),1)],64)):d("",!0),n.dataIndex=="tdocument"?(l(),y(D,{key:1,color:e.typedocument.name=="DNI"?"green":"blue"},{default:s(()=>[u(o(e.typedocument.name=="DNI"?"DNI":"CE"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="apellidos"?(l(),p(m,{key:2},[u(o(e.lastname)+" "+o(e.middlename),1)],64)):d("",!0),n.dataIndex=="city"?(l(),p(m,{key:3},[u(o((N=e.city)==null?void 0:N.name),1)],64)):d("",!0),n.dataIndex=="province"?(l(),p(m,{key:4},[u(o((A=e.province)==null?void 0:A.name),1)],64)):d("",!0),n.dataIndex=="district"?(l(),p(m,{key:5},[u(o((L=e.district)==null?void 0:L.name),1)],64)):d("",!0),n.dataIndex=="gender"?(l(),p(m,{key:6},[u(o((T=e.gender)==null?void 0:T.name),1)],64)):d("",!0),n.dataIndex=="sickx"?(l(),y(D,{key:7,color:e.sick=="no"?"blue":"pink"},{default:s(()=>[u(o(e.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="registerby"?(l(),p(m,{key:8},[u(o((M=e.user[0])==null?void 0:M.profile.name)+" "+o((R=e.user[0])==null?void 0:R.profile.lastname)+" "+o((z=e.user[0])==null?void 0:z.profile.middlename),1)],64)):d("",!0),n.dataIndex=="actions"?(l(),y(K,{key:9,trigger:["click"]},{overlay:s(()=>[i(Y,null,{default:s(()=>[i(O,null,{default:s(()=>[_("a",{onClick:ae=>Q(e)},"Editar",8,he)]),_:2},1024),i(O,null,{default:s(()=>[i(J,{title:"¿Seguro de eliminar?",onConfirm:ae=>F(e)},{icon:s(()=>[i(P(se),{style:{color:"red"}})]),default:s(()=>[xe]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[_("a",{class:"ant-dropdown-link",onClick:a[0]||(a[0]=ie(()=>{},["prevent"]))},[i(j,{shape:"circle",icon:de(P(fe)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading","row-class-name"])]),_("div",we,[i(Z,{size:"small",total:b.value,pageSize:B,onChange:G,showSizeChanger:!1},null,8,["total"])]),i(ee,{open:v.value,"onUpdate:open":a[1]||(a[1]=n=>v.value=n),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:H},{default:s(()=>[i(me,{onCloseDraw:q,updateValues:E.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},Oe=ge(ye,[["__scopeId","data-v-69fbcbfb"]]);export{Oe as default};
