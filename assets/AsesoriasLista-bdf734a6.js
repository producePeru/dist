import{l as E,r as d,a as z,j as G,X as V,a6 as D,o as M,x as B,h as H,L as j,d as k,c as y,f as J,R as q,b as F,w as O,e as C,a2 as ce,y as de,O as ne,i as Q,m as se}from"./index-b0a702fc.js";import{_ as me}from"./TableComponent-e5a3015d.js";import{d as ue}from"./downloadExcel-9d203673.js";import{_ as W}from"./FormComponent-6ad7517e.js";import{u as Z}from"./selectes-9013d304.js";import"./es-c73a1687.js";import{g as pe}from"./publicInscripcion-623ff37e.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-9036a012.js";import"./vue-quill.esm-bundler-2d2de7d3.js";import"./quill.snow-4afb3cd2.js";/* empty css                                                      */const _e={key:1,class:"f-20"},ve={__name:"EditarAsesoria",props:["info"],emits:["closeDraw"],setup(U,{emit:L}){E.locale("es");const n=d({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},component_id:{type:"iSelect",label:"COMPONENTE",name:"component_id",required:!0,message:"Seleccionar un componente",disabled:!1},theme_id:{type:"iSelect",label:"TEMA DEL COMPONENTE",name:"theme_id",required:!0,message:"Seleccionar un tema del componente",disabled:!0},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,rules:[{validator:(i,m)=>{if(!m)return Promise.resolve();const s=m.toString();return s.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15","20"].includes(s.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10, 15 o 20"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},observations:{type:"iText",label:"NRO DE RESERVA / OBSERVACIONES",name:"observations",required:!1,message:"Seleccionar tipo de documento",disabled:!1}}),A=JSON.parse(localStorage.getItem("profile")),T=L,u=U,v=d(!0),I=d("ACTUALIZAR"),e=z({}),p=d(!1),t=Z(),h=d(null),a=d({city_id:[],province_id:[],district_id:[],modality_id:[],comercialactivity_id:[],isbic:[],typecapital_id:[],component_id:[],theme_id:[]}),b=i=>{console.log("handleInputEvent",i)},o=async i=>{i=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),n.value.dateTramite.disabled=!1)},N=async i=>{i=="city_id"&&(await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1),i=="province_id"&&(await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1),i=="component_id"&&(await t.fetchComponentThemes(e.component_id),a.value.theme_id=t.componentThemes,e.theme_id=null,n.value.theme_id.disabled=!1)},S=async i=>{console.log("handleFocusSelect",i),i=="city_id"&&(await t.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,a.value.province_id=[],a.value.city_id=t.cities),i=="province_id"&&(e.province_id=null,e.district_id=null,a.value.district_id=[]),i=="modality_id"&&(await t.fetchModalities(),a.value.modality_id=t.modalities),i=="regime_id"&&(await t.fetchRegimes(),a.value.regime_id=t.regimes),i=="economicsector_id"&&(await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors),i=="comercialactivity_id"&&(await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities),i=="notary_id"&&R(),i=="isbic"&&P(),i=="typecapital_id"&&(await t.fetchTypeCapital(),a.value.typecapital_id=t.typeCapital),i=="component_id"&&(await t.fetchComponents(),a.value.component_id=t.components)},w=i=>{},P=()=>{a.value.isbic=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}]},R=async()=>{try{const{data:i}=await J({url:"public/notaries-filters",method:"GET"}),m=i.map(s=>({value:s.id,name:s.name,city:s.city.name,province:s.province.name,district:s.district.name,address:s.address}));a.value.notary_id=m}catch(i){console.error("Error de red:",i)}},x=async()=>{p.value=!0;const i={economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,component_id:e.component_id,theme_id:e.theme_id,modality_id:e.modality_id,ruc:e.ruc,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,observations:e.observations,updated_by:A.user_id};try{(await q({url:`advisory/update/${u.info.id}`,method:"PUT",data:i})).status===200&&(c(),T("closeDraw",!0))}catch(m){console.error("Error:",m);const s=document.getElementsByClassName("ant-drawer-body")[0];s&&(s.scrollTop=0)}finally{p.value=!1}},c=()=>{e.economicsector_id=null,e.comercialactivity_id=null,e.component_id=null,e.theme_id=null,e.modality_id=null,e.ruc=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null},_=async i=>{v.value=!0;try{i&&(await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors,e.economicsector_id=i.econimic_sector_id,await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities,e.comercialactivity_id=i.activity_comercial_id,await t.fetchComponents(),a.value.component_id=t.components,n.value.theme_id.disabled=!1,e.component_id=i.component_id,await t.fetchComponentThemes(e.component_id),a.value.theme_id=t.componentThemes,e.theme_id=i.theme_id,await t.fetchModalities(),a.value.modality_id=t.modalities,e.modality_id=i.modality_id,e.ruc=i.ruc,e.observations=i.observations,await t.fetchCities(),a.value.city_id=t.cities,e.city_id=i.city_id,await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1,e.province_id=i.province_id,await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1,e.district_id=i.district_id)}catch(m){console.error("Error al cargar la información:",m)}finally{v.value=!1}};return G(()=>{u.info&&_(u.info)}),V(()=>u.info,i=>{i&&_(i)}),D("formState",e),D("loadingState",p),(i,m)=>v.value?(M(),B(H(j),{key:0,style:{color:"#00a6db"}})):(M(),k("div",_e,[y(W,{fields:n.value,options:a.value,btnSaveName:I.value,onHandleInputEvent:b,resetSelect:h.value,onHandleChangeSelect:N,onHandleFocusSelect:S,onHandleBlurSelect:w,onHandleChangeClock:o,onOnSubmit:x},null,8,["fields","options","btnSaveName","resetSelect"])]))}},fe={key:1,class:"f-20"},ye={__name:"EditarFormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(U,{emit:L}){E.locale("es");const n=d({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},detailprocedure_id:{type:"iSelect",label:"DETALLE DEL TRÁMITE",name:"detailprocedure_id",required:!0,message:"Seleccionar el detalle del trámite",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,rules:[{validator:(c,_)=>{if(!_)return Promise.resolve();const i=_.toString();return i.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15"].includes(i.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10 o 15"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!1,message:"Seleccionar tipo de documento",disabled:!1}}),A=JSON.parse(localStorage.getItem("profile")),T=L,u=U,v=d(!0),I=d("ACTUALIZAR"),e=z({}),p=d(!1),t=Z(),h=d(null),a=d({city_id:[],province_id:[],district_id:[],modality_id:[],comercialactivity_id:[],isbic:[],typecapital_id:[],component_id:[],theme_id:[],detailprocedure_id:[]}),b=c=>{console.log("handleInputEvent",c)},o=async c=>{c=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),n.value.dateTramite.disabled=!1)},N=async c=>{c=="city_id"&&(await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1),c=="province_id"&&(await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1)},S=async c=>{console.log("handleFocusSelect",c),c=="city_id"&&(await t.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,a.value.province_id=[],a.value.city_id=t.cities),c=="province_id"&&(e.province_id=null,e.district_id=null,a.value.district_id=[]),c=="regime_id"&&(await t.fetchRegimes(),a.value.regime_id=t.regimes),c=="economicsector_id"&&(await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors),c=="comercialactivity_id"&&(await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities),c=="detailprocedure_id"&&(await t.fetchDetailProcedures(),a.value.detailprocedure_id=t.detailProcedures)},w=c=>{},P=async()=>{p.value=!0;const c={economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,detailprocedure_id:e.detailprocedure_id,modality_id:e.modality_id,ruc:e.ruc,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,updated_by:A.user_id};try{(await q({url:`formalization/update-ruc-10/${u.info.id}`,method:"PUT",data:c})).status===200&&(R(),T("closeDraw",!0))}catch(_){console.error("Error:",_);const i=document.getElementsByClassName("ant-drawer-body")[0];i&&(i.scrollTop=0)}finally{p.value=!1}},R=()=>{e.economicsector_id=null,e.comercialactivity_id=null,e.detailprocedure_id=null,e.modality_id=null,e.ruc=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null},x=async c=>{v.value=!0;try{c&&(await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors,e.economicsector_id=c.econimic_sector_id,await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities,e.comercialactivity_id=c.activity_comercial_id,await t.fetchDetailProcedures(),a.value.detailprocedure_id=t.detailProcedures,e.detailprocedure_id=c.detailprocedure_id,await t.fetchModalities(),a.value.modality_id=t.modalities,e.modality_id=c.modality_id,e.ruc=c.ruc,e.address=c.address,await t.fetchCities(),a.value.city_id=t.cities,e.city_id=c.city_id,await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1,e.province_id=c.province_id,await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1,e.district_id=c.district_id)}catch(_){console.error("Error al cargar la información:",_)}finally{v.value=!1}};return G(()=>{u.info&&x(u.info)}),V(()=>u.info,c=>{c&&x(c)}),D("formState",e),D("loadingState",p),(c,_)=>v.value?(M(),B(H(j),{key:0,style:{color:"#00a6db"}})):(M(),k("div",fe,[y(W,{fields:n.value,options:a.value,btnSaveName:I.value,onHandleInputEvent:b,resetSelect:h.value,onHandleChangeSelect:N,onHandleFocusSelect:S,onHandleBlurSelect:w,onHandleChangeClock:o,onOnSubmit:P},null,8,["fields","options","btnSaveName","resetSelect"])]))}},ge={key:1,class:"f-20"},Ee={__name:"EditarFormalizacionRUC20",props:["info"],emits:["closeDraw"],setup(U,{emit:L}){E.locale("es");const n=d({ruc:{type:"iNumber",label:"RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,rules:[{validator:(i,m)=>{if(!m)return Promise.resolve();const s=m.toString();return s.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):s.startsWith("20")?Promise.resolve():Promise.reject(new Error('El número de RUC debe comenzar con "20"'))},trigger:"change"}]},nameMype:{type:"iText",label:"NOMBRE EMPRESA",name:"nameMype",required:!0,message:"Escribir nombre de la empresa",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!0,message:"Escribir la dirección del negocio",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar la modalidad",disabled:!1},regime_id:{type:"iSelect",label:"RÉGIMEN SOCIETARIO",name:"regime_id",required:!0,message:"Seleccionar el régimen societario",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},numbernotary:{type:"iText",label:"NÚM. SOLICITUD CONSTANCIA",name:"numbernotary",required:!0,message:"Escribir número de solicitud de constancia",disabled:!1,maxlength:8,rules:[{validator:(i,m)=>{if(!m)return Promise.reject(new Error("El número de notaría es requerido"));const s=m.toString();return/^\d{8}$/.test(s)?Promise.resolve():Promise.reject(new Error("El número debe tener exactamente 8 dígitos numéricos"))},trigger:"change"}]},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},notary_id:{type:"iSelectNotary",label:"NOTARÍA",name:"notary_id",required:!0,message:"Seleccionar una notaría",disabled:!1},dateReception:{type:"iDate",label:"FECHA DE RECEPCION PNTE",name:"dateReception",required:!0,disabled:!1,disabledDate:i=>!1},dateTramite:{type:"iDate",label:"FEC. TRÁMITE SID SUNARP-SUNAT",name:"dateTramite",required:!0,disabled:!1,disabledDate:i=>e.dateReception&&i&&E(i).isBefore(E(e.dateReception))},isbic:{type:"iSelect",label:"¿ES UNA SOCIEDAD BIC?",name:"isbic",required:!1,message:"Buscar BIC",disabled:!1},montocapital:{type:"iMoney",label:"MONTO DE CAPITAL SOCIAL",name:"montocapital",required:!1,message:"Escribir el Monto de capital social",disabled:!1},typecapital_id:{type:"iSelect",label:"TIPO DE APORTE DE CAPITAL",name:"typecapital_id",required:!1,message:"Seleccionar BIC",disabled:!1}}),A=JSON.parse(localStorage.getItem("profile")),T=L,u=U,v=d(!0),I=d("REGISTRAR"),e=z({}),p=d(!1),t=Z(),h=d(null),a=d({city_id:[],province_id:[],district_id:[],modality_id:[],comercialactivity_id:[],isbic:[],typecapital_id:[]}),b=i=>{console.log("handleInputEvent",i)},o=async i=>{i=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),n.value.dateTramite.disabled=!1)},N=async i=>{i=="city_id"&&(await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1),i=="province_id"&&(await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1)},S=async i=>{console.log("handleFocusSelect",i),i=="city_id"&&(await t.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,a.value.province_id=[],a.value.city_id=t.cities),i=="province_id"&&(e.province_id=null,e.district_id=null,a.value.district_id=[]),i=="modality_id"&&(await t.fetchModalities(),a.value.modality_id=t.modalities),i=="regime_id"&&(await t.fetchRegimes(),a.value.regime_id=t.regimes),i=="economicsector_id"&&(await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors),i=="comercialactivity_id"&&(await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities),i=="notary_id"&&R(),i=="isbic"&&P(),i=="typecapital_id"&&(await t.fetchTypeCapital(),a.value.typecapital_id=t.typeCapital)},w=i=>{},P=()=>{a.value.isbic=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}]},R=async()=>{try{const{data:i}=await J({url:"public/notaries-filters",method:"GET"}),m=i.map(s=>({value:s.id,name:s.name,city:s.city.name,province:s.province.name,district:s.district.name,address:s.address}));a.value.notary_id=m}catch(i){console.error("Error de red:",i)}},x=async()=>{p.value=!0;const i={ruc:e.ruc,nameMype:e.nameMype,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,modality_id:e.modality_id,regime_id:e.regime_id,economicsector_id:e.economicsector_id,numbernotary:e.numbernotary,comercialactivity_id:e.comercialactivity_id,notary_id:e.notary_id,dateReception:E(e.dateReception).format("YYYY-MM-DD"),dateTramite:E(e.dateTramite).format("YYYY-MM-DD"),isbic:e.isbic,montocapital:e.montocapital,typecapital_id:e.typecapital_id,user_id:e.user_id,people_id:e.people_id,dni:e.dni,userupdated_id:A.user_id};try{(await q({url:`formalization/update-ruc-20/${u.info.id}`,method:"PUT",data:i})).status===200&&(c(),T("closeDraw",!0))}catch(m){console.error("Error:",m);const s=document.getElementsByClassName("ant-drawer-body")[0];s&&(s.scrollTop=0)}finally{p.value=!1}},c=()=>{e.ruc=null,e.nameMype=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.modality_id=null,e.regime_id=null,e.economicsector_id=null,e.numbernotary=null,e.comercialactivity_id=null,e.notary_id=null,e.dateReception=null,e.dateTramite=null,e.isbic=null,e.montocapital=null,e.typecapital_id=null},_=async i=>{v.value=!0;try{i&&(e.ruc=i.ruc,e.nameMype=i.name_mype,await t.fetchCities(),a.value.city_id=t.cities,e.city_id=i.city_id,await t.fetchProvinces(e.city_id),a.value.province_id=t.provinces,n.value.province_id.disabled=!1,e.province_id=i.province_id,await t.fetchDistricts(e.province_id),a.value.district_id=t.districts,n.value.district_id.disabled=!1,e.district_id=i.district_id,e.address=i.address,await t.fetchModalities(),a.value.modality_id=t.modalities,e.modality_id=i.modality_id,await t.fetchRegimes(),a.value.regime_id=t.regimes,e.regime_id=i.regime_id,await t.fetchEconomicSectors(),a.value.economicsector_id=t.economicSectors,e.economicsector_id=i.econimic_sector_id,e.numbernotary=i.num_solicitud,await t.fetchComercialActivities(),a.value.comercialactivity_id=t.comercialActivities,e.comercialactivity_id=i.activity_comercial_id,R(),e.notary_id=i.notary_id,e.dateReception=i.date_reception?E(i.date_reception,"DD/MM/YYYY"):null,e.dateTramite=i.date_tramite?E(i.date_tramite,"DD/MM/YYYY"):null,e.isbic=i.bic,e.montocapital=i.monto_capital,await t.fetchTypeCapital(),a.value.typecapital_id=t.typeCapital,e.typecapital_id=i.typecapital_id)}catch(m){console.error("Error al cargar la información:",m)}finally{v.value=!1}};return G(()=>{u.info&&_(u.info)}),V(()=>u.info,i=>{i&&_(i)}),D("formState",e),D("loadingState",p),(i,m)=>v.value?(M(),B(H(j),{key:0,style:{color:"#00a6db"}})):(M(),k("div",ge,[y(W,{fields:n.value,options:a.value,btnSaveName:I.value,onHandleInputEvent:b,resetSelect:h.value,onHandleChangeSelect:N,onHandleFocusSelect:S,onHandleBlurSelect:w,onHandleChangeClock:o,onOnSubmit:x},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const he={class:"advisory-table"},Se=["onClick"],Le={__name:"AsesoriasLista",setup(U){const L=JSON.parse(localStorage.getItem("role"))||[],n=JSON.parse(localStorage.getItem("profile"))||{},A=d([]),T=d(0),u=d(150),v=d(!1),I=d(!1),e=d("Asesorías"),p=d(!1),t=d(!1),h=d(!1),a=d(null),b=d(!1),o=z({year:E("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null}),N=d([]),S=d([]),w=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:80},{title:"FECHA",fixed:"left",dataIndex:"date",width:100,align:"center"},{title:"ASESOR",dataIndex:"asesor",width:200},{title:"ASESOR CDE",dataIndex:"asesor_cde",width:160},{title:"SOLICITANTE APELLIDO PATERNO",dataIndex:"emp_lastname",width:150},{title:"SOLICITANTE APELLIDO MATERNO",dataIndex:"emp_middlename",width:150},{title:"SOLICITANTE NONBRE",dataIndex:"emp_name",width:150},{title:"TIPO DOCUMENTO",dataIndex:"emp_document_type",width:100,align:"center"},{title:"NÚMERO DE DOCUMENTO",dataIndex:"emp_document_number",align:"center",width:140},{title:"PAÍS",dataIndex:"emp_country",align:"center",width:120},{title:"FEC. NAC",dataIndex:"emp_birth",align:"center",width:120},{title:"EDAD",dataIndex:"emp_age",align:"center",width:80},{title:"GÉNERO",dataIndex:"emp_gender",width:80,align:"center"},{title:"DISCAPACIDAD",dataIndex:"emp_discapabilities",width:120,align:"center"},{title:"HIJOS",dataIndex:"emp_soons",width:80,align:"center"},{title:"CELULAR",dataIndex:"emp_phone",width:120,align:"center"},{title:"EMAIL",dataIndex:"emp_email",width:200},{title:"CIUDAD",dataIndex:"city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"province",width:140,align:"center"},{title:"DISTRITO",dataIndex:"district",width:140,align:"center"},{title:"RUC",dataIndex:"ruc",width:120,align:"center"}],P=[{title:"SECTOR ECONÓMICO",dataIndex:"econimic_service",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"COMPONENTE",dataIndex:"component",width:140,align:"center"},{title:"TEMA",dataIndex:"theme",width:200},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"OBSERVACIONES",dataIndex:"observations",width:200},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],R=[{title:"SECTOR ECONÓMICO",dataIndex:"econimic_sector",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"DETALLE DEL TRÁMITE",dataIndex:"detail_tramit",width:180},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],x=[{title:"NOMBRE DE LA EMPRESA",dataIndex:"nameMype",width:200},{title:"SECTOR ECONÓMICO",dataIndex:"econimic_sector",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"FECHA DE RECEPCIÓN",dataIndex:"date_reception",width:160,align:"center"},{title:"FECHA DE TRÁMITE",dataIndex:"date_tramite",width:160,align:"center"},{title:"TIPO DE RÉGIMEN",dataIndex:"type_regimen",width:150,align:"center"},{title:"BIC",dataIndex:"bic",width:50,align:"center"},{title:"NÚMERO DE SOLICITUD",dataIndex:"num_solicitud",width:160,align:"center"},{title:"NOTARÍA",dataIndex:"notaria",width:200},{title:"TIPO DE APORTE",dataIndex:"type_aporte",width:160,align:"center"},{title:"MONTO CAPITAL",dataIndex:"monto_capital",width:160,align:"center"},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}];function c(){if(n.user_id){const r={user:n.user_id,name:n.name,lastname:n.lastname,middlename:n.middlename};if(n.user_id){const l=btoa(JSON.stringify(r)),f=`${pe()}/preguntas-formalizaciones?data=${l}`;window.open(f,"_blank")}}}const _=()=>{console.log("handleNew...")},i=async r=>{try{let l=null;e.value=="Asesorias"&&(l=`advisory/delete/${r.id}`),e.value=="Formalizaciones RUC 10"&&(l=`formalization/delete-ruc-10/${r.id}`),e.value=="Formalizaciones RUC 20"&&(l=`formalization/delete-ruc-20/${r.id}`);const f=await q({url:l,method:"DELETE"});Y(),se.success(f.message)}catch(l){console.error("Error de red:",l)}},m=async()=>{I.value=!0;try{const r={};o.year&&(r.year=E(o.year).format("YYYY")),o.range&&(r.dateStart=o.range[0].format("YYYY/MM/DD"),r.dateEnd=o.range[1].format("YYYY/MM/DD")),o.asesor&&(r.asesor=o.asesor),o.name&&(r.name=o.name),o.typeCdes&&(r.typeCdes=o.typeCdes);let l=null,f=null;o.type==1&&(l="download/asesories",f="Asesorías"),o.type==2&&(l="download/formalizations-ruc10",f="Formalizaciones 10"),o.type==3&&(l="download/formalizations-ruc20",f="Formalizaciones 20"),await ue(l,f,r)}catch(r){console.error("Error de red:",r)}finally{I.value=!1}},s=async r=>{o.page=r,await Y()},X=async r=>{r&&(o.page=1,await Y())},K=r=>{a.value=r,o.type==1&&(p.value=!0),o.type==2&&(t.value=!0),o.type==3&&(h.value=!0)},ee=r=>L.some(l=>r.includes(l.id)),ie=()=>{o.type==1&&(S.value=[...w,...P],e.value="Asesorias"),o.type==2&&(S.value=[...w,...R],e.value="Formalizaciones RUC 10"),o.type==3&&(S.value=[...w,...x],e.value="Formalizaciones RUC 20")},Y=async()=>{v.value=!0,ie();try{const r={page:o.page};o.year&&(r.year=E(o.year).format("YYYY")),o.range&&(r.dateStart=o.range[0].format("YYYY/MM/DD"),r.dateEnd=o.range[1].format("YYYY/MM/DD")),o.asesor&&(r.asesor=o.asesor),o.name&&(r.name=o.name),o.typeCdes&&(r.typeCdes=o.typeCdes);let l=null;o.type==1&&(l="historial/advisories/filters"),o.type==2&&(l="historial/formalizations-10/filters"),o.type==3&&(l="historial/formalizations-20/filters");const f=await q({url:l,method:"GET",params:r});A.value=f.data.data,T.value=f.data.total,u.value=f.data.per_page}catch(r){console.error("Error de red:",r)}finally{v.value=!1}},te=async()=>{try{const r=await q({url:"questionnaire/user-has-completed-formalization-form",method:"GET"});console.log("hOOOLA",r),b.value=!r.completed}catch(r){console.error("Error de red:",r)}},ae=async()=>{try{const r=await J({url:"select/asesores-report",method:"GET"});r.status==200&&(N.value=r.data)}catch{console.log("Failed to delete")}};return G(async()=>{await Y(),await ae(),await te()}),D("search",o),D("loading",v),D("loadingFile",I),(r,l)=>{const f=F("a-menu-item"),le=F("a-popconfirm"),$=F("a-drawer"),oe=F("a-modal");return M(),k("div",he,[y(me,{title:`REPORTE GENERAL - ${e.value}`,new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",tipoformalizacion:!0,searchYear:!0,rangeDate:!0,columns:S.value,titleSearch:"NÚMERO DE DOCUMENTO",pageSize:u.value,nameTotal:e.value,asesoresList:N.value,dataSource:A.value,total:T.value,onHandleNew:_,onHandleDownloadExcel:m,onHandleSearch:X,onHandlePaginator:s},{"custom-options":O(({record:g})=>[y(f,null,{default:O(()=>[C("a",{onClick:re=>K(g)},"Editar",8,Se)]),_:2},1024),ee([1,5])?(M(),B(f,{key:0},{default:O(()=>[y(le,{title:"¿Eliminar?",onConfirm:re=>i(g),class:"prod-alert",placement:"topRight"},{icon:O(()=>[y(H(ce),{style:{color:"red"}})]),default:O(()=>[l[7]||(l[7]=C("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)):de("",!0)]),_:1},8,["title","columns","pageSize","nameTotal","asesoresList","dataSource","total"]),y($,{width:"500",title:"EDITAR ASESORÍA",open:p.value,"onUpdate:open":l[1]||(l[1]=g=>p.value=g),placement:"right"},{default:O(()=>[y(ve,{info:a.value,onCloseDraw:l[0]||(l[0]=g=>(p.value=!1,Y()))},null,8,["info"])]),_:1},8,["open"]),y($,{width:"550",title:"Editar Formalización RUC 10",open:t.value,"onUpdate:open":l[3]||(l[3]=g=>t.value=g),placement:"right"},{default:O(()=>[y(ye,{info:a.value,onCloseDraw:l[2]||(l[2]=g=>(t.value=!1,Y()))},null,8,["info"])]),_:1},8,["open"]),y($,{width:"550",title:"Editar Formalización RUC 20",open:h.value,"onUpdate:open":l[5]||(l[5]=g=>h.value=g),placement:"right"},{default:O(()=>[y(Ee,{info:a.value,onCloseDraw:l[4]||(l[4]=g=>(h.value=!1,Y()))},null,8,["info"])]),_:1},8,["open"]),y(oe,{open:b.value,"onUpdate:open":l[6]||(l[6]=g=>b.value=g),title:"📌 ¿Aún no llenaste el formulario?",width:"420px",footer:null,maskClosable:!1,closable:!1},{default:O(()=>[l[8]||(l[8]=C("p",null,"¡Hola! 👋",-1)),l[9]||(l[9]=C("p",null,"Notamos que aún no has completado el formulario con preguntas frecuentes sobre formalización.",-1)),l[10]||(l[10]=C("p",null,"Tómate un momento para completarlo cuando puedas. ¡Tu experiencia es importante para nosotros!",-1)),l[11]||(l[11]=C("br",null,null,-1)),C("a",{href:"#",onClick:ne(c,["prevent"]),class:"btn-complete-modal"}," IR AL FORMULARIO "),l[12]||(l[12]=C("br",null,null,-1)),l[13]||(l[13]=C("p",{style:{color:"#ff4d4f","text-align":"center"}},[Q("Completado el formulario regresa a esta página y "),C("b",null,"actualiza"),Q(" para que este mensaje desaparezca. ")],-1))]),_:1},8,["open"])])}}};export{Le as default};
