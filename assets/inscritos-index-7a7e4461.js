import{_ as J}from"./TableComponent-695a5a1a.js";import{E as Q,r as u,u as Z,a as X,p as I,k as K,X as Y,b as f,o,d as i,c as _,w as m,m as D,y,z as s,F,j as V,e as g,t as l,v as ee,i as te,a2 as ae,h as ne}from"./index-f8debde9.js";import{d as oe}from"./downloadExcel-993c5a2a.js";import"./es-17a3c5d0.js";import{_ as se}from"./ParticipanteSed-ae9a4a1a.js";import"./icoexcel-1b303edf.js";import"./selectes-646a85dd.js";import"./MoreOutlined-33a1be99.js";import"./FormComponent-f899db6b.js";import"./quill.snow-709b2fe1.js";const re={class:"layout-content cyber-wow"},ie={key:2,class:"cyber-wow-empresario"},le={key:3,class:"cyber-wow-empresario"},ce={key:4,class:"cyber-wow-empresario-ubigeo"},de={key:5,class:"wow-redes-sociales"},me=["href"],ue={key:0,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBF73o0P4eNj_YuVFZtaVHAxum9_p4ARUOAg&s"},pe={key:1,src:"https://a.thumbs.redditmedia.com/JDkvH4BSYJQOZ93RZGUIVUjtEqi1T5WnhTyqeCtgUJ0.png"},ge={key:2,src:"https://cdn-icons-png.flaticon.com/256/4138/4138151.png"},he={key:3,src:"https://cdn-icons-png.flaticon.com/256/174/174857.png"},we=["onClick"],Ye={__name:"inscritos-index",setup(fe){const v=Q(),$=JSON.parse(localStorage.getItem("role"))||[],R=u([]),T=u(0),O=u(150),k=u(!1);Z();const b=u(!1),x=u(null),S=u(!1),A=u({name:"Cargando..."}),N={Facebook:"https://www.facebook.com/",Instagram:"https://www.instagram.com/",TikTok:"https://www.tiktok.com/@",Web:"https://www."},B=e=>N[e.name]?`${N[e.name]}${e.link}`:e.link,a=X({year:I("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),P=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"EMPRESARIO",dataIndex:"empresario",width:350},{title:"EMPRESA",dataIndex:"empresa",width:350},{title:"SECTOR ECONÃ“MICO",dataIndex:"sectorEconomico",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"actividadComercial",width:180},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:140,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"}],H=e=>{x.value=e,k.value=!0},L=()=>{h(),k.value=!1},W=async(e,t)=>{const p=v.params.slug,E=I().format("DD/MM/YYYY HH:mm"),C={slug:p,documentnumber:t.documentnumber,check:e.target.checked,date:E};try{const w=await D({url:"fair/update-attended-status",method:"PUT",data:C});w.status==200&&console.log("status",w.message)}catch(w){console.error("Error de red:",w)}},z=async e=>{try{const t=await D({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});t.status==200&&(h(),ne.success(t.message))}catch(t){console.error("Error de red:",t)}},G=async()=>{S.value=!0;try{const e={},t=v.params.slug;a.year&&(e.year=I(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name);let p=`download/cyber-wow-participants/${t}`;await oe(p,"cyber-wow",e)}catch(e){console.error("Error de red:",e)}finally{S.value=!1}},j=async e=>{a.page=e,await h()},q=async e=>{e&&(a.page=1,await h())},M=e=>$.some(t=>e.includes(t.id)),h=async()=>{try{b.value=!0;const e={page:a.page},t=v.params.slug;a.year&&(e.year=I(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);let p=`events-ugse/cyber-wow-list-assistants/${t}`;const d=await D({url:p,method:"GET",params:e});A.value=d.event,R.value=d.data.data,T.value=d.data.total,O.value=d.data.per_page}catch(e){console.error("Error de red:",e)}finally{b.value=!1}};return K(async()=>{await h()}),Y("search",a),Y("loading",b),Y("loadingFile",S),(e,t)=>{var U;const p=f("a-checkbox"),d=f("a-tag"),E=f("a-menu-item"),C=f("a-popconfirm"),w=f("a-drawer");return o(),i("div",re,[_(J,{title:`INSCRITOS CYBER WOW ðŸ“ˆ ${(U=A.value)==null?void 0:U.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/cyber-wow",columns:P,titleSearch:"FILTRAR POR RUC O DNI",pageSize:O.value,nameTotal:"Inscritos Cyber Wow",dataSource:R.value,total:T.value,btnUpdate:!0,onHandleCallFetchData:h,onHandleDownloadExcel:G,onHandleSearch:q,onHandlePaginator:j},{"data-cell":m(({column:r,record:n})=>[r.dataIndex=="asistio"?(o(),y(p,{key:0,checked:n.asistio,"onUpdate:checked":c=>n.asistio=c,onChange:c=>W(c,n)},null,8,["checked","onUpdate:checked","onChange"])):s("",!0),r.dataIndex=="sick"?(o(),i(F,{key:1},[n.sick=="SI"?(o(),y(d,{key:0,color:"red"},{default:m(()=>t[1]||(t[1]=[V("SI")])),_:1})):s("",!0),n.sick=="NO"?(o(),y(d,{key:1,color:"green"},{default:m(()=>t[2]||(t[2]=[V("NO")])),_:1})):s("",!0)],64)):s("",!0),r.dataIndex=="empresario"?(o(),i("div",ie,[g("b",null,l(n.name)+" "+l(n.lastname)+" "+l(n.middlename),1),g("span",null,l(n.documentnumber)+" / "+l(n.phone)+" / "+l(n.email),1)])):s("",!0),r.dataIndex=="empresa"?(o(),i("div",le,[g("b",null,l(n.nombreComercial),1),g("span",null,l(n.razonSocial)+" / "+l(n.ruc),1),g("span",null,l(n.city)+" - "+l(n.province)+" - "+l(n.district),1)])):s("",!0),r.dataIndex=="city"?(o(),i("div",ce)):s("",!0),r.dataIndex=="redesSociales"?(o(),i("div",de,[(o(!0),i(F,null,ee(n.socials,c=>(o(),i("a",{key:c.name,href:B(c),target:"_blank"},[c.name==="Facebook"?(o(),i("img",ue)):s("",!0),c.name==="Instagram"?(o(),i("img",pe)):s("",!0),c.name==="TikTok"?(o(),i("img",ge)):s("",!0),c.name==="Web"?(o(),i("img",he)):s("",!0)],8,me))),128))])):s("",!0)]),"custom-options":m(({record:r})=>[M([1,5])?(o(),y(E,{key:0},{default:m(()=>[g("a",{onClick:n=>H(r)},"Editar",8,we)]),_:2},1024)):s("",!0),M([1,5])?(o(),y(E,{key:1},{default:m(()=>[_(C,{placement:"rightBottom",title:`Â¿Quieres eliminar ${r.documentnumber} ?`,onConfirm:n=>z(r)},{icon:m(()=>[_(te(ae),{style:{color:"red"}})]),default:m(()=>[t[3]||(t[3]=g("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):s("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),_(w,{open:k.value,"onUpdate:open":t[0]||(t[0]=r=>k.value=r),title:x.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:m(()=>[_(se,{onCloseDraw:L,info:x.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ye as default};
