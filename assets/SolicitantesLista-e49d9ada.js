import{r,H as te,v as ae,k as ne,b as c,o as i,d as u,e as _,c as l,w as s,F as p,y as L,i as m,t as o,s as d,q as M,h as R,Q as oe,I as ie,O as le,W as se,m as de}from"./index-196a8fcf.js";import{S as re}from"./DrawerSolicitante.componente-c81bbce0.js";import{u as ce}from"./selectes-4156b334.js";import{M as ue}from"./MoreOutlined-b9ee8266.js";import"./es-896c0dda.js";import"./_plugin-vue_export-helper-c27b6911.js";const pe=_("h3",null,"SOLICITANTES",-1),me=_("div",{class:"filters-notary"},[_("div")],-1),_e=["onClick"],ge=_("a",null,"Eliminar",-1),fe={class:"paginator"},z=20,Ce={__name:"SolicitantesLista",setup(he){JSON.parse(localStorage.getItem("profile"));const v=ce();v.$patch({cities:v.cities}),v.fetchCities();const w=r(window.innerHeight-100),V=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",align:"center",width:120},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"DEPARTAMENTO",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:260},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],y=r(0),g=r({page:0}),P=r(1200),k=r([]),x=r(!1),f=r(!1),C=r(null);r(null);const B=e=>{g.value.page=e,h()},I=()=>{w.value=window.innerHeight-280},U=e=>{console.log("open",e)},$=()=>{h(),f.value=!1},G=async e=>{try{const t=await L({url:`person/delete/${e.id}`,method:"DELETE"});t.status==500?se.warning({title:"Aviso",content:t.message}):(h(),de.success(t.message))}catch(t){console.error("Error de red:",t)}},H=e=>{C.value=e,f.value=!0},q=te(()=>e=>((g.value.page==0?1:g.value.page)-1)*z+e+1),h=async()=>{try{x.value=!0;let e=g.value.page==0?"":g.value;const t=await L({url:"person/list",method:"GET",params:e});k.value=t.data,y.value=t.total}catch(e){console.error("Error de red:",e)}finally{x.value=!1}};return ae(()=>{window.removeEventListener("resize",I)}),ne(()=>{window.addEventListener("resize",I),I(),h()}),(e,t)=>{const F=c("a-tag"),Q=c("a-button"),E=c("a-menu-item"),J=c("a-popconfirm"),W=c("a-menu"),X=c("a-dropdown"),Y=c("a-table"),j=c("a-pagination"),K=c("a-drawer");return i(),u(p,null,[_("div",null,[pe,me,l(Y,{bordered:"",scroll:{x:P.value,y:w.value},class:"ant-table-striped",columns:V,"data-source":k.value,pagination:!1,loading:x.value,size:"small"},{bodyCell:s(({column:n,record:a,index:Z})=>{var S,O,D,b,A,N,T;return[n.dataIndex=="idx"?(i(),u(p,{key:0},[m(o(q.value(Z)),1)],64)):d("",!0),n.dataIndex=="tdocument"?(i(),u(p,{key:1},[m(o(a.typedocument.name),1)],64)):d("",!0),n.dataIndex=="apellidos"?(i(),u(p,{key:2},[m(o(a.lastname)+" "+o(a.middlename),1)],64)):d("",!0),n.dataIndex=="city"?(i(),u(p,{key:3},[m(o((S=a.city)==null?void 0:S.name),1)],64)):d("",!0),n.dataIndex=="province"?(i(),u(p,{key:4},[m(o((O=a.province)==null?void 0:O.name),1)],64)):d("",!0),n.dataIndex=="district"?(i(),u(p,{key:5},[m(o((D=a.district)==null?void 0:D.name),1)],64)):d("",!0),n.dataIndex=="gender"?(i(),u(p,{key:6},[m(o((b=a.gender)==null?void 0:b.name),1)],64)):d("",!0),n.dataIndex=="sickx"?(i(),M(F,{key:7,color:a.sick=="no"?"blue":"pink"},{default:s(()=>[m(o(a.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="registerby"?(i(),u(p,{key:8},[m(o((A=a.user[0])==null?void 0:A.profile.name)+" "+o((N=a.user[0])==null?void 0:N.profile.lastname)+" "+o((T=a.user[0])==null?void 0:T.profile.middlename),1)],64)):d("",!0),n.dataIndex=="actions"?(i(),M(X,{key:9,trigger:["click"]},{overlay:s(()=>[l(W,null,{default:s(()=>[l(E,null,{default:s(()=>[_("a",{onClick:ee=>H(a)},"Editar",8,_e)]),_:2},1024),l(E,null,{default:s(()=>[l(J,{title:"¿Seguro de eliminar?",onConfirm:ee=>G(a)},{icon:s(()=>[l(R(oe),{style:{color:"red"}})]),default:s(()=>[ge]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[_("a",{class:"ant-dropdown-link",onClick:t[0]||(t[0]=ie(()=>{},["prevent"]))},[l(Q,{shape:"circle",icon:le(R(ue)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading"])]),_("div",fe,[l(j,{size:"small",total:y.value,pageSize:z,onChange:B,showSizeChanger:!1},null,8,["total"])]),l(K,{open:f.value,"onUpdate:open":t[1]||(t[1]=n=>f.value=n),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:U},{default:s(()=>[l(re,{onCloseDraw:$,updateValues:C.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}};export{Ce as default};
