import{l as H,r as p,a as X,b as u,o,x as i,w as s,c as r,e as q,d as C,F,s as ee,h as S,y as m,I as ae,t as j,i as U,N as Q,m as P,M as re,q as M,G as ge,j as be,J as ye,K as he}from"./index-673421c4.js";import{u as te}from"./selectes-26d90f78.js";import"./es-17a66ad6.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{f as we}from"./nuevoUsuario-39eedf3b.js";import{M as xe}from"./MoreOutlined-507c8ebb.js";const Se={email:{type:"iText",label:"Correo",name:"email",required:!1,email:"email",message:"Escribe el correo del usuario",disabled:!0},documentnumber:{type:"iText",label:"Número de DNI",name:"documentnumber",required:!0,message:"Número de DNI",max:8,disabled:!1},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el apellido paterno"},lastname:{type:"iText",label:"Apellido paterno",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"Apellido materno",name:"middlename",required:!0,message:"Escribe el apellido paterno"},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!1,message:"año-mes-día",placeholder:"año-mes-día"},phone:{type:"iText",label:"Ingresar número celular",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"Género",name:"gender_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},cde_id:{type:"iSelect",label:"CDE",name:"cde_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},office_id:{type:"iSelect",label:"Oficina",name:"office_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0}};const De={class:"grid-profile"},Ue="DD/MM/YYYY",ke={__name:"DrawerEditarDatosAsesor",props:["record"],emits:["closeDraw"],setup(W,{emit:L}){H.locale("es");const n=te(),d=JSON.parse(localStorage.getItem("profile")),w=L;n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const D=W,z=p(!0),Y=p(!1),R=p(Se),e=X({name:null,lastname:null,middlename:null,birthday:null,sick:null,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:d.id}),$=b=>{var x;b&&(e.name=b.profile_name,e.lastname=b.profile_lastname,e.middlename=b.profile_middlename,e.documentnumber=b.profile_documentnumber,e.phone=b.profile_phone,e.gender_id=b.gender_id,e.cde_id=b.cde_id,e.office_id=b.office_id,e.email=b.email,b.profile_birthday&&(e.birthday=H(b.profile_birthday,"YYYY-MM-DD"))),(x=n.genders)!=null&&x.length&&(z.value=!1)},I=b=>{const x={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0};if(b===2)n.fetchSupervisores(),R.value={...R.value,supervisor_id:x};else{const{supervisor_id:k,...O}=R.value;R.value=O}},N=async()=>{Y.value=!0;const b={name:e.name,lastname:e.lastname,middlename:e.middlename,birthday:e.birthday?H(e.birthday).format("YYYY-MM-DD"):null,sick:e.sick,phone:e.phone,gender_id:e.gender_id,cde_id:e.cde_id,office_id:e.office_id,user_id:d.id};try{const x=await Q({url:`user/update/${D.record._id}`,method:"PUT",data:b});P.success(x.message),w("closeDraw")}catch(x){console.log("NOOo",x)}finally{Y.value=!1}},G=()=>{P.error("Debes de completar todos los espacios requeridos")};return(b,x)=>{const k=u("a-select"),O=u("a-form-item"),v=u("a-input"),c=u("a-date-picker"),_=u("a-button"),f=u("a-form"),T=u("a-spin");return o(),i(T,{spinning:z.value},{default:s(()=>[r(f,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:G},{default:s(()=>[q("div",De,[(o(!0),C(F,null,ee(R.value,(l,E)=>(o(),C(F,{key:E},[l.type==="iSelect"?(o(),i(O,{key:0,class:"item-max",name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:s(()=>[l.name=="gender_id"?(o(),i(k,{key:0,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="cde_id"?(o(),i(k,{key:1,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).cdes},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="office_id"?(o(),i(k,{key:2,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).Offices},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="role_id"?(o(),i(k,{key:3,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).roles,onChange:I},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="supervisor_id"?(o(),i(k,{key:4,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iText"?(o(),i(O,{key:1,name:l.name,label:l.label,rules:[{required:l.required,message:l.message,type:l.email}]},{default:s(()=>[r(v,{value:e[l.name],"onUpdate:value":g=>e[l.name]=g,maxlength:l.max,disabled:l.disabled},null,8,["value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iDate"?(o(),i(O,{key:2,name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:s(()=>[r(c,{locale:S(ae),value:e[l.name],"onUpdate:value":g=>e[l.name]=g,style:{width:"100%"},format:Ue,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),q("div",null,j($(D.record)),1),r(O,null,{default:s(()=>[r(_,{class:"btn-produce",type:"primary","html-type":"submit",loading:Y.value},{default:s(()=>x[0]||(x[0]=[U("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},Ee=ne(ke,[["__scopeId","data-v-f5cfd002"]]);const Ae={class:"grid-item"},Re="DD/MM/YYYY",Ie={__name:"DrawerRegistrarAsesor",setup(W){H.locale("es");const L=JSON.parse(localStorage.getItem("profile")),n=te();n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const d=p(we),w=p(null),D=p(!1),z=p(!1),Y=p(!1);p(!1),p(null);const R=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],e=X({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:L.user_id,email:null,password:null}),$=()=>{e.name=null,e.lastname=null,e.middlename=null,e.documentnumber=null,w.value=null,e.phone=null,e.gender_id=null,e.cde_id=null,e.office_id=null,e.email=null,e.password=null,e.role_id=null},I=v=>{e[v]=e[v].replace(/\D/g,"")},N=(v,c)=>{const _=v.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)},G=v=>{const c={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},_={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},f={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},T={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},l={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(v===2){n.fetchSupervisores(),d.value={...d.value,supervisor_id:c};const{city:E,province:g,district:A,address:a,...y}=d.value;d.value=y}else if(v===7){d.value={...d.value,city:_,province:f,district:T,address:l};const{supervisor_id:E,...g}=d.value;d.value=g,d.value.cde_id.required=!1}else{let{city:E,province:g,district:A,address:a,supervisor_id:y,...t}=d.value;d.value=t}},b=async()=>{D.value=!0,e.email=e.name.replace(/\s/g,"").toLowerCase()+e.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",e.password=e.documentnumber,e.birthday=w.value?H(w.value).format("YYYY-MM-DD"):null;try{const v=await Q({url:"user/create",method:"POST",data:e});re.success({title:"La cuenta ha sido registrada",content:M("div",{},[M("br"),M("p",`Correo: ${e.email}`),M("p","Contraseña es el número de DNI ingresado")]),onOk(){$(),P.success(v.message);const{supervisor_id:c,..._}=d.value;d.value=_}})}catch{P.error("No se pudo registrar este usuario")}finally{D.value=!1}},x=()=>{P.error("Debes de completar todos los espacios requeridos")},k=async v=>{console.log("Hello",v)},O=()=>{e.document_number=e.document_number.replace(/\D/g,"")};return(v,c)=>{const _=u("a-select"),f=u("a-form-item"),T=u("a-input-search"),l=u("a-input"),E=u("a-date-picker"),g=u("a-button"),A=u("a-form");return o(),C("div",null,[r(A,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:b,onFinishFailed:x},{default:s(()=>[q("div",Ae,[(o(!0),C(F,null,ee(d.value,(a,y)=>(o(),C(F,{key:y},[a.type==="iSelect"?(o(),i(f,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:s(()=>[a.name=="gender_id"?(o(),i(_,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="cde_id"?(o(),i(_,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).cdes},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="role_id"?(o(),i(_,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:R,onChange:G},null,8,["value","onUpdate:value"])):m("",!0),a.name=="supervisor_id"?(o(),i(_,{key:3,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="office_id"?(o(),i(_,{key:4,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,"show-search":"",options:S(n).Offices,"filter-option":N},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iSearch"?(o(),i(f,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:s(()=>[r(T,{maxlength:15,loading:z.value,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,onSearch:k,onInput:O,disabled:Y.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iText"?(o(),i(f,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:s(()=>[a.name=="documentnumber"?(o(),i(l,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[0]||(c[0]=t=>I("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):a.name=="phone"?(o(),i(l,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[1]||(c[1]=t=>I("phone"))},null,8,["value","onUpdate:value","maxlength"])):(o(),i(l,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,disabled:a.disabled},null,8,["value","onUpdate:value","maxlength","disabled"]))]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iDate"?(o(),i(f,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:s(()=>[r(E,{locale:S(ae),value:w.value,"onUpdate:value":c[2]||(c[2]=t=>w.value=t),style:{width:"100%"},format:Re},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),r(f,null,{default:s(()=>[r(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:D.value},{default:s(()=>c[3]||(c[3]=[U("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Oe=ne(Ie,[["__scopeId","data-v-1f072082"]]),qe={agente:{type:"iText",label:"ENTIDAD AGENTE ALIADO",name:"agente",required:!0,message:"Ingresar los nombres"},name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingresar los nombres"},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribe el apellido paterno"},documentnumber:{type:"iText",label:"NÚMERO DE DNI",name:"documentnumber",required:!0,message:"Ingresa el número de DNI",max:8},phone:{type:"iText",label:"NÚMERO CELULAR",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!0,message:"Escribe número de documento",disabled:!1},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},cde_id:{type:"iSelect",label:"CDE ASESOR",name:"cde_id",required:!0,message:"Seleccionar la sede",disabled:!0},none:{type:"iNone",label:""}};const Ce={class:"grid-item"},Ne="DD/MM/YYYY",Te={__name:"DrawerRegistrarAsesorAgente",setup(W){H.locale("es");const L=JSON.parse(localStorage.getItem("profile")),n=te();n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const d=p(qe),w=p(null),D=p(!1),z=p(!1),Y=p(!1);p(!1),p(null);const R=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],e=X({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:L.user_id,email:null,password:null}),$=()=>{e.name=null,e.lastname=null,e.middlename=null,e.documentnumber=null,w.value=null,e.phone=null,e.gender_id=null,e.cde_id=null,e.office_id=null,e.email=null,e.password=null,e.role_id=null},I=v=>{e[v]=e[v].replace(/\D/g,"")},N=(v,c)=>{const _=v.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)},G=v=>{const c={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},_={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},f={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},T={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},l={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(v===2){n.fetchSupervisores(),d.value={...d.value,supervisor_id:c};const{city:E,province:g,district:A,address:a,...y}=d.value;d.value=y}else if(v===7){d.value={...d.value,city:_,province:f,district:T,address:l};const{supervisor_id:E,...g}=d.value;d.value=g,d.value.cde_id.required=!1}else{let{city:E,province:g,district:A,address:a,supervisor_id:y,...t}=d.value;d.value=t}},b=async()=>{D.value=!0,e.email=e.name.replace(/\s/g,"").toLowerCase()+e.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",e.password=e.documentnumber,e.birthday=w.value?H(w.value).format("YYYY-MM-DD"):null,e.cdename,e.cdecity,e.cdeprovince,e.cdedistrict,e.cdeaddress;const v={email:e.email,password:e.password,name:e.agente+" - "+e.name,lastname:e.lastname,middlename:e.middlename,documentnumber:e.documentnumber,sick:"no",phone:e.phone,gender_id:e.gender_id,cde_id:e.cde_id,office_id:1,role_id:2};try{const c=await Q({url:"user/create",method:"POST",data:v});re.success({title:"La cuenta ha sido registrada",content:M("div",{},[M("br"),M("p",`Correo: ${e.email}`),M("p","Contraseña es el número de DNI ingresado")]),onOk(){$(),P.success(c.message);const{supervisor_id:_,...f}=d.value;d.value=f}})}catch{P.error("No se pudo registrar este usuario")}finally{D.value=!1}},x=()=>{P.error("Debes de completar todos los espacios requeridos")},k=async v=>{console.log("Hello",v)},O=()=>{e.document_number=e.document_number.replace(/\D/g,"")};return(v,c)=>{const _=u("a-select"),f=u("a-form-item"),T=u("a-input-search"),l=u("a-input"),E=u("a-date-picker"),g=u("a-button"),A=u("a-form");return o(),C("div",null,[r(A,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:b,onFinishFailed:x},{default:s(()=>[q("div",Ce,[(o(!0),C(F,null,ee(d.value,(a,y)=>(o(),C(F,{key:y},[a.type==="iSelect"?(o(),i(f,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:s(()=>[a.name=="gender_id"?(o(),i(_,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="cde_id"?(o(),i(_,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).cdes,"show-search":"","filter-option":N},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="role_id"?(o(),i(_,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:R,onChange:G},null,8,["value","onUpdate:value"])):m("",!0),a.name=="supervisor_id"?(o(),i(_,{key:3,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="office_id"?(o(),i(_,{key:4,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,"show-search":"",options:S(n).Offices,"filter-option":N},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iSearch"?(o(),i(f,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:s(()=>[r(T,{maxlength:15,loading:z.value,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,onSearch:k,onInput:O,disabled:Y.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iText"?(o(),i(f,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:s(()=>[a.name=="documentnumber"?(o(),i(l,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[0]||(c[0]=t=>I("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):a.name=="phone"?(o(),i(l,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[1]||(c[1]=t=>I("phone"))},null,8,["value","onUpdate:value","maxlength"])):(o(),i(l,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,disabled:a.disabled,placeholder:a.placeholder},null,8,["value","onUpdate:value","maxlength","disabled","placeholder"]))]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iDate"?(o(),i(f,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:s(()=>[r(E,{locale:S(ae),value:w.value,"onUpdate:value":c[2]||(c[2]=t=>w.value=t),style:{width:"100%"},format:Ne},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iNone"?(o(),i(f,{key:4,class:"item-max",name:a.name,label:a.label},null,8,["name","label"])):m("",!0)],64))),128))]),r(f,null,{default:s(()=>[r(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:D.value},{default:s(()=>c[3]||(c[3]=[U("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},$e=ne(Te,[["__scopeId","data-v-46f1ab49"]]);const Fe=["onClick"],Le=["onClick"],Ye={class:"paginator"},He={__name:"AsesoresLista",setup(W){const L=p(50),n=p([]),d=p(!1),w=p(0),D=p({page:1}),z=p("user/list-asesories"),Y=p(1200),R=p(window.innerHeight-100),e=p(!1),$=p(!1),I=p(!1),N=p(!1),G=p(null),b=p(null),x=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOMBRES",dataIndex:"profile_name",width:160},{title:"APELLIDOS",dataIndex:"lastname",width:160},{title:"DNI",dataIndex:"profile_documentnumber",width:100,align:"center"},{title:"CELULAR",dataIndex:"profile_phone",width:100,align:"center"},{title:"CDE",dataIndex:"cde_name",width:160},{title:"FECHA NAC.",dataIndex:"profile_birthday",width:100,align:"center"},{title:"GÉNERO",dataIndex:"gender",width:120,align:"center"},{title:"OFICINA",dataIndex:"office_name",width:100,align:"center"},{title:"ROL",dataIndex:"role",width:140,align:"center"},{title:"CUENTA",dataIndex:"email",width:180},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],k=()=>{R.value=window.innerHeight-300},O=y=>{e.value=!0,G.value=y},v=y=>{$.value=!0,b.value=y},c=()=>{e.value=!1,A()},_=X({search:""}),f=X({password:""}),T=async()=>{const y={id:b.value.user_id,password:f.password};try{const t=await Q({url:"user/update-password",method:"POST",data:y});t.status===200&&(P.success(t.message),f.password=null,$.value=!1)}catch(t){console.error("Failed to update record",t)}},l=()=>{A({search:_.search})},E=()=>{_.search||A()},g=y=>{D.value.page=y,A()},A=async y=>{try{d.value=!0;const t=D.value.page===1?"":D.value,B=y?{...t,...y}:t,J=await Q({url:z.value,method:"GET",params:B});n.value=J.data,w.value=J.total,L.value=J.per_page}catch(t){console.error("Error de red:",t)}finally{d.value=!1}},a=ge(()=>y=>(D.value.page-1)*L.value+y+1);return be(()=>{A(),window.addEventListener("resize",k),k()}),(y,t)=>{const B=u("a-button"),J=u("a-col"),le=u("a-input"),ie=u("a-input-group"),de=u("a-row"),K=u("a-tag"),oe=u("a-menu-item"),ue=u("a-menu"),me=u("a-dropdown"),ce=u("a-table"),pe=u("a-pagination"),Z=u("a-drawer"),se=u("a-form-item"),ve=u("a-form");return o(),C(F,null,[q("div",null,[t[18]||(t[18]=q("h3",{class:"title-produce"},"LISTA DE USUARIOS - UGO",-1)),r(de,{style:{margin:"1rem 0"}},{default:s(()=>[r(J,{xs:24,md:12,lg:18},{default:s(()=>[r(B,{type:"primary",onClick:t[0]||(t[0]=h=>I.value=!0),style:{"background-color":"#e20613"}},{default:s(()=>t[11]||(t[11]=[U("ASESOR PNTE")])),_:1}),r(B,{type:"primary",onClick:t[1]||(t[1]=h=>N.value=!0),style:{"background-color":"#00952f","margin-left":".8rem"}},{default:s(()=>t[12]||(t[12]=[U("ASESOR AGENTE")])),_:1})]),_:1}),r(J,{xs:24,md:12,lg:6},{default:s(()=>[r(ie,{compact:""},{default:s(()=>[r(le,{value:_.search,"onUpdate:value":t[2]||(t[2]=h=>_.search=h),style:{width:"calc(100% - 80px)"},onInput:E,onKeyup:ye(l,["enter"])},null,8,["value"]),r(B,{type:"primary",disabled:_.search==="",onClick:l},{default:s(()=>t[13]||(t[13]=[U("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),r(ce,{bordered:"",scroll:{x:Y.value,y:R.value},class:"table-users",columns:x,"data-source":n.value,pagination:!1,loading:d.value,size:"small"},{bodyCell:s(({column:h,record:V,index:_e})=>[h.dataIndex==="idx"?(o(),C(F,{key:0},[U(j(a.value(_e)),1)],64)):m("",!0),h.dataIndex==="lastname"?(o(),C(F,{key:1},[U(j(V.profile_lastname)+" "+j(V.profile_middlename),1)],64)):m("",!0),h.dataIndex==="role"?(o(),C(F,{key:2},[V.role_user==1?(o(),i(K,{key:0,color:"blue"},{default:s(()=>t[14]||(t[14]=[U("SUPERVISOR")])),_:1})):m("",!0),V.role_user==2?(o(),i(K,{key:1,color:"red"},{default:s(()=>t[15]||(t[15]=[U("ASESOR PNTE")])),_:1})):m("",!0),V.role_user==7?(o(),i(K,{key:2,color:"purple"},{default:s(()=>t[16]||(t[16]=[U("ASESOR - NOTARÍA")])),_:1})):m("",!0),V.role_user==13?(o(),i(K,{key:3,color:"green"},{default:s(()=>t[17]||(t[17]=[U("ASESOR - AGENTE")])),_:1})):m("",!0)],64)):m("",!0),h.dataIndex=="actions"?(o(),i(me,{key:3,trigger:["click"]},{overlay:s(()=>[r(ue,null,{default:s(()=>[r(oe,null,{default:s(()=>[q("a",{onClick:fe=>O(V)},"Editar datos",8,Fe)]),_:2},1024),r(oe,null,{default:s(()=>[q("a",{onClick:fe=>v(V)},"Resetear contraseña",8,Le)]),_:2},1024)]),_:2},1024)]),default:s(()=>[q("a",{class:"ant-dropdown-link",onClick:t[3]||(t[3]=he(()=>{},["prevent"]))},[r(B,{shape:"circle",icon:M(S(xe)),size:"small"},null,8,["icon"])])]),_:2},1024)):m("",!0)]),_:1},8,["scroll","data-source","loading"])]),q("div",Ye,[q("span",null,[r(K,{color:"blue"},{default:s(()=>[q("b",null,j(w.value),1)]),_:1}),t[19]||(t[19]=U("Usuarios"))]),r(pe,{size:"small",total:w.value,pageSize:L.value,onChange:g,showSizeChanger:!1},null,8,["total","pageSize"])]),r(Z,{width:"550",open:e.value,"onUpdate:open":t[4]||(t[4]=h=>e.value=h),class:"draw",title:"Editar datos del asesor",placement:"right"},{default:s(()=>[r(Ee,{onCloseDraw:c,record:G.value},null,8,["record"])]),_:1},8,["open"]),r(Z,{width:"550",open:I.value,"onUpdate:open":t[6]||(t[6]=h=>I.value=h),class:"draw",title:"REGISTRAR UN ASESOR",placement:"right"},{default:s(()=>[r(Oe,{onCloseDraw:t[5]||(t[5]=h=>I.value=!1)})]),_:1},8,["open"]),r(Z,{width:"550",open:N.value,"onUpdate:open":t[8]||(t[8]=h=>N.value=h),class:"draw",title:"REGISTRAR UN ASESOR AGENTE",placement:"right"},{default:s(()=>[r($e,{onCloseDraw:t[7]||(t[7]=h=>N.value=!1)})]),_:1},8,["open"]),r(Z,{width:"350",open:$.value,"onUpdate:open":t[10]||(t[10]=h=>$.value=h),class:"draw",title:"Cambiar contraseña",placement:"right"},{default:s(()=>[r(ve,{layout:"vertical",model:f,name:"basic",autocomplete:"off",onFinish:T,onFinishFailed:y.onFinishFailed},{default:s(()=>[r(se,{label:"Contraseña",name:"password",rules:[{required:!0,message:"Escribir contraseña"}]},{default:s(()=>[r(le,{value:f.password,"onUpdate:value":t[9]||(t[9]=h=>f.password=h)},null,8,["value"])]),_:1}),r(se,null,{default:s(()=>[r(B,{type:"primary","html-type":"submit"},{default:s(()=>t[20]||(t[20]=[U("CAMBIAR")])),_:1})]),_:1})]),_:1},8,["model","onFinishFailed"])]),_:1},8,["open"])],64)}}};export{He as default};
