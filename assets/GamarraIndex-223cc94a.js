import{r as t,H as U,v as V,k as F,b as c,o,d as s,e as p,c as _,w as f,F as l,y as G,i as u,t as r,s as i,q as H,I as T,J as q,h as J}from"./index-22138c97.js";import{u as P}from"./selectes-68506c74.js";import{M as X}from"./MoreOutlined-f914f5ca.js";const Y=p("h3",null,"ASESORES",-1),$=p("div",{class:"filters-notary"},[p("div")],-1),j={class:"paginator"},k=20,ee={__name:"GamarraIndex",setup(K){JSON.parse(localStorage.getItem("profile"));const g=P();g.$patch({cities:g.cities}),g.fetchCities();const x=t(window.innerHeight-100),C=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"EMAIL",dataIndex:"email",fixed:"left",width:200},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",align:"center",width:120},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"F.NACIMIENTO",dataIndex:"birthday",align:"center",width:150}],w=t(0),m=t({page:0}),S=t(1200),I=t([]),h=t(!1),y=t(!1);t(null),t(null);const E=e=>{m.value.page=e,b()},v=()=>{x.value=window.innerHeight-280},z=e=>{console.log("open",e)},N=U(()=>e=>((m.value.page==0?1:m.value.page)-1)*k+e+1),b=async()=>{try{h.value=!0;let e=m.value.page==0?"":m.value;const n=await G({url:"user/list-asesories",method:"GET",params:e});I.value=n.data,w.value=n.total}catch(e){console.error("Error de red:",e)}finally{h.value=!1}};return V(()=>{window.removeEventListener("resize",v)}),F(()=>{window.addEventListener("resize",v),v(),b()}),(e,n)=>{const O=c("a-button"),M=c("a-menu"),A=c("a-dropdown"),L=c("a-table"),B=c("a-pagination"),D=c("a-drawer");return o(),s(l,null,[p("div",null,[Y,$,_(L,{bordered:"",scroll:{x:S.value,y:x.value},class:"ant-table-striped",columns:C,"data-source":I.value,pagination:!1,loading:h.value,size:"small"},{bodyCell:f(({column:a,record:d,index:R})=>[a.dataIndex=="idx"?(o(),s(l,{key:0},[u(r(N.value(R)),1)],64)):i("",!0),a.dataIndex=="name"?(o(),s(l,{key:1},[u(r(d.asesores.profile.name),1)],64)):i("",!0),a.dataIndex=="apellidos"?(o(),s(l,{key:2},[u(r(d.asesores.profile.lastname)+" "+r(d.asesores.profile.middlename),1)],64)):i("",!0),a.dataIndex=="documentnumber"?(o(),s(l,{key:3},[u(r(d.asesores.profile.documentnumber),1)],64)):i("",!0),a.dataIndex=="phone"?(o(),s(l,{key:4},[u(r(d.asesores.profile.phone),1)],64)):i("",!0),a.dataIndex=="birthday"?(o(),s(l,{key:5},[u(r(d.asesores.profile.birthday),1)],64)):i("",!0),a.dataIndex=="actions"?(o(),H(A,{key:6,trigger:["click"]},{overlay:f(()=>[_(M)]),default:f(()=>[p("a",{class:"ant-dropdown-link",onClick:n[0]||(n[0]=T(()=>{},["prevent"]))},[_(O,{shape:"circle",icon:q(J(X)),size:"small"},null,8,["icon"])])]),_:1})):i("",!0)]),_:1},8,["scroll","data-source","loading"])]),p("div",j,[_(B,{size:"small",total:w.value,pageSize:k,onChange:E,showSizeChanger:!1},null,8,["total"])]),_(D,{open:y.value,"onUpdate:open":n[1]||(n[1]=a=>y.value=a),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:z},null,8,["open"])],64)}}};export{ee as default};
