import{u as L,x as X,r as p,j as H,b as v,o as t,d as a,e as l,c as _,w as u,t as o,F as i,y as T,m as J,i as y,v as m,h as D,V,q as s,p as K}from"./index-33e66e21.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"c-primary details-title"},Z={class:"average"},ee={key:0},te={key:0},ae={key:0},ne={class:"ncheck"},le={key:0},se={class:"ncheck"},oe={key:0},ie={key:0},de={key:0},re={class:"average-final"},ue={key:0},_e={key:0},ce={key:0},ge={key:0},pe={class:"paginator"},ye={key:0,class:"details-modal"},ve={__name:"TallerDetalle",setup(ke){L();const N=X(),$=p([]),f=p([]),h=p(!1),x=p(!1),R=p(1e3);p("60vh");const I=p(!1),k=p(!1),w=p(0);p(null);const C=p({page:1}),z=[{title:"RUC",dataIndex:"ruc_mype",fixed:"left",width:150},{title:"TE1",dataIndex:"te1",align:"center",width:60,key:"te1"},{title:"TE2",dataIndex:"te2",align:"center",width:60,key:"te2"},{title:"TE3",dataIndex:"te3",align:"center",width:60,key:"te3"},{title:"TE4",dataIndex:"te4",align:"center",width:60,key:"te4"},{title:"TE5",dataIndex:"te5",align:"center",width:60,key:"te5"},{title:"Nota",dataIndex:"te_note",align:"center",width:70},{title:"TS1",dataIndex:"ts1",align:"center",width:60,key:"ts1"},{title:"TS2",dataIndex:"ts2",align:"center",width:60,key:"ts2"},{title:"TS3",dataIndex:"ts3",align:"center",width:60,key:"ts3"},{title:"TS4",dataIndex:"ts4",align:"center",width:60,key:"ts4"},{title:"TS5",dataIndex:"ts5",align:"center",width:60,key:"ts5"},{title:"Nota",dataIndex:"ts_note",align:"center",width:70},{title:"Promedio Final",dataIndex:"average_final",align:"center",width:120},{title:"C1",dataIndex:"c1",align:"center",width:70},{title:"C2",dataIndex:"c2",align:"center",width:70},{title:"C3",dataIndex:"c3",align:"center",width:70},{title:"Promedio Satisfacción",dataIndex:"average_satisfaction",align:"center",width:120},{title:"Sugerencias",dataIndex:"suggest",align:"center",width:100}],P=d=>{C.value.page=d,b()},B=async()=>{try{x.value=!0;const d=await T({url:"/workshop/details/average",method:"PUT"});b(),J.success(d.message)}catch(d){console.error("Error de red:",d)}finally{x.value=!1}},F=d=>{k.value=d,I.value=!0},b=async()=>{var d;try{h.value=!0;const e=await T({url:`/workshop/details/${N.query.id}`,method:"GET",params:C.value});if($.value=e.data,w.value=e.total,e.data.length<1)return;U((d=e==null?void 0:e.data[0])==null?void 0:d.workshop_id)}catch(e){console.error("Error de red:",e)}finally{h.value=!1}},U=async d=>{try{const e=await T({url:`/test-all-questions/${d}`,method:"GET"});f.value=e}catch(e){console.error("Error de red:",e)}};return H(()=>{b()}),(d,e)=>{const A=v("router-link"),S=v("a-breadcrumb-item"),M=v("a-breadcrumb"),G=v("a-tag"),E=v("a-button"),q=v("a-tooltip"),O=v("a-table"),Q=v("a-pagination"),j=v("a-modal");return t(),a(i,null,[l("div",null,[_(M,null,{default:u(()=>[_(S,null,{default:u(()=>[_(A,{to:"/admin/ruta-digital/talleres"},{default:u(()=>e[1]||(e[1]=[y("Volver a Talleres de Ruta Digital")])),_:1})]),_:1}),_(S,null,{default:u(()=>e[2]||(e[2]=[y("Detalles del taller")])),_:1})]),_:1}),e[8]||(e[8]=l("br",null,null,-1)),l("div",null,[e[3]||(e[3]=l("span",null,"Detalles:",-1)),l("h3",Y,o(d.$route.query.taller),1),e[4]||(e[4]=l("span",null,"fecha del taller",-1)),l("h3",null,o(d.$route.query.date),1),e[5]||(e[5]=l("span",null,"Total inscritas",-1)),l("div",null,[_(G,{color:"processing"},{default:u(()=>[y(o(w.value),1)]),_:1})])]),l("div",Z,[_(E,{type:"primary",loading:x.value,onClick:B},{default:u(()=>e[6]||(e[6]=[y("Promediar")])),_:1},8,["loading"])]),_(O,{bordered:"",class:"ant-table-striped",scroll:{x:R.value},columns:z,"data-source":$.value,pagination:!1,loading:h.value,size:"small"},{headerCell:u(({column:r})=>[(t(),a(i,null,m(5,(n,c)=>(t(),a(i,{key:c},[r.key===`te${c+1}`?(t(),a("div",ee,[l("span",null,[_(q,null,{title:u(()=>[y(o(f.value[`q_testin_${c+1}`]),1)]),default:u(()=>[y(" "+o(`TE${c+1}`)+" ",1),_(D(V),{class:"tooltip-table"})]),_:2},1024)])])):s("",!0)],64))),64)),(t(),a(i,null,m(5,(n,c)=>(t(),a(i,{key:c},[r.key===`ts${c+1}`?(t(),a("div",te,[l("span",null,[_(q,null,{title:u(()=>[y(o(f.value[`q_testout_${c+1}`]),1)]),default:u(()=>[y(" "+o(`TS${c+1}`)+" ",1),_(D(V),{class:"tooltip-table"})]),_:2},1024)])])):s("",!0)],64))),64))]),bodyCell:u(({column:r,record:n})=>[(t(),a(i,null,m(5,(c,g)=>(t(),a(i,{key:g},[r.dataIndex===`te${g+1}`?(t(),a("div",ae,[l("span",ne,o(n[`te${g+1}`]===4?"✔️":n[`te${g+1}`]===0?"❌":n[`te${g+1}`]===null?"-":""),1)])):s("",!0)],64))),64)),(t(),a(i,null,m(5,(c,g)=>(t(),a(i,{key:g},[r.dataIndex===`ts${g+1}`?(t(),a("div",le,[l("span",se,o(n[`ts${g+1}`]===4?"✔️":n[`ts${g+1}`]===0?"❌":n[`ts${g+1}`]===null?"-":""),1)])):s("",!0)],64))),64)),r.dataIndex=="te_note"?(t(),a(i,{key:0},[n.te_note?(t(),a("span",oe,[l("b",null,o(n.te_note),1)])):s("",!0)],64)):s("",!0),r.dataIndex=="ts_note"?(t(),a(i,{key:1},[n.ts_note?(t(),a("span",ie,[l("b",null,o(n.ts_note),1)])):s("",!0)],64)):s("",!0),r.dataIndex=="average_final"?(t(),a(i,{key:2},[n.average_final?(t(),a("span",de,[l("b",re,o(n.average_final),1)])):s("",!0)],64)):s("",!0),r.dataIndex=="average_satisfaction"?(t(),a(i,{key:3},[n.average_satisfaction?(t(),a("span",ue,[l("b",null,o(n.average_satisfaction)+" %",1)])):s("",!0)],64)):s("",!0),r.dataIndex=="c1"?(t(),a(i,{key:4},[n.c1?(t(),a("span",_e,o(n.c1*20)+" % ",1)):s("",!0)],64)):s("",!0),r.dataIndex=="c2"?(t(),a(i,{key:5},[n.c1?(t(),a("span",ce,o(n.c2*20)+" % ",1)):s("",!0)],64)):s("",!0),r.dataIndex=="c3"?(t(),a(i,{key:6},[n.c1?(t(),a("span",ge,o(n.c3*20)+" % ",1)):s("",!0)],64)):s("",!0),r.dataIndex=="suggest"?(t(),a(i,{key:7},[n.suggestions?(t(),K(E,{key:0,size:"small",onClick:c=>F(n)},{default:u(()=>e[7]||(e[7]=[y("Ver")])),_:2},1032,["onClick"])):s("",!0)],64)):s("",!0)]),_:1},8,["scroll","data-source","loading"])]),l("div",pe,[_(Q,{size:"small",total:w.value,pageSize:20,onChange:P,showSizeChanger:!1},null,8,["total"])]),_(j,{open:I.value,"onUpdate:open":e[0]||(e[0]=r=>I.value=r),title:"Sugerencias",footer:null,width:"350px"},{default:u(()=>[k.value?(t(),a("div",ye,[e[9]||(e[9]=l("b",null,"RUC",-1)),e[10]||(e[10]=y()),l("span",null,o(k.value.ruc_mype),1),e[11]||(e[11]=l("b",null,"Sugerencia",-1)),e[12]||(e[12]=y()),l("span",null,o(k.value.suggestions),1)])):s("",!0)]),_:1},8,["open"])],64)}}},he=W(ve,[["__scopeId","data-v-9757ec24"]]);export{he as default};
