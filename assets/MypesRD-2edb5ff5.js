import{c as m,A as F,r as s,E as L,j as T,b as p,o as l,d as g,e as f,y as d,w as r,f as E,n as c,F as b,L as B,G as $,m as G,k as H,g as u}from"./index-96f21589.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Y=J;function N(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),a.forEach(function(i){q(o,i,e[i])})}return o}function q(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}var w=function(t,e){var a=N({},t,e.attrs);return m(F,N({},a,{icon:Y}),null)};w.displayName="UploadOutlined";w.inheritAttrs=!1;const X=w;const Q=f("h3",null,"Lista de MYPE",-1),W={class:"w-search"},Z={class:"paginator"},K={key:0,class:"full-spin"},te={__name:"MypesRD",setup(o){const t="http://127.0.0.1:8000/api/v1",e=s(!1),a=s(null),i=s([]),y=s(!1),U=s(1200);s("");const I=s(0),S=s(null),D=L(B,{style:{fontSize:"40px"},spin:!0}),O=s({page:1}),A=[{title:"RUC",dataIndex:"ruc",fixed:"left",width:120},{title:"Razón social",dataIndex:"socialReason",width:250},{title:"Rubro",dataIndex:"category",width:200},{title:"Tipo",dataIndex:"type",align:"center",width:140},{title:"Departamento",dataIndex:"department",width:140},{title:"Distrito",dataIndex:"district",width:130},{title:"Nombres y Apellidos",dataIndex:"nameComplete",width:300},{title:"DNI",dataIndex:"dniNumber",align:"center",width:120},{title:"Sexo",dataIndex:"sex",align:"center",width:130},{title:"Teléfono",dataIndex:"phone",align:"center",width:130},{title:"Email",dataIndex:"email",width:300}],M=n=>{O.value.page=n,x()},R=()=>{},z=()=>{if(!a.value){alert("Por favor selecciona un archivo Excel.");return}e.value=!0;const n=new FormData;n.append("file",a.value),$.post(`${t}/digital-route/load-excel`,n,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then(h=>{G.success(h.data.message),x()}).catch(h=>{console.error("Error al subir el archivo",h)}).finally(()=>{e.value=!1,a.value=null})},x=async()=>{try{y.value=!0;const n=await H({url:"/mype",method:"GET",params:O.value});i.value=n.data,I.value=n.meta.total}catch(n){console.error("Error de red:",n)}finally{y.value=!1}};return T(x),(n,h)=>{const k=p("a-button"),_=p("a-tag"),P=p("a-table"),V=p("a-pagination"),j=p("a-spin");return l(),g(b,null,[f("div",null,[Q,f("div",W,[f("div",null,[a.value?(l(),d(k,{key:1,onClick:z,type:"primary"},{default:r(()=>[u("Cargar datos")]),_:1})):(l(),d(k,{key:0,onClick:R},{icon:r(()=>[m(E(X))]),default:r(()=>[u(" Seleccionar archivo excel ")]),_:1}))])]),m(P,{bordered:"",class:"ant-table-striped",scroll:{x:U.value,y:S.value},columns:A,"data-source":i.value,pagination:!1,loading:y.value,size:"small"},{bodyCell:r(({column:C,record:v})=>[C.dataIndex=="type"?(l(),g(b,{key:0},[v.type=="NATURAL"?(l(),d(_,{key:0,color:"success"},{default:r(()=>[u("Natural")]),_:1})):c("",!0),v.type=="JURIDICA"?(l(),d(_,{key:1,color:"error"},{default:r(()=>[u("Jurídica")]),_:1})):c("",!0)],64)):c("",!0),C.dataIndex=="sex"?(l(),g(b,{key:1},[v.sex=="MASCULINO"?(l(),d(_,{key:0,color:"blue"},{default:r(()=>[u("Masculino")]),_:1})):c("",!0),v.sex=="FEMENINO"?(l(),d(_,{key:1,color:"pink"},{default:r(()=>[u("Femenino")]),_:1})):c("",!0)],64)):c("",!0)]),_:1},8,["scroll","data-source","loading"])]),f("div",Z,[m(V,{size:"small",pageSize:50,total:I.value,onChange:M,showSizeChanger:!1},null,8,["total"])]),e.value?(l(),g("div",K,[m(j,{indicator:E(D),spinning:e.value},null,8,["indicator","spinning"])])):c("",!0)],64)}}};export{te as default};
