import{r as l,a as W,p as T,k as ee,X as te,o as b,d as q,c as p,h as A,Q as J,U as we,b as h,w as _,N as ne,O as re,e as N,F as Z,v as Ie,y as k,i as H,z as I,j as V,m as B,f as ie,g as le,K as Ce,G as Oe,a3 as Re,t as oe,a2 as De,s as xe}from"./index-b0b8f351.js";import{_ as Ne}from"./icoexcel-1b303edf.js";import{_ as Ae}from"./FormComponent-5a3c94ac.js";import{u as de}from"./selectes-8f8e0000.js";import{u as ke}from"./useBusinessman-d25a2338.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";import"./es-8d18b806.js";import{M as Te}from"./MoreOutlined-2bc23a22.js";import"./quill.snow-f57a134b.js";const Pe={class:"ruta-digital-empresario"},Ue={__name:"RegistraEmpresarioFull",emits:["stepNumber"],setup(G,{emit:C}){const v=C,i=de(),y=ke(),E=l(!1),e=W({}),R=l("REGISTRAR"),d=l({city_id:[],province_id:[],district_id:[],gender_id:[],sick:[]}),Y=async u=>{u=="typedocument_id"&&(e.documentnumber=null,g.value.documentnumber.disabled=!1,g.value.lastname.disabled=!1,g.value.middlename.disabled=!1,g.value.name.disabled=!1,e.lastname=null,e.middlename=null,e.name=null,e.country_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.birthday=null,e.phone=null,e.email=null,e.gender_id=null,e.sick=null,e.hasSoon=null),u=="city_id"&&(await i.fetchProvinces(e.city_id),d.value.province_id=i.provinces,g.value.province_id.disabled=!1),u=="province_id"&&(await i.fetchDistricts(e.province_id),d.value.district_id=i.districts,g.value.district_id.disabled=!1)},t=async u=>{u=="id_pnte"&&(await i.fetchOfficesPnte(),d.value.id_pnte=i.officesPnte),u=="country_id"&&(d.value.country_id=i.countries),u=="city_id"&&(e.city_id=null,e.province_id=null,e.district_id=null,d.value.province_id=[],d.value.city_id=i.cities),u=="province_id"&&(e.province_id=null,e.district_id=null,d.value.district_id=[]),u=="sick"&&F(),u=="gender_id"&&(d.value.gender_id=i.genders),u=="hasSoon"&&P()},F=()=>{d.value.sick=[{value:"si",label:"SI"},{value:"no",label:"NO"},{value:"na",label:"PREFIERO NO ESPECIFICAR"}]},P=()=>{d.value.hasSoon=[{value:"SI",label:"SI"},{value:"NO",label:"NO"},{value:"na",label:"PREFIERO NO ESPECIFICAR"}]},z=async()=>{if(E.value=!0,(e.typedocument_id==2||e.typedocument_id==3||e.typedocument_id==4)&&e.country_id==155)return e.country_id=null,A.warn("No se puede registrar un empresario en PERÚ"),E.value=!1;const u={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,country_id:e.country_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,birthday:T(e.birthday).format("YYYY-MM-DD"),phone:e.phone,email:e.email,gender_id:e.gender_id,sick:e.sick,hasSoon:e.hasSoon};try{const o=await y.create(u);if(o.status==200){const f={id:o.data.id,dni:o.data.documentnumber,city_id:o.data.city_id,province_id:o.data.province_id,district_id:o.data.district_id,address:o.data.address,step:1};v("stepNumber",f),U()}}catch{A.error(i.error)}finally{E.value=!1}},U=()=>{e.lastname=null,e.middlename=null,e.name=null,e.country_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.birthday=null,e.phone=null,e.email=null,e.gender_id=null,e.sick=null,e.hasSoon=null},g=l({typedocument_id:{type:"iSelect",label:"TIPO DE DOCUMENTO",name:"typedocument_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},documentnumber:{type:"iInputSearch",label:"NÚMERO DE DOCUMENTO DE IDENTIDAD",name:"documentnumber",required:!0,message:"Escribir número de documento",disabled:!1,loading:!1,rules:[{validator:(u,o)=>{if(!o)return Promise.reject("Escribir número de documento");let f=10;switch(e.typedocument_id){case 1:f=8;break;case 2:f=9;break;case 3:f=12;break;case 4:f=9;break}return String(o).length!==f?Promise.reject(`Debe tener exactamente ${f} dígitos`):[1,2,4].includes(e.typedocument_id)&&!/^\d+$/.test(o)?Promise.reject("Solo se permiten dígitos"):Promise.resolve()},trigger:"change"}]},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribir apellido",disabled:!1},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribir apellido",disabled:!1},name:{type:"iText",label:"NOMBRES",name:"name",required:!0,message:"Escribir nombre",disabled:!1},country_id:{type:"iSelect",label:"PAÍS DE ORIGEN",name:"country_id",required:!0,message:"Seleccionar país"},city_id:{type:"iSelect",label:"REGIÓN RESIDENCIA",name:"city_id",required:!0,message:"Seleccionar región"},province_id:{type:"iSelect",label:"PROVINCIA RESIDENCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO RESIDENCIA",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN RESIDENCIA",name:"address",required:!0,message:"Escribir dirección",disabled:!1},birthday:{type:"iDate",label:"FECHA NACIMIENTO",name:"birthday",required:!0,message:"Seleccionar fecha de nacimiento",disabledDate:u=>{if(!u)return!1;const o=T(),f=o.subtract(100,"year").endOf("day"),m=o.subtract(18,"year").endOf("day");return u.isAfter(m)||u.isBefore(f)},defaultPickerValue:T().subtract(18,"year"),rules:[{validator:(u,o)=>{if(!o)return Promise.reject(new Error("Seleccionar fecha de nacimiento"));const f=T(),m=f.subtract(100,"year").endOf("day"),D=f.subtract(18,"year").endOf("day");return T(o).isAfter(D)?Promise.reject(new Error("Debe tener 18 años o más")):T(o).isBefore(m)?Promise.reject(new Error("La edad no puede superar los 100 años")):Promise.resolve()},trigger:"change"}]},phone:{type:"iNumber",label:"NÚMERO DE CELULAR",name:"phone",required:!0,message:"Escribe un número de contacto de 9 dígitos",maxlength:9,disabled:!1,rules:[{validator:(u,o)=>{if(!o)return Promise.reject(new Error("El número es requerido"));const f=o.toString();return f.length!==9?Promise.reject(new Error("El número debe tener exactamente 9 dígitos")):f.substring(0,1)!=="9"?Promise.reject(new Error("El número debe comenzar con 9")):Promise.resolve()},trigger:"change"}]},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!1,message:"Escribir un email válido",disabled:!1,rules:[{validator:(u,o)=>o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?Promise.resolve():Promise.reject(new Error("Debe ingresar un email válido")):Promise.resolve(),trigger:"change"}]},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar tipo de documento"},sick:{type:"iSelect",label:"¿TIENE ALGUNA DISCAPACIDAD?",name:"sick",required:!0,message:"Seleccionar opción"},hasSoon:{type:"iSelect",label:"¿TIENE HIJOS?",name:"hasSoon",required:!0,message:"Seleccionar opción"}}),O=async u=>{if(e.typedocument_id){g.value.documentnumber.loading=!0;try{const o={documentnumber:u};if(e.typedocument_id){const f=await y.get(o);if(f.status==200){const{data:m}=f;e.lastname=m.lastname,e.middlename=m.middlename,e.name=m.name,e.country_id=m.country_id,e.city_id=m.city_id,await i.fetchCities(),d.value.city_id=i.cities,e.city_id=m.city_id,await i.fetchProvinces(e.city_id),d.value.province_id=i.provinces,e.province_id=m.province_id,await i.fetchDistricts(e.province_id),d.value.district_id=i.districts,e.district_id=m.district_id,e.address=m.address,m.birthday&&(e.birthday=T(m.birthday,"YYYY-MM-DD")),e.phone=m.phone,e.email=m.email,await i.fetchGenders(),d.value.gender_id=i.genders,e.gender_id=m.gender_id,e.sick=m.sick,e.hasSoon=m.hasSoon,g.value.documentnumber.loading=!1,g.value.documentnumber.disabled=!0,g.value.name.disabled=!0,g.value.lastname.disabled=!0,g.value.middlename.disabled=!0}else if(e.typedocument_id==1){const m=await y.reniec(o);if(m.status==200){const{data:D}=m;e.lastname=D.lastname,e.middlename=D.middlename,e.name=D.name,g.value.name.disabled=!0,g.value.lastname.disabled=!0,g.value.middlename.disabled=!0,g.value.documentnumber.loading=!1}else m.status==404&&(g.value.documentnumber.loading=!1,J.warning({message:"Aviso",description:"El servicio de consulta RENIEC no está disponible. Por favor, registre los datos manualmente.",duration:2.5}))}else g.value.documentnumber.loading=!1,J.warning({message:"Aviso",description:"El servicio de consulta RENIEC no está disponible. Por favor, registre los datos manualmente.",duration:2.5})}}catch{console.log("Error:",y.error)}}};return ee(async()=>{await i.fetchTypeDocuments(),d.value.typedocument_id=i.typeDocuments,await i.fetchCountries(),await i.fetchCities(),await i.fetchGenders(),d.value.country_id=i.countries}),te("formState",e),te("loadingState",E),(u,o)=>(b(),q("div",Pe,[p(Ae,{fields:g.value,options:d.value,btnSaveName:R.value,onHandleFocusSelect:t,onHandleChangeSelect:Y,onOnSubmit:z,mayus:!0,onHandleSearchDni:O},null,8,["fields","options","btnSaveName"])]))}};const Me={class:"agreement-wrapper"},Le={class:"grid-item"},$e={key:3},qe={__name:"RutaDigitalEmpresa",props:["dataStepOne"],emits:["close"],setup(G,{emit:C}){const v=de(),i=C,y=G;v.$patch({cities:v.cities}),v.$patch({provinces:v.provinces}),v.$patch({districts:v.districts}),v.$patch({economicSectors:v.economicSectors}),v.$patch({comercialActivities:v.comercialActivities}),v.fetchCities(),v.fetchEconomicSectors(),v.fetchComercialActivities();const E=l({ruc:{type:"iSearch",label:"NÚMERO RUC",name:"ruc",required:!0,message:"Escribe número de documento",disabled:!1,max:11},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Escribir razón social",disabled:!0},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Escribir nombre comercial",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1}}),e=l(null),R=l(null),d=l(!1);l(null);const Y=l(!1);l(!0);const t=W({}),F=s=>{const c=t[s]?t[s].trim():"";t[s]=c},P=async s=>{try{const{data:c}=await ie({url:`select/provinces/${s}`,method:"GET"});e.value=c}catch(c){console.error("Error de red:",c)}},z=async s=>{try{const{data:c}=await ie({url:`select/districts/${s}`,method:"GET"});R.value=c}catch(c){console.error("Error de red:",c)}},U=(s,c)=>{const w=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(w)},g=async s=>{if(s.length!==11)return A.warning("El RUC debe tener exactamente 11 caracteres.");if(!/^\d+$/.test(s))return A.warning("El RUC debe contener solo números.");if(!/^(10|15|20)/.test(s))return A.warning("El RUC debe comenzar con 10, 15 o 20.");d.value=!0;try{const c=await B({url:`api/consult-company-ruc/${t.ruc}`,method:"POST"});if(c.status==200){const{data:w}=c;t.socialReason=w.socialReason,t.comercialName=w.comercialName}else J.warning({message:"Aviso",description:"El servicio de consulta SUNAT no está disponible. Por favor, registre los datos manualmente.",duration:2.5}),E.value.socialReason.disabled=!1}catch{console.log("There was an error")}finally{d.value=!1}},O=s=>{t.province_id=null,t.district_id=null,P(s)},u=s=>{t.district_id=null,z(s)},o=()=>{t.comercialName=null,t.socialReason=null,t.city_id=null,t.province_id=null,t.district_id=null,t.address=null,t.comercialactivity_id=null,t.economicsector_id=null},f=async()=>{Y.value=!0;const s={ruc:t.ruc,comercialName:t.comercialName,socialReason:t.socialReason,city_id:y.dataStepOne.city_id,province_id:y.dataStepOne.province_id,district_id:y.dataStepOne.district_id,address:y.dataStepOne.address,comercialactivity_id:t.comercialactivity_id,economicsector_id:t.economicsector_id};try{const c=await B({url:"ruta-digital/mype",method:"POST",data:s});if(c.status==200){const w={ruc:c.ruc,dni:y.dataStepOne.dni,person_id:y.dataStepOne.id,mype_id:c.id},x=await B({url:"ruta-digital/create",method:"POST",data:w});if(x.status==409)return A.error(x.message);x.status==200&&(o(),t.ruc=null,A.success(x.message),i("close"))}}catch{A.error("No se pudo registrar a este usuario")}finally{Y.value=!1}},m=()=>{A.error("COMPLETA LOS VALORES REQUERIDOS")},D=async s=>{try{t.city_id=s.city_id,await P(s.city_id),t.province_id=s.province_id,await z(s.province_id),t.district_id=s.district_id}catch(c){A.error(c.message)}};return ee(async()=>{y.dataStepOne&&D(y.dataStepOne)}),we(()=>y.dataStepOne,s=>{s?D(s):o()}),(s,c)=>{const w=h("a-select"),x=h("a-form-item"),Q=h("a-input-search"),M=h("a-input"),X=h("a-button"),r=h("a-form"),n=h("a-spin");return b(),q("div",Me,[p(n,{spinning:d.value},{default:_(()=>[p(r,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:f,onFinishFailed:m,onKeydown:c[0]||(c[0]=ne(re(()=>{},["prevent"]),["enter"]))},{default:_(()=>[N("div",Le,[(b(!0),q(Z,null,Ie(E.value,(a,$)=>(b(),q(Z,{key:$},[a.type==="iSelect"?(b(),k(x,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:_(()=>[a.name=="city_id"?(b(),k(w,{key:0,value:t[a.name],"onUpdate:value":S=>t[a.name]=S,options:H(v).cities,"show-search":"","filter-option":U,onChange:O,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):I("",!0),a.name=="province_id"?(b(),k(w,{key:1,value:t[a.name],"onUpdate:value":S=>t[a.name]=S,options:e.value,"show-search":"","filter-option":U,onChange:u,disabled:!t.city_id},null,8,["value","onUpdate:value","options","disabled"])):I("",!0),a.name=="district_id"?(b(),k(w,{key:2,value:t[a.name],"onUpdate:value":S=>t[a.name]=S,options:R.value,"show-search":"","filter-option":U,disabled:!t.province_id},null,8,["value","onUpdate:value","options","disabled"])):I("",!0),a.name=="economicsector_id"?(b(),k(w,{key:3,value:t[a.name],"onUpdate:value":S=>t[a.name]=S,"show-search":"",options:H(v).economicSectors,"filter-option":U,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):I("",!0),a.name=="comercialactivity_id"?(b(),k(w,{key:4,value:t[a.name],"onUpdate:value":S=>t[a.name]=S,"show-search":"",options:H(v).comercialActivities,"filter-option":U,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):I("",!0)]),_:2},1032,["name","label","rules"])):I("",!0),a.type==="iSearch"?(b(),k(x,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max},{pattern:/^(10|15|20)\d{9,}$/,message:"El número debe comenzar con 10, 15 o 20, tener solo números, y al menos 11 caracteres"}]},{default:_(()=>[p(Q,{value:t[a.name],"onUpdate:value":S=>t[a.name]=S,loading:d.value,maxlength:a.max,onSearch:g,onKeyup:ne(g,["enter"])},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):I("",!0),a.type==="iText"?(b(),k(x,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max,min:a.min}]},{default:_(()=>[p(M,{value:t[a.name],"onUpdate:value":S=>t[a.name]=S,disabled:a.disabled,maxlength:a.max,onBlur:S=>F(a.name)},null,8,["value","onUpdate:value","disabled","maxlength","onBlur"])]),_:2},1032,["name","label","rules"])):I("",!0),a.type==="space"?(b(),q("div",$e)):I("",!0)],64))),128))]),p(x,null,{default:_(()=>[p(X,{class:"btn-produce",type:"primary","html-type":"submit",loading:Y.value},{default:_(()=>c[1]||(c[1]=[V("FINALIZAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ye=ce(qe,[["__scopeId","data-v-20d6f255"]]),Fe={__name:"RutaDigitalNuevo",emits:["closeDraw"],setup(G,{emit:C}){const v=C,i=l(1),y=l(null),E=R=>{y.value=R,i.value=R.step+1},e=()=>{i.value=1,v("closeDraw")};return(R,d)=>(b(),q("section",null,[i.value==1?(b(),k(Ue,{key:0,onStepNumber:E})):I("",!0),i.value==2?(b(),k(Ye,{key:1,dataStepOne:y.value,onClose:e},null,8,["dataStepOne"])):I("",!0)]))}},se=(localStorage.getItem("token")||le.get("token")||"").replace(/"/g,""),ze=se?`Bearer ${se}`:"",Be="https://apituempresa.soporte-pnte.com/api/",Ge="http://127.0.0.1:8000/api/",je=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?Ge:Be;async function Ve(G,C,v){try{const i=await Ce({url:`${je}${G}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${ze}`},method:"POST",responseType:"blob",data:v}),y=window.URL.createObjectURL(new Blob([i.data])),E=document.createElement("a");E.href=y;const e=`${C}.xlsx`;E.setAttribute("download",e),document.body.appendChild(E),E.click(),document.body.removeChild(E)}catch(i){console.error("Error al descargar el archivo:",i)}}const He={class:"layout-content"},Ke=["onClick"],Qe={class:"paginator"},Xe={__name:"RutaDigitalIndex",props:["idConvenio"],setup(G){T.locale("es"),le.get("token");const C=JSON.parse(localStorage.getItem("role")),v=l(null),i=l(null);l(null);const y=l(!1),E=l(null),e=l(0),R=l(50),d=l({page:1}),Y=l(1200),t=l([]),F=l(!1),P=l(!1);l(!1),l(!1),l(!1),l(null);const z=l(window.innerHeight-100),U=l({page:1}),g=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"FECHA DE REGISTRO",dataIndex:"date",fixed:"left",align:"center",width:140},{title:"DNI ASESOR",dataIndex:"asesor_documentnumber",fixed:"left",align:"center",width:100},{title:"NOMBRE DEL ASESOR",dataIndex:"asesor_name",width:180},{title:"CDE/MAC",dataIndex:"asesor_cde",width:160,align:"center"},...C.some(r=>r.id!==1)?[{title:"SUPERVISOR",dataIndex:"supervisador",width:180}]:[],{title:"TIPO DOCUMENTO",dataIndex:"typedocument",align:"center",width:130},{title:"NRO DOCUMENTO",dataIndex:"documentnumber",align:"center",width:130},{title:"NACIONALIDAD (NOMBRE DEL PAIS)",dataIndex:"country",align:"center",width:140},{title:"FECHA DE NACIMIENTO",dataIndex:"birthdate",align:"center",width:120},{title:"APELLIDOS",dataIndex:"lastname",width:150},{title:"NOMBRES",dataIndex:"name",width:150},...C.some(r=>r.id!==1)?[{title:"SEXO (F/M)",dataIndex:"gender",width:60}]:[],...C.some(r=>r.id!==1)?[{title:"DISCAPACIDAD (SI/NO)",dataIndex:"sick",width:120}]:[],...C.some(r=>r.id!==1)?[{title:"CELULAR",dataIndex:"phone",width:100}]:[],...C.some(r=>r.id!==1)?[{title:"CORREO",dataIndex:"email",width:150}]:[],{title:"NÚMERO DE RUC",dataIndex:"ruc",align:"center",width:120},{title:"REGION DE LA MYPE",dataIndex:"region",align:"center",width:120},{title:"PROVINCIA DE LA MYPE",dataIndex:"province",align:"center",width:150},{title:"DISTRITO DE LA MYPE",dataIndex:"district",align:"center",width:130},{title:"DIRECCIÓN",dataIndex:"address",width:240},{title:"SECTOR ECONOMICO",dataIndex:"comercialactivity",align:"center",width:180},{title:"ACTIVIDAD COMERCIAL",dataIndex:"economicsector",align:"center",width:140},{title:"AUTODIAGNÓSTICO",dataIndex:"status",align:"center",fixed:"right",width:140}],O=W({search:""}),u=()=>{d.value.page=1,O.search,M()},o=()=>{O.search||M()},f=r=>{E.value=r,P.value=!0},m=r=>{U.value.page=r,M()},D=()=>{z.value=window.innerHeight-320},s=()=>{E.value=null,P.value=!0},c=()=>{P.value=!1,M()},w=async r=>{try{const n=await B({url:`agreement/delete/${r.id}`,method:"DELETE"});n.status==200&&(M(),A.success(n.message))}catch(n){console.error("Error de red:",n)}},x=Oe(()=>r=>(d.value.page-1)*R.value+r+1),Q=async r=>{try{const n=await B({url:`ruta-digital/status/${r}`,method:"PUT"});n.status==200&&(M(),A.success(n.message))}catch(n){console.error("Error de red:",n)}},M=async r=>{try{F.value=!0;const n={};i.value&&(n.start=T(i.value[0]).format("YYYY-MM-DD"),n.end=T(i.value[1]).format("YYYY-MM-DD")),O.search&&(n.search=O.search),d.value.page&&(n.page=U.value.page);const a=await B({url:"ruta-digital/list",method:"GET",params:n}),$=a.data;t.value=$.data,e.value=$.total,R.value=$.per_page,v.value=a.role}catch(n){console.error("Error de red:",n)}finally{F.value=!1}},X=async()=>{try{console.log("oooooo"),y.value=!0;const r={};i.value&&(r.start=T(i.value[0]).format("YYYY-MM-DD"),r.end=T(i.value[1]).format("YYYY-MM-DD")),O.search&&(r.search=O.search),d.value.page&&(r.page=d.value.page);const{data:n}=await B({url:"ruta-digital/list-all",method:"GET",params:r});await Ve("download/digital-routes","ruta-digital",n)}catch(r){console.error("Error de red:",r)}finally{y.value=!1}};return Re(()=>{window.removeEventListener("resize",D)}),ee(()=>{window.addEventListener("resize",D),D(),M()}),(r,n)=>{const a=h("a-button"),$=h("a-range-picker"),S=h("a-col"),ue=h("a-input"),me=h("a-input-group"),pe=h("a-row"),_e=h("a-switch"),ae=h("a-menu-item"),ve=h("a-popconfirm"),ge=h("a-menu"),fe=h("a-dropdown"),ye=h("a-table"),he=h("a-tag"),be=h("a-pagination"),Ee=h("a-drawer");return b(),q("div",He,[N("div",null,[n[11]||(n[11]=N("h3",{class:"title-produce"},"RUTA DIGITAL - UGO",-1)),p(pe,{style:{margin:"1rem 0"}},{default:_(()=>[p(S,{xs:24,md:16,lg:18},{default:_(()=>[p(a,{type:"primary",onClick:s,style:{}},{default:_(()=>n[4]||(n[4]=[V("REGISTRAR")])),_:1}),p(a,{class:"btn-excel",onClick:X,loading:y.value,type:"primary",style:{margin:"0 0.6rem"}},{default:_(()=>n[5]||(n[5]=[N("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:Ne},null,-1)])),_:1},8,["loading"]),p($,{value:i.value,"onUpdate:value":n[0]||(n[0]=L=>i.value=L),style:{width:"240px","font-size":"13px"},onChange:M},null,8,["value"])]),_:1}),p(S,{xs:24,md:8,lg:6},{default:_(()=>[p(me,{compact:""},{default:_(()=>[p(ue,{value:O.search,"onUpdate:value":n[1]||(n[1]=L=>O.search=L),style:{width:"calc(100% - 80px)"},onInput:o,placeholder:"Buscar por RUC o DNI"},null,8,["value"]),p(a,{type:"primary",disabled:O.search==="",onClick:u},{default:_(()=>n[6]||(n[6]=[V("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),p(ye,{bordered:"",scroll:{x:Y.value,y:z.value},class:"table-agreements-ugse",columns:g,"data-source":t.value,pagination:!1,loading:F.value,size:"small"},{headerCell:_(({column:L})=>n[7]||(n[7]=[])),bodyCell:_(({column:L,record:j,index:Se})=>[L.dataIndex=="idx"?(b(),q(Z,{key:0},[V(oe(x.value(Se)),1)],64)):I("",!0),L.dataIndex=="status"?(b(),k(_e,{key:1,checked:j.status,"onUpdate:checked":K=>j.status=K,checkedValue:1,unCheckedValue:0,onChange:K=>Q(j.id)},{checkedChildren:_(()=>n[8]||(n[8]=[N("span",{style:{"font-size":"12px"}},"Si",-1)])),unCheckedChildren:_(()=>n[9]||(n[9]=[N("span",{style:{"font-size":"12px"}},"No",-1)])),_:2},1032,["checked","onUpdate:checked","onChange"])):I("",!0),L.dataIndex=="actions"?(b(),k(fe,{key:2,trigger:["click"]},{overlay:_(()=>[p(ge,null,{default:_(()=>[p(ae,null,{default:_(()=>[N("a",{onClick:K=>f(j)},"Editar",8,Ke)]),_:2},1024),p(ae,null,{default:_(()=>[p(ve,{title:"¿Seguro de eliminar?",onConfirm:K=>w(j)},{icon:_(()=>[p(H(De),{style:{color:"red"}})]),default:_(()=>[n[10]||(n[10]=N("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:_(()=>[N("a",{class:"ant-dropdown-link",onClick:n[2]||(n[2]=re(()=>{},["prevent"]))},[p(a,{shape:"circle",icon:xe(H(Te)),size:"small"},null,8,["icon"])])]),_:2},1024)):I("",!0)]),_:1},8,["scroll","data-source","loading"])]),N("div",Qe,[N("span",null,[p(he,{color:"blue"},{default:_(()=>[N("b",null,oe(e.value),1)]),_:1}),n[12]||(n[12]=V("Registros"))]),p(be,{size:"small",total:e.value,pageSize:R.value,onChange:m,showSizeChanger:!1},null,8,["total","pageSize"])]),p(Ee,{open:P.value,"onUpdate:open":n[3]||(n[3]=L=>P.value=L),"root-class-name":"root-class-name",title:"Ruta Digital",placement:"right",width:"650"},{default:_(()=>[p(Fe,{onCloseDraw:c})]),_:1},8,["open"])])}}},sa=ce(Xe,[["__scopeId","data-v-8eb32ce1"]]);export{sa as default};
