import{_ as $}from"./TableComponent-361d31bc.js";import{p,r as i,a as U,k as q,U as B,X as h,o as m,d as g,c as u,w as c,z as S,u as G,b as v,m as j,i as z,F as J,e as D,j as N,t as I,y as V}from"./index-2325eb4f.js";import{_ as Z}from"./FormComponent-bb3a8471.js";import{u as Q}from"./selectes-846df974.js";import{U as K}from"./UpImage-4ae4d857.js";import"./es-78c82cd8.js";import"./downloadExcel-d04d6f6e.js";import{g as H}from"./publicInscripcion-ebc9ecb9.js";import{C as X}from"./CloudUploadOutlined-0d2d2ffb.js";import"./icoexcel-1b303edf.js";import"./SyncOutlined-6863e8af.js";import"./MoreOutlined-119c012b.js";import"./quill.snow-c43e46b7.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"fairs"},ee={key:0},ae={__name:"DrawSed",props:["info"],emits:["closeDraw"],setup(L,{emit:T}){p.locale("es");const y=i({title:{type:"iText",label:"NOMBRE DEL EVENTO",name:"title",required:!0,message:"Escribir nombre del evento",disabled:!1},description:{type:"iQuillEditor",label:"DESCRIPCIÓN DEL EVENTO",name:"description",required:!0,message:"Escribir descripción del evento",disabled:!1,class:"quill-height-250"},dates:{type:"iDatePicker",label:"SELECCIONAR FECHA DE INICIO Y FIN DE INSCRIPCIÓN DEL EVENTO",name:"dates",required:!0,message:"Seleccionar fecha",disabled:!1},metaMypes:{type:"iNumber",label:"META MYPES PARA ESTE EVENTO",name:"metaMypes",required:!0,message:"Seleccionar la meta MYPES",disabled:!1,rules:[{required:!0,message:"Seleccionar la meta MYPES"},{type:"number",min:1,message:"El valor mínimo debe ser 1"}]},city_id:{type:"iSelect",label:"REGIÓN DEL EVENTO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},place:{type:"iText",label:"LUGAR DEL EVENTO",name:"place",required:!0,message:"Escribir nombre del evento",disabled:!1,placeholder:"Ejemplo: PRODUCE 2"},fecha:{type:"iDate",label:"FECHA DEL EVENTO",name:"fecha",required:!0,message:"Escribir nombre del evento",disabled:!1,placeholder:"Ejemplo: Lunes: 12 de mayo"},hours:{type:"iText",label:"HORARIO DEL EVENTO",name:"hours",required:!0,message:"Escribir nombre del evento",disabled:!1,placeholder:"Ejemplo: 5:00 pm a 8:00 pm"},messageEndForm:{type:"iLabel",label:"MENSAJES DE INSCRIPCIONES",name:"messageEndForm"},msgEndForm:{type:"iQuillEditor",label:"MENSAJE AL FINALIZAR INSCRIPCIÓN",name:"msgEndForm",required:!0,message:"Escribir mensaje de cierre de inscripción",disabled:!1,class:"quill-height-250"},msgSendEmail:{type:"iQuillEditor",label:"MENSAJE DE ENVÍO DE CORREO",name:"msgSendEmail",required:!0,message:"Escribir mensaje de envío de correo",disabled:!1,class:"quill-height-250"}});JSON.parse(localStorage.getItem("profile"));const n=L,E=i("GUARDAR"),a=U({}),_=i(!1),b=i(null),t=Q(),O=i(null),r=i({city_id:[],fairtype_id:[],modality_id:[]}),C=()=>n.info?{name:n.info.image.name,url:n.info.image.url}:null,Y=e=>{},w=async e=>{e=="dateReception"&&(a.dateTramite&&(a.dateTramite=null),y.value.dateTramite.disabled=!1)},R=async e=>{b.value=e.id},x=async e=>{e=="city_id"&&(await t.fetchCitiesNational(),a.city_id=null,r.value.city_id=t.citiesNational),e=="fairtype_id"&&(await t.fetchFairTypes(),r.value.fairtype_id=t.fairTypes),e=="modality_id"&&(await t.fetchModalities(),r.value.modality_id=t.modalities)},M=e=>{},F=async()=>{var s;const e={title:a.title,subTitle:a.subTitle,description:a.description,fairtype_id:(s=n.info)!=null&&s.fairtype_id?n.info.fairtype_id:1,modality_id:1,startDate:p(a.dates.start).format("YYYY-MM-DD"),endDate:p(a.dates.end).format("YYYY-MM-DD"),metaMypes:a.metaMypes,city_id:a.city_id,fecha:a.fecha,place:a.place,hours:a.hours,msgEndForm:a.msgEndForm,msgSendEmail:a.msgSendEmail,image_id:b.value};return console.log("payload",e)},f=()=>{a.title=null,a.subTitle=null,a.description="</p>",a.fairtype_id=null,a.modality_id=null,a.dates=null,a.metaMypes=null,a.city_id=null,a.place=null,a.hours=null,a.msgEndForm="</p>",a.msgSendEmail="</p>"},l=async e=>{e&&(a.title=e.title,a.subTitle=e.subTitle,a.description=e.description,await t.fetchFairTypes(),r.value.fairtype_id=t.fairTypes,a.fairtype_id=e.fairtype_id?e.fairtype_id:1,await t.fetchModalities(),r.value.modality_id=t.modalities,a.modality_id=e.modality_id,a.dates={start:p(e.startDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),end:p(e.endDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ")},a.metaMypes=e.metaMypes,await t.fetchCitiesNational(),r.value.city_id=t.citiesNational,a.city_id=e.city_id,console.log("iaiaiiaiaia",e),e.fecha&&(a.fecha=p(e.fecha,"YYYY-MM-DD")),a.place=e.place,a.hours=e.hours,a.msgEndForm=e.msgEndForm||"</p>",a.msgSendEmail=e.msgSendEmail||"</p>")};return q(()=>{n.info&&l(n.info)}),B(()=>n.info,e=>{e?l(e):f()}),h("formState",a),h("loadingState",_),(e,s)=>(m(),g("div",W,[u(Z,{fields:y.value,options:r.value,btnSaveName:E.value,onHandleInputEvent:Y,resetSelect:O.value,onHandleFocusSelect:x,onHandleBlurSelect:M,onHandleChangeClock:w,onOnSubmit:F},{default:c(({field:A})=>[A.name=="iSlotOptions"?(m(),g("div",ee,[u(K,{"accept-formats":["image/jpeg","image/png"],maxImages:1,onUploadSuccess:R,imageLoad:C()},null,8,["imageLoad"])])):S("",!0)]),_:1},8,["fields","options","btnSaveName","resetSelect"])]))}};const te={class:"layout-content"},le=["onClick"],ie={key:0,style:{"line-height":"1.5"}},se={key:1},ne=["onClick"],oe=["href"],De={__name:"sed-index",setup(L){JSON.parse(localStorage.getItem("role"));const T=i([]),y=i(0),n=i(150),E=i(!1);i(!1),G();const a=i(!1),_=i(null),b=i(!1),t=U({year:p("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:3}),O=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"LINK",dataIndex:"link",fixed:"left",width:70,align:"center"},{title:"NOMBRE DEL EVENTO",fixed:"left",dataIndex:"title",width:180},{title:"FECHAS INSCRIPCIONES",dataIndex:"date",width:120,align:"center"},{title:"REGISTRADOS",dataIndex:"registered",width:100,align:"center"},{title:"META DE REGISTRO",dataIndex:"metaMypes",width:100,align:"center"},{title:"REGIÓN",dataIndex:"city_name",width:120,align:"center"},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"fecha_dashboard",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],r=i([{value:1,label:"EN CURSO"},{value:2,label:"FINALIZADOS"},{value:3,label:"TODOS"}]),C=(l,e)=>{console.log("type",e);let s=null;if(e==1)s=`${H()}/sed/${l}`;else if(e==5)s=`${H()}/foro/${l}`;else return alert("x");window.open(s,"_blank")},Y=l=>{_.value=l,E.value=!0},w=()=>{f(),E.value=!1},R=()=>{_.value=null,E.value=!0},x=async()=>{},M=async l=>{t.page=l,await f()},F=async l=>{l&&(t.page=1,await f())},f=async()=>{try{a.value=!0;const l={page:t.page};t.year&&(l.year=p(t.year).format("YYYY")),t.range&&(l.dateStart=t.range[0].format("YYYY/MM/DD"),l.dateEnd=t.range[1].format("YYYY/MM/DD")),t.name&&(l.name=t.name),t.orderby&&(l.orderby=t.orderby);const s=await j({url:"events-ugse/sed",method:"GET",params:l});T.value=s.data.data,y.value=s.data.total,n.value=s.data.per_page}catch(l){console.error("Error de red:",l)}finally{a.value=!1}};return q(async()=>{await f()}),h("search",t),h("loading",a),h("loadingFile",b),(l,e)=>{const s=v("a-tag"),A=v("router-link"),k=v("a-menu-item"),P=v("a-drawer");return m(),g("div",te,[u($,{title:"SED",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:O,othersList:r.value,titleSearch:"BUSCAR POR EVENTO",pageSize:n.value,nameTotal:"Eventos SED",dataSource:T.value,total:y.value,btnUpdate:!0,onHandleNew:R,onHandleCallFetchData:f,onHandleDownloadExcel:x,onHandleSearch:F,onHandlePaginator:M},{"data-cell":c(({column:o,record:d})=>[o.dataIndex=="link"?(m(),g("a",{key:0,onClick:re=>C(d.slug,d.fairtype_id),href:"javascript:void(0)",target:"_blank"},[u(z(X),{style:{"font-size":"18px"}})],8,le)):S("",!0),o.dataIndex=="date"?(m(),g(J,{key:1},[d.startDate!=d.endDate?(m(),g("span",ie,[e[1]||(e[1]=D("b",null,"Desde:",-1)),N(" "+I(d.dateStartFormat)+" ",1),e[2]||(e[2]=D("b",null,"Hasta:",-1)),N(" "+I(d.dateEndFormat),1)])):(m(),g("span",se,I(d.dateStartFormat),1))],64)):S("",!0),o.dataIndex=="registered"?(m(),V(s,{key:2,color:"processing"},{default:c(()=>[N(I(d.registered),1)]),_:2},1024)):S("",!0)]),"custom-options":c(({record:o})=>[u(k,null,{default:c(()=>[u(A,{to:`/admin/ugse/sed-inscritos/${o.slug}`},{default:c(()=>e[3]||(e[3]=[N(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),u(k,null,{default:c(()=>[D("a",{onClick:d=>Y(o)},"Editar",8,ne)]),_:2},1024),o.fairtype_id==1?(m(),V(k,{key:0},{default:c(()=>[D("a",{href:`https://inscripcion.soporte-pnte.com/asistencia/${o.slug}`,target:"_blank"},"Asistencia",8,oe)]),_:2},1024)):S("",!0)]),_:1},8,["othersList","pageSize","dataSource","total"]),u(P,{open:E.value,"onUpdate:open":e[0]||(e[0]=o=>E.value=o),title:_.value?"EDITAR EVENTO SED":"REGISTRAR UN EVENTO SED",placement:"right",width:"550"},{default:c(()=>[u(ae,{onCloseDraw:w,info:_.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{De as default};
