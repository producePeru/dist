import{g as E,r as h,a as N,b as u,o as l,d as _,e as d,c as r,w as s,F as f,H as q,m as p,D as H,q as g,h as b,i as y,s as S,t as L,p as j,j as P}from"./index-7f24195e.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{U as $}from"./UploadOutlined-53d49e05.js";const z={pdfDocument:{type:"iUpload",label:"",name:"pdfDocument",required:!1,message:""}};const x=i=>(j("data-v-18520774"),i=i(),P(),i),J=x(()=>d("h3",null,"SUBIR ARCHIVOS",-1)),W=x(()=>d("br",null,null,-1)),G={class:"agreement-wrapper"},K={class:"grid-item"},M={__name:"DriveSubirArchivo",setup(i){const D=JSON.parse(localStorage.getItem("user")),w=E.get("token"),I="https://apituempresa.soporte-pnte.com/api/",k="http://127.0.0.1:8000/api/",C=window.location.hostname=="127.0.0.1"?k:I,m=h(!1),e=h([]),c=N({pdfDocument:null}),F=t=>{c.pdfDocument=null;const o=e.value.indexOf(t),a=e.value.slice();a.splice(o,1),e.value=a},U=t=>{const o=["pdf","xls","xlsx","doc","docx","ppt","pptx","png","jpg","jpeg","gif"],a=t.name.split(".").pop().toLowerCase();return o.includes(a)?(e.value=[...e.value,t],c.pdfDocument="file",!1):(p.error("Solo se permiten archivos PDF, Excel, Word, PowerPoint e imÃ¡genes."),!1)},A=async()=>{m.value=!0;const t={created_by:D.id,files:e.value};try{const{data:o}=await q.post(`${C}/drive/up-files`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${w}`}});p.success(o.message),e.value=[]}catch{p.error("Error al subir")}finally{m.value=!1}},B=()=>{e.value>=1?c.pdfDocument="file":p.error("Debes al menos subir un archivo")};return(t,o)=>{const a=u("a-button"),R=u("a-upload"),v=u("a-form-item"),V=u("a-form");return l(),_(f,null,[J,W,d("div",G,[r(V,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:A,onFinishFailed:B},{default:s(()=>[d("div",K,[(l(!0),_(f,null,H(b(z),(n,O)=>(l(),_(f,{key:O},[n.type==="iUpload"?(l(),g(v,{key:0,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:s(()=>[r(R,{"file-list":e.value,"before-upload":U,onRemove:F},{default:s(()=>[r(a,null,{default:s(()=>[r(b($)),y(" Seleccionar archivo ")]),_:1})]),_:1},8,["file-list"])]),_:2},1032,["name","label","rules"])):S("",!0)],64))),128))]),e.value.length>=1?(l(),g(v,{key:0},{default:s(()=>[r(a,{type:"primary","html-type":"submit",loading:m.value},{default:s(()=>[y("SUBIR "+L(e.value.length==1?"ARCHIVO":"ARCHIVOS"),1)]),_:1},8,["loading"])]),_:1})):S("",!0)]),_:1},8,["model"])])],64)}}},Z=T(M,[["__scopeId","data-v-18520774"]]);export{Z as default};
