import{r,H as te,v as ae,k as ne,b as c,o as l,d as p,e as _,c as s,w as i,F as m,y as R,i as u,t as o,s as d,q as w,h as z,Q as oe,I as le,J as ie,W as se,m as de}from"./index-f4867374.js";import{S as re}from"./DrawerSolicitante.componente-398edc3f.js";import{u as ce}from"./selectes-be48d31c.js";import{M as ue}from"./MoreOutlined-b8b8fa54.js";import"./es-af6c1472.js";import"./_plugin-vue_export-helper-c27b6911.js";const pe=_("h3",null,"SOLICITANTES",-1),me=_("div",{class:"filters-notary"},[_("div")],-1),_e=["onClick"],ge=_("a",null,"Eliminar",-1),fe={class:"paginator"},V=20,ke={__name:"SolicitantesLista",setup(he){JSON.parse(localStorage.getItem("profile"));const v=ce();v.$patch({cities:v.cities}),v.fetchCities();const y=r(window.innerHeight-100),P=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",align:"center",width:120},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"DEPARTAMENTO",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:260},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],C=r(0),g=r({page:0}),B=r(1200),k=r([]),I=r(!1),f=r(!1),E=r(null);r(null);const U=t=>{g.value.page=t,h()},x=()=>{y.value=window.innerHeight-280},$=t=>{console.log("open",t)},G=()=>{h(),f.value=!1},H=async t=>{try{const a=await R({url:`person/delete/${t.id}`,method:"DELETE"});a.status==500?se.warning({title:"Aviso",content:a.message}):(h(),de.success(a.message))}catch(a){console.error("Error de red:",a)}},q=t=>{E.value=t,f.value=!0},F=te(()=>t=>((g.value.page==0?1:g.value.page)-1)*V+t+1),h=async()=>{try{I.value=!0;let t=g.value.page==0?"":g.value;const a=await R({url:"person/list",method:"GET",params:t});k.value=a.data,C.value=a.total}catch(t){console.error("Error de red:",t)}finally{I.value=!1}};return ae(()=>{window.removeEventListener("resize",x)}),ne(()=>{window.addEventListener("resize",x),x(),h()}),(t,a)=>{const S=c("a-tag"),J=c("a-button"),D=c("a-menu-item"),Q=c("a-popconfirm"),W=c("a-menu"),X=c("a-dropdown"),Y=c("a-table"),j=c("a-pagination"),K=c("a-drawer");return l(),p(m,null,[_("div",null,[pe,me,s(Y,{bordered:"",scroll:{x:B.value,y:y.value},class:"ant-table-striped",columns:P,"data-source":k.value,pagination:!1,loading:I.value,size:"small"},{bodyCell:i(({column:n,record:e,index:Z})=>{var O,N,b,A,T,L,M;return[n.dataIndex=="idx"?(l(),p(m,{key:0},[u(o(F.value(Z)),1)],64)):d("",!0),n.dataIndex=="tdocument"?(l(),w(S,{key:1,color:e.typedocument.name=="DNI"?"green":"blue"},{default:i(()=>[u(o(e.typedocument.name=="DNI"?"DNI":"CE"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="apellidos"?(l(),p(m,{key:2},[u(o(e.lastname)+" "+o(e.middlename),1)],64)):d("",!0),n.dataIndex=="city"?(l(),p(m,{key:3},[u(o((O=e.city)==null?void 0:O.name),1)],64)):d("",!0),n.dataIndex=="province"?(l(),p(m,{key:4},[u(o((N=e.province)==null?void 0:N.name),1)],64)):d("",!0),n.dataIndex=="district"?(l(),p(m,{key:5},[u(o((b=e.district)==null?void 0:b.name),1)],64)):d("",!0),n.dataIndex=="gender"?(l(),p(m,{key:6},[u(o((A=e.gender)==null?void 0:A.name),1)],64)):d("",!0),n.dataIndex=="sickx"?(l(),w(S,{key:7,color:e.sick=="no"?"blue":"pink"},{default:i(()=>[u(o(e.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="registerby"?(l(),p(m,{key:8},[u(o((T=e.user[0])==null?void 0:T.profile.name)+" "+o((L=e.user[0])==null?void 0:L.profile.lastname)+" "+o((M=e.user[0])==null?void 0:M.profile.middlename),1)],64)):d("",!0),n.dataIndex=="actions"?(l(),w(X,{key:9,trigger:["click"]},{overlay:i(()=>[s(W,null,{default:i(()=>[s(D,null,{default:i(()=>[_("a",{onClick:ee=>q(e)},"Editar",8,_e)]),_:2},1024),s(D,null,{default:i(()=>[s(Q,{title:"¿Seguro de eliminar?",onConfirm:ee=>H(e)},{icon:i(()=>[s(z(oe),{style:{color:"red"}})]),default:i(()=>[ge]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:i(()=>[_("a",{class:"ant-dropdown-link",onClick:a[0]||(a[0]=le(()=>{},["prevent"]))},[s(J,{shape:"circle",icon:ie(z(ue)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading"])]),_("div",fe,[s(j,{size:"small",total:C.value,pageSize:V,onChange:U,showSizeChanger:!1},null,8,["total"])]),s(K,{open:f.value,"onUpdate:open":a[1]||(a[1]=n=>f.value=n),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:$},{default:i(()=>[s(re,{onCloseDraw:G,updateValues:E.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}};export{ke as default};
