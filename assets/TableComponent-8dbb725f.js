import{c as n,A as se,p as h,r as y,a6 as x,G as re,a9 as ie,k as de,b as d,o as s,d as g,e as o,y as w,w as u,i as a,ab as ue,t as _,a8 as k,j as F,z as v,s as E,F as M,O as ce,L as pe}from"./index-de9d4c9c.js";import{_ as me}from"./icoexcel-1b303edf.js";import{u as ve}from"./selectes-d8dee7d1.js";import"./es-05e43534.js";import{S as fe}from"./SyncOutlined-2baf36ed.js";import{M as ge}from"./MoreOutlined-4eb1e390.js";var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};const _e=he;function R(r){for(var c=1;c<arguments.length;c++){var i=arguments[c]!=null?Object(arguments[c]):{},e=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable}))),e.forEach(function(f){be(r,f,i[f])})}return r}function be(r,c,i){return c in r?Object.defineProperty(r,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[c]=i,r}var A=function(c,i){var e=R({},c,i.attrs);return n(se,R({},e,{icon:_e}),null)};A.displayName="MenuOutlined";A.inheritAttrs=!1;const ye=A;const we={class:"table-component"},ke={class:"title-produce"},Oe={key:1,class:"title-produce"},Se={class:"table-custom-header"},Ce={class:"table-filters"},ze={class:"paginator"},De={class:"draw-table-filters"},Le={key:0,class:"draw-filter-item"},Ne={key:1,class:"draw-filter-item"},xe={key:2,class:"draw-filter-item"},Fe={key:3},Ee={key:4},Me={class:"draw-filter-item"},Ae={key:1,style:{"font-size":"16px","font-weight":"600"}},Ie="DD/MM/YYYY",je={__name:"TableComponent",props:["title","bread","routeBack","btnUpdate","btnImport","permisos","new","textNuevo","columns","search","dataSource","total","placeholderSearch","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator","handleCallFetchData"],setup(r,{emit:c}){h.locale("es");const i=ve(),e=r,f=c;JSON.parse(localStorage.getItem("role")),i.$patch({cities:i.cities}),e.cityList&&i.fetchCities();const O=y(!1),p=x("search"),I=x("loading"),T=x("loadingFile"),S=y(window.innerHeight-100),C=y({page:1}),$=y(1200),B=y([{label:"Últimos 7 días",value:[h().add(-7,"d"),h()]},{label:"Últimos 14 días",value:[h().add(-14,"d"),h()]},{label:"Último mes",value:[h().add(-30,"d"),h()]}]),j=y([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),H=re(()=>m=>(C.value.page-1)*e.pageSize+m+1),Y=()=>{f("handleCallFetchData")},G=()=>{f("handleNew")},V=async()=>{f("handleDownloadExcel")},J=()=>{C.value.page=1,f("handleSearch",!0)},X=m=>{C.value.page=m,f("handlePaginator",m)},z=()=>{if(e.heightTable)return S.value=window.innerHeight-e.heightTable;S.value=window.innerHeight-310},P=(m,t)=>{const D=m.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(D)};return ie(()=>{window.removeEventListener("resize",z)}),de(()=>{window.addEventListener("resize",z),z()}),(m,t)=>{const D=d("router-link"),L=d("a-breadcrumb-item"),q=d("a-breadcrumb"),b=d("a-button"),Q=d("a-menu"),W=d("a-dropdown"),Z=d("a-table"),K=d("a-tag"),ee=d("a-pagination"),te=d("a-date-picker"),ae=d("a-range-picker"),N=d("a-select"),ne=d("a-input"),le=d("a-drawer");return s(),g(M,null,[o("div",we,[r.bread?(s(),w(q,{key:0},{default:u(()=>[n(L,null,{default:u(()=>[n(D,{to:r.routeBack},{default:u(()=>[n(a(ue)),t[9]||(t[9]=o("span",{class:"fs-13"}," Atrás",-1))]),_:1},8,["to"])]),_:1}),n(L,null,{default:u(()=>[o("h3",ke,_(e.title),1)]),_:1})]),_:1})):(s(),g("h3",Oe,_(e.title),1)),o("div",Se,[o("div",Ce,[k(m.$slots,"left"),e.new?(s(),w(b,{key:0,type:"primary",onClick:G},{default:u(()=>[F(_(e.textNuevo),1)]),_:1})):v("",!0),r.downloadExcel?(s(),w(b,{key:1,class:"btn-excel",onClick:V,loading:a(T),type:"primary"},{default:u(()=>t[10]||(t[10]=[o("img",{width:"20",src:me},null,-1)])),_:1},8,["loading"])):v("",!0),r.btnUpdate?(s(),w(b,{key:2,icon:E(a(fe)),onClick:Y},null,8,["icon"])):v("",!0)]),n(b,{icon:E(a(ye)),onClick:t[0]||(t[0]=l=>O.value=!0)},null,8,["icon"])]),k(m.$slots,"statics"),n(Z,{bordered:"",scroll:{x:$.value,y:S.value},class:"table-pnte",columns:e==null?void 0:e.columns,"data-source":e==null?void 0:e.dataSource,pagination:!1,loading:a(I),size:"small"},{bodyCell:u(({column:l,record:U,index:oe})=>[l.dataIndex=="idx"?(s(),g(M,{key:0},[F(_(H.value(oe)),1)],64)):v("",!0),k(m.$slots,"data-cell",{column:l,record:U}),l.dataIndex=="actions"?(s(),w(W,{key:1,trigger:["click"]},{overlay:u(()=>[n(Q,null,{default:u(()=>[k(m.$slots,"custom-options",{record:U})]),_:2},1024)]),default:u(()=>[o("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=ce(()=>{},["prevent"]))},[n(b,{shape:"circle",icon:E(a(ge)),size:"small"},null,8,["icon"])])]),_:2},1024)):v("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),o("div",ze,[o("span",null,[n(K,{color:"blue"},{default:u(()=>[o("b",null,_(e==null?void 0:e.total),1)]),_:1}),F(_(e.nameTotal),1)]),n(ee,{size:"small",total:e==null?void 0:e.total,pageSize:e.pageSize,onChange:X,showSizeChanger:!1},null,8,["total","pageSize"])]),n(le,{open:O.value,"onUpdate:open":t[8]||(t[8]=l=>O.value=l),title:"FILTRAR",placement:"right"},{default:u(()=>[o("div",De,[k(m.$slots,"header"),e.searchYear?(s(),g("div",Le,[t[11]||(t[11]=o("span",null,"AÑO",-1)),n(te,{allowClear:!1,value:a(p).year,"onUpdate:value":t[2]||(t[2]=l=>a(p).year=l),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):v("",!0),e.rangeDate?(s(),g("div",Ne,[t[12]||(t[12]=o("span",null,"POR RANGO DE FECHAS",-1)),n(ae,{value:a(p).range,"onUpdate:value":t[3]||(t[3]=l=>a(p).range=l),presets:B.value,format:Ie},null,8,["value","presets"])])):v("",!0),e.othersList?(s(),g("div",xe,[t[13]||(t[13]=o("span",null,"ORDENAR POR",-1)),n(N,{allowClear:!0,value:a(p).orderby,"onUpdate:value":t[4]||(t[4]=l=>a(p).orderby=l),placeholder:"Filtrador por:","show-search":"",options:e.othersList,"filter-option":P},null,8,["value","options"])])):v("",!0),e.tipooficina?(s(),g("div",Fe,[t[14]||(t[14]=o("small",null,"OFICINA",-1)),n(N,{value:a(p).offices,"onUpdate:value":t[5]||(t[5]=l=>a(p).offices=l),options:j.value},null,8,["value","options"])])):v("",!0),e.cityList?(s(),g("div",Ee,[t[15]||(t[15]=o("small",null,"POR REGIÓN",-1)),n(N,{allowClear:!0,value:a(p).city_id,"onUpdate:value":t[6]||(t[6]=l=>a(p).city_id=l),placeholder:"Selecciona región","show-search":"",options:a(i).cities,"filter-option":P},null,8,["value","options"])])):v("",!0),e.placeholderSearch?(s(),g(M,{key:5},[o("div",Me,[o("span",null,_(e.titleSearch),1),n(ne,{value:a(p).name,"onUpdate:value":t[7]||(t[7]=l=>a(p).name=l),placeholder:e.placeholderSearch},null,8,["value","placeholder"])]),n(b,{type:"primary",onClick:J,style:{height:"36px","margin-top":"1rem"}},{default:u(()=>[a(I)?(s(),w(a(pe),{key:0})):(s(),g("span",Ae,"FILTRAR"))]),_:1})],64)):v("",!0)])]),_:3},8,["open"])],64)}}};export{je as _};
