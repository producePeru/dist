import{z as ye,ab as ge,r as _,a as K,j as ne,b as v,o as n,p as u,w as o,c as d,e as h,d as y,v as ke,F as x,q as s,h as b,B as xe,i as m,t as S,G as R,m as V,u as Ie,s as he,a3 as J,O as be,E as we,f as Ce}from"./index-26c48805.js";import"./es-7e9601e6.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";import{Q as $e}from"./quill.snow-97eddf52.js";import{V as Te}from"./VideoCameraOutlined-56228ac9.js";import{M as Ue}from"./MoreOutlined-2621fae0.js";const De={title:{type:"iText",label:"Título del taller",name:"title",required:!0,message:"Escribe el título para el taller"},exponentId:{type:"iSelect",label:"Seleccinar expositor",name:"exponentId",required:!0,message:"Seleccionar un expositor"},workshopDate:{type:"iDate",label:"Fecha del taller",name:"workshopDate",required:!1,message:"Seleccionar la fecha del taller"},typeIntervention:{type:"iSelect",label:"Seleccinar tipo de intervención",name:"typeIntervention",required:!0,message:"Seleccionar un tipo"},slug:{type:"iText",label:"Slug",name:"slug",required:!0,message:"Escribe el título para el taller"},link:{type:"iText",label:"Link del taller",name:"link",required:!1,message:"Escribe el título para el taller"}};const Se={class:"grid-item"},qe={class:"wrapper-form_btn"},ze={__name:"NuevoTaller",props:["isIdUpdate"],emits:["handleCloseModal","refreshTable"],setup(Z,{emit:P}){ye.locale("es");const I=Z,q=P;ge(()=>{I.isIdUpdate?(a.title=I.isIdUpdate.title,a.exponentId=I.isIdUpdate.exponent_k,a.workshopDate=I.isIdUpdate.workshop_date,a.typeIntervention=I.isIdUpdate.type_intervention,a.slug=I.isIdUpdate.slug,a.link=I.isIdUpdate.link):(a.title=null,a.exponentId=null,a.workshopDate=null,a.typeIntervention=null,a.slug=null,a.link=null)});const C=_(!0),E=_(!1),a=K({title:null,exponentId:null,workshopDate:null,typeIntervention:null,slug:null,link:null,userId:1,testinId:null,testoutId:null,invitationId:null,status:1,registered:null,rrss:null,sms:null,correo:null}),L=_([]),N=[{label:"Marketing Digital",value:1},{label:"Comercio Electrónico",value:2},{label:"Gestión Empresarial",value:3},{label:"Analisis de datos",value:4},{label:"Medios de pago",value:5},{label:"Finanzas",value:6}],z=()=>{q("handleCloseModal",!0),C.value=!1},Y=()=>{a.title=null,a.exponentId=null,a.workshopDate=null,a.typeIntervention=null,a.slug=null,a.link=null,a.userId=1,a.testinId=null,a.testoutId=null,a.invitationId=null,a.status=null,a.registered=null,a.rrss=null,a.sms=null,a.correo=null},M=r=>{const f=new Date;return f.setHours(0,0,0,0),r&&r<f},B=(r,f)=>{a.workshopDate=f},$=r=>{if(typeof r=="string")return r.toLowerCase().replace(/\s+/g,"-");if(Array.isArray(r))return r.map($);if(typeof r=="object"){const f={};for(const g in r)r.hasOwnProperty(g)&&(f[g]=$(r[g]));return f}else return r},O=async()=>{const r=$(a.slug),f=a;f.slug=r,E.value=!0;let g,w;I.isIdUpdate?(g=`/workshops/${I.isIdUpdate.id}`,w="PUT"):(g="/workshops",w="POST");try{const T=await R({url:g,method:w,data:f});Y(),q("refreshTable",!0),V.success(T.message),z()}catch{V.error("No se pudo registrar este taller")}finally{E.value=!1}};return ne(async()=>{try{const{data:r}=await R({url:"/enableds-exponents",method:"GET"});L.value=r}catch(r){console.error("Error de red:",r)}}),(r,f)=>{const g=v("a-select"),w=v("a-form-item"),T=v("a-input"),Q=v("a-date-picker"),F=v("a-button"),G=v("a-form"),W=v("a-modal");return n(),u(W,{open:C.value,"onUpdate:open":f[0]||(f[0]=i=>C.value=i),title:"Nuevo Taller",style:{top:"20px"},footer:"",onCancel:z,width:"700px"},{default:o(()=>[d(G,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:O},{default:o(()=>[h("div",Se,[(n(!0),y(x,null,ke(b(De),(i,X)=>(n(),y(x,{key:X},[i.type==="iSelect"?(n(),u(w,{key:0,class:"item-max",name:i.name,label:i.label,rules:[{required:i.required,message:i.message}]},{default:o(()=>[i.name=="typeIntervention"?(n(),u(g,{key:0,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,options:N},null,8,["value","onUpdate:value"])):s("",!0),i.name=="exponentId"?(n(),u(g,{key:1,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,options:L.value},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),i.type==="iText"?(n(),u(w,{key:1,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,type:i.email}]},{default:o(()=>[d(T,{value:a[i.name],"onUpdate:value":U=>a[i.name]=U},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):s("",!0),i.type==="iDate"?(n(),u(w,{key:2,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,type:i.email}]},{default:o(()=>[d(Q,{locale:b(xe),class:"w-100","show-time":"",placeholder:a.workshopDate,onChange:B,"disabled-date":M,format:"DD-MM-YYYY HH:mm A"},null,8,["locale","placeholder"])]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),h("div",qe,[d(F,{type:"primary","html-type":"submit",loading:E.value},{default:o(()=>[m(S(I.isIdUpdate?"Actualizar":"Registrar")+" taller",1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open"])}}},Me=Ee(ze,[["__scopeId","data-v-6226f246"]]);const Oe={class:"filters"},Le=["href"],Ne=["href"],Ae=["href"],Fe=["href"],Ge={key:9},Re=["onClick"],Ve={class:"paginator"},Be={class:"wrapper-form_btn"},Je={__name:"TalleresRD",setup(Z){const P="https://programa.soporte-pnte.com/",I="http://127.0.0.1:5173/",q=window.location.hostname=="127.0.0.1"?I:P,C=_(""),E=_(null),a=Ie(),L=_([]),N=_(!1),z=_(!1),Y=_(1e3),M=_(!1),B=_(0);_(null);const $=_(!1),O=_(!1),A=_("Crear"),r=_(null),f=_(window.innerHeight-100),g=()=>{f.value=window.innerHeight-300};he(()=>{window.removeEventListener("resize",g)});const w={theme:"snow",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["clean"]]},contentType:"html"},T=_({page:1}),Q=[{title:"Nombre taller",dataIndex:"title",fixed:"left",width:190},{title:"Expositor",dataIndex:"expositor",width:170},{title:"Fecha taller",dataIndex:"workshop_date",align:"center",width:160},{title:"Intervención",dataIndex:"type_intervention",align:"center",width:160},{title:"Invitación",dataIndex:"invitation_id",align:"center",width:80},{title:"T. Entrada",dataIndex:"test_in",align:"center",width:80},{title:"T. Salida",dataIndex:"test_out",align:"center",width:80},{title:"Estado",dataIndex:"status",align:"center",width:100},{title:"Inscriptos",dataIndex:"registered_c",align:"center",width:100},{title:"Link",dataIndex:"link_sala",align:"center",width:80},{title:"RRSS",dataIndex:"rrss",align:"center",width:70},{title:"SMS",dataIndex:"sms",align:"center",width:70},{title:"Correo",dataIndex:"correo",align:"center",width:70},{title:"Detalles",dataIndex:"details",align:"center",width:120},{title:"",dataIndex:"options",align:"center",width:50}],F=K({reason:""}),G=K({text1:"",text2:""}),W=t=>{T.value.page=t,H()},i=t=>{t&&H()},X=t=>{const e={id:t.id,date:t.workshop_date,taller:t.title,exponent:`${t.exponent.first_name} ${t.exponent.last_name} ${t.exponent.middle_name}`};a.push({name:"test-entrada",query:e})},U=t=>{const e={id:t.id,date:t.workshop_date,taller:t.title,exponent:`${t.exponent.first_name} ${t.exponent.last_name} ${t.exponent.middle_name}`,test:t.testin_id};a.push({name:"editar-test-entrada",query:e})},le=t=>{const e={id:t.id,date:t.workshop_date,taller:t.title,exponent:`${t.exponent.first_name} ${t.exponent.last_name} ${t.exponent.middle_name}`};a.push({name:"test-salida",query:e})},oe=t=>{const e={id:t.id,date:t.workshop_date,taller:t.title,exponent:`${t.exponent.first_name} ${t.exponent.last_name} ${t.exponent.middle_name}`,test:t.testout_id};a.push({name:"editar-test-salida",query:e})},se=t=>{const e={id:t.id,date:t.workshop_date,taller:t.title,exponent:`${t.exponent.first_name} ${t.exponent.last_name} ${t.exponent.middle_name}`};a.push({name:"taller-descripcion",query:e})},j=async(t,e)=>{if(r.value=e,t==="create"&&(A.value="Crear"),t==="edit"){A.value="Editar";try{const{data:c}=await R({url:`/invitations/${r.value.invitation_id}`,method:"GET"});C.value=c.content,G.workshop_id=c.workshop_id}catch(c){console.error("Error de red:",c)}}O.value=!0},ie=()=>{E.value=null,M.value=!0},re=async t=>{try{const e=await Ce({url:`/get-workshop-slug/${t.slug}`,method:"GET"});E.value=e.workshop,M.value=!0}catch(e){console.error("Error de red:",e),V.warning("Error de red")}},de=async()=>{let t,e;A.value=="Editar"?(t=`/invitations/${r.value.invitation_id}`,e="PUT"):(t=`/create-invitation/${r.value.id}`,e="POST"),z.value=!0;try{const c={content:C.value,workshop_id:r.value.id!=null?r.value.id:G.workshop_id},k=await R({url:t,method:e,data:c});V.success(k.message),H()}catch(c){console.error("Error de red:",c),V.error("La invitación fue creada")}finally{z.value=!1,O.value=!1,r.value=null}},ue=()=>{$.value=!0},H=async()=>{try{N.value=!0;const t=await R({url:"/workshops",method:"GET",params:T.value});L.value=t.workshop.data,B.value=t.workshop.total}catch(t){console.error("Error de red:",t)}finally{N.value=!1}};return ne(()=>{H(),window.addEventListener("resize",g),g()}),(t,e)=>{const c=v("a-button"),k=v("a-tag"),ee=v("a-menu-item"),pe=v("a-menu"),ce=v("a-dropdown"),me=v("a-table"),_e=v("a-pagination"),te=v("a-form"),ae=v("a-modal"),ve=v("a-textarea"),fe=v("a-form-item");return n(),y(x,null,[h("div",null,[e[20]||(e[20]=h("h3",null,"TALLERES DE RUTA DIGITAL",-1)),h("div",Oe,[d(c,{type:"primary",onClick:ie},{default:o(()=>e[6]||(e[6]=[m("NUEVO")])),_:1})]),d(me,{bordered:"",class:"ant-table-striped",scroll:{x:Y.value,y:f.value},columns:Q,"data-source":L.value,pagination:!1,loading:N.value,size:"small"},{bodyCell:o(({column:p,record:l})=>[p.dataIndex=="expositor"?(n(),y(x,{key:0},[m(S(l.exponent.first_name)+" "+S(l.exponent.last_name)+" "+S(l.exponent.middle_name),1)],64)):s("",!0),p.dataIndex=="type_intervention"?(n(),y(x,{key:1},[l.type_intervention==1?(n(),u(k,{key:0,color:"red"},{default:o(()=>e[7]||(e[7]=[m("Marketing Digital")])),_:1})):s("",!0),l.type_intervention==2?(n(),u(k,{key:1,color:"green"},{default:o(()=>e[8]||(e[8]=[m("Comercio Electrónico")])),_:1})):s("",!0),l.type_intervention==3?(n(),u(k,{key:2,color:"blue"},{default:o(()=>e[9]||(e[9]=[m("Gestión Empresarial")])),_:1})):s("",!0),l.type_intervention==4?(n(),u(k,{key:3,color:"purple"},{default:o(()=>e[10]||(e[10]=[m("Analisis de datos")])),_:1})):s("",!0),l.type_intervention==5?(n(),u(k,{key:4,color:"pink"},{default:o(()=>e[11]||(e[11]=[m("Medios de pago")])),_:1})):s("",!0),l.type_intervention==6?(n(),u(k,{key:5,color:"cyan"},{default:o(()=>e[12]||(e[12]=[m("Finanzas")])),_:1})):s("",!0)],64)):s("",!0),p.dataIndex=="test_in"?(n(),y(x,{key:2},[l.testin_id?s("",!0):(n(),u(c,{key:0,size:"small",onClick:D=>X(l)},{default:o(()=>e[13]||(e[13]=[m("Crear")])),_:2},1032,["onClick"])),l.testin_id?(n(),y(x,{key:1},[d(c,{type:"link"},{default:o(()=>[h("a",{href:`${b(q)}test-entrada/${l.slug}`,target:"_blank"},"Link",8,Le)]),_:2},1024),d(b(J),{onClick:D=>U(l)},null,8,["onClick"])],64)):s("",!0)],64)):s("",!0),p.dataIndex=="test_out"?(n(),y(x,{key:3},[l.testout_id?s("",!0):(n(),u(c,{key:0,size:"small",onClick:D=>le(l)},{default:o(()=>e[14]||(e[14]=[m("Crear")])),_:2},1032,["onClick"])),l.testout_id?(n(),y(x,{key:1},[d(c,{type:"link"},{default:o(()=>[h("a",{href:`${b(q)}test-salida/${l.slug}`,target:"_blank"},"Link",8,Ne)]),_:2},1024),d(b(J),{onClick:D=>oe(l)},null,8,["onClick"])],64)):s("",!0)],64)):s("",!0),p.dataIndex=="invitation_id"?(n(),y(x,{key:4},[l.invitation_id?s("",!0):(n(),u(c,{key:0,size:"small",onClick:D=>j("create",l)},{default:o(()=>e[15]||(e[15]=[m("Crear")])),_:2},1032,["onClick"])),l.invitation_id?(n(),y(x,{key:1},[d(c,{type:"link"},{default:o(()=>[h("a",{href:`${b(q)}invitacion/${l.slug}`,target:"_blank"},"Link",8,Ae)]),_:2},1024),d(b(J),{onClick:D=>j("edit",l)},null,8,["onClick"])],64)):s("",!0)],64)):s("",!0),p.dataIndex=="status"?(n(),y(x,{key:5},[l.status==1?(n(),u(k,{key:0,bordered:!1,color:"success"},{default:o(()=>e[16]||(e[16]=[m("En proceso")])),_:1})):s("",!0),l.status==0?(n(),u(k,{key:1,bordered:!1,color:"error"},{default:o(()=>e[17]||(e[17]=[m("Finalizado")])),_:1})):s("",!0),l.status==2?(n(),u(k,{key:2,bordered:!1,color:"warning"},{default:o(()=>e[18]||(e[18]=[m("Cancelado")])),_:1})):s("",!0)],64)):s("",!0),p.dataIndex=="link_sala"?(n(),y("a",{key:6,href:l.link,target:"_blank"},[l.link?(n(),u(b(Te),{key:0,class:"pointer",style:{fontSize:"16px",color:"#08c"}})):s("",!0)],8,Fe)):s("",!0),p.dataIndex=="status"?(n(),y(x,{key:7},[l.status=="en curso"?(n(),u(k,{key:0,bordered:!1,color:"success"},{default:o(()=>[m(S(l.status),1)]),_:2},1024)):s("",!0),l.status=="finalizado"?(n(),u(k,{key:1,bordered:!1,color:"volcano"},{default:o(()=>[m(S(l.status),1)]),_:2},1024)):s("",!0)],64)):s("",!0),p.dataIndex=="details"?(n(),u(c,{key:8,size:"small",onClick:D=>se(l)},{default:o(()=>e[19]||(e[19]=[m("Ver detalles")])),_:2},1032,["onClick"])):s("",!0),p.dataIndex=="registered_c"?(n(),y("b",Ge,S(l.registered_count),1)):s("",!0),p.dataIndex=="options"?(n(),u(ce,{key:10,trigger:["click"]},{overlay:o(()=>[d(pe,null,{default:o(()=>[d(ee,{key:"0"},{default:o(()=>[h("a",{onClick:D=>re(l)},"Editar",8,Re)]),_:2},1024),d(ee,{key:"1"})]),_:2},1024)]),default:o(()=>[h("a",{class:"ant-dropdown-link",onClick:e[0]||(e[0]=be(()=>{},["prevent"]))},[d(c,{shape:"circle",icon:we(b(Ue)),size:"small"},null,8,["icon"])])]),_:2},1024)):s("",!0)]),_:1},8,["scroll","data-source","loading"])]),h("div",Ve,[d(_e,{size:"small",total:B.value,pageSize:20,onChange:W,showSizeChanger:!1},null,8,["total"])]),d(Me,{open:M.value,onHandleCloseModal:e[1]||(e[1]=p=>M.value=!1),isIdUpdate:E.value,onRefreshTable:i},null,8,["open","isIdUpdate"]),d(ae,{footer:"",open:O.value,"onUpdate:open":e[3]||(e[3]=p=>O.value=p),title:`${A.value} invitación`,width:"460px"},{default:o(()=>[d(te,{model:G,layout:"vertical",onFinish:de},{default:o(()=>[d(b($e),{class:"quill-editor",content:C.value,"onUpdate:content":e[2]||(e[2]=p=>C.value=p),options:w,contentType:"html"},null,8,["content"]),h("div",Be,[d(c,{type:"primary","html-type":"submit",loading:z.value},{default:o(()=>e[21]||(e[21]=[m("Guardar")])),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open","title"]),d(ae,{open:$.value,"onUpdate:open":e[5]||(e[5]=p=>$.value=p),title:"Cancelar taller",onOk:ue,width:"400px"},{default:o(()=>[d(te,{model:F,layout:"vertical"},{default:o(()=>[d(fe,{label:"Especificar motivo de la cancelación del taller"},{default:o(()=>[d(ve,{value:F.reason,"onUpdate:value":e[4]||(e[4]=p=>F.reason=p)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}};export{Je as default};
