import{c as l,A as se,p as h,r as y,a6 as F,G as re,a1 as ie,k as de,b as d,o as s,d as g,e as o,y as w,w as u,i as a,aa as ue,t as _,a8 as k,j as E,z as v,s as M,F as A,O as ce,L as pe}from"./index-27eb4ced.js";import{_ as me}from"./icoexcel-1b303edf.js";import{u as ve}from"./selectes-73cf3849.js";import"./es-6769ff5b.js";import{S as fe}from"./SyncOutlined-e332b705.js";import{M as ge}from"./MoreOutlined-ac973a5f.js";var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};const _e=he;function R(r){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?Object(arguments[p]):{},e=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable}))),e.forEach(function(f){be(r,f,i[f])})}return r}function be(r,p,i){return p in r?Object.defineProperty(r,p,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[p]=i,r}var I=function(p,i){var e=R({},p,i.attrs);return l(se,R({},e,{icon:_e}),null)};I.displayName="MenuOutlined";I.inheritAttrs=!1;const ye=I;const we={class:"table-component"},ke={class:"title-produce"},Oe={key:1,class:"title-produce"},Se={class:"table-custom-header"},Ce={class:"table-filters"},ze={class:"paginator"},De={class:"draw-table-filters"},Le={key:0,class:"draw-filter-item"},Ne={key:1,class:"draw-filter-item"},xe={key:2,class:"draw-filter-item"},Fe={key:3},Ee={key:4},Me={class:"draw-filter-item"},Ae={key:1,style:{"font-size":"16px","font-weight":"600"}},Ie="DD/MM/YYYY",je={__name:"TableComponent",props:["title","bread","routeBack","btnUpdate","btnImport","permisos","new","textNuevo","columns","search","dataSource","total","placeholderSearch","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator","handleCallFetchData"],setup(r,{emit:p}){h.locale("es");const i=ve(),e=r,f=p;JSON.parse(localStorage.getItem("role")),i.$patch({cities:i.cities}),e.cityList&&i.fetchCities();const S=y(!1),m=F("search"),P=F("loading"),T=F("loadingFile"),C=y(window.innerHeight-100),z=y({page:1}),$=y(1200),B=y([{label:"Últimos 7 días",value:[h().add(-7,"d"),h()]},{label:"Últimos 14 días",value:[h().add(-14,"d"),h()]},{label:"Último mes",value:[h().add(-30,"d"),h()]}]),j=y([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),H=re(()=>c=>(z.value.page-1)*e.pageSize+c+1),Y=()=>{f("handleCallFetchData")},G=()=>{f("handleNew")},V=async()=>{f("handleDownloadExcel")},J=()=>{z.value.page=1,f("handleSearch",!0)},X=c=>{z.value.page=c,f("handlePaginator",c)},D=()=>{if(e.heightTable)return C.value=window.innerHeight-e.heightTable;C.value=window.innerHeight-310},U=(c,t)=>{const L=c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(L)};return ie(()=>{window.removeEventListener("resize",D)}),de(()=>{window.addEventListener("resize",D),D()}),(c,t)=>{const L=d("router-link"),N=d("a-breadcrumb-item"),q=d("a-breadcrumb"),b=d("a-button"),Q=d("a-menu"),W=d("a-dropdown"),Z=d("a-table"),K=d("a-tag"),ee=d("a-pagination"),te=d("a-date-picker"),ae=d("a-range-picker"),x=d("a-select"),ne=d("a-input"),le=d("a-drawer");return s(),g(A,null,[o("div",we,[r.bread?(s(),w(q,{key:0},{default:u(()=>[l(N,null,{default:u(()=>[l(L,{to:r.routeBack},{default:u(()=>[l(a(ue)),t[9]||(t[9]=o("span",{class:"fs-13"}," Atrás",-1))]),_:1},8,["to"])]),_:1}),l(N,null,{default:u(()=>[o("h3",ke,_(e.title),1)]),_:1})]),_:1})):(s(),g("h3",Oe,_(e.title),1)),o("div",Se,[o("div",Ce,[k(c.$slots,"left"),e.new?(s(),w(b,{key:0,type:"primary",onClick:G},{default:u(()=>[E(_(e.textNuevo),1)]),_:1})):v("",!0),r.downloadExcel?(s(),w(b,{key:1,class:"btn-excel",onClick:V,loading:a(T),type:"primary"},{default:u(()=>t[10]||(t[10]=[o("img",{width:"20",src:me},null,-1)])),_:1},8,["loading"])):v("",!0),r.btnUpdate?(s(),w(b,{key:2,icon:M(a(fe)),onClick:Y},null,8,["icon"])):v("",!0)]),l(b,{icon:M(a(ye)),onClick:t[0]||(t[0]=n=>S.value=!0)},null,8,["icon"])]),k(c.$slots,"statics"),l(Z,{bordered:"",scroll:{x:$.value,y:C.value},class:"table-pnte",columns:e==null?void 0:e.columns,"data-source":e==null?void 0:e.dataSource,pagination:!1,loading:a(P),size:"small"},{headerCell:u(({column:n,text:O})=>[k(c.$slots,"headerCell",{column:n,text:O})]),bodyCell:u(({column:n,record:O,index:oe})=>[n.dataIndex=="idx"?(s(),g(A,{key:0},[E(_(H.value(oe)),1)],64)):v("",!0),k(c.$slots,"data-cell",{column:n,record:O}),n.dataIndex=="actions"?(s(),w(W,{key:1,trigger:["click"]},{overlay:u(()=>[l(Q,null,{default:u(()=>[k(c.$slots,"custom-options",{record:O})]),_:2},1024)]),default:u(()=>[o("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=ce(()=>{},["prevent"]))},[l(b,{shape:"circle",icon:M(a(ge)),size:"small"},null,8,["icon"])])]),_:2},1024)):v("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),o("div",ze,[o("span",null,[l(K,{color:"blue"},{default:u(()=>[o("b",null,_(e==null?void 0:e.total),1)]),_:1}),E(_(e.nameTotal),1)]),l(ee,{size:"small",total:e==null?void 0:e.total,pageSize:e.pageSize,onChange:X,showSizeChanger:!1},null,8,["total","pageSize"])]),l(le,{open:S.value,"onUpdate:open":t[8]||(t[8]=n=>S.value=n),title:"FILTRAR",placement:"right"},{default:u(()=>[o("div",De,[k(c.$slots,"header"),e.searchYear?(s(),g("div",Le,[t[11]||(t[11]=o("span",null,"AÑO",-1)),l(te,{allowClear:!1,value:a(m).year,"onUpdate:value":t[2]||(t[2]=n=>a(m).year=n),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):v("",!0),e.rangeDate?(s(),g("div",Ne,[t[12]||(t[12]=o("span",null,"POR RANGO DE FECHAS",-1)),l(ae,{value:a(m).range,"onUpdate:value":t[3]||(t[3]=n=>a(m).range=n),presets:B.value,format:Ie},null,8,["value","presets"])])):v("",!0),e.othersList?(s(),g("div",xe,[t[13]||(t[13]=o("span",null,"ORDENAR POR",-1)),l(x,{allowClear:!0,value:a(m).orderby,"onUpdate:value":t[4]||(t[4]=n=>a(m).orderby=n),placeholder:"Filtrador por:","show-search":"",options:e.othersList,"filter-option":U},null,8,["value","options"])])):v("",!0),e.tipooficina?(s(),g("div",Fe,[t[14]||(t[14]=o("small",null,"OFICINA",-1)),l(x,{value:a(m).offices,"onUpdate:value":t[5]||(t[5]=n=>a(m).offices=n),options:j.value},null,8,["value","options"])])):v("",!0),e.cityList?(s(),g("div",Ee,[t[15]||(t[15]=o("small",null,"POR REGIÓN",-1)),l(x,{allowClear:!0,value:a(m).city_id,"onUpdate:value":t[6]||(t[6]=n=>a(m).city_id=n),placeholder:"Selecciona región","show-search":"",options:a(i).cities,"filter-option":U},null,8,["value","options"])])):v("",!0),e.placeholderSearch?(s(),g(A,{key:5},[o("div",Me,[o("span",null,_(e.titleSearch),1),l(ne,{value:a(m).name,"onUpdate:value":t[7]||(t[7]=n=>a(m).name=n),placeholder:e.placeholderSearch},null,8,["value","placeholder"])]),l(b,{type:"primary",onClick:J,style:{height:"36px","margin-top":"1rem"}},{default:u(()=>[a(P)?(s(),w(a(pe),{key:0})):(s(),g("span",Ae,"FILTRAR"))]),_:1})],64)):v("",!0)])]),_:3},8,["open"])],64)}}};export{je as _};
