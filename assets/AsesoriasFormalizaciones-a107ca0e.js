import{u as ue}from"./selectes-73568308.js";import{f as Se,r as Ce,a as De}from"./asesorias-6c011677.js";import{c as n,A as ke,K as ce,y as fe,r as m,a as me,b as v,o as s,d as E,w as i,e as d,F as K,x as le,h as y,q as _,s as u,t as D,L as Ae,Y as he,i as H,Z as ye,z as Q,f as ze,m as B,R as ge,u as Re,k as $e,$ as Ne,p as Fe,j as Oe}from"./index-990720bf.js";import"./es-4ca361dc.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                      */import{S as Ee}from"./DrawerSolicitante.componente-eca18dc3.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Te=qe;function ve(F){for(var z=1;z<arguments.length;z++){var r=arguments[z]!=null?Object(arguments[z]):{},S=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(S=S.concat(Object.getOwnPropertySymbols(r).filter(function(k){return Object.getOwnPropertyDescriptor(r,k).enumerable}))),S.forEach(function(k){Pe(F,k,r[k])})}return F}function Pe(F,z,r){return z in F?Object.defineProperty(F,z,{value:r,enumerable:!0,configurable:!0,writable:!0}):F[z]=r,F}var pe=function(z,r){var S=ve({},z,r.attrs);return n(ke,ve({},S,{icon:Te}),null)};pe.displayName="RedoOutlined";pe.inheritAttrs=!1;const Le=pe;const Me={class:"wrapper-booking"},Ye={class:"grid-booking"},Ge={class:"select-notaries"},Ve={class:"name"},He={class:"city"},je={class:"address"},Be="DD/MM/YYYY",Je={__name:"AllFormalizacion20",props:["info"],emits:["closeDraw"],setup(F,{emit:z}){ce.locale("es");const r=ye({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}});fe();const S=JSON.parse(localStorage.getItem("profile")),k=F,J=z,Y=m(!1),O=m(null);m(null);const e=m(!0),V=m(!1),p=ue(),l=m(null);p.$patch({cities:p.cities}),p.$patch({modalities:p.modalities}),p.$patch({economicSectors:p.economicSectors}),p.$patch({comercialActivities:p.comercialActivities}),p.$patch({regimes:p.regimes}),p.fetchEconomicSectors(),p.fetchComercialActivities(),p.fetchRegimes(),p.fetchModalities(),p.fetchCities();const a=me({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:S.user_id}),q=f=>{f=="ruc"&&(a[f]=a[f].replace(/\D/g,""))},A=()=>{var f;a.dni=k.info.documentnumber,(f=p.regimes)!=null&&f.length&&(e.value=!1)},R=(f,w)=>{const $=f.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=w.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),W=w.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),x=w.province.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Z=w.district.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.includes($)||W.includes($)||x.includes($)||Z.includes($)},U=async()=>{try{Y.value=!0;const f={name:O.value};(await Q({url:"create/comercial-activities",method:"POST",data:f})).status==200&&(O.value=null,p.fetchComercialActivities())}catch(f){console.log(f)}finally{Y.value=!1}},b=f=>{a.province_id=null,a.district_id=null,p.fetchProvinces(f),L()},j=f=>{a.district_id=null,p.fetchDistricts(f)},L=async()=>{try{const f={city_id:a.city_id},{data:w}=await ze({url:"public/notaries-filters",method:"GET"});l.value=null,a.notary_id=null;const $=w.map(t=>({value:t.id,name:t.name,city:t.city.name,province:t.province.name,district:t.district.name,address:t.address}));l.value=$}catch(f){console.error("Error de red:",f)}},g=(f,w)=>{const $=f.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return w.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes($)},M=async()=>{if(V.value=!0,!k.info.id)return B.error("Error al registrar, actualiza la página");const f={codesunarp:a.codesunarp,numbernotary:a.numbernotary,address:a.address,economicsector_id:a.economicsector_id,comercialactivity_id:a.comercialactivity_id,regime_id:a.regime_id,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,modality_id:a.modality_id,notary_id:a.notary_id,user_id:S.id,people_id:k.info.id,nameMype:a.nameMype,dateReception:a.dateReception?ce(a.dateReception).format("YYYY-MM-DD"):null,dateTramite:a.dateTramite?ce(a.dateTramite).format("YYYY-MM-DD"):null,ruc:a.ruc,dni:a.dni};try{const w=await Q({url:"formalization/create-ruc20",method:"POST",data:f});w.status===200&&(B.success(w.message),a.codesunarp=null,a.economicsector_id=null,a.comercialactivity_id=null,a.regime_id=null,a.city_id=null,a.province_id=null,a.district_id=null,a.address=null,a.modality_id=null,a.nameMype=null,a.dateReception=null,a.dateTramite=null,a.notary_id=null,a.ruc=null,a.numbernotary=null,J("closeDraw",!0))}catch(w){console.log("Error: "+w)}finally{V.value=!1}},G=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(f,w)=>{const $=v("a-select"),t=v("a-form-item"),W=v("a-date-picker"),x=v("a-divider"),Z=v("a-input"),c=v("a-button"),ee=v("a-space"),N=v("a-form"),ae=v("a-spin");return s(),E("div",Me,[n(ae,{spinning:e.value},{default:i(()=>[n(N,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:M,onFinishFailed:G},{default:i(()=>[d("div",Ye,[(s(!0),E(K,null,le(y(Se),(o,ne)=>(s(),E(K,{key:ne},[o.type==="iSelect"?(s(),_(t,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:i(()=>[o.name=="regime_id"?(s(),_($,{key:0,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,options:y(p).regimes,"show-search":"","filter-option":g},null,8,["value","onUpdate:value","options"])):u("",!0),o.name=="modality_id"?(s(),_($,{key:1,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,options:y(p).modalities},null,8,["value","onUpdate:value","options"])):u("",!0),o.name=="notary_id"?(s(),_($,{key:2,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,options:l.value,"option-label-prop":"name",disabled:!a.city_id,"show-search":"","filter-option":R},{option:i(({value:I,name:T,city:h,province:X,district:se,address:re})=>[d("div",Ge,[d("span",Ve,D(T),1),d("span",He,D(h)+" - "+D(X)+" - "+D(se),1),d("span",je,D(re),1)])]),_:2},1032,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),o.type==="iDate"?(s(),_(t,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:i(()=>[n(W,{locale:y(Ae),value:a[o.name],"onUpdate:value":I=>a[o.name]=I,style:{width:"100%"},format:Be,placeholder:"día/mes/año",onChange:w[0]||(w[0]=I=>a.birthday=f.birthdateDate),disabled:o.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),o.type==="iSelectWrite"?(s(),_(t,{key:2,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:i(()=>[o.name=="comercialactivity_id"?(s(),_($,{key:0,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,"show-search":"",options:y(p).comercialActivities,"filter-option":g},{dropdownRender:i(({menuNode:I})=>[n(y(r),{vnodes:I},null,8,["vnodes"]),n(x,{style:{margin:"4px 0"}}),n(ee,{style:{padding:"4px 8px"}},{default:i(()=>[n(Z,{ref_for:!0,ref:"inputRef",value:O.value,"onUpdate:value":w[1]||(w[1]=T=>O.value=T),placeholder:"Nueva actividad"},null,8,["value"]),n(c,{type:"text",onClick:U,loading:Y.value},{icon:i(()=>[n(y(he))]),default:i(()=>[H(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):u("",!0),o.name=="economicsector_id"?(s(),_($,{key:1,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,"show-search":"",options:y(p).economicSectors,"filter-option":g},null,8,["value","onUpdate:value","options"])):u("",!0),o.name=="city_id"?(s(),_($,{key:2,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,"show-search":"",options:y(p).cities,"filter-option":g,onChange:b},null,8,["value","onUpdate:value","options"])):u("",!0),o.name=="province_id"?(s(),_($,{key:3,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,"show-search":"",options:y(p).provinces,"filter-option":g,onChange:j,disabled:!a.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),o.name=="district_id"?(s(),_($,{key:4,value:a[o.name],"onUpdate:value":I=>a[o.name]=I,"show-search":"",options:y(p).districts,"filter-option":g,disabled:!a.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),o.type==="iText"?(s(),_(t,{key:3,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email,max:o.max,min:o.min}]},{default:i(()=>[n(Z,{onInput:I=>q(o.name),value:a[o.name],"onUpdate:value":I=>a[o.name]=I,disabled:o.disabled,maxlength:o.max,placeholder:o.placeholder},null,8,["onInput","value","onUpdate:value","disabled","maxlength","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),d("div",null,D(A()),1),n(t,null,{default:i(()=>[n(c,{class:"btn-produce",type:"primary","html-type":"submit",loading:V.value},{default:i(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ke=te(Je,[["__scopeId","data-v-e065d900"]]);const We={class:"wrapper-booking"},Ze={class:"grid-booking"},Qe={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(F,{emit:z}){const r=ye({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),S=JSON.parse(localStorage.getItem("profile")),k=F,J=z,Y=m(!1),O=m(null);m(null),m(!1);const e=ue(),V=m(!1);e.$patch({cities:e.cities}),e.$patch({provinces:e.provinces}),e.$patch({districts:e.districts}),e.$patch({modalities:e.modalities}),e.$patch({detailProcedures:e.detailProcedures}),e.$patch({economicSectors:e.economicSectors}),e.$patch({comercialActivities:e.comercialActivities}),e.fetchDetailProcedures(),e.fetchModalities(),e.fetchEconomicSectors(),e.fetchComercialActivities(),e.fetchCities();const p=m(!0),l=me({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:S.user_id}),a=()=>{l.dni=k.info.documentnumber,e.cities&&(p.value=!1)},q=g=>{g=="ruc"&&(l[g]=l[g].replace(/\D/g,""))},A=async()=>{try{V.value=!0;const g={name:O.value};(await Q({url:"create/comercial-activities",method:"POST",data:g})).status==200&&(O.value=null,e.fetchComercialActivities())}catch(g){console.log(g)}finally{V.value=!1}},R=g=>{l.province_id=null,l.district_id=null,e.fetchProvinces(g)},U=g=>{l.district_id=null,e.fetchDistricts(g)},b=(g,M)=>{const G=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return M.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(G)},j=async()=>{if(Y.value=!0,!k.info.id)return B.error("Error al registrar, actualiza la página");const g={dni:l.dni,detailprocedure_id:l.detailprocedure_id,modality_id:l.modality_id,economicsector_id:l.economicsector_id,comercialactivity_id:l.comercialactivity_id,city_id:l.city_id,province_id:l.province_id,district_id:l.district_id,address:l.address,ruc:l.ruc,user_id:S.user_id,people_id:k.info.id};try{const M=await Q({url:"formalization/create-ruc-10",method:"POST",data:g});M.status===200&&(B.success(M.message),l.detailprocedure_id=null,l.modality_id=null,l.economicsector_id=null,l.comercialactivity_id=null,l.city_id=null,l.province_id=null,l.district_id=null,l.address=null,l.ruc=null,J("closeDraw",!0))}catch(M){console.log("Error: "+M)}finally{Y.value=!1}},L=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(g,M)=>{const G=v("a-select"),f=v("a-form-item"),w=v("a-input"),$=v("a-divider"),t=v("a-button"),W=v("a-space"),x=v("a-form"),Z=v("a-spin");return s(),E("div",We,[n(Z,{spinning:p.value},{default:i(()=>[n(x,{layout:"vertical",model:l,name:"basic",autocomplete:"off",onFinish:j,onFinishFailed:L},{default:i(()=>[d("div",Ze,[(s(!0),E(K,null,le(y(Ce),(c,ee)=>(s(),E(K,{key:ee},[c.type==="iSelect"?(s(),_(f,{key:0,class:"item-max",name:c.name,label:c.label,rules:[{required:c.required,message:c.message}]},{default:i(()=>[c.name=="detailprocedure_id"?(s(),_(G,{key:0,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,options:y(e).detailProcedures},null,8,["value","onUpdate:value","options"])):u("",!0),c.name=="modality_id"?(s(),_(G,{key:1,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,options:y(e).modalities},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),c.type==="iText"?(s(),_(f,{key:1,name:c.name,label:c.label,rules:[{required:c.required,message:c.message,type:c.email,max:c.max}]},{default:i(()=>[n(w,{value:l[c.name],"onUpdate:value":N=>l[c.name]=N,disabled:c.disabled,maxlength:c.max,onInput:N=>q(c.name),placeholder:c.placeholder},null,8,["value","onUpdate:value","disabled","maxlength","onInput","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0),c.type==="iSelectWrite"?(s(),_(f,{key:2,class:"item-max",name:c.name,label:c.label,rules:[{required:c.required,message:c.message}]},{default:i(()=>[c.name=="comercialactivity_id"?(s(),_(G,{key:0,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,"show-search":"",options:y(e).comercialActivities,"filter-option":b},{dropdownRender:i(({menuNode:N})=>[n(y(r),{vnodes:N},null,8,["vnodes"]),n($,{style:{margin:"4px 0"}}),n(W,{style:{padding:"4px 8px"}},{default:i(()=>[n(w,{ref_for:!0,ref:"inputRef",value:O.value,"onUpdate:value":M[0]||(M[0]=ae=>O.value=ae),placeholder:"Nueva actividad"},null,8,["value"]),n(t,{type:"text",onClick:A,loading:V.value},{icon:i(()=>[n(y(he))]),default:i(()=>[H(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):u("",!0),c.name=="economicsector_id"?(s(),_(G,{key:1,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,"show-search":"",options:y(e).economicSectors,"filter-option":b},null,8,["value","onUpdate:value","options"])):u("",!0),c.name=="city_id"?(s(),_(G,{key:2,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,"show-search":"",options:y(e).cities,"filter-option":b,onChange:R},null,8,["value","onUpdate:value","options"])):u("",!0),c.name=="province_id"?(s(),_(G,{key:3,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,"show-search":"",options:y(e).provinces,"filter-option":b,onChange:U,disabled:!l.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),c.name=="district_id"?(s(),_(G,{key:4,value:l[c.name],"onUpdate:value":N=>l[c.name]=N,"show-search":"",options:y(e).districts,"filter-option":b,disabled:!l.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),n(f,null,{default:i(()=>[n(t,{type:"primary",class:"btn-produce","html-type":"submit",loading:Y.value},{default:i(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",null,D(a()),1)]),_:1},8,["spinning"])])}}},Xe=te(Qe,[["__scopeId","data-v-27eb93e9"]]);const ea={class:"wrapper-booking"},aa={class:"grid-booking"},ta={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(F,{emit:z}){const r=ue(),S=JSON.parse(localStorage.getItem("profile")),k=m(!1),J=F,Y=z;m(!1),m(null),m(null),r.$patch({components:r.components}),r.$patch({componentThemes:r.componentThemes}),r.$patch({modalities:r.modalities}),r.$patch({cities:r.cities}),r.$patch({economicSectors:r.economicSectors}),r.$patch({comercialActivities:r.comercialActivities}),r.fetchEconomicSectors(),r.fetchComercialActivities(),r.fetchComponents(),r.fetchComponentThemes(),r.fetchModalities(),r.fetchCities(),r.fetchGenders();const O=m(!0),e=me({dni:null,economicsector_id:null,comercialactivity_id:null,component_id:null,theme_id:null,modality_id:null,ruc:null,city_id:null,province_id:null,district_id:null,observations:null,user_id:S.user_id}),V=b=>{b=="ruc"&&(e[b]=e[b].replace(/\D/g,""))},p=()=>{e.dni=J.info.documentnumber,r.cities&&(O.value=!1)},l=b=>{e.theme_id=null,r.fetchComponentThemes(b)},a=b=>{e.province_id=null,e.district_id=null,r.fetchProvinces(b)},q=b=>{e.district_id=null,r.fetchDistricts(b)},A=(b,j)=>{const L=b.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return j.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(L)},R=async()=>{if(k.value=!0,!J.info.id)return B.error("Error al registrar actualiza la página");const b={dni:e.dni,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,observations:e.observations,user_id:S.user_id,people_id:J.info.id,component_id:e.component_id,theme_id:e.theme_id,modality_id:e.modality_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,ruc:e.ruc};try{const j=await Q({url:"advisory/create",method:"POST",data:b});j.status===200&&(B.success(j.message),e.component_id=null,e.theme_id=null,e.modality_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null,e.ruc=null,e.economicsector_id=null,e.comercialactivity_id=null,Y("closeDraw",!0))}catch(j){console.log("Error: "+j)}finally{k.value=!1}},U=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(b,j)=>{const L=v("a-select"),g=v("a-form-item"),M=v("a-textarea"),G=v("a-input"),f=v("a-button"),w=v("a-form"),$=v("a-spin");return s(),E("div",ea,[n($,{spinning:O.value},{default:i(()=>[n(w,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:R,onFinishFailed:U},{default:i(()=>[d("div",aa,[(s(!0),E(K,null,le(y(De),(t,W)=>(s(),E(K,{key:W},[t.type==="iSelect"?(s(),_(g,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:i(()=>[t.name=="modality_id"?(s(),_(L,{key:0,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,options:y(r).modalities},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iTextarea"?(s(),_(g,{key:1,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:i(()=>[n(M,{value:e[t.name],"onUpdate:value":x=>e[t.name]=x,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iText"?(s(),_(g,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:i(()=>[n(G,{value:e[t.name],"onUpdate:value":x=>e[t.name]=x,maxlength:t.max,onInput:x=>V(t.name),placeholder:t.placeholder},null,8,["value","onUpdate:value","maxlength","onInput","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iSelectWrite"?(s(),_(g,{key:3,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:i(()=>[t.name=="city_id"?(s(),_(L,{key:0,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).cities,"filter-option":A,onChange:a},null,8,["value","onUpdate:value","options"])):u("",!0),t.name=="province_id"?(s(),_(L,{key:1,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).provinces,"filter-option":A,onChange:q,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),t.name=="district_id"?(s(),_(L,{key:2,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).districts,"filter-option":A,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),t.name=="economicsector_id"?(s(),_(L,{key:3,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).economicSectors,"filter-option":A},null,8,["value","onUpdate:value","options"])):u("",!0),t.name=="comercialactivity_id"?(s(),_(L,{key:4,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).comercialActivities,"filter-option":A},null,8,["value","onUpdate:value","options"])):u("",!0),t.name=="component_id"?(s(),_(L,{key:5,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).components,"filter-option":A,onChange:l},null,8,["value","onUpdate:value","options"])):u("",!0),t.name=="theme_id"?(s(),_(L,{key:6,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,"show-search":"",options:y(r).componentThemes,"filter-option":A,disabled:!e.component_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),d("div",null,D(p()),1),n(g,null,{default:i(()=>[n(f,{type:"primary",class:"btn-produce","html-type":"submit",loading:k.value},{default:i(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},na=te(ta,[["__scopeId","data-v-149880d7"]]);const oa={key:0},ia={key:0},la={key:0},sa={__name:"AsesoriasHistorial",props:["totaladvisories","totalformalization10","totalformalization20"],setup(F){const z=F,r=m("1"),S=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110,align:"center"},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Componente",dataIndex:"component",width:20},{title:"Tema",dataIndex:"theme",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:60},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],k=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Detalle del trámite",dataIndex:"detailprocedure",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"RUC",dataIndex:"ruc",width:50},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],J=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Régimen",dataIndex:"regime",width:80,align:"center"},{title:"Número solicitud constancia",dataIndex:"numbernotary",width:100},{title:"Nombre empresa",dataIndex:"mypename",width:160},{title:"RUC",dataIndex:"ruc",width:80},{title:"Modalidad",dataIndex:"modality",align:"center",width:70},{title:"Ciudad",dataIndex:"city",width:30},{title:"Provincia",dataIndex:"province",width:20},{title:"Distrito",dataIndex:"district",width:20},{title:"Dirección",dataIndex:"address",width:200}],Y=O=>ge(O).format("DD/MM/YYYY HH:mm A");return(O,e)=>{const V=v("a-table"),p=v("a-card"),l=v("a-tab-pane"),a=v("a-tabs");return s(),_(a,{activeKey:r.value,"onUpdate:activeKey":e[0]||(e[0]=q=>r.value=q),type:"card",class:"box-hist"},{default:i(()=>[n(l,{key:"1",tab:"ASESORÍAS"},{default:i(()=>[n(p,null,{default:i(()=>[n(V,{columns:S,"data-source":z.totaladvisories,bordered:"",pagination:!1,size:"small",scroll:{x:1200},"expand-column-width":100},{bodyCell:i(({index:q,column:A,record:R})=>[A.dataIndex==="idx"?(s(),E("span",oa,D(q+1),1)):u("",!0),A.dataIndex==="date_start"?(s(),E(K,{key:1},[H(D(Y(R.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),n(l,{key:"2",tab:"RUC 10"},{default:i(()=>[n(p,null,{default:i(()=>[n(V,{columns:k,"data-source":z.totalformalization10,bordered:"",pagination:!1,size:"small",scroll:{x:1800},"expand-column-width":100},{bodyCell:i(({index:q,column:A,record:R})=>[A.dataIndex==="idx"?(s(),E("span",ia,D(q+1),1)):u("",!0),A.dataIndex==="date_start"?(s(),E(K,{key:1},[H(D(Y(R.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),n(l,{key:"3",tab:"RUC 20"},{default:i(()=>[n(p,null,{default:i(()=>[n(V,{columns:J,"data-source":z.totalformalization20,bordered:"",pagination:!1,size:"small",scroll:{x:2200},"expand-column-width":100},{bodyCell:i(({index:q,column:A,record:R})=>[A.dataIndex==="idx"?(s(),E("span",la,D(q+1),1)):u("",!0),A.dataIndex==="date_start"?(s(),E(K,{key:1},[H(D(Y(R.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},ra=te(sa,[["__scopeId","data-v-01e75dfe"]]);const P=F=>(Fe("data-v-ff9e0e3e"),F=F(),Oe(),F),da={class:"asesorias"},ca=P(()=>d("h3",{class:"title-produce"},"REGISTRO DE FORMALIZACIONES Y ASESORÍAS",-1)),ua=P(()=>d("br",null,null,-1)),ma={class:"wrapper-s"},pa=P(()=>d("label",{class:"label"},"Seleccione el tipo de documento",-1)),_a=P(()=>d("label",{class:"label"},"Digite el número de documento",-1)),va={class:"column-2"},fa={class:"info-update"},ha=P(()=>d("h4",{class:"title-produce"},"RESULTADO DE LA BÚSQUEDA",-1)),ya={class:"info-personal"},ga=P(()=>d("span",null,"Apellidos y nombres: ",-1)),ba=P(()=>d("span",null,"Número de celular:",-1)),wa=P(()=>d("span",null,"Correo electrónico:",-1)),xa=P(()=>d("span",null,"Asesorías:",-1)),Ua=P(()=>d("span",null,"Formalizaciones RUC 20:",-1)),Ia={class:"alert-incomplete"},Sa=P(()=>d("span",null,"Formalizaciones RUC 10:",-1)),Ca=P(()=>d("h4",{class:"title-produce"},"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Da={class:"card-as-btn"},ka={key:0,class:"card-as",style:{padding:"1rem"}},Aa=P(()=>d("h4",{class:"title-produce"},"HISTORIAL",-1)),za=P(()=>d("div",{class:"steps-content"},null,-1)),Ra={class:"pendient"},$a={class:"info"},Na=P(()=>d("b",null,"Código SID SUNARP",-1)),Fa={class:"code-number"},Oa=P(()=>d("b",null,"Atendido por: ",-1)),Ea=P(()=>d("b",null,"Fecha de registro: ",-1)),qa=P(()=>d("div",{style:{"text-align":"center"}},"NUEVO REGISTRO",-1)),Ta=[qa],Pa={__name:"AsesoriasFormalizaciones",setup(F){const z=Re(),r=fe(),S=m(0),k=m(null),J=m([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),Y=m(null),O=m(!1),e=m(null),V=m(!1),p=m(!1),l=m(!1),a=m(!1),q=m(!1),A=m(!1),R=m(""),U=m([]),b=m(!1),j=m(0),L=m(!1),g=m([]);m(null);const M=m([]),G=m([]),f=m([]),w=m(!1),$=()=>{ne(R.value),O.value=!1},t=T=>ge(T).format("DD/MM/YYYY HH:mm A"),W=()=>{Z()},x=()=>{R.value=R.value.replace(/\D/g,"")},Z=()=>{w.value=!1,R.value="",U.value=[],g.value=[],z.push({name:"asesorias-formalizaciones"})},c=()=>{if(e.value=null,e.value=U.value,!k.value)return B.warning("Seleccionar un tipo de servicio");k.value=="asesoria"&&(A.value=!0),k.value=="ruc10"&&(q.value=!0),k.value=="ruc20"&&ae()},ee=()=>{Y.value=U.value,O.value=!0},N=()=>{j.value=0,a.value=!0,p.value=!1},ae=async()=>{try{L.value=!0;const T=await Q({url:`formalization/list-ruc-20/${U.value.id}`,method:"GET"});if(T.length<1)return N();l.value=T,p.value=!0}catch(T){console.log(T)}finally{L.value=!1}},o=async()=>{b.value=!0;const T=await Q({url:`person/found/${S.value}/${R.value}`,method:"GET"});if(T.status==200)return U.value=T.data,I(U.value.id),b.value=!1},ne=async T=>{if(b.value=!0,!T)return B.warning("Ingresa un número de documento"),b.value=!1;if(S.value==0)return B.warning("Seleccionar el tipo de documento"),b.value=!1;if(S.value==1&&R.value.length<8){B.warning("El número de DNI está incompleto"),b.value=!1;return}const h=await Q({url:`person/found/${S.value}/${R.value}`,method:"GET"});if(h.status==200)return U.value=h.data,I(h.data.id),b.value=!1;if(h.status===404){const X={type:S.value,access:"asesorias",number:R.value};z.push({name:"registrar-persona",query:X})}},I=async T=>{try{const{data:h}=await Q({url:`historial/registers/${T}`,method:"GET"});M.value=h.advisories,G.value=h.formalization10,f.value=h.formalization20,w.value=!0}catch(h){console.error("Error de red:",h)}};return $e(()=>{r.query.type&&(S.value=r.query.type,R.value=r.query.number)}),(T,h)=>{const X=v("a-radio"),se=v("a-radio-group"),re=v("a-input-search"),de=v("a-card"),be=v("a-select"),we=v("a-button"),oe=v("a-drawer"),xe=v("a-tag"),Ue=v("a-spin"),Ie=v("a-modal");return s(),E(K,null,[d("div",da,[ca,ua,n(de,{class:"card-as card-gray"},{default:i(()=>[y(r).query.dni?(s(),_(y(Le),{key:0,class:"ico-reload",onClick:W})):u("",!0),d("div",ma,[d("div",null,[pa,n(se,{value:S.value,"onUpdate:value":h[0]||(h[0]=C=>S.value=C),onChange:Z,class:"radio-produce"},{default:i(()=>[n(X,{value:"1"},{default:i(()=>[H("DNI")]),_:1}),n(X,{value:"2"},{default:i(()=>[H("CE")]),_:1}),n(X,{value:"3"},{default:i(()=>[H("PAS")]),_:1}),n(X,{value:"4"},{default:i(()=>[H("PTP")]),_:1})]),_:1},8,["value"])]),d("div",null,[_a,n(re,{"enter-button":"BUSCAR",value:R.value,"onUpdate:value":h[1]||(h[1]=C=>R.value=C),placeholder:"",loading:b.value,onSearch:ne,onInput:x,class:"search-produce",maxlength:S.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),d("div",va,[U.value.length!=0?(s(),_(de,{key:0,class:"card-as"},{default:i(()=>{var C,ie,_e;return[d("div",fa,[ha,n(y(Ne),{class:"ico-edit",onClick:ee})]),d("div",ya,[ga,d("span",null,D(U.value.lastname)+" "+D(U.value.middlename)+", "+D(U.value.name),1),ba,d("span",null,[d("span",null,D(U.value.phone?U.value.phone:"-"),1)]),wa,d("span",null,D(U.value.email?U.value.email:"-"),1),xa,d("b",null,D((C=U.value)==null?void 0:C.idadvisory.length),1),Ua,d("div",Ia,[d("b",null,D((ie=U.value)==null?void 0:ie.idformalization20.length),1)]),Sa,d("b",null,D((_e=U.value)==null?void 0:_e.idformalization10.length),1)])]}),_:1})):u("",!0),U.value.length!=0?(s(),_(de,{key:1,class:"card-as"},{default:i(()=>[Ca,d("div",Da,[n(be,{style:{"min-width":"200px"},value:k.value,"onUpdate:value":h[2]||(h[2]=C=>k.value=C),options:J.value},null,8,["value","options"]),n(we,{class:"btn-produce",type:"primary",onClick:c},{default:i(()=>[H("REGISTRAR")]),_:1})])]),_:1})):u("",!0)]),w.value?(s(),E("div",ka,[Aa,n(ra,{totaladvisories:M.value,totalformalization10:G.value,totalformalization20:f.value},null,8,["totaladvisories","totalformalization10","totalformalization20"])])):u("",!0)]),d("section",null,[n(oe,{title:"Regitsrar una Formalización con RUC 20",open:a.value,"onUpdate:open":h[4]||(h[4]=C=>a.value=C),placement:"right",width:"820px"},{default:i(()=>[n(Ke,{info:e.value,onCloseDraw:h[3]||(h[3]=C=>(a.value=!1,o()))},null,8,["info"]),za]),_:1},8,["open"]),n(oe,{width:"600px",title:"Regitsrar Formalización con RUC 10",open:q.value,"onUpdate:open":h[6]||(h[6]=C=>q.value=C),placement:"right"},{default:i(()=>[n(Xe,{info:U.value,onCloseDraw:h[5]||(h[5]=C=>(q.value=!1,o()))},null,8,["info"])]),_:1},8,["open"]),n(oe,{width:"600px",title:"Registrar una asesoría",open:A.value,"onUpdate:open":h[8]||(h[8]=C=>A.value=C),placement:"right"},{default:i(()=>[n(na,{info:U.value,onCloseDraw:h[7]||(h[7]=C=>(A.value=!1,o()))},null,8,["info"])]),_:1},8,["open"]),n(Ie,{open:p.value,"onUpdate:open":h[9]||(h[9]=C=>p.value=C),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:i(()=>[n(Ue,{spinning:V.value},{default:i(()=>[(s(!0),E(K,null,le(l.value,(C,ie)=>(s(),E("div",{key:ie},[d("div",Ra,[d("div",$a,[Na,d("span",null,[d("b",Fa,[n(xe,{color:"error",style:{margin:"0"}},{default:i(()=>[H(D(C.codesunarp),1)]),_:2},1024)])]),Oa,d("span",null,D(C.user.profile.name)+" "+D(C.user.profile.lastname),1),Ea,d("span",null,D(t(C.updated_at)),1)])])]))),128)),d("div",{class:"pendient pendient-btn btn-produce",onClick:N},Ta)]),_:1},8,["spinning"])]),_:1},8,["open"]),n(oe,{width:"600",open:O.value,"onUpdate:open":h[10]||(h[10]=C=>O.value=C),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:i(()=>[n(Ee,{onCloseDraw:$,updateValues:Y.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},Ba=te(Pa,[["__scopeId","data-v-ff9e0e3e"]]);export{Ba as default};
