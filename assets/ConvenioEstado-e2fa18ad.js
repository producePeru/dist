import{N as H,r as d,a as ee,k as Q,M as ae,b as r,o as s,s as x,w as o,c as n,e as A,d as b,F as B,y as me,h as $,v as y,O as ce,B as J,m as R,a3 as Se,a4 as ve,t as G,i as N,a5 as ue,g as _e,S as fe,a6 as Ue,J as ie,K as Ae,x as Oe,X as Te,L as $e,p as Pe,j as Le}from"./index-af55d7e2.js";import{u as ge}from"./selectes-292a5904.js";import"./es-9405d451.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Ne}from"./SaveOutlined-3e94cecc.js";import{C as Re}from"./CloudUploadOutlined-09d799b6.js";import{M as qe}from"./MessageOutlined-a8015c61.js";import{M as Fe}from"./MoreOutlined-75a38979.js";const ze={alliedEntity:{type:"iText",label:"Entidad Aliada",name:"alliedEntity",required:!0,message:"Escribir la entidad aliada",disabled:!0,max:100},ruc:{type:"iText",label:"Número de RUC",name:"ruc",required:!0,message:"El RUC debe tener exactamente 11 caracteres.",disabled:!0,min:11,max:11},component:{type:"iSelect",label:"Componente",name:"components",required:!0,message:"Seleccionar un componente",disabled:!0},city_id:{type:"iSelect",label:"Región",name:"city_id",required:!0,message:"Seleccionar una región",disabled:!0},province_id:{type:"iSelect",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},startDate:{type:"iDate",label:"Inicio Convenio Vigente",name:"startDate",required:!0,message:"Seleccionar fecha de convenio vigente",disabled:!0},years:{type:"iSelect",label:"Años del convenio",name:"years",required:!0,message:"Seleccionar años",disabled:!1},aliado:{type:"iText",label:"Representante Legal (Nombres Apellidos)",name:"aliado",required:!0,message:"Escribir los nombres y apellidos",disabled:!0,max:100},aliadoPhone:{type:"iText",label:"Representante Legal (número telf.)",name:"aliadoPhone",required:!0,message:"Escribir el número",disabled:!0,max:9},focal:{type:"iText",label:"PUNTO FOCAL - nombres",name:"focal",required:!0,message:"Escribir datos del punto focal",disabled:!0,max:100},focalCargo:{type:"iText",label:"PUNTO FOCAL - cargo",name:"focalCargo",required:!0,message:"Escribir cargo del Punto Focal",disabled:!0,max:50},focalPhone:{type:"iText",label:"PUNTO FOCAL (número de telf.)",name:"focalPhone",required:!0,message:"Escribir el número de telf.",disabled:!0,max:9},renovation:{type:"iSwitch",label:"Renovación Automática",name:"renovation",required:!1,message:"Seleccionar",disabled:!0},observations:{type:"iTextarea",label:"Comentarios",name:"observations",required:!1,message:"Seleccionar",disabled:!1}};const Ye={class:"grid-convenios"},Me={key:5},Be={key:0},Ve={key:1},pe="DD/MM/YYYY",Ge={__name:"DrawConvenioUGSE",props:["idConvenio"],emits:["closeDraw"],setup(L,{emit:k}){H.locale("es");const f=JSON.parse(localStorage.getItem("profile")),h=ge(),O=k,E=L;h.$patch({cities:h.cities}),h.$patch({provinces:h.provinces}),h.$patch({districts:h.districts}),h.fetchCities();const C=d(!1),I=d(!1),a=ee({}),D=[{value:1,label:"1 Año"},{value:2,label:"2 Años"},{value:3,label:"3 Años"},{value:4,label:"4 Años"},{value:5,label:"5 Años"},{value:6,label:"6 Años"},{value:7,label:"7 Años"},{value:8,label:"8 Años"},{value:9,label:"9 Años"},{value:10,label:"10 Años"}],S=[{value:"financiamiento",label:"Acceso en Financiamiento"},{value:"desarrollo",label:"Desarrollo Productivo"},{value:"digitalizacion",label:"Digitalización"},{value:"formalizacion",label:"Formalización"},{value:"gestion",label:"Gestión Empresarial"}],q=t=>{const u=a[t]?a[t].trim():"";a[t]=u},z=t=>{const u=H(a.startDate).add(1,"day").startOf("day");return H(t).startOf("day").isBefore(u,"day")},F=t=>{a.province_id=null,a.district_id=null,h.fetchProvinces(t)},Y=t=>{a.district_id=null,h.fetchDistricts(t)},w=(t,u)=>{const g=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return u.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)},M=()=>{["city_id","province_id","district_id","alliedEntity","ruc","components","startDate","years","aliado","aliadoPhone","focal","focalCargo","focalPhone","endDate","observations"].forEach(u=>{a[u]=null}),a.created_id=f.user_id},p=async()=>{C.value=!0;const t={city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,alliedEntity:a.alliedEntity,ruc:a.ruc,components:a.components,startDate:H(a.startDate).format("YYYY-MM-DD"),years:a.years,aliado:a.aliado,aliadoPhone:a.aliadoPhone,focal:a.focal,focalCargo:a.focalCargo,focalPhone:a.focalPhone,renovation:a.renovation,endDate:H(a.startDate).add(a.years,"year").format("YYYY-MM-DD"),observations:a.observations,created_id:f.user_id,entity:"ugse"};try{const u=E.idConvenio?"PUT":"POST",g=E.idConvenio?`agreement/update-values/${E.idConvenio.id}`:"agreement/create-ugse",T=await J({url:g,method:u,data:t});T.status==200&&(R.success(T.message),O("closeDraw",!0),M())}catch(u){R.error("Se originó un error: "+u.message)}finally{C.value=!1}},m=()=>{R.error("Por favor corrige los valores con errores")},i=async t=>{t.id&&(a.city_id=t.city_id,F(t.city_id),a.province_id=t.province_id,Y(t.province_id),a.district_id=t.district_id,a.ruc=t.ruc,a.components=t.components,a.startDate=H(t.startDate,"YYYY-MM-DD"),a.years=t.years,a.aliado=t.aliado,a.aliadoPhone=t.aliadoPhone,a.focal=t.focal,a.focalCargo=t.focalCargo,a.focalPhone=t.focalPhone,a.observations=t.observations,a.alliedEntity=t.entity)};return Q(()=>{E.idConvenio?i(E.idConvenio):(a.city_id=15,F(15))}),ae(()=>E.idConvenio,t=>{t?i(t):M()}),(t,u)=>{const g=r("a-input"),T=r("a-form-item"),U=r("a-select"),P=r("a-date-picker"),j=r("a-switch"),X=r("a-textarea"),te=r("a-button"),ne=r("a-form"),V=r("a-spin");return s(),x(V,{spinning:I.value},{default:o(()=>[n(ne,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:p,onFinishFailed:m},{default:o(()=>[A("div",Ye,[(s(!0),b(B,null,me($(ze),(e,l)=>(s(),b(B,{key:l},[e.type==="iText"?(s(),x(T,{key:0,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max},...e.name==="ruc"?[{type:"string",len:11,message:e.message},{pattern:/^\d{11}$/,message:"El RUC debe ser numérico."}]:[]]},{default:o(()=>[n(g,{value:a[e.name],"onUpdate:value":c=>a[e.name]=c,maxlength:e.max,onBlur:c=>q(e.name)},null,8,["value","onUpdate:value","maxlength","onBlur"])]),_:2},1032,["name","label","rules"])):y("",!0),e.type==="iSelect"?(s(),x(T,{key:1,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:o(()=>[e.name=="city_id"?(s(),x(U,{key:0,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,options:$(h).cities,"show-search":"","filter-option":w,onChange:F},null,8,["value","onUpdate:value","options"])):y("",!0),e.name=="province_id"?(s(),x(U,{key:1,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,options:$(h).provinces,"show-search":"","filter-option":w,onChange:Y,disabled:!a.city_id},null,8,["value","onUpdate:value","options","disabled"])):y("",!0),e.name=="district_id"?(s(),x(U,{key:2,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,options:$(h).districts,"show-search":"","filter-option":w,disabled:!a.province_id},null,8,["value","onUpdate:value","options","disabled"])):y("",!0),e.name=="years"?(s(),x(U,{key:3,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,options:D,"show-search":"","filter-option":w},null,8,["value","onUpdate:value"])):y("",!0),e.name=="components"?(s(),x(U,{key:4,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,options:S,"show-search":"","filter-option":w},null,8,["value","onUpdate:value"])):y("",!0)]),_:2},1032,["name","label","rules"])):y("",!0),e.type==="iDate"?(s(),x(T,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:o(()=>[e.name=="endDate"?(s(),x(P,{key:0,"disabled-date":z,locale:$(ce),disabled:!a.startDate,value:a[e.name],"onUpdate:value":c=>a[e.name]=c,style:{width:"100%"},format:pe,placeholder:"día/mes/año"},null,8,["locale","disabled","value","onUpdate:value"])):(s(),x(P,{key:1,locale:$(ce),value:a[e.name],"onUpdate:value":c=>a[e.name]=c,style:{width:"100%"},format:pe,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"]))]),_:2},1032,["name","label","rules"])):y("",!0),e.type==="iSwitch"?(s(),x(T,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:o(()=>[n(j,{checked:a[e.name],"onUpdate:checked":c=>a[e.name]=c,"checked-children":"si","un-checked-children":"",checkedValue:1,unCheckedValue:0},null,8,["checked","onUpdate:checked"])]),_:2},1032,["name","label","rules"])):y("",!0),e.type==="iTextarea"?(s(),x(T,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:o(()=>[n(X,{value:a[e.name],"onUpdate:value":c=>a[e.name]=c,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):y("",!0),e.type==="iSpace"?(s(),b("span",Me)):y("",!0)],64))),128))]),n(T,null,{default:o(()=>[n(te,{type:"primary","html-type":"submit",loading:C.value},{default:o(()=>[L.idConvenio?(s(),b("span",Be,"ACTUALIZAR")):(s(),b("span",Ve,"GUARDAR"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},He=he(Ge,[["__scopeId","data-v-18b66260"]]);const je={class:"accion-icons"},Je={key:0},Xe={key:1},Ze={__name:"DrawAcciones",props:["idConvenio"],emits:["refreshTable"],setup(L,{emit:k}){const f=L,h=k,O=d([]),E=d(!0),C=d(null),I=d(""),a=d(!1);d(null);const D=ee({description:null});Q(()=>{f.idConvenio&&w(f.idConvenio)}),ae(()=>f.idConvenio,p=>{p&&w()});function S(p){C.value=p.id,I.value=p.description,ue(()=>{M()})}function q(p){const m=O.value.findIndex(i=>i.id===p.id);m!==-1&&(O.value[m].description=I.value),C.value=null,F(p.id)}const z=async p=>{try{const m=await J({url:`agreement/delete-acction/${p.id}`,method:"DELETE"});m.status==200&&(w(),R.success(m.message),h("refreshTable",!0))}catch(m){console.error("Error de red:",m)}},F=async p=>{try{const m={description:I.value},i=await J({url:`agreement/update/${p}`,method:"PUT",data:m});i.status==200&&(R.success(i.message),w())}catch(m){console.error("Error de red:",m)}},Y=async()=>{try{const p={description:D.description,agreements_id:f.idConvenio},m=await J({url:"agreement/create-acction",method:"POST",data:p});m.status==200&&(R.success(m.message),h("refreshTable",!0),w(),D.description=null)}catch(p){console.error("Error de red:",p)}},w=async()=>{E.value=!0;try{const p=await J({url:`agreement/list/${f.idConvenio}`,method:"GET"});p.status==200&&(O.value=p.data)}catch{}finally{E.value=!1}},M=()=>{ue(()=>{const p=document.getElementById("auto-resize");p.style.height="auto",p.style.height=p.scrollHeight+"px"})};return(p,m)=>{const i=r("a-textarea"),t=r("a-spin"),u=r("a-form-item"),g=r("a-button"),T=r("a-form");return s(),b("div",null,[n(t,{spinning:E.value},{default:o(()=>[(s(!0),b(B,null,me(O.value,(U,P)=>(s(),b("div",{class:"acciones",key:P},[A("div",je,[n($(Se),{class:"pointer ico-acc",onClick:j=>S(U)},null,8,["onClick"]),C.value===U.id?(s(),x($(Ne),{key:0,class:"pointer ico-save",onClick:j=>q(U)},null,8,["onClick"])):y("",!0),n($(ve),{class:"pointer ico-acc",onClick:j=>z(U)},null,8,["onClick"])]),C.value===U.id?(s(),b("div",Je,[n(i,{value:I.value,"onUpdate:value":m[0]||(m[0]=j=>I.value=j),onInput:M,id:"auto-resize"},null,8,["value"])])):(s(),b("p",Xe,G(U.description),1))]))),128))]),_:1},8,["spinning"]),n(T,{layout:"vertical",model:D,name:"basic",autocomplete:"off",onFinish:Y},{default:o(()=>[n(u,{name:"description",label:"Registra una acción",rules:[{required:!0,message:"Escribir la descripción"}]},{default:o(()=>[n(i,{value:D.description,"onUpdate:value":m[1]||(m[1]=U=>D.description=U),maxlength:250,rows:4},null,8,["value"])]),_:1}),n(u,null,{default:o(()=>[n(g,{type:"primary","html-type":"submit",loading:a.value},{default:o(()=>[N("CREAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}};const Ke={__name:"DrawObservations",props:["idConvenio"],emits:["refreshTable"],setup(L,{emit:k}){const f=L,h=k;d([]);const O=d(!0);d(null),d("");const E=d(!1);d(null);const C=ee({description:null});Q(()=>{f.idConvenio&&a(f.idConvenio)}),ae(()=>f.idConvenio,D=>{D&&a()});const I=async()=>{E.value=!0;try{const D={observations:C.description},S=await J({url:`agreement/update-values/${f.idConvenio.id}`,method:"PUT",data:D});S.status==200&&(R.success(S.message),h("refreshTable",!0))}catch(D){console.error("Error de red:",D)}finally{E.value=!1}},a=async()=>{C.description=f.idConvenio.observations,C.description!=null&&(O.value=!1)};return(D,S)=>{const q=r("a-textarea"),z=r("a-form-item"),F=r("a-button"),Y=r("a-form"),w=r("a-spin");return s(),b("div",null,[n(w,{spinning:O.value},{default:o(()=>[n(Y,{layout:"vertical",model:C,name:"basic",autocomplete:"off",onFinish:I},{default:o(()=>[n(z,{name:"description",label:"Orbservaciones",rules:[{required:!0,message:"Escribir la descripción"}]},{default:o(()=>[n(q,{value:C.description,"onUpdate:value":S[0]||(S[0]=M=>C.description=M),rows:6},null,8,["value"])]),_:1}),n(z,null,{default:o(()=>[n(F,{type:"primary","html-type":"submit",loading:E.value},{default:o(()=>[N("ACTUALIZAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}};const Qe=A("div",{class:"agreements-file"},[A("b",null,"Formatos a subir"),A("span",null,"pdf, doc, docx, xls, xlsx, ppt, pptx"),A("span",null,"*(Máximo 20MB)")],-1),We={class:"file-options"},ea={style:{"line-height":"1.3"}},aa=["onClick"],ta=["onClick"],na={__name:"DrawFiles",props:["idConvenio"],setup(L){H.locale("es");const k=_e.get("token"),f=L,h="https://apituempresa.soporte-pnte.com/api/",O="http://127.0.0.1:8000/api/",E=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?O:h,C=d(!1),I=d([]),a=d(null),D=d(null),S=d(!1),q=fe(Ue,{style:{fontSize:"20px"},spin:!0});Q(()=>{f.idConvenio&&m(f.idConvenio)}),ae(()=>f.idConvenio,i=>{i&&m(i)});const z=i=>H(i).format("DD-MM-YYYY HH:mm"),F=i=>(Y(i),!1),Y=async i=>{const t=new FormData;t.append("file",i),t.append("agreements_id",f.idConvenio),C.value=!0;try{const{data:u}=await ie.post(`${E}agreement/file`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${k}`}});u.status==200&&(R.success(u.message),m(f.idConvenio))}catch{R.error("Error al subir este tipo de archivo")}finally{C.value=!1}},w=async i=>{a.value=i.uid;try{const t=await ie({url:`${E}agreement/file-download/${i.uid}`,method:"POST",responseType:"blob",headers:{Authorization:`Bearer ${k}`}}),u=window.URL.createObjectURL(new Blob([t.data])),g=document.createElement("a");g.href=u,g.setAttribute("download",i.name),document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(u),document.body.removeChild(g)}catch(t){console.error("Error downloading file:",t)}finally{a.value=null}},M=i=>{i.file.status!=="uploading"&&console.log(i.file,i.fileList),i.file.status==="done"?(R.success(`${i.file.name} file uploaded successfully`),I.value=i.fileList.filter(t=>t.status!=="error")):i.file.status==="error"&&(R.error(`${i.file.name} file upload failed.`),I.value=i.fileList.filter(t=>t.uid!==i.file.uid))},p=async i=>{D.value=i.uid;try{const t=await J({url:`agreement/delete/file/${i.uid}`,method:"DELETE"});t.status==200&&(m(f.idConvenio),R.success(t.message))}catch(t){console.error("Error de red:",t)}finally{D.value=null}},m=async i=>{S.value=!0;try{const{data:t}=await ie.get(`${E}agreement/list-files/${i}`,{headers:{Authorization:`Bearer ${k}`}});t.status===200&&(I.value=t.data.map(u=>({uid:u.id,name:u.name,status:"done",url:u.path,date:u.created_at})))}catch(t){console.error("Error fetching files:",t)}finally{S.value=!1}};return(i,t)=>{const u=r("a-button"),g=r("a-spin"),T=r("a-space"),U=r("a-upload");return s(),x(g,{spinning:S.value},{default:o(()=>[Qe,n(U,{"file-list":I.value,name:"file",onChange:M,"custom-request":Y,"before-upload":F},{itemRender:o(({file:P,actions:j})=>[n(T,{style:{margin:"0rem 0","font-size":"13px",width:"100%"}},{default:o(()=>[A("div",We,[A("span",ea,G(P.name),1),A("span",null,G(z(P.date)),1),a.value!=P.uid?(s(),b("a",{key:0,onClick:X=>w(P)},"Descargar",8,aa)):(s(),x(g,{key:1,indicator:$(q)},null,8,["indicator"])),D.value==P.uid?(s(),x(g,{key:2,indicator:$(q)},null,8,["indicator"])):(s(),b("a",{key:3,onClick:X=>p(P),style:{color:"var(--error)"}},[n($(ve))],8,ta))])]),_:2},1024)]),default:o(()=>[n(u,{style:{"margin-bottom":".6rem"},loading:C.value},{default:o(()=>[n($(Re)),N(" SUBIR ARCHIVO ")]),_:1},8,["loading"])]),_:1},8,["file-list"])]),_:1},8,["spinning"])}}};const ye=L=>(Pe("data-v-aa613e3f"),L=L(),Le(),L),oa=ye(()=>A("h3",{class:"title-produce"},"CONVENIOS UGSE",-1)),sa={key:0,class:"list-days"},ia={key:1,class:"list-days"},la=["onClick"],ra=["onClick"],da=ye(()=>A("a",null,"Eliminar",-1)),ca={class:"paginator"},ua={__name:"ConvenioEstado",props:["idConvenio"],setup(L){H.locale("es"),JSON.parse(localStorage.getItem("profile")),ge(),_e.get("token"),d(null),d(null),d(!1);const k=d(null),f=d(0),h=d(50),O=d({page:0}),E=d(1200),C=d([]),I=d(!1),a=d(!1),D=d(!1),S=d(!1),q=d(!1),z=d(!1);d(null),d(null);const F=d(window.innerHeight-100),Y=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"ENTIDAD ALIADA",dataIndex:"entity",fixed:"left",width:220},{title:"RUC",dataIndex:"ruc",width:100},{title:"INICIO DE CONVENIO VIGENTE",dataIndex:"startDate",align:"center",width:180},{title:"N° DE AÑOS VIGENTE",dataIndex:"years",width:120,align:"center"},{title:"FIN DEL CONVENIO",dataIndex:"endDate",align:"center",width:180},{title:"ESTADO",dataIndex:"status",align:"center",width:150},{title:"FECHA RESTANTE",dataIndex:"numbrestantes",align:"center",width:140},{title:"OBSERVACIONES",dataIndex:"observations",align:"center",width:140},{title:"REGIÓN",dataIndex:"city",width:120},{title:"PROVINCIA",dataIndex:"province",width:150},{title:"DISTRITO",dataIndex:"district",width:150},{title:"COMPONENTE",dataIndex:"components",align:"center",width:120},{title:"PUNTO FOCAL",dataIndex:"focal",align:"center",width:150},{title:"PUNTO FOCAL TELF.",dataIndex:"focalPhone",align:"center",width:140},{title:"ALIADO",dataIndex:"aliado",align:"center",width:150},{title:"ALIADO TELF.",dataIndex:"aliadoPhone",align:"center",width:120},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],w=ee({search:""}),M=()=>{let e={search:w.search};V(e)},p=()=>{w.search||V()},m=e=>{k.value=e,a.value=!0},i=e=>{k.value=e,S.value=!0},t=e=>H(e).format("DD/MM/YYYY"),u=e=>{k.value=e.id,q.value=!0},g=(e,l)=>{const c=new Date(e),W=new Date,oe=c.getTime()-W.getTime();return Math.floor(oe/(1e3*3600*24))+1},T=e=>e<=0||e<20?"red":e<40?"#f9e717":"#11d811",U=e=>{O.value.page=e,V()},P=()=>{F.value=window.innerHeight-320},j=()=>{k.value=null,a.value=!0},X=e=>{V(),e==1&&(a.value=!1,k.value=null),e==2&&(D.value=!1),e==4&&(S.value=!1),k.value=null},te=async e=>{try{const l=await J({url:`agreement/delete/${e.id}`,method:"DELETE"});l.status==200&&(V(),R.success(l.message))}catch(l){console.error("Error de red:",l)}},ne=Ae(()=>e=>O.value.page*h.value+e+1),V=async e=>{try{I.value=!0;let l;l=O.value.page==0?"":O.value,l=e?{...l,...e}:l;const{data:c}=await J({url:"agreement/list/ugse",method:"GET",params:l});C.value=c==null?void 0:c.data,f.value=c.total,h.value=c.per_page}catch(l){console.error("Error de red:",l)}finally{I.value=!1}};return Oe(()=>{window.removeEventListener("resize",P)}),Q(()=>{window.addEventListener("resize",P),P(),V()}),(e,l)=>{const c=r("a-button"),W=r("a-col"),oe=r("a-input"),le=r("a-input-group"),be=r("a-row"),re=r("a-tag"),Ce=r("a-progress"),Z=r("a-menu-item"),de=r("router-link"),De=r("a-popconfirm"),we=r("a-menu"),xe=r("a-dropdown"),ke=r("a-table"),Ee=r("a-pagination"),K=r("a-drawer");return s(),b(B,null,[A("div",null,[oa,n(be,{style:{margin:"1rem 0"}},{default:o(()=>[n(W,{xs:24,md:12,lg:18},{default:o(()=>[n(c,{type:"primary",onClick:j,style:{"margin-right":".5rem"}},{default:o(()=>[N("NUEVO")]),_:1})]),_:1}),n(W,{xs:24,md:12,lg:6},{default:o(()=>[n(le,{compact:""},{default:o(()=>[n(oe,{value:w.search,"onUpdate:value":l[0]||(l[0]=v=>w.search=v),style:{width:"calc(100% - 80px)"},onInput:p},null,8,["value"]),n(c,{type:"primary",disabled:w.search==="",onClick:M},{default:o(()=>[N("BUSCAR")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),n(ke,{bordered:"",scroll:{x:E.value,y:F.value},class:"table-agreements-ugse",columns:Y,"data-source":C.value,pagination:!1,loading:I.value,size:"small"},{headerCell:o(({column:v})=>[]),bodyCell:o(({column:v,record:_,index:Ie})=>[v.dataIndex=="idx"?(s(),b(B,{key:0},[N(G(ne.value(Ie)),1)],64)):y("",!0),v.dataIndex=="externo"?(s(),b(B,{key:1},[_.external==1?(s(),x(re,{key:0,color:"cyan"},{default:o(()=>[N("Externo")]),_:1})):y("",!0)],64)):y("",!0),v.dataIndex=="startOperations"?(s(),b(B,{key:2},[N(G(t(_.startOperations)),1)],64)):y("",!0),v.dataIndex=="startDate"?(s(),b(B,{key:3},[N(G(t(_==null?void 0:_.startDate)),1)],64)):y("",!0),v.dataIndex=="endDate"?(s(),b(B,{key:4},[N(G(t(_==null?void 0:_.endDate)),1)],64)):y("",!0),v.dataIndex=="numbrestantes"?(s(),b(B,{key:5},[g(_.endDate,_.startDate)>=1?(s(),b("p",sa,G(g(_.endDate,_.startDate))+" días faltantes",1)):(s(),b("p",ia,G(g(_.endDate,_.startDate))+" días vencidos",1))],64)):y("",!0),v.dataIndex=="status"?(s(),x(Ce,{key:6,style:{margin:"0"},percent:g(_.endDate,_.startDate),size:4,showInfo:!1,strokeColor:T(g(_.endDate,_.startDate))},null,8,["percent","strokeColor"])):y("",!0),v.dataIndex=="observations"?(s(),b(B,{key:7},[_!=null&&_.observations?(s(),x($(qe),{key:0,class:"observation-icon",onClick:se=>i(_)},null,8,["onClick"])):y("",!0)],64)):y("",!0),v.dataIndex=="actions"?(s(),x(xe,{key:8,trigger:["click"]},{overlay:o(()=>[n(we,null,{default:o(()=>[n(Z,null,{default:o(()=>[A("a",{onClick:se=>u(_)},"Archivos",8,la)]),_:2},1024),n(Z,null,{default:o(()=>[n(de,{to:`/admin/convenios/ugse/compromisos/${_.id}/${_.entity}`},{default:o(()=>[N("Compromisos")]),_:2},1032,["to"])]),_:2},1024),n(Z,null,{default:o(()=>[n(de,{to:`/admin/convenios/ugse/detalle-general/${_.id}`},{default:o(()=>[N("Resumen")]),_:2},1032,["to"])]),_:2},1024),n(Z,null,{default:o(()=>[A("a",{onClick:se=>m(_)},"Editar",8,ra)]),_:2},1024),n(Z,null,{default:o(()=>[n(De,{title:"¿Seguro de eliminar?",onConfirm:se=>te(_)},{icon:o(()=>[n($(Te),{style:{color:"red"}})]),default:o(()=>[da]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:o(()=>[A("a",{class:"ant-dropdown-link",onClick:l[1]||(l[1]=$e(()=>{},["prevent"]))},[n(c,{shape:"circle",icon:fe($(Fe)),size:"small"},null,8,["icon"])])]),_:2},1024)):y("",!0)]),_:1},8,["scroll","data-source","loading"])]),A("div",ca,[A("span",null,[n(re,{color:"blue"},{default:o(()=>[A("b",null,G(f.value),1)]),_:1}),N("Convenios")]),n(Ee,{size:"small",total:f.value,pageSize:h.value,onChange:U,showSizeChanger:!1},null,8,["total","pageSize"])]),n(K,{open:a.value,"onUpdate:open":l[3]||(l[3]=v=>a.value=v),"root-class-name":"root-class-name",title:"Convenios",placement:"right",width:"650"},{default:o(()=>[n(He,{idConvenio:k.value,onCloseDraw:l[2]||(l[2]=v=>X(1))},null,8,["idConvenio"])]),_:1},8,["open"]),n(K,{open:D.value,"onUpdate:open":l[6]||(l[6]=v=>D.value=v),title:"Acciones",placement:"right",width:"550"},{default:o(()=>[n(Ze,{idConvenio:k.value,onCloseDraw:l[4]||(l[4]=v=>X(2)),onRefreshTable:l[5]||(l[5]=v=>V())},null,8,["idConvenio"])]),_:1},8,["open"]),n(K,{open:q.value,"onUpdate:open":l[8]||(l[8]=v=>q.value=v),title:"Cargar Archivos",placement:"right",width:"550"},{default:o(()=>[n(na,{idConvenio:k.value,onCloseDraw:l[7]||(l[7]=v=>X(3))},null,8,["idConvenio"])]),_:1},8,["open"]),n(K,{open:S.value,"onUpdate:open":l[11]||(l[11]=v=>S.value=v),title:"Observaciones",placement:"right",width:"550"},{default:o(()=>[n(Ke,{idConvenio:k.value,onCloseDraw:l[9]||(l[9]=v=>X(4)),onRefreshTable:l[10]||(l[10]=v=>V())},null,8,["idConvenio"])]),_:1},8,["open"]),n(K,{open:z.value,"onUpdate:open":l[12]||(l[12]=v=>z.value=v),title:"Compromisos",placement:"right",width:"90%"},null,8,["open"])],64)}}},ba=he(ua,[["__scopeId","data-v-aa613e3f"]]);export{ba as default};
