import{u as ue}from"./selectes-134e3623.js";import{f as Ie,r as Ce,a as De}from"./asesorias-d8655cd6.js";import{c as o,A as Ae,K as ce,y as fe,r as m,a as me,b as _,o as s,d as q,w as l,e as c,F as j,x as oe,h as f,q as p,s as u,t as k,L as ke,Y as he,i as V,Z as ye,z as W,f as Re,m as B,R as ge,u as ze,k as $e,_ as Ne,p as Fe,j as Oe}from"./index-2cafce22.js";import"./es-6fe08ef9.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                      */import{S as Ee}from"./DrawerSolicitante.componente-488f7f37.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Pe=qe;function ve(N){for(var z=1;z<arguments.length;z++){var r=arguments[z]!=null?Object(arguments[z]):{},R=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(r).filter(function(F){return Object.getOwnPropertyDescriptor(r,F).enumerable}))),R.forEach(function(F){Te(N,F,r[F])})}return N}function Te(N,z,r){return z in N?Object.defineProperty(N,z,{value:r,enumerable:!0,configurable:!0,writable:!0}):N[z]=r,N}var pe=function(z,r){var R=ve({},z,r.attrs);return o(Ae,ve({},R,{icon:Pe}),null)};pe.displayName="RedoOutlined";pe.inheritAttrs=!1;const Le=pe;const Me={class:"wrapper-booking"},Ye={class:"grid-booking"},Ge={class:"select-notaries"},Ve={class:"name"},He={class:"city"},je={class:"address"},Be="DD/MM/YYYY",Je={__name:"AllFormalizacion20",props:["info"],emits:["closeDraw"],setup(N,{emit:z}){ce.locale("es");const r=ye({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}});fe();const R=JSON.parse(localStorage.getItem("profile")),F=N,J=z,M=m(!1),E=m(null);m(null);const e=m(!0),Y=m(!1),t=ue(),G=m(null);t.$patch({cities:t.cities}),t.$patch({modalities:t.modalities}),t.$patch({economicSectors:t.economicSectors}),t.$patch({comercialActivities:t.comercialActivities}),t.$patch({regimes:t.regimes}),t.fetchEconomicSectors(),t.fetchComercialActivities(),t.fetchRegimes(),t.fetchModalities(),t.fetchCities();const a=me({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:R.user_id}),P=h=>{h=="ruc"&&(a[h]=a[h].replace(/\D/g,""))},D=()=>{var h;(h=t.regimes)!=null&&h.length&&(e.value=!1)},w=(h,g)=>{const $=h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),n=g.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),d=g.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),b=g.province.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),I=g.district.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return n.includes($)||d.includes($)||b.includes($)||I.includes($)},x=async()=>{try{M.value=!0;const h={name:E.value};(await W({url:"create/comercial-activities",method:"POST",data:h})).status==200&&(E.value=null,t.fetchComercialActivities())}catch(h){console.log(h)}finally{M.value=!1}},y=h=>{a.province_id=null,a.district_id=null,t.fetchProvinces(h),O()},S=h=>{a.district_id=null,t.fetchDistricts(h)},O=async()=>{try{const h={city_id:a.city_id},{data:g}=await Re({url:"public/notaries-filters",method:"GET"});G.value=null,a.notary_id=null;const $=g.map(n=>({value:n.id,name:n.name,city:n.city.name,province:n.province.name,district:n.district.name,address:n.address}));G.value=$}catch(h){console.error("Error de red:",h)}},A=(h,g)=>{const $=h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return g.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes($)},H=async()=>{Y.value=!0;const h={codesunarp:a.codesunarp,numbernotary:a.numbernotary,address:a.address,economicsector_id:a.economicsector_id,comercialactivity_id:a.comercialactivity_id,regime_id:a.regime_id,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,modality_id:a.modality_id,notary_id:a.notary_id,user_id:R.id,people_id:F.info.id,nameMype:a.nameMype,dateReception:a.dateReception?ce(a.dateReception).format("YYYY-MM-DD"):null,dateTramite:a.dateTramite?ce(a.dateTramite).format("YYYY-MM-DD"):null,ruc:a.ruc};try{const g=await W({url:"formalization/create-ruc20",method:"POST",data:h});console.log("Success",g),g.status===200&&(B.success(g.message),a.codesunarp=null,a.economicsector_id=null,a.comercialactivity_id=null,a.regime_id=null,a.city_id=null,a.province_id=null,a.district_id=null,a.address=null,a.modality_id=null,a.nameMype=null,a.dateReception=null,a.dateTramite=null,a.notary_id=null,a.ruc=null,a.numbernotary=null,J("closeDraw",!0))}catch(g){console.log("Error: "+g)}finally{Y.value=!1}},K=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(h,g)=>{const $=_("a-select"),n=_("a-form-item"),d=_("a-date-picker"),b=_("a-divider"),I=_("a-input"),Q=_("a-button"),ie=_("a-space"),ee=_("a-form"),le=_("a-spin");return s(),q("div",Me,[o(le,{spinning:e.value},{default:l(()=>[o(ee,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:H,onFinishFailed:K},{default:l(()=>[c("div",Ye,[(s(!0),q(j,null,oe(f(Ie),(i,ae)=>(s(),q(j,{key:ae},[i.type==="iSelect"?(s(),p(n,{key:0,class:"item-max",name:i.name,label:i.label,rules:[{required:i.required,message:i.message}]},{default:l(()=>[i.name=="regime_id"?(s(),p($,{key:0,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,options:f(t).regimes,"show-search":"","filter-option":A},null,8,["value","onUpdate:value","options"])):u("",!0),i.name=="modality_id"?(s(),p($,{key:1,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,options:f(t).modalities},null,8,["value","onUpdate:value","options"])):u("",!0),i.name=="notary_id"?(s(),p($,{key:2,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,options:G.value,"option-label-prop":"name",disabled:!a.city_id,"show-search":"","filter-option":w},{option:l(({value:U,name:T,city:v,province:Z,district:se,address:re})=>[c("div",Ge,[c("span",Ve,k(T),1),c("span",He,k(v)+" - "+k(Z)+" - "+k(se),1),c("span",je,k(re),1)])]),_:2},1032,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),i.type==="iDate"?(s(),p(n,{key:1,name:i.name,label:i.label,rules:[{required:i.required,message:i.message}]},{default:l(()=>[o(d,{locale:f(ke),value:a[i.name],"onUpdate:value":U=>a[i.name]=U,style:{width:"100%"},format:Be,placeholder:"día/mes/año",onChange:g[0]||(g[0]=U=>a.birthday=h.birthdateDate),disabled:i.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),i.type==="iSelectWrite"?(s(),p(n,{key:2,class:"item-max",name:i.name,label:i.label,rules:[{required:i.required,message:i.message}]},{default:l(()=>[i.name=="comercialactivity_id"?(s(),p($,{key:0,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,"show-search":"",options:f(t).comercialActivities,"filter-option":A},{dropdownRender:l(({menuNode:U})=>[o(f(r),{vnodes:U},null,8,["vnodes"]),o(b,{style:{margin:"4px 0"}}),o(ie,{style:{padding:"4px 8px"}},{default:l(()=>[o(I,{ref_for:!0,ref:"inputRef",value:E.value,"onUpdate:value":g[1]||(g[1]=T=>E.value=T),placeholder:"Nueva actividad"},null,8,["value"]),o(Q,{type:"text",onClick:x,loading:M.value},{icon:l(()=>[o(f(he))]),default:l(()=>[V(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):u("",!0),i.name=="economicsector_id"?(s(),p($,{key:1,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,"show-search":"",options:f(t).economicSectors,"filter-option":A},null,8,["value","onUpdate:value","options"])):u("",!0),i.name=="city_id"?(s(),p($,{key:2,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,"show-search":"",options:f(t).cities,"filter-option":A,onChange:y},null,8,["value","onUpdate:value","options"])):u("",!0),i.name=="province_id"?(s(),p($,{key:3,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,"show-search":"",options:f(t).provinces,"filter-option":A,onChange:S,disabled:!a.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),i.name=="district_id"?(s(),p($,{key:4,value:a[i.name],"onUpdate:value":U=>a[i.name]=U,"show-search":"",options:f(t).districts,"filter-option":A,disabled:!a.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),i.type==="iText"?(s(),p(n,{key:3,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,type:i.email,max:i.max}]},{default:l(()=>[o(I,{onInput:U=>P(i.name),value:a[i.name],"onUpdate:value":U=>a[i.name]=U,disabled:i.disabled,maxlength:i.max,placeholder:i.placeholder},null,8,["onInput","value","onUpdate:value","disabled","maxlength","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),c("div",null,k(D()),1),o(n,null,{default:l(()=>[o(Q,{class:"btn-produce",type:"primary","html-type":"submit",loading:Y.value},{default:l(()=>[V("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ke=X(Je,[["__scopeId","data-v-1c1724d1"]]);const We={class:"wrapper-booking"},Ze={class:"grid-booking"},Qe={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(N,{emit:z}){const r=ye({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),R=JSON.parse(localStorage.getItem("profile")),F=N,J=z,M=m(!1),E=m(null);m(null),m(!1);const e=ue(),Y=m(!1);e.$patch({cities:e.cities}),e.$patch({provinces:e.provinces}),e.$patch({districts:e.districts}),e.$patch({modalities:e.modalities}),e.$patch({detailProcedures:e.detailProcedures}),e.$patch({economicSectors:e.economicSectors}),e.$patch({comercialActivities:e.comercialActivities}),e.fetchDetailProcedures(),e.fetchModalities(),e.fetchEconomicSectors(),e.fetchComercialActivities(),e.fetchCities();const t=me({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:R.user_id}),G=S=>{S=="ruc"&&(t[S]=t[S].replace(/\D/g,""))},a=async()=>{try{Y.value=!0;const S={name:E.value};(await W({url:"create/comercial-activities",method:"POST",data:S})).status==200&&(E.value=null,e.fetchComercialActivities())}catch(S){console.log(S)}finally{Y.value=!1}},P=S=>{t.province_id=null,t.district_id=null,e.fetchProvinces(S)},D=S=>{t.district_id=null,e.fetchDistricts(S)},w=(S,O)=>{const A=S.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return O.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(A)},x=async()=>{M.value=!0,t.people_id=F.info.id;try{const S=await W({url:"formalization/create-ruc-10",method:"POST",data:t});S.status===200&&(B.success(S.message),t.detailprocedure_id=null,t.modality_id=null,t.economicsector_id=null,t.comercialactivity_id=null,t.city_id=null,t.province_id=null,t.district_id=null,t.address=null,t.ruc=null,J("closeDraw",!0))}catch(S){console.log("Error: "+S)}finally{M.value=!1}},y=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(S,O)=>{const A=_("a-select"),H=_("a-form-item"),K=_("a-input"),h=_("a-divider"),g=_("a-button"),$=_("a-space"),n=_("a-form");return s(),q("div",We,[o(n,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:x,onFinishFailed:y},{default:l(()=>[c("div",Ze,[(s(!0),q(j,null,oe(f(Ce),(d,b)=>(s(),q(j,{key:b},[d.type==="iSelect"?(s(),p(H,{key:0,class:"item-max",name:d.name,label:d.label,rules:[{required:d.required,message:d.message}]},{default:l(()=>[d.name=="detailprocedure_id"?(s(),p(A,{key:0,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,options:f(e).detailProcedures},null,8,["value","onUpdate:value","options"])):u("",!0),d.name=="modality_id"?(s(),p(A,{key:1,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,options:f(e).modalities},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),d.type==="iText"?(s(),p(H,{key:1,name:d.name,label:d.label,rules:[{required:d.required,message:d.message,type:d.email,max:d.max}]},{default:l(()=>[o(K,{value:t[d.name],"onUpdate:value":I=>t[d.name]=I,disabled:d.disabled,maxlength:d.max,onInput:I=>G(d.name),placeholder:d.placeholder},null,8,["value","onUpdate:value","disabled","maxlength","onInput","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0),d.type==="iSelectWrite"?(s(),p(H,{key:2,class:"item-max",name:d.name,label:d.label,rules:[{required:d.required,message:d.message}]},{default:l(()=>[d.name=="comercialactivity_id"?(s(),p(A,{key:0,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,"show-search":"",options:f(e).comercialActivities,"filter-option":w},{dropdownRender:l(({menuNode:I})=>[o(f(r),{vnodes:I},null,8,["vnodes"]),o(h,{style:{margin:"4px 0"}}),o($,{style:{padding:"4px 8px"}},{default:l(()=>[o(K,{ref_for:!0,ref:"inputRef",value:E.value,"onUpdate:value":O[0]||(O[0]=Q=>E.value=Q),placeholder:"Nueva actividad"},null,8,["value"]),o(g,{type:"text",onClick:a,loading:Y.value},{icon:l(()=>[o(f(he))]),default:l(()=>[V(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):u("",!0),d.name=="economicsector_id"?(s(),p(A,{key:1,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,"show-search":"",options:f(e).economicSectors,"filter-option":w},null,8,["value","onUpdate:value","options"])):u("",!0),d.name=="city_id"?(s(),p(A,{key:2,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,"show-search":"",options:f(e).cities,"filter-option":w,onChange:P},null,8,["value","onUpdate:value","options"])):u("",!0),d.name=="province_id"?(s(),p(A,{key:3,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,"show-search":"",options:f(e).provinces,"filter-option":w,onChange:D,disabled:!t.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),d.name=="district_id"?(s(),p(A,{key:4,value:t[d.name],"onUpdate:value":I=>t[d.name]=I,"show-search":"",options:f(e).districts,"filter-option":w,disabled:!t.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),o(H,null,{default:l(()=>[o(g,{type:"primary",class:"btn-produce","html-type":"submit",loading:M.value},{default:l(()=>[V("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Xe=X(Qe,[["__scopeId","data-v-d3e57fd9"]]);const ea={class:"wrapper-booking"},aa={class:"grid-booking"},ta={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(N,{emit:z}){const r=ue(),R=JSON.parse(localStorage.getItem("profile")),F=m(!1),J=N,M=z;m(!1),m(null),m(null),r.$patch({components:r.components}),r.$patch({componentThemes:r.componentThemes}),r.$patch({modalities:r.modalities}),r.$patch({cities:r.cities}),r.$patch({economicSectors:r.economicSectors}),r.$patch({comercialActivities:r.comercialActivities}),r.fetchEconomicSectors(),r.fetchComercialActivities(),r.fetchComponents(),r.fetchComponentThemes(),r.fetchModalities(),r.fetchCities(),r.fetchGenders();const E=m(!0),e=me({observations:null,user_id:R.user_id,people_id:null,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),Y=y=>{y=="ruc"&&(e[y]=e[y].replace(/\D/g,""))},t=()=>{r.cities&&(E.value=!1)},G=y=>{e.theme_id=null,r.fetchComponentThemes(y)},a=y=>{e.province_id=null,e.district_id=null,r.fetchProvinces(y)},P=y=>{e.district_id=null,r.fetchDistricts(y)},D=(y,S)=>{const O=y.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(O)},w=async()=>{F.value=!0,e.people_id=J.info.id;try{const y=await W({url:"advisory/create",method:"POST",data:e});y.status===200&&(B.success(y.message),e.component_id=null,e.theme_id=null,e.modality_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null,e.ruc=null,e.economicsector_id=null,e.comercialactivity_id=null,M("closeDraw",!0))}catch(y){console.log("Error: "+y)}finally{F.value=!1}},x=()=>{B.warning("Debes de completar todos los espacios requeridos")};return(y,S)=>{const O=_("a-select"),A=_("a-form-item"),H=_("a-textarea"),K=_("a-input"),h=_("a-button"),g=_("a-form"),$=_("a-spin");return s(),q("div",ea,[o($,{spinning:E.value},{default:l(()=>[o(g,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:w,onFinishFailed:x},{default:l(()=>[c("div",aa,[(s(!0),q(j,null,oe(f(De),(n,d)=>(s(),q(j,{key:d},[n.type==="iSelect"?(s(),p(A,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:l(()=>[n.name=="modality_id"?(s(),p(O,{key:0,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,options:f(r).modalities},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),n.type==="iTextarea"?(s(),p(A,{key:1,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:l(()=>[o(H,{value:e[n.name],"onUpdate:value":b=>e[n.name]=b,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),n.type==="iText"?(s(),p(A,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email,max:n.max}]},{default:l(()=>[o(K,{value:e[n.name],"onUpdate:value":b=>e[n.name]=b,maxlength:n.max,onInput:b=>Y(n.name),placeholder:n.placeholder},null,8,["value","onUpdate:value","maxlength","onInput","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0),n.type==="iSelectWrite"?(s(),p(A,{key:3,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:l(()=>[n.name=="city_id"?(s(),p(O,{key:0,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).cities,"filter-option":D,onChange:a},null,8,["value","onUpdate:value","options"])):u("",!0),n.name=="province_id"?(s(),p(O,{key:1,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).provinces,"filter-option":D,onChange:P,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),n.name=="district_id"?(s(),p(O,{key:2,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).districts,"filter-option":D,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),n.name=="economicsector_id"?(s(),p(O,{key:3,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).economicSectors,"filter-option":D},null,8,["value","onUpdate:value","options"])):u("",!0),n.name=="comercialactivity_id"?(s(),p(O,{key:4,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).comercialActivities,"filter-option":D},null,8,["value","onUpdate:value","options"])):u("",!0),n.name=="component_id"?(s(),p(O,{key:5,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).components,"filter-option":D,onChange:G},null,8,["value","onUpdate:value","options"])):u("",!0),n.name=="theme_id"?(s(),p(O,{key:6,value:e[n.name],"onUpdate:value":b=>e[n.name]=b,"show-search":"",options:f(r).componentThemes,"filter-option":D,disabled:!e.component_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),c("div",null,k(t()),1),o(A,null,{default:l(()=>[o(h,{type:"primary",class:"btn-produce","html-type":"submit",loading:F.value},{default:l(()=>[V("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},na=X(ta,[["__scopeId","data-v-50b59e3b"]]);const oa={key:0},ia={key:0},la={key:0},sa={__name:"AsesoriasHistorial",props:["totaladvisories","totalformalization10","totalformalization20"],setup(N){const z=N,r=m("1"),R=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Componente",dataIndex:"component",width:100},{title:"Tema",dataIndex:"theme",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],F=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Detalle del trámite",dataIndex:"detailprocedure",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],J=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:140},{title:"Asesor",dataIndex:"asesor",width:180},{title:"Código SUNARP",dataIndex:"codesunarp",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Notaría",dataIndex:"numbernotary",width:100},{title:"Régimen",dataIndex:"regime",width:80,align:"center"},{title:"MYPE",dataIndex:"mypename",width:240},{title:"MYPE RUC",dataIndex:"myperuc",width:80},{title:"Modalidad",dataIndex:"modality",align:"center",width:70},{title:"Ciudad",dataIndex:"city",width:30},{title:"Provincia",dataIndex:"province",width:30},{title:"Distrito",dataIndex:"district",width:30},{title:"Dirección",dataIndex:"address",width:240}],M=E=>ge(E).format("DD/MM/YYYY HH:mm A");return(E,e)=>{const Y=_("a-table"),t=_("a-card"),G=_("a-tab-pane"),a=_("a-tabs");return s(),p(a,{activeKey:r.value,"onUpdate:activeKey":e[0]||(e[0]=P=>r.value=P),type:"card",class:"box-hist"},{default:l(()=>[o(G,{key:"1",tab:"ASESORÍAS"},{default:l(()=>[o(t,null,{default:l(()=>[o(Y,{columns:R,"data-source":z.totaladvisories,bordered:"",pagination:!1,size:"small",scroll:{x:1600},"expand-column-width":100},{bodyCell:l(({index:P,column:D,record:w})=>[D.dataIndex==="idx"?(s(),q("span",oa,k(P+1),1)):u("",!0),D.dataIndex==="date_start"?(s(),q(j,{key:1},[V(k(M(w.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),o(G,{key:"2",tab:"RUC 10"},{default:l(()=>[o(t,null,{default:l(()=>[o(Y,{columns:F,"data-source":z.totalformalization10,bordered:"",pagination:!1,size:"small",scroll:{x:1800},"expand-column-width":100},{bodyCell:l(({index:P,column:D,record:w})=>[D.dataIndex==="idx"?(s(),q("span",ia,k(P+1),1)):u("",!0),D.dataIndex==="date_start"?(s(),q(j,{key:1},[V(k(M(w.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),o(G,{key:"3",tab:"RUC 20"},{default:l(()=>[o(t,null,{default:l(()=>[o(Y,{columns:J,"data-source":z.totalformalization20,bordered:"",pagination:!1,size:"small",scroll:{x:2200},"expand-column-width":100},{bodyCell:l(({index:P,column:D,record:w})=>[D.dataIndex==="idx"?(s(),q("span",la,k(P+1),1)):u("",!0),D.dataIndex==="date_start"?(s(),q(j,{key:1},[V(k(M(w.createDate)),1)],64)):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},ra=X(sa,[["__scopeId","data-v-0d9164fe"]]);const L=N=>(Fe("data-v-355ea2e2"),N=N(),Oe(),N),da={class:"asesorias"},ca=L(()=>c("h3",{class:"title-produce"},"REGISTRO DE FORMALIZACIONES Y ASESORÍAS",-1)),ua=L(()=>c("br",null,null,-1)),ma={class:"wrapper-s"},pa=L(()=>c("label",{class:"label"},"Seleccione el tipo de documento",-1)),_a=L(()=>c("label",{class:"label"},"Digite el número de documento",-1)),va={class:"column-2"},fa={class:"info-update"},ha=L(()=>c("h4",{class:"title-produce"},"RESULTADO DE LA BÚSQUEDA",-1)),ya={class:"info-personal"},ga=L(()=>c("span",null,"Apellidos y nombres: ",-1)),ba=L(()=>c("span",null,"Número de celular:",-1)),wa=L(()=>c("span",null,"Correo electrónico:",-1)),xa=L(()=>c("span",null,"Asesorías:",-1)),Ua=L(()=>c("span",null,"Formalizaciones RUC 20:",-1)),Sa={class:"alert-incomplete"},Ia=L(()=>c("span",null,"Formalizaciones RUC 10:",-1)),Ca=L(()=>c("h4",{class:"title-produce"},"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Da={class:"card-as-btn"},Aa={key:0,class:"card-as",style:{padding:"1rem"}},ka=L(()=>c("h4",{class:"title-produce"},"HISTORIAL",-1)),Ra=L(()=>c("div",{class:"steps-content"},null,-1)),za={class:"pendient"},$a={class:"info"},Na=L(()=>c("b",null,"Código SID SUNARP",-1)),Fa={class:"code-number"},Oa=L(()=>c("b",null,"Atendido por: ",-1)),Ea=L(()=>c("b",null,"Fecha de registro: ",-1)),qa=L(()=>c("div",{style:{"text-align":"center"}},"NUEVO REGISTRO",-1)),Pa=[qa],Ta={__name:"AsesoriasFormalizaciones",setup(N){const z=ze(),r=fe(),R=m(0),F=m(null),J=m([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),M=m(null),E=m(!1),e=m(null),Y=m(!1),t=m(!1),G=m(!1),a=m(!1),P=m(!1),D=m(!1),w=m(""),x=m([]),y=m(!1),S=m(0),O=m(!1),A=m([]);m(null);const H=m([]),K=m([]),h=m([]),g=m(!1),$=()=>{ae(w.value),E.value=!1},n=T=>ge(T).format("DD/MM/YYYY HH:mm A"),d=()=>{I()},b=()=>{w.value=w.value.replace(/\D/g,"")},I=()=>{g.value=!1,w.value="",x.value=[],A.value=[],z.push({name:"asesorias-formalizaciones"})},Q=()=>{if(e.value=null,e.value=x.value,!F.value)return B.warning("Seleccionar un tipo de servicio");F.value=="asesoria"&&(D.value=!0),F.value=="ruc10"&&(P.value=!0),F.value=="ruc20"&&le()},ie=()=>{M.value=x.value,E.value=!0},ee=()=>{S.value=0,a.value=!0,t.value=!1},le=async()=>{try{O.value=!0;const T=await W({url:`formalization/list-ruc-20/${x.value.id}`,method:"GET"});if(T.length<1)return ee();G.value=T,t.value=!0}catch(T){console.log(T)}finally{O.value=!1}},i=async()=>{y.value=!0;const T=await W({url:`person/found/${R.value}/${w.value}`,method:"GET"});if(T.status==200)return x.value=T.data,U(x.value.id),y.value=!1},ae=async T=>{if(y.value=!0,!T)return B.warning("Ingresa un número de documento"),y.value=!1;if(R.value==0)return B.warning("Seleccionar el tipo de documento"),y.value=!1;if(R.value==1&&w.value.length<8){B.warning("El número de DNI está incompleto"),y.value=!1;return}const v=await W({url:`person/found/${R.value}/${w.value}`,method:"GET"});if(v.status==200)return x.value=v.data,U(v.data.id),y.value=!1;if(v.status===404){const Z={type:R.value,access:"asesorias",number:w.value};z.push({name:"registrar-persona",query:Z})}},U=async T=>{try{const{data:v}=await W({url:`historial/registers/${T}`,method:"GET"});H.value=v.advisories,K.value=v.formalization10,h.value=v.formalization20,g.value=!0}catch(v){console.error("Error de red:",v)}};return $e(()=>{r.query.type&&(console.log("ooaoooaoaa",r.query.type),R.value=r.query.type,w.value=r.query.number)}),(T,v)=>{const Z=_("a-radio"),se=_("a-radio-group"),re=_("a-input-search"),de=_("a-card"),be=_("a-select"),we=_("a-button"),te=_("a-drawer"),xe=_("a-tag"),Ue=_("a-spin"),Se=_("a-modal");return s(),q(j,null,[c("div",da,[ca,ua,o(de,{class:"card-as card-gray"},{default:l(()=>[f(r).query.dni?(s(),p(f(Le),{key:0,class:"ico-reload",onClick:d})):u("",!0),c("div",ma,[c("div",null,[pa,o(se,{value:R.value,"onUpdate:value":v[0]||(v[0]=C=>R.value=C),onChange:I,class:"radio-produce"},{default:l(()=>[o(Z,{value:"1"},{default:l(()=>[V("DNI")]),_:1}),o(Z,{value:"2"},{default:l(()=>[V("CE")]),_:1}),o(Z,{value:"3"},{default:l(()=>[V("PAS")]),_:1}),o(Z,{value:"4"},{default:l(()=>[V("PTP")]),_:1})]),_:1},8,["value"])]),c("div",null,[_a,o(re,{"enter-button":"BUSCAR",value:w.value,"onUpdate:value":v[1]||(v[1]=C=>w.value=C),placeholder:"",loading:y.value,onSearch:ae,onInput:b,class:"search-produce",maxlength:R.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),c("div",va,[x.value.length!=0?(s(),p(de,{key:0,class:"card-as"},{default:l(()=>{var C,ne,_e;return[c("div",fa,[ha,o(f(Ne),{class:"ico-edit",onClick:ie})]),c("div",ya,[ga,c("span",null,k(x.value.lastname)+" "+k(x.value.middlename)+", "+k(x.value.name),1),ba,c("span",null,[c("span",null,k(x.value.phone?x.value.phone:"-"),1)]),wa,c("span",null,k(x.value.email?x.value.email:"-"),1),xa,c("b",null,k((C=x.value)==null?void 0:C.idadvisory.length),1),Ua,c("div",Sa,[c("b",null,k((ne=x.value)==null?void 0:ne.idformalization20.length),1)]),Ia,c("b",null,k((_e=x.value)==null?void 0:_e.idformalization10.length),1)])]}),_:1})):u("",!0),x.value.length!=0?(s(),p(de,{key:1,class:"card-as"},{default:l(()=>[Ca,c("div",Da,[o(be,{style:{"min-width":"200px"},value:F.value,"onUpdate:value":v[2]||(v[2]=C=>F.value=C),options:J.value},null,8,["value","options"]),o(we,{class:"btn-produce",type:"primary",onClick:Q},{default:l(()=>[V("REGISTRAR")]),_:1})])]),_:1})):u("",!0)]),g.value?(s(),q("div",Aa,[ka,o(ra,{totaladvisories:H.value,totalformalization10:K.value,totalformalization20:h.value},null,8,["totaladvisories","totalformalization10","totalformalization20"])])):u("",!0)]),c("section",null,[o(te,{title:"Regitsrar una Formalización con RUC 20",open:a.value,"onUpdate:open":v[4]||(v[4]=C=>a.value=C),placement:"right",width:"820px"},{default:l(()=>[o(Ke,{info:e.value,onCloseDraw:v[3]||(v[3]=C=>(a.value=!1,i()))},null,8,["info"]),Ra]),_:1},8,["open"]),o(te,{width:"600px",title:"Regitsrar Formalización con RUC 10",open:P.value,"onUpdate:open":v[6]||(v[6]=C=>P.value=C),placement:"right"},{default:l(()=>[o(Xe,{info:x.value,onCloseDraw:v[5]||(v[5]=C=>(P.value=!1,i()))},null,8,["info"])]),_:1},8,["open"]),o(te,{width:"600px",title:"Registrar una asesoría",open:D.value,"onUpdate:open":v[8]||(v[8]=C=>D.value=C),placement:"right"},{default:l(()=>[o(na,{info:x.value,onCloseDraw:v[7]||(v[7]=C=>(D.value=!1,i()))},null,8,["info"])]),_:1},8,["open"]),o(Se,{open:t.value,"onUpdate:open":v[9]||(v[9]=C=>t.value=C),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:l(()=>[o(Ue,{spinning:Y.value},{default:l(()=>[(s(!0),q(j,null,oe(G.value,(C,ne)=>(s(),q("div",{key:ne},[c("div",za,[c("div",$a,[Na,c("span",null,[c("b",Fa,[o(xe,{color:"error",style:{margin:"0"}},{default:l(()=>[V(k(C.codesunarp),1)]),_:2},1024)])]),Oa,c("span",null,k(C.user.profile.name)+" "+k(C.user.profile.lastname),1),Ea,c("span",null,k(n(C.updated_at)),1)])])]))),128)),c("div",{class:"pendient pendient-btn btn-produce",onClick:ee},Pa)]),_:1},8,["spinning"])]),_:1},8,["open"]),o(te,{width:"600",open:E.value,"onUpdate:open":v[10]||(v[10]=C=>E.value=C),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:l(()=>[o(Ee,{onCloseDraw:$,updateValues:M.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},Ba=X(Ta,[["__scopeId","data-v-355ea2e2"]]);export{Ba as default};
