import{_ as B}from"./TableComponent-8826ee70.js";import{r as l,u as H,a as M,k as F,X as f,b as c,o as g,d as P,c as r,w as n,p as U,m as z,y as v,i as j,z as x,j as y,t as L,e as I}from"./index-3a4aebaa.js";import{_ as q}from"./DrawMP-5425a680.js";import"./downloadExcel-20f8d5a3.js";import"./es-8c8baa19.js";import{g as N}from"./publicInscripcion-ebc9ecb9.js";import{G as J}from"./GlobalOutlined-3bcc5ca4.js";import"./icoexcel-1b303edf.js";import"./selectes-57543df9.js";import"./SyncOutlined-b57d79ae.js";import"./MoreOutlined-ce7a4d9c.js";import"./FormComponent-c3fd012c.js";import"./quill.snow-3fba9bf0.js";import"./UpImage-8a75c3f5.js";import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"layout-content"},X=["onClick"],Q=["onClick"],fe={__name:"mp-index",setup(W){JSON.parse(localStorage.getItem("role"));const h=l([]),E=l(0),w=l(150),i=l(!1);l(!1),H();const m=l(!1),u=l(null),k=l(!1),t=M({page:1}),C=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK",dataIndex:"link",width:70,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÃ“N",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],S=e=>{u.value=e,i.value=!0},D=()=>{s(),i.value=!1},T=()=>{u.value=null,i.value=!0},O=async()=>{},R=async e=>{t.page=e,await s()},V=async e=>{e&&(t.page=1,await s())},Y=e=>{const a=`${N()}/mujer-produce/${e}`;window.open(a,"_blank")},b=e=>{const a=`${N()}/mujer-produce-asistencia/${e}`;window.open(a,"_blank")},s=async()=>{try{m.value=!0;const e={page:t.page};t.year&&(e.year=U(t.year).format("YYYY")),t.range&&(e.startDate=t.range[0].format("YYYY/MM/DD"),e.endDate=t.range[1].format("YYYY/MM/DD")),t.name&&(e.name=t.name),t.orderby&&(e.orderby=t.orderby);const a=await z({url:"mp/index-events",method:"GET",params:e}),{data:d}=a;h.value=d.data,E.value=d.total,w.value=d.per_page}catch(e){console.error("Error de red:",e)}finally{m.value=!1}};return F(async()=>{await s()}),f("search",t),f("loading",m),f("loadingFile",k),(e,a)=>{const d=c("a-button"),A=c("a-tag"),_=c("a-menu-item"),$=c("router-link"),G=c("a-drawer");return g(),P("div",K,[r(B,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:C,titleSearch:"BUSCAR POR EVENTO",pageSize:w.value,nameTotal:"Capacitaciones",dataSource:h.value,total:E.value,btnUpdate:!0,onHandleNew:T,onHandleCallFetchData:s,onHandleDownloadExcel:O,onHandleSearch:V,onHandlePaginator:R},{"data-cell":n(({column:o,record:p})=>[o.dataIndex=="link"?(g(),v(d,{key:0,onClick:Z=>Y(p.slug),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:n(()=>[r(j(J))]),_:2},1032,["onClick"])):x("",!0),o.dataIndex=="registered"?(g(),v(A,{key:1,color:"purple"},{default:n(()=>[y(L(p.registered),1)]),_:2},1024)):x("",!0)]),"custom-options":n(({record:o})=>[r(_,null,{default:n(()=>[I("span",{onClick:p=>b(o.slug)}," Asistencia ",8,X)]),_:2},1024),r(_,null,{default:n(()=>[r($,{to:`/admin/mp/inscritos/${o.slug}`},{default:n(()=>a[1]||(a[1]=[y(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),r(_,null,{default:n(()=>[I("a",{onClick:p=>S(o)},"Editar",8,Q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),r(G,{open:i.value,"onUpdate:open":a[0]||(a[0]=o=>i.value=o),title:u.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:n(()=>[r(q,{onCloseDraw:D,info:u.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{fe as default};
