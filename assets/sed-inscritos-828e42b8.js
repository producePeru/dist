import{_ as q}from"./TableComponent-1e6aded2.js";import{E as J,r as d,u as K,a as X,p as w,k as W,X as v,b as I,o,d as m,c,w as r,m as A,y as g,z as s,F as L,j as y,i as x,e as P,a2 as Z,h as ee}from"./index-3f88e443.js";import{d as te}from"./downloadExcel-59451728.js";import"./es-16fe77c6.js";import{F as ae,I as ne,_ as oe}from"./ParticipanteSed-fceff381.js";import{C as se}from"./ChromeOutlined-49549d58.js";import"./icoexcel-1b303edf.js";import"./selectes-d146f2e5.js";import"./MoreOutlined-735ee1cb.js";import"./FormComponent-4bf37019.js";import"./quill.snow-ba8e47e8.js";const le={class:"layout-content"},re={key:3,class:"sed-socials"},ie=["href"],de=["href"],ce=["href"],ue=["onClick"],ke={__name:"sed-inscritos",setup(me){const C=J(),F=JSON.parse(localStorage.getItem("role"))||[],N=d([]),Y=d(0),R=d(150),h=d(!1);K();const k=d(!1),E=d(null),O=d(!1),T=d({name:"Cargando..."}),a=X({year:w("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),U=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center",fixed:"left"},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"TIPO ASISTENTE",dataIndex:"typeAsistente",width:150,align:"center"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:200},{title:"SECTOR ECONÃ“MICO",dataIndex:"economicsector_name",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"comercialactivity_name",width:180},{title:"CIUDAD",dataIndex:"city_name",width:120,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"GÃ‰NERO",dataIndex:"gender_name",width:120,align:"center"},{title:"TELÃ‰FONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"CARGO EN EMPRESA",dataIndex:"positionCompany",width:180,align:"center"},{title:"CÃ“MO CONOCIÃ“ EL EVENTO",dataIndex:"howKnowEvent_name",width:200,align:"center"},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:180,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],B=e=>{E.value=e,h.value=!0},V=()=>{f(),h.value=!1},$=()=>{E.value=null,h.value=!0},H=async(e,t)=>{const u=C.params.slug,_=w().format("DD/MM/YYYY HH:mm"),D={slug:u,documentnumber:t.documentnumber,check:e.target.checked,date:_};try{const p=await A({url:"fair/update-attended-status",method:"PUT",data:D});p.status==200&&console.log("status",p.message)}catch(p){console.error("Error de red:",p)}},G=async e=>{try{const t=await A({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});t.status==200&&(f(),ee.success(t.message))}catch(t){console.error("Error de red:",t)}},z=async()=>{O.value=!0;try{const e={},t=C.params.slug;a.year&&(e.year=w(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name);let u=`download/sed-asistentes/${t}`;await te(u,"sed",e)}catch(e){console.error("Error de red:",e)}finally{O.value=!1}},j=async e=>{a.page=e,await f()},Q=async e=>{e&&(a.page=1,await f())},b=e=>F.some(t=>e.includes(t.id)),f=async()=>{try{k.value=!0;const e={page:a.page},t=C.params.slug;a.year&&(e.year=w(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);let u=`events-ugse/users-registered-list/${t}`;const l=await A({url:u,method:"GET",params:e});T.value=l.event,N.value=l.data.data,Y.value=l.data.total,R.value=l.data.per_page}catch(e){console.error("Error de red:",e)}finally{k.value=!1}};return W(async()=>{await f()}),v("search",a),v("loading",k),v("loadingFile",O),(e,t)=>{var M;const u=I("a-checkbox"),l=I("a-tag"),_=I("a-menu-item"),D=I("a-popconfirm"),p=I("a-drawer");return o(),m("div",le,[c(q,{title:`INSCRITOS SED ðŸ“€ ${(M=T.value)==null?void 0:M.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/sed",searchYear:!0,rangeDate:!0,columns:U,titleSearch:"FILTRAR POR RUC O DNI",pageSize:R.value,nameTotal:"Inscritos SED",dataSource:N.value,total:Y.value,btnUpdate:!0,onHandleNew:$,onHandleCallFetchData:f,onHandleDownloadExcel:z,onHandleSearch:Q,onHandlePaginator:j},{"data-cell":r(({column:i,record:n})=>[i.dataIndex=="asistio"?(o(),g(u,{key:0,checked:n.asistio,"onUpdate:checked":S=>n.asistio=S,onChange:S=>H(S,n)},null,8,["checked","onUpdate:checked","onChange"])):s("",!0),i.dataIndex=="sick"?(o(),m(L,{key:1},[n.sick=="SI"?(o(),g(l,{key:0,color:"red"},{default:r(()=>t[1]||(t[1]=[y("SI")])),_:1})):s("",!0),n.sick=="NO"?(o(),g(l,{key:1,color:"green"},{default:r(()=>t[2]||(t[2]=[y("NO")])),_:1})):s("",!0)],64)):s("",!0),i.dataIndex=="typeAsistente"?(o(),m(L,{key:2},[n.typeAsistente==1?(o(),g(l,{key:0,color:"blue"},{default:r(()=>t[3]||(t[3]=[y("Representante")])),_:1})):s("",!0),n.typeAsistente==2?(o(),g(l,{key:1,color:"pink"},{default:r(()=>t[4]||(t[4]=[y("Invitado")])),_:1})):s("",!0)],64)):s("",!0),i.dataIndex=="redesSociales"?(o(),m("div",re,[n.instagram?(o(),m("a",{key:0,href:n.instagram,target:"_blank"},[c(x(ae),{class:"ico-sed-socials"})],8,ie)):s("",!0),n.facebook?(o(),m("a",{key:1,href:n.facebook,target:"_blank"},[c(x(ne),{class:"ico-sed-socials"})],8,de)):s("",!0),n.web?(o(),m("a",{key:2,href:n.web,target:"_blank"},[c(x(se),{class:"ico-sed-socials"})],8,ce)):s("",!0)])):s("",!0)]),"custom-options":r(({record:i})=>[b([1,5])?(o(),g(_,{key:0},{default:r(()=>[P("a",{onClick:n=>B(i)},"Editar",8,ue)]),_:2},1024)):s("",!0),b([1,5])?(o(),g(_,{key:1},{default:r(()=>[c(D,{placement:"rightBottom",title:`Â¿Quieres eliminar ${i.documentnumber} ?`,onConfirm:n=>G(i)},{icon:r(()=>[c(x(Z),{style:{color:"red"}})]),default:r(()=>[t[5]||(t[5]=P("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):s("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),c(p,{open:h.value,"onUpdate:open":t[0]||(t[0]=i=>h.value=i),title:E.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:r(()=>[c(oe,{onCloseDraw:V,info:E.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{ke as default};
