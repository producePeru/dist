import{K as o,g as i,V as l}from"./index-1ff16546.js";const u="https://apituempresa.soporte-pnte.com/api/",c="http://127.0.0.1:8000/api/",d=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?c:u;function h(){const a=(localStorage.getItem("token")||i.get("token")||"").replace(/"/g,"");return a?`Bearer ${a}`:""}const n=o.create({baseURL:d,timeout:2e4});n.interceptors.request.use(a=>{a.headers=a.headers||{};const t=h();return t&&(a.headers.Authorization=t),a.headers["Content-Type"]="application/json",a});const m=l("businessman",{state:()=>({loading:!1,loadingDocument:!1,loadingReniec:!1,error:null}),actions:{async create(a){var t,s;this.loading=!0,this.error=null;try{const{data:e}=await n.post("/businessman/register-new-businessman",a);return e}catch(e){throw this.error=((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al crear empresario",e}finally{this.loading=!1}},async update(a,t){var s,e;this.loading=!0,this.error=null;try{const{data:r}=await n.put(`/businessman/update-data-businessman/${t}`,a);return r}catch(r){throw this.error=((e=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:e.message)||"Error al crear empresario",r}finally{this.loading=!1}},async get(a){var t,s;this.loading=!0,this.error=null;try{const{data:e}=await n.get(`/businessman/get-businessman-data/${a.documentnumber}`);return e}catch(e){throw this.error=((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al obtener información",e}finally{this.loading=!1}},async reniec(a){var t,s;this.loading=!0,this.error=null;try{const{data:e}=await n.post(`/api/consult-businessman-dni/${a.documentnumber}`);return e}catch(e){throw this.error=((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al obtener información",e}finally{this.loading=!1}}}});export{m as u};
