import{c as e,A as z,g as ie,r as O,G as ue,k as de,b as p,o as m,y as b,w as t,m as R,C as L,j as u,e as v,O as H,i as _,d as S,F as j,v as q,X as pe,n as fe,z as me,t as g,h as x,Q as ve,K as Q}from"./index-617fe921.js";import{g as _e}from"./publicInscripcion-623ff37e.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import{G as ye}from"./GlobalOutlined-83bc005e.js";import{F as be}from"./FileExcelOutlined-c810f15a.js";import{U as he}from"./UserOutlined-8b19323a.js";import{E as C}from"./EnvironmentOutlined-341fc7e4.js";var Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};const we=Oe;function X(l){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?Object(arguments[a]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),c.forEach(function(i){ke(l,i,n[i])})}return l}function ke(l,a,n){return a in l?Object.defineProperty(l,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[a]=n,l}var U=function(a,n){var c=X({},a,n.attrs);return e(z,X({},c,{icon:we}),null)};U.displayName="FieldTimeOutlined";U.inheritAttrs=!1;const xe=U;var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const Pe=Ce;function J(l){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?Object(arguments[a]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),c.forEach(function(i){$e(l,i,n[i])})}return l}function $e(l,a,n){return a in l?Object.defineProperty(l,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[a]=n,l}var D=function(a,n){var c=J({},a,n.attrs);return e(z,J({},c,{icon:Pe}),null)};D.displayName="LinkOutlined";D.inheritAttrs=!1;const Ae=D;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"};const Ee=Te;function W(l){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?Object(arguments[a]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),c.forEach(function(i){Le(l,i,n[i])})}return l}function Le(l,a,n){return a in l?Object.defineProperty(l,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[a]=n,l}var M=function(a,n){var c=W({},a,n.attrs);return e(z,W({},c,{icon:Ee}),null)};M.displayName="UsergroupAddOutlined";M.inheritAttrs=!1;const Se=M;const je={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ze={class:"summary-card-content"},Ue={class:"event-header"},De=["onClick"],Me={class:"event-locationd"},Fe={class:"upload-section"},Be={__name:"eventos-asignados-por-asesor",setup(l){const a=ie.get("token"),n="https://apituempresa.soporte-pnte.com/api/",c="http://127.0.0.1:8000/api/",i=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?c:n,F=O([]),w=O({}),B=O(!0),P=O({}),$=O({}),A=O({});function Y(r,o){const f=r==3?`${_e()}/fortalece-tu-mercado/${o}`:`/asistencias/${o}`;window.open(f,"_blank")}const N=async()=>{try{const r=await R({url:"events-ugo/events-assigned-advisor",method:"GET"});F.value=r.data.data}catch(r){console.error("Error de red:",r)}finally{B.value=!1}},Z=async()=>{try{const r=await R({url:"events-ugo/events-assigned-dashboard",method:"GET"});w.value=r.data}catch(r){console.error("Error de red:",r)}},K=(r,o)=>(P.value[o]=r,$.value[o]=r.name,!1),ee=async r=>{const o=P.value[r];if(!o)return x.warning("Seleccione un archivo Excel");const f=new FormData;f.append("file",o),ve.confirm({title:"Confirmar importación",content:`¿Seguro que quieres cargar y registrar los datos del evento "${r}"?`,okText:"Sí, importar",cancelText:"Cancelar",async onOk(){var k,d;A.value[r]=!0;try{const h=await Q.post(`${i}import/activities-asesor-ugo/${r}`,f,{headers:{"Content-Type":"multipart/form-data"}});x.success(h.data.message),delete P.value[r],delete $.value[r],await N()}catch(h){x.error(((d=(k=h.response)==null?void 0:k.data)==null?void 0:d.message)||"Error al importar")}finally{A.value[r]=!1}}})},te=async()=>{try{const r=await Q.get(`${i}download/download-ugo-activities`,{responseType:"blob",headers:{Authorization:`Bearer ${a}`}}),o=window.URL.createObjectURL(new Blob([r.data])),f=document.createElement("a");f.href=o,f.setAttribute("download","Plantilla_Import_Ugo_Actividades.xlsx"),document.body.appendChild(f),f.click(),document.body.removeChild(f)}catch{x.error("No se pudo descargar la plantilla")}},ae=ue(()=>[{title:"Total Eventos",value:w.value.total_eventos,icon:L,class:"blue-icon"},{title:"Total Inscritos",value:w.value.total_inscritos,icon:Se,class:"green-icon"},{title:"Regiones",value:w.value.total_regiones,icon:ye,class:"purple-icon"},{title:"Próximos",value:0,icon:xe,class:"yellow-icon"}]);return de(async()=>{await Z(),await N()}),(r,o)=>{const f=p("a-typography-title"),k=p("a-typography-paragraph"),d=p("a-space"),h=p("a-card"),ne=p("a-spin"),oe=p("a-statistic"),G=p("a-col"),I=p("a-row"),y=p("a-typography-text"),le=p("TeamOutlined"),re=p("router-link"),V=p("a-button"),se=p("a-upload"),ce=p("a-layout");return m(),b(ce,{style:{padding:"24px","background-color":"#f0f2f5","min-height":"88vh"}},{default:t(()=>[e(h,null,{default:t(()=>[e(f,{level:2},{default:t(()=>o[0]||(o[0]=[u("Panel de Eventos Asignados")])),_:1}),v("div",je,[e(k,{style:{margin:"0"}},{default:t(()=>o[1]||(o[1]=[u(" Gestiona y supervisa todos los eventos bajo tu responsabilidad ")])),_:1}),e(d,null,{default:t(()=>[v("a",{href:"#",onClick:H(te,["prevent"])},[e(_(be)),o[2]||(o[2]=u(" Descargar plantilla Excel "))])]),_:1})])]),_:1}),o[8]||(o[8]=v("br",null,null,-1)),B.value?(m(),b(ne,{key:0})):(m(),S(j,{key:1},[w.value?(m(),b(I,{key:0,gutter:16,style:{"margin-bottom":"24px"}},{default:t(()=>[(m(!0),S(j,null,q(ae.value,(s,T)=>(m(),b(G,{xs:24,sm:12,md:8,lg:6,key:T},{default:t(()=>[e(h,{class:"summary-card"},{default:t(()=>[v("div",ze,[(m(),b(pe(s.icon),{class:fe(["summary-card-icon",s.class])},null,8,["class"])),e(oe,{title:s.title,value:s.value,class:"summary-card-statistic"},null,8,["title","value"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):me("",!0),e(I,{gutter:[16,16]},{default:t(()=>[(m(!0),S(j,null,q(F.value,(s,T)=>(m(),b(G,{key:T,xs:24,sm:12,md:12,lg:8,xl:6},{default:t(()=>[e(h,{class:"event-card"},{default:t(()=>[v("div",Ue,[e(f,{level:4,class:"event-title"},{default:t(()=>[u(g(s.title),1)]),_:2},1024)]),e(k,{class:"event-description"},{default:t(()=>[u(g(s.description),1)]),_:2},1024),e(d,{direction:"vertical",class:"event-details"},{default:t(()=>[e(d,null,{default:t(()=>[e(_(L)),e(y,null,{default:t(()=>[u("Inicio: "+g(s.startDate),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(_(L)),e(y,null,{default:t(()=>[u("Fin: "+g(s.endDate),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(_(he)),e(y,null,{default:t(()=>[o[3]||(o[3]=u("Inscritos: ")),v("b",null,g(s.attendance_list_count),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[v("a",{href:"#",onClick:H(E=>Y(s.eventsoffice_id,s.slug),["prevent"])},[e(_(Ae),{style:{color:"#00a6db"}}),e(y,{style:{color:"#00a6db"}},{default:t(()=>o[4]||(o[4]=[u(" Link de registro")])),_:1})],8,De)]),_:2},1024),e(d,null,{default:t(()=>[e(re,{to:`eventos-inscritos/${s.slug}`,style:{color:"#00a6db"}},{default:t(()=>[e(le),o[5]||(o[5]=u(" Ver inscritos "))]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024),v("div",Me,[e(d,{direction:"vertical",size:"small"},{default:t(()=>[e(d,null,{default:t(()=>[e(_(C)),e(y,null,{default:t(()=>[u("Región: "+g(s.city),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(_(C)),e(y,null,{default:t(()=>[u("Provincia: "+g(s.province),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(_(C)),e(y,null,{default:t(()=>[u("Distrito: "+g(s.district),1)]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(_(C)),e(y,null,{default:t(()=>[u("Lugar: "+g(s.address),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),v("div",Fe,[$.value[s.slug]?(m(),b(V,{key:1,loading:A.value[s.slug],onClick:E=>ee(s.slug),block:"",class:"up-load-btn"},{default:t(()=>o[7]||(o[7]=[u(" Cargar e importar ")])),_:2},1032,["loading","onClick"])):(m(),b(se,{key:0,"before-upload":E=>K(E,s.slug),"show-upload-list":!1,accept:".xls,.xlsx,.csv"},{default:t(()=>[e(V,{block:""},{default:t(()=>o[6]||(o[6]=[u("Seleccionar Excel")])),_:1})]),_:2},1032,["before-upload"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64))]),_:1})}}},Qe=ge(Be,[["__scopeId","data-v-b52c252e"]]);export{Qe as default};
