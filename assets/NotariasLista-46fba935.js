import{c as o,A as ne,r as g,a as oe,j as le,U as ve,b as _,o as l,x as N,w as c,e as v,d as f,F as P,s as Y,h as y,y as u,t as k,a3 as ye,i as U,N as J,m as H,l as K,G as be,q as ee,a1 as he,K as Oe}from"./index-ccc935f9.js";import{_ as Ie}from"./icoexcel-1b303edf.js";import{u as ie}from"./selectes-85b19f40.js";import{Q}from"./quill.snow-ca299ec5.js";import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";import{d as Ne}from"./downloadExcel-09bbb50e.js";import"./es-bac76778.js";import{M as Ce}from"./MoreOutlined-55c0658f.js";var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const Te=we;function te(p){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(s).filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable}))),d.forEach(function(b){Se(p,b,s[b])})}return p}function Se(p,i,s){return i in p?Object.defineProperty(p,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[i]=s,p}var X=function(i,s){var d=te({},i,s.attrs);return o(ne,te({},d,{icon:Te}),null)};X.displayName="LinkOutlined";X.inheritAttrs=!1;const ke=X;var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const Ae=Ee;function ae(p){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(s).filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable}))),d.forEach(function(b){Le(p,b,s[b])})}return p}function Le(p,i,s){return i in p?Object.defineProperty(p,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[i]=s,p}var W=function(i,s){var d=ae({},i,s.attrs);return o(ne,ae({},d,{icon:Ae}),null)};W.displayName="PlusCircleOutlined";W.inheritAttrs=!1;const De=W,Re={name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!0,message:"Ingresa el nombre de la notaría"},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar un tipo"},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar un tipo"},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar un tipo"},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!1,message:"Escribe la dirección"},gastosnotariales:{type:"iSpecialField",label:"",name:"gastosnotariales",required:!1,message:"Escribe un monto"},biometrico:{type:"iQuillEditor",label:"BIOMÉTRICO",name:"biometrico",required:!1,message:"Escribir datos del biometrico"},sociointerveniente:{type:"iQuillEditor",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"sociointerveniente",required:!1,message:"Escribe la tarifa"},infocontacto:{type:"iQuillEditor",label:"DATOS DEL CONTACTO",name:"infocontacto",required:!0,message:"Escribe la tarifa"},tarifanormal:{type:"iText",label:"TARIFA NORMAL",name:"tarifanormal",required:!1,message:"Ingresa el nombre de la notaría"},tarifasocial:{type:"iText",label:"TARIFA SOCIAL",name:"tarifasocial",required:!1,message:"Ingresa el nombre de la notaría"}};const qe={class:"grid-notary"},Pe={for:""},Ue={for:""},Me={class:"wrapper-form_btn"},ze={__name:"DrawerNotaria.componente",props:["updateNotary"],emits:["closeDraw"],setup(p,{emit:i}){const s=JSON.parse(localStorage.getItem("profile")),d=ie(),b=i,w=p;d.$patch({cities:d.cities}),d.fetchCities();const E={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}]]},contentType:"html"},A=g(!1),t=oe({city_id:null,province_id:null,district_id:null,address:null,name:null,sociointerveniente:null,biometrico:null,infocontacto:null,user_id:s.id,gastos:[{gasto:null,condicion:null}]}),V=()=>{t==null||t.gastos.push({gasto:null,condicion:null})},M=n=>{t.gastos.splice(n,1)},T=n=>{t.province_id=null,t.district_id=null,d.fetchProvinces(n)},q=n=>{t.district_id=null,d.fetchDistricts(n)},C=()=>{t.city_id=null,t.province_id=null,t.district_id=null,t.address=null,t.name=null,t.istestimonio=!1,t.price="</p>",t.conditions="</p>",t.sociointerveniente="</p>",t.biometrico="</p>",t.infocontacto="</p>",t.gastos.gastos="</p>",t.gastos.condicion="</p>",t.tarifanormal=null,t.tarifasocial=null},F=async()=>{let n=t;A.value=!0;try{let O=null,I=null;w.updateNotary?(O=`notary/update/${w.updateNotary.id}`,I="PATCH"):(O="notary/create",I="POST");const h=await J({url:O,method:I,data:n});if(h.status==200)return C(),b("closeDraw",!0),H.success(h.message);H.error("Error al registrar notaría")}catch{H.error("Error al registrar notaría")}finally{A.value=!1}};function z(n){var O,I;t.id=n.id,t.city_id=n.city.id,T(n.city.id),t.province_id=n.province.id,q(n.province.id),t.district_id=n.district.id,t.address=n.address,t.name=n.name,t.istestimonio=n.istestimonio!=0,t.price=n.price,t.conditions=n.conditions,t.sociointerveniente=n.sociointerveniente,t.biometrico=n.biometrico,t.infocontacto=n.infocontacto,((O=n.gastos)==null?void 0:O.length)>=1?t.gastos=(I=n.gastos)==null?void 0:I.map(h=>({gasto:h.gasto,condicion:h.condicion})):t.gastos=[{gasto:null,condicion:null}],t.tarifanormal=n.tarifanormal,t.tarifasocial=n.tarifasocial}return le(()=>{w.updateNotary&&z(w.updateNotary)}),ve(()=>w.updateNotary,n=>{n?z(n):clear()}),(n,O)=>{const I=_("a-select"),h=_("a-form-item"),$=_("a-checkbox"),G=_("a-input"),L=_("a-input-number"),j=_("a-button"),B=_("a-form");return l(),N(B,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:F},{default:c(()=>[v("div",qe,[(l(!0),f(P,null,Y(y(Re),(e,a)=>(l(),f(P,{key:a},[e.type==="iSelect"?(l(),N(h,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[e.name=="city_id"?(l(),N(I,{key:0,value:t[e.name],"onUpdate:value":r=>t[e.name]=r,options:y(d).cities,onChange:T},null,8,["value","onUpdate:value","options"])):u("",!0),e.name=="province_id"?(l(),N(I,{key:1,value:t[e.name],"onUpdate:value":r=>t[e.name]=r,options:y(d).provinces,onChange:q},null,8,["value","onUpdate:value","options"])):u("",!0),e.name=="district_id"?(l(),N(I,{key:2,value:t[e.name],"onUpdate:value":r=>t[e.name]=r,options:y(d).districts},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iSpecialField"?(l(),N(h,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[(l(!0),f(P,null,Y(t.gastos,(r,D)=>(l(),f("div",{class:"gastos-notariales",key:D},[v("div",null,[v("label",Pe,"GASTOS NOTARIALES "+k(D+1),1),o(y(Q),{class:"quill-editor",content:r.gasto,"onUpdate:content":R=>r.gasto=R,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),v("div",null,[v("label",Ue,"CONDICIONES "+k(D+1),1),o(y(Q),{class:"quill-editor",content:r.condicion,"onUpdate:content":R=>r.condicion=R,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),o(y(ye),{class:"notaria-ico-delete",onClick:R=>M(D)},null,8,["onClick"])]))),128)),o(y(De),{class:"notaria-ico-plus",onClick:V})]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="checked"?(l(),N(h,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[o($,{checked:t[e.name],"onUpdate:checked":r=>t[e.name]=r},null,8,["checked","onUpdate:checked"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iText"?(l(),N(h,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[o(G,{value:t[e.name],"onUpdate:value":r=>t[e.name]=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iNumber"?(l(),N(h,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[o(L,{value:t[e.name],"onUpdate:value":r=>t[e.name]=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iQuillEditor"?(l(),N(h,{key:5,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:c(()=>[o(y(Q),{class:"quill-editor",content:t[e.name],"onUpdate:content":r=>t[e.name]=r,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),v("div",Me,[o(j,{class:"btn-produce",type:"primary","html-type":"submit",loading:A.value},{default:c(()=>O[0]||(O[0]=[U("GUARDAR")])),_:1},8,["loading"])])]),_:1},8,["model"])}}},$e=xe(ze,[["__scopeId","data-v-e99b93c0"]]);const He={key:0,style:{display:"grid","grid-template-columns":"1fr 1fr"}},Ve={key:1,style:{"text-transform":"uppercase"}},Fe={key:2,style:{"text-transform":"uppercase"}},Ge={key:3,style:{"text-transform":"uppercase"}},je={key:4,style:{"text-transform":"uppercase"}},Be={style:{display:"grid","grid-template-columns":"1fr 1fr"}},Qe=["innerHTML"],Ye=["innerHTML"],Je=["innerHTML"],Xe=["innerHTML"],We=["innerHTML"],Ze={key:0},Ke=["onClick"],et={class:"paginator"},dt={__name:"NotariasLista",setup(p){K.locale("es");const i=JSON.parse(localStorage.getItem("role")),s=ie();g(K("2025","YYYY")),g(null),g(null),g(null);const d=g(!1);g();const b=g(50),w=g([]),E=g(!1),A=g(0),t=g({page:1});g("plans-action/list");const V=g(1200),M=g(window.innerHeight-100),T=g(!1);g(null);const q=g(null),C=g(null);s.$patch({cities:s.cities}),s.fetchCities();const F=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOTARÍA",dataIndex:"name",width:250,fixed:"left"},{title:"REGIÓN",fixed:"left",dataIndex:"region",width:120,align:"center"},{title:"PROVINCIA",fixed:"left",dataIndex:"province",width:120,align:"center"},{title:"DISTRITO",fixed:"left",dataIndex:"district",width:120,align:"center"},{title:"DIRECCIÓN",dataIndex:"address",width:180},{title:"GASTOS NOTARIALES",dataIndex:"gastos_notariales",width:450},{title:"BIOMÉTRICO / HUELLA DIGITAL",dataIndex:"biometric",width:200,align:"center"},{title:"SOCIO O INTERVINIENTE ADICIONAL",dataIndex:"socio",width:200,align:"center"},{title:"CONTÁCTO",dataIndex:"contacto",width:280,align:"center"},...i.some(e=>e.id==1||e.id==5||e.id==2)?[{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}]:[]],z=(e,a)=>{const r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)},n=()=>{L(),T.value=!1},O=()=>{q.value=null,T.value=!0},I=async e=>{try{const a=await J({url:`notary/delete/${e.id}`,method:"DELETE"});a.status==200&&(H.success(a.message),L())}catch{console.log("Failed to delete")}},h=e=>{q.value=e,T.value=!0},$=()=>{M.value=window.innerHeight-315};oe({search:""});const G=e=>{t.value.page=e,L()},L=async()=>{E.value=!0;try{const e={};t.value.page&&(e.page=t.value.page),C.value&&(e.city=C.value);const a=await J({url:"notary/list",method:"GET",params:e});w.value=a.data,A.value=a.total,b.value=a.per_page}catch(e){console.error("Error de red:",e)}finally{E.value=!1}},j=async()=>{d.value=!0;try{const e={};C.value&&(e.city=C.value),await Ne("download/notaries","Notarías",e)}catch(e){console.error("Error de red:",e)}finally{d.value=!1}},B=be(()=>e=>(t.value.page-1)*b.value+e+1);return le(()=>{L(),window.addEventListener("resize",$),$()}),(e,a)=>{const r=_("a-button"),D=_("router-link"),R=_("a-col"),se=_("a-select"),re=_("a-row"),Z=_("a-menu-item"),ce=_("a-popconfirm"),de=_("a-menu"),ue=_("a-dropdown"),pe=_("a-table"),me=_("a-tag"),_e=_("a-pagination"),ge=_("a-drawer");return l(),f("div",null,[a[9]||(a[9]=v("h3",{class:"title-produce"},"NOTARÍAS",-1)),o(re,{style:{margin:"1rem 0"}},{default:c(()=>[o(R,{xs:24,md:12,lg:18},{default:c(()=>[Array.isArray(y(i))&&y(i).some(m=>m.id==1||m.id==5||m.id==10)?(l(),N(r,{key:0,onClick:O,type:"primary",style:{"margin-right":"1rem"}},{default:c(()=>a[3]||(a[3]=[U("NUEVO")])),_:1})):u("",!0),o(D,{to:`/notarias/${C.value?C.value:"todos"}`,target:"_blank"},{default:c(()=>[o(r,{type:"dashed",icon:ee(y(ke))},{default:c(()=>a[4]||(a[4]=[U("VER LINK")])),_:1},8,["icon"])]),_:1},8,["to"]),o(r,{class:"btn-excel",loading:d.value,type:"primary",style:{"margin-left":".6rem"},onClick:j},{default:c(()=>a[5]||(a[5]=[v("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:Ie},null,-1)])),_:1},8,["loading"])]),_:1}),o(R,{xs:24,md:12,lg:6},{default:c(()=>[o(se,{placeholder:"BUSCAR POR PROVINCIA",value:C.value,"onUpdate:value":a[0]||(a[0]=m=>C.value=m),"show-search":"",options:y(s).cities,"filter-option":z,style:{width:"100%"},onChange:L},null,8,["value","options"])]),_:1})]),_:1}),o(pe,{bordered:"",scroll:{x:V.value,y:M.value},class:"table-actions",columns:F,"data-source":w.value,pagination:!1,loading:E.value,size:"small"},{headerCell:c(({column:m,text:x})=>[m.dataIndex==="gastos_notariales"?(l(),f("div",He,a[6]||(a[6]=[v("span",null,"GASTOS NOTARIALES",-1),v("span",{style:{"padding-left":"8px"}},"CONDICIONES",-1)]))):u("",!0)]),bodyCell:c(({column:m,record:x,index:fe})=>[m.dataIndex==="idx"?(l(),f(P,{key:0},[U(k(B.value(fe)),1)],64)):u("",!0),m.dataIndex==="name"?(l(),f("span",Ve,k(x.name),1)):u("",!0),m.dataIndex==="region"?(l(),f("span",Fe,k(x.city.name),1)):u("",!0),m.dataIndex==="province"?(l(),f("span",Ge,k(x.province.name),1)):u("",!0),m.dataIndex==="district"?(l(),f("span",je,k(x.district.name),1)):u("",!0),m.dataIndex==="gastos_notariales"?(l(!0),f(P,{key:5},Y(x.gastos,(S,tt)=>(l(),f("div",Be,[v("div",{innerHTML:S==null?void 0:S.gasto},null,8,Qe),v("div",{innerHTML:S==null?void 0:S.condicion,style:{"border-left":"1px solid #ddd","padding-left":"8px"}},null,8,Ye)]))),256)):u("",!0),m.dataIndex==="biometric"?(l(),f("div",{key:6,innerHTML:x.biometrico},null,8,Je)):u("",!0),m.dataIndex==="socio"?(l(),f("div",{key:7,innerHTML:x.sociointerveniente},null,8,Xe)):u("",!0),m.dataIndex==="contacto"?(l(),f("div",{key:8,innerHTML:x.infocontacto},null,8,We)):u("",!0),m.dataIndex=="actions"?(l(),f(P,{key:9},[x.status=="observado"||y(i)[0].id!=8?(l(),f("div",Ze,[o(ue,{trigger:["click"]},{overlay:c(()=>[o(de,null,{default:c(()=>[o(Z,null,{default:c(()=>[v("a",{onClick:S=>h(x)},"Editar",8,Ke)]),_:2},1024),o(Z,null,{default:c(()=>[o(ce,{title:"¿Seguro de eliminar?",onConfirm:S=>I(x)},{icon:c(()=>[o(y(he),{style:{color:"red"}})]),default:c(()=>[a[7]||(a[7]=v("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:c(()=>[v("a",{class:"ant-dropdown-link",onClick:a[1]||(a[1]=Oe(()=>{},["prevent"]))},[o(r,{shape:"circle",icon:ee(y(Ce)),size:"small"},null,8,["icon"])])]),_:2},1024)])):u("",!0)],64)):u("",!0)]),_:1},8,["scroll","data-source","loading"]),v("div",et,[v("span",null,[o(me,{color:"blue"},{default:c(()=>[v("b",null,k(A.value),1)]),_:1}),a[8]||(a[8]=U("Notarías registradas"))]),o(_e,{size:"small",total:A.value,pageSize:b.value,onChange:G,showSizeChanger:!1},null,8,["total","pageSize"])]),o(ge,{open:T.value,"onUpdate:open":a[2]||(a[2]=m=>T.value=m),class:"draw-notary","root-class-name":"root-class-name",title:"DATOS DE LA NOTARÍA",width:"700",placement:"right"},{default:c(()=>[o($e,{onCloseDraw:n,updateNotary:q.value},null,8,["updateNotary"])]),_:1},8,["open"])])}}};export{dt as default};
