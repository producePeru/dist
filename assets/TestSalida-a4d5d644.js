import{u as B,x as L,r as $,a as O,L as T,j as x,b as r,o as b,d as k,c as n,w as s,e as l,t as q,i as _,y as U,m as S,W as G,F as D,v as R,p as W,q as z}from"./index-f9efa549.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const J={class:"test-container"},K={class:"test-head"},E="DD/MM/YYYY",Q={__name:"TestSalida",setup(X){const g=B(),v=L(),y=$(!1),t=O({workshop_id:+v.query.id,user_id:1,date_end:$(T("04/12/2023",E)),question1:null,question1_opt1:null,question1_opt2:null,question1_opt3:null,question1_resp:null,question2:null,question2_opt1:null,question2_opt2:null,question2_opt3:null,question2_resp:null,question3:null,question3_opt1:null,question3_opt2:null,question3_opt3:null,question3_resp:null,question4:null,question4_opt1:null,question4_opt2:null,question4_opt3:null,question4_resp:null,question5:null,question5_opt1:null,question5_opt2:null,question5_opt3:null,question5_resp:null,satistaction1:null,satistaction2:null,satistaction3:null,comments:null,is_comments:!1}),C=async()=>{y.value=!0;let a=null,e=null;g.currentRoute.value.name=="editar-test-salida"?(a=`/testout/${v.query.test}`,e="PUT"):(a=`/create-test-out/${v.query.id}`,e="POST");let o=t;try{const m=await U({url:a,method:e,data:o});S.success(m.message),g.push("/admin/ruta-digital/talleres")}catch(m){console.error("Error de red:",m),S.error("No se pudo crear este cuestionario")}finally{y.value=!1}};return x(async()=>{if(g.currentRoute.value.name=="editar-test-salida")try{const{data:a}=await U({url:`/testout/${v.query.test}`,method:"GET"});let e=G(a.date_end).format("DD/MM/YYYY");t.date_end=$(T(e,E));for(let o=1;o<=5;o++)t["question"+o]=a["question"+o],t["question"+o+"_opt1"]=a["question"+o+"_opt1"],t["question"+o+"_opt2"]=a["question"+o+"_opt2"],t["question"+o+"_opt3"]=a["question"+o+"_opt3"],t["question"+o+"_resp"]=a["question"+o+"_resp"];console.log("suusus",a.is_comments),t.satistaction1=a.satistaction1,t.satistaction2=a.satistaction2,t.satistaction3=a.satistaction3,t.comments=a.comments,t.is_comments=a.is_comments==1}catch(a){console.error("Error de red:",a)}}),(a,e)=>{const o=r("router-link"),m=r("a-breadcrumb-item"),I=r("a-breadcrumb"),N=r("a-divider"),Y=r("a-date-picker"),d=r("a-form-item"),p=r("a-input"),A=r("a-radio"),F=r("a-radio-group"),P=r("a-checkbox"),V=r("a-button"),w=r("a-form");return b(),k("div",J,[n(I,null,{default:s(()=>[n(m,null,{default:s(()=>[n(o,{to:"/admin/ruta-digital/talleres"},{default:s(()=>e[6]||(e[6]=[_("Volver a Talleres de Ruta Digital")])),_:1})]),_:1}),n(m,null,{default:s(()=>[_(q(a.$route.name=="test-salida"?"Crear":"Editar")+" test de salida",1)]),_:1})]),_:1}),e[14]||(e[14]=l("br",null,null,-1)),l("div",K,[e[9]||(e[9]=l("h1",null,"TEST DE SALIDA",-1)),l("h2",null,q(a.$route.query.taller),1),l("span",null,[e[7]||(e[7]=l("b",null,"Expositor:",-1)),_(" "+q(a.$route.query.exponent),1)]),l("span",null,[e[8]||(e[8]=l("b",null,"Fecha taller:",-1)),_(" "+q(a.$route.query.date),1)])]),n(N),n(w,{layout:"vertical",model:t,onFinish:C},{default:s(()=>[n(d,{label:"Fecha de expiración de la prueba",name:"date_end",rules:[{required:!0,message:"Seleccionar una fecha"}]},{default:s(()=>[n(Y,{value:t.date_end,"onUpdate:value":e[0]||(e[0]=u=>t.date_end=u),format:E},null,8,["value"])]),_:1}),(b(),k(D,null,R(5,(u,i)=>l("div",{key:i},[n(d,{label:`Pregunta ${i+1}`,name:[`question${i+1}`],rules:[{required:!0,message:"Escribir pregunta"}]},{default:s(()=>[n(p,{value:t[`question${i+1}`],"onUpdate:value":f=>t[`question${i+1}`]=f},null,8,["value","onUpdate:value"])]),_:2},1032,["label","name"]),n(d,null,{default:s(()=>[n(F,{class:"options",value:t[`question${i+1}_resp`],"onUpdate:value":f=>t[`question${i+1}_resp`]=f},{default:s(()=>[(b(),k(D,null,R(3,(f,c)=>l("div",{class:"option",key:c},[n(A,{value:c+1},null,8,["value"]),n(p,{placeholder:`Option ${c+1}`,value:t[`question${i+1}_opt${c+1}`],"onUpdate:value":M=>t[`question${i+1}_opt${c+1}`]=M},null,8,["placeholder","value","onUpdate:value"])])),64))]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)])),64)),e[12]||(e[12]=l("br",null,null,-1)),l("div",null,[e[10]||(e[10]=l("h3",null,"NIVEL DE SATISFACCIÓN",-1)),n(d,{label:"Pregunta 1",name:"satistaction1",rules:[{required:!0,message:"Escribir pregunta"}]},{default:s(()=>[n(p,{value:t.satistaction1,"onUpdate:value":e[1]||(e[1]=u=>t.satistaction1=u)},null,8,["value"])]),_:1}),n(d,{label:"Pregunta 2",name:"satistaction2",rules:[{required:!0,message:"Escribir pregunta"}]},{default:s(()=>[n(p,{value:t.satistaction2,"onUpdate:value":e[2]||(e[2]=u=>t.satistaction2=u)},null,8,["value"])]),_:1}),n(d,{label:"Pregunta 3",name:"satistaction3",rules:[{required:!0,message:"Escribir pregunta"}]},{default:s(()=>[n(p,{value:t.satistaction3,"onUpdate:value":e[3]||(e[3]=u=>t.satistaction3=u)},null,8,["value"])]),_:1})]),l("div",null,[n(P,{checked:t.is_comments,"onUpdate:checked":e[4]||(e[4]=u=>t.is_comments=u)},{default:s(()=>e[11]||(e[11]=[_("Comentarios")])),_:1},8,["checked"]),t.is_comments?(b(),W(d,{key:0,label:"Título comentario",name:"comments",rules:[{required:t.comments,message:"Escribir pregunta"}]},{default:s(()=>[n(p,{value:t.comments,"onUpdate:value":e[5]||(e[5]=u=>t.comments=u)},null,8,["value"])]),_:1},8,["rules"])):z("",!0)]),e[13]||(e[13]=l("br",null,null,-1)),n(d,{class:"text-center"},{default:s(()=>[n(V,{type:"primary","html-type":"submit",loading:y.value},{default:s(()=>[_(q(a.$route.name=="test-salida"?"CREAR":"EDITAR")+" CUESTIONARIO ",1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ee=H(Q,[["__scopeId","data-v-ee66d3d0"]]);export{ee as default};
