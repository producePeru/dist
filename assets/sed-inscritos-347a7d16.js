import{_ as ee}from"./TableComponent-429ef20b.js";import{c as g,A as U,E as te,r as p,u as ae,a as ne,p as S,k as re,X as Y,b as w,o as i,d as I,w as m,m as R,y as O,z as d,F as L,j as x,i as C,e as V,a2 as oe,h as le}from"./index-b7079dd1.js";import{d as se}from"./downloadExcel-01235e87.js";import"./es-ff465591.js";import{_ as ie}from"./ParticipanteSed-7bab0faa.js";import{C as de}from"./ChromeOutlined-5c494867.js";import"./icoexcel-1b303edf.js";import"./selectes-ea112819.js";import"./MoreOutlined-48c3fdeb.js";import"./FormComponent-179f3a06.js";import"./quill.snow-228cd9f7.js";var ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"};const ue=ce;function z(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),s.forEach(function(c){me(o,c,n[c])})}return o}function me(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var T=function(t,n){var s=z({},t,n.attrs);return g(U,z({},s,{icon:ue}),null)};T.displayName="FacebookOutlined";T.inheritAttrs=!1;const fe=T;var ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"};const pe=ge;function B(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),s.forEach(function(c){he(o,c,n[c])})}return o}function he(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var M=function(t,n){var s=B({},t,n.attrs);return g(U,B({},s,{icon:pe}),null)};M.displayName="InstagramOutlined";M.inheritAttrs=!1;const Ie=M;const Oe={class:"layout-content"},ye={key:3,class:"sed-socials"},Ee=["href"],ve=["href"],we=["href"],_e=["onClick"],Me={__name:"sed-inscritos",setup(o){const t=te(),n=JSON.parse(localStorage.getItem("role"))||[],s=p([]),c=p(0),P=p(150),v=p(!1);ae();const k=p(!1),_=p(null),D=p(!1),F=p({name:"Cargando..."}),r=ne({year:S("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),j=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center",fixed:"left"},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"TIPO ASISTENTE",dataIndex:"typeAsistente",width:150,align:"center"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:200},{title:"SECTOR ECONÃ“MICO",dataIndex:"economicsector_name",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"comercialactivity_name",width:180},{title:"CIUDAD",dataIndex:"city_name",width:120,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"GÃ‰NERO",dataIndex:"gender_name",width:120,align:"center"},{title:"TELÃ‰FONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"CARGO EN EMPRESA",dataIndex:"positionCompany",width:180,align:"center"},{title:"CÃ“MO CONOCIÃ“ EL EVENTO",dataIndex:"howKnowEvent_name",width:200,align:"center"},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:180,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],G=e=>{_.value=e,v.value=!0},Q=()=>{y(),v.value=!1},q=()=>{_.value=null,v.value=!0},J=async(e,a)=>{const h=t.params.slug,b=S().format("DD/MM/YYYY HH:mm"),A={slug:h,documentnumber:a.documentnumber,check:e.target.checked,date:b};try{const E=await R({url:"fair/update-attended-status",method:"PUT",data:A});E.status==200&&console.log("status",E.message)}catch(E){console.error("Error de red:",E)}},X=async e=>{try{const a=await R({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});a.status==200&&(y(),le.success(a.message))}catch(a){console.error("Error de red:",a)}},W=async()=>{D.value=!0;try{const e={},a=t.params.slug;r.year&&(e.year=S(r.year).format("YYYY")),r.range&&(e.dateStart=r.range[0].format("YYYY/MM/DD"),e.dateEnd=r.range[1].format("YYYY/MM/DD")),r.name&&(e.name=r.name);let h=`download/sed-asistentes/${a}`;await se(h,"sed",e)}catch(e){console.error("Error de red:",e)}finally{D.value=!1}},Z=async e=>{r.page=e,await y()},K=async e=>{e&&(r.page=1,await y())},$=e=>n.some(a=>e.includes(a.id)),y=async()=>{try{k.value=!0;const e={page:r.page},a=t.params.slug;r.year&&(e.year=S(r.year).format("YYYY")),r.range&&(e.dateStart=r.range[0].format("YYYY/MM/DD"),e.dateEnd=r.range[1].format("YYYY/MM/DD")),r.name&&(e.name=r.name),r.orderby&&(e.orderby=r.orderby);let h=`events-ugse/users-registered-list/${a}`;const u=await R({url:h,method:"GET",params:e});F.value=u.event,s.value=u.data.data,c.value=u.data.total,P.value=u.data.per_page}catch(e){console.error("Error de red:",e)}finally{k.value=!1}};return re(async()=>{await y()}),Y("search",r),Y("loading",k),Y("loadingFile",D),(e,a)=>{var H;const h=w("a-checkbox"),u=w("a-tag"),b=w("a-menu-item"),A=w("a-popconfirm"),E=w("a-drawer");return i(),I("div",Oe,[g(ee,{title:`INSCRITOS SED ðŸ“€ ${(H=F.value)==null?void 0:H.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/sed",searchYear:!0,rangeDate:!0,columns:j,titleSearch:"FILTRAR POR RUC O DNI",pageSize:P.value,nameTotal:"Inscritos SED",dataSource:s.value,total:c.value,btnUpdate:!0,onHandleNew:q,onHandleCallFetchData:y,onHandleDownloadExcel:W,onHandleSearch:K,onHandlePaginator:Z},{"data-cell":m(({column:f,record:l})=>[f.dataIndex=="asistio"?(i(),O(h,{key:0,checked:l.asistio,"onUpdate:checked":N=>l.asistio=N,onChange:N=>J(N,l)},null,8,["checked","onUpdate:checked","onChange"])):d("",!0),f.dataIndex=="sick"?(i(),I(L,{key:1},[l.sick=="SI"?(i(),O(u,{key:0,color:"red"},{default:m(()=>a[1]||(a[1]=[x("SI")])),_:1})):d("",!0),l.sick=="NO"?(i(),O(u,{key:1,color:"green"},{default:m(()=>a[2]||(a[2]=[x("NO")])),_:1})):d("",!0)],64)):d("",!0),f.dataIndex=="typeAsistente"?(i(),I(L,{key:2},[l.typeAsistente==1?(i(),O(u,{key:0,color:"blue"},{default:m(()=>a[3]||(a[3]=[x("Representante")])),_:1})):d("",!0),l.typeAsistente==2?(i(),O(u,{key:1,color:"pink"},{default:m(()=>a[4]||(a[4]=[x("Invitado")])),_:1})):d("",!0)],64)):d("",!0),f.dataIndex=="redesSociales"?(i(),I("div",ye,[l.instagram?(i(),I("a",{key:0,href:l.instagram,target:"_blank"},[g(C(fe),{class:"ico-sed-socials"})],8,Ee)):d("",!0),l.facebook?(i(),I("a",{key:1,href:l.facebook,target:"_blank"},[g(C(Ie),{class:"ico-sed-socials"})],8,ve)):d("",!0),l.web?(i(),I("a",{key:2,href:l.web,target:"_blank"},[g(C(de),{class:"ico-sed-socials"})],8,we)):d("",!0)])):d("",!0)]),"custom-options":m(({record:f})=>[$([1,5])?(i(),O(b,{key:0},{default:m(()=>[V("a",{onClick:l=>G(f)},"Editar",8,_e)]),_:2},1024)):d("",!0),$([1,5])?(i(),O(b,{key:1},{default:m(()=>[g(A,{placement:"rightBottom",title:`Â¿Quieres eliminar ${f.documentnumber} ?`,onConfirm:l=>X(f)},{icon:m(()=>[g(C(oe),{style:{color:"red"}})]),default:m(()=>[a[5]||(a[5]=V("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):d("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),g(E,{open:v.value,"onUpdate:open":a[0]||(a[0]=f=>v.value=f),title:_.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:m(()=>[g(ie,{onCloseDraw:Q,info:_.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Me as default};
