import{_ as z}from"./TableComponent-379c9bc1.js";import{l as H,r,a as k,j as P,U as G,a6 as O,o as n,x as q,h as $,L as V,d,c as b,N as w,m as M,b as D,w as v,t as _,y as u,e as j}from"./index-1cfead76.js";import{d as Z}from"./downloadExcel-e6f3881e.js";import{_ as J}from"./FormComponent-898b1ba1.js";import{u as K}from"./selectes-1ca73365.js";import"./es-ac7b7121.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-b5e6d211.js";import"./quill.snow-f6ab8c7a.js";const Q={key:1,class:"notary-grid"},W={__name:"DrawerNotaria.componente",props:["info"],emits:["closeDraw"],setup(R,{emit:N}){H.locale("es");const I=r({name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!1,message:"Escribir el nombre de la notaría",disabled:!1,max:100},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},addressNotary:{type:"iText",label:"DIRECCIÓN",name:"addressNotary",required:!0,message:"Escribir la dirección de la notaría",disabled:!1,max:200},etiqueta1:{type:"iLabel",label:"GASTOS NOTARIALES",name:"etiqueta1"},gasto1:{type:"iMoney",label:"OPCION 1 (HASTA 1 UIT)",name:"gasto1",required:!0,message:"Escribir gastos notariales",disabled:!1,max:20},blank1:{type:"iBlanket",label:"",name:"blank1"},gasto2:{type:"iMoney",label:"OPCION 2 MONTO",name:"gasto2",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto2Detail:{type:"iText",label:"OPCION 2 DETALLE",name:"gasto2Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},gasto3:{type:"iMoney",label:"OPCION 3 MONTO",name:"gasto3",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto3Detail:{type:"iText",label:"OPCION 2 DETALLE",name:"gasto3Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},gasto4:{type:"iMoney",label:"OPCION 4 MONTO",name:"gasto4",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto4Detail:{type:"iText",label:"OPCION 4 DETALLE",name:"gasto4Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},testimonio:{type:"iMoney",label:"TESTIMONIO",name:"testimonio",required:!1,message:"Escribir testimonio",disabled:!1,max:20},legalization:{type:"iMoney",label:"LEGALIZACION DE BENEFICIARIO FINAL",name:"legalization",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},biometric:{type:"iMoney",label:"BIOMÉTRICO / HUELLA DIGITAL",name:"biometric",required:!1,message:"Escribir biométrico o huella digital",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20},aclaratory:{type:"iMoney",label:"ACLARATORIA",name:"aclaratory",required:!1,message:"Escribir tarifa aclaratoria",disabled:!1,max:20},socio:{type:"iMoney",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"socio",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20},conditions:{type:"iText",label:"CONDICIONES",name:"conditions",required:!1,message:"Escribir monto de condiciones",disabled:!1,max:200},etiqueta2:{type:"iLabel",label:"CONTÁCTO",name:"etiqueta2"},contactName:{type:"iText",label:"NOMBRE DE CONTACTO",name:"contactName",required:!1,message:"Escribir nombre de contacto",disabled:!1,max:100},contactEmail:{type:"iText",label:"CORREO ELECTRÓNICO",name:"contactEmail",required:!1,message:"Escribir correo electrónico",disabled:!1,max:100},contactPhone:{type:"iText",label:"TELEFONO",name:"contactPhone",required:!1,message:"Escribir teléfono de contacto",disabled:!1,max:9},etiqueta3:{type:"iLabel",label:"COSTO DE TARIFAS",name:"etiqueta3"},normalTarifa:{type:"iMoney",label:"TARIFA NORMAL",name:"normalTarifa",required:!1,message:"Escribir tarifa normal",disabled:!1,max:20}}),s=K(),f=N,g=R,y=r(!1),E=r("GUARDAR"),a=k({}),h=r(!1),c=r(null),m=r({id_pnte:[],city_id:[],province_id:[],district_id:[]}),S=async e=>{e=="city_id"&&(console.log("city_id kakakaka"),await s.fetchProvinces(a.city_id),m.value.province_id=s.provinces,I.value.province_id.disabled=!1),e=="province_id"&&(await s.fetchDistricts(a.province_id),m.value.district_id=s.districts,I.value.district_id.disabled=!1)},A=async e=>{e=="city_id"&&(await s.fetchCities(),a.city_id=null,a.province_id=null,a.district_id=null,m.value.province_id=[],m.value.city_id=s.cities),e=="province_id"&&(a.province_id=null,a.district_id=null,m.value.district_id=[])},C=async()=>{h.value=!0;const e={name:a.name,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,addressNotary:a.addressNotary,gasto1:a.gasto1,gasto2:a.gasto2,gasto2Detail:a.gasto2Detail,gasto3:a.gasto3,gasto3Detail:a.gasto3Detail,gasto4:a.gasto4,gasto4Detail:a.gasto4Detail,testimonio:a.testimonio,legalization:a.legalization,biometric:a.biometric,aclaratory:a.aclaratory,socio:a.socio,conditions:a.conditions,contactName:a.contactName,contactEmail:a.contactEmail,contactPhone:a.contactPhone,normalTarifa:a.normalTarifa,status:1};try{const p=g.info?`notary/update/${g.info.id}`:"notary/create",t=g.info?"PATCH":"POST",i=await w({url:p,method:t,data:e});i.status===200&&(T(),M.success(i.message),f("closeDraw",!0))}catch(p){console.error("Error:",p);const t=document.getElementsByClassName("ant-drawer-body")[0];t&&(t.scrollTop=0)}finally{h.value=!1}},T=()=>{a.name=null,a.city_id=null,a.province_id=null,a.district_id=null,a.addressNotary=null,a.gasto1=null,a.gasto2=null,a.gasto2Detail=null,a.gasto3=null,a.gasto3Detail=null,a.gasto4=null,a.gasto4Detail=null,a.testimonio=null,a.legalization=null,a.biometric=null,a.aclaratory=null,a.socio=null,a.conditions=null,a.contactName=null,a.contactEmail=null,a.contactPhone=null,a.normalTarifa=null},x=async e=>{y.value=!0;try{e&&(a.name=e.name,a.addressNotary=e.addressNotary,a.gasto1=e.gasto1,a.gasto2=e.gasto2,a.gasto2Detail=e.gasto2Detail,a.gasto3=e.gasto3,a.gasto3Detail=e.gasto3Detail,a.gasto4=e.gasto4,a.gasto4Detail=e.gasto4Detail,a.testimonio=e.testimonio,a.legalization=e.legalization,a.biometric=e.biometric,a.aclaratory=e.aclaratory,a.socio=e.socio,a.conditions=e.conditions,a.contactName=e.contactName,a.contactEmail=e.contactEmail,a.contactPhone=e.contactPhone,a.normalTarifa=e.normalTarifa,await s.fetchCities(),m.value.city_id=s.cities,a.city_id=e.city_id,await s.fetchProvinces(a.city_id),m.value.province_id=s.provinces,I.value.province_id.disabled=!1,a.province_id=e.province_id,await s.fetchDistricts(a.province_id),m.value.district_id=s.districts,I.value.district_id.disabled=!1,a.district_id=e.district_id)}finally{y.value=!1}};return P(()=>{g.info&&x(g.info)}),G(()=>g.info,e=>{e?x(e):T()}),O("formState",a),O("loadingState",h),(e,p)=>y.value?(n(),q($(V),{key:0,style:{color:"#00a6db"}})):(n(),d("div",Q,[b(J,{fields:I.value,options:m.value,btnSaveName:E.value,mayus:!0,resetSelect:c.value,onHandleChangeSelect:S,onHandleFocusSelect:A,onOnSubmit:C},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const X={class:"advisory-table"},Y={key:0},aa={key:1},ea={key:2},ta={key:3},ia={key:4},sa={key:5},la={key:6},oa={key:7},na={key:8},ra={key:9},ca=["onClick"],ha={__name:"NotariasLista",setup(R){JSON.parse(localStorage.getItem("role"));const N=r([]),I=r(0),s=r(150),f=r(!1),g=r(!1),y=r(!1),E=r(null),a=k({asesor:null,name:null,page:1}),h=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"NOMBRE DE LA NOTARÍA",dataIndex:"name",width:240,fixed:"left"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"PROVINCIA",dataIndex:"province_name",width:120},{title:"DISTRITO",dataIndex:"district_name",width:120},{title:"DIRECCIÓN",dataIndex:"addressNotary",width:180},{title:"GASTOS NOTARIALES",children:[{title:"TARIFA SOCIAL",children:[{title:"OPCION 1 (HASTA 1 UIT)",dataIndex:"gasto1",align:"center",width:200},{title:"OPCION 2",colSpan:2,children:[{dataIndex:"gasto2",width:100,colSpan:0,align:"center"},{dataIndex:"gasto2Detail",width:100,colSpan:0,align:"center"}]},{title:"OPCION 3",colSpan:2,children:[{dataIndex:"gasto3",width:100,colSpan:0,align:"center"},{dataIndex:"gasto3Detail",width:100,colSpan:0,align:"center"}]},{title:"OPCION 4",colSpan:2,children:[{dataIndex:"gasto4",width:100,colSpan:0,align:"center"},{dataIndex:"gasto4Detail",width:100,colSpan:0,align:"center"}]}]},{title:"TESTIMONIO",width:150,align:"center",dataIndex:"testimonio"},{title:"LEGALIZACION DE BENEFICIARIO FINAL",width:150,align:"center",dataIndex:"legalization"},{title:"BIOMÉTRICO / HUELLA DIGITAL",width:150,align:"center",dataIndex:"biometric"},{title:"ACLARATORIA",width:150,align:"center",dataIndex:"aclaratory"},{title:"SOCIO O INTERVINIENTE ADICIONAL",width:150,align:"center",dataIndex:"socio"}]},{title:"CONDICIONES",dataIndex:"conditions",width:280},{title:"NOMBRE DE CONTACTO",dataIndex:"contactName",width:200},{title:"CORREO",dataIndex:"contactEmail",width:180},{title:"TELEFONO",dataIndex:"contactPhone",width:100,align:"center"},{title:"TARIFA NORMAL",dataIndex:"normalTarifa",align:"center",width:100},{title:"DISPONIBLE",dataIndex:"status",width:100,align:"center"},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],c=t=>{const i=parseFloat(t);return isNaN(i)?"":`S/ ${i.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}`},m=()=>{y.value=!1,p()},S=()=>{y.value=!0},A=async()=>{g.value=!0;try{const t={};a.name&&(t.name=a.name),a.city_id&&(t.city_id=a.city_id),await Z("download/notaries","notarias-pnte",t)}catch(t){console.error("Error de red:",t)}finally{g.value=!1}},C=async t=>{a.page=t,await p()},T=async t=>{t&&(a.page=1,await p())},x=t=>{E.value=t,y.value=!0},e=async t=>{try{const i=await w({url:`notary/status/${t}`,method:"PUT"});i.status==200&&(p(),M.success(i.message))}catch(i){console.error("Error de red:",i)}},p=async()=>{f.value=!0;try{const t={page:a.page};a.name&&(t.name=a.name),a.city_id&&(t.city_id=a.city_id);const i=await w({url:"notary/list",method:"GET",params:t});N.value=i.data.data,I.value=i.data.total,s.value=i.data.per_page}catch(t){console.error("Error de red:",t)}finally{f.value=!1}};return P(async()=>{await p()}),O("search",a),O("loading",f),O("loadingFile",g),(t,i)=>{const F=D("a-switch"),B=D("a-menu-item"),U=D("a-drawer");return n(),d("div",X,[b(z,{title:"NOTARÍAS",new:!0,textNuevo:"NUEVO",placeholderSearch:"Buscar",columns:h,titleSearch:"NOMBRE DE NOTARÍA",pageSize:s.value,nameTotal:"Notarías",cityList:!0,dataSource:N.value,total:I.value,onHandleNew:S,onHandleDownloadExcel:A,onHandleSearch:T,onHandlePaginator:C},{"data-cell":v(({column:l,record:o})=>[l.dataIndex=="gasto1"?(n(),d("span",Y,_(c(o.gasto1)),1)):u("",!0),l.dataIndex=="gasto2"?(n(),d("span",aa,_(c(o.gasto2)),1)):u("",!0),l.dataIndex=="gasto3"?(n(),d("span",ea,_(c(o.gasto3)),1)):u("",!0),l.dataIndex=="gasto4"?(n(),d("span",ta,_(c(o.gasto4)),1)):u("",!0),l.dataIndex=="testimonio"?(n(),d("span",ia,_(c(o.testimonio)),1)):u("",!0),l.dataIndex=="legalization"?(n(),d("span",sa,_(c(o.legalization)),1)):u("",!0),l.dataIndex=="biometric"?(n(),d("span",la,_(c(o.biometric)),1)):u("",!0),l.dataIndex=="aclaratory"?(n(),d("span",oa,_(c(o.aclaratory)),1)):u("",!0),l.dataIndex=="socio"?(n(),d("span",na,_(c(o.socio)),1)):u("",!0),l.dataIndex=="normalTarifa"?(n(),d("span",ra,_(c(o.normalTarifa)),1)):u("",!0),l.dataIndex=="status"?(n(),q(F,{key:10,checked:o.status,"onUpdate:checked":L=>o.status=L,onChange:L=>e(o.id)},null,8,["checked","onUpdate:checked","onChange"])):u("",!0)]),"custom-options":v(({record:l})=>[b(B,null,{default:v(()=>[j("a",{onClick:o=>x(l)},"Editar",8,ca)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),b(U,{width:"900",title:"EDITAR NOTARÍA",open:y.value,"onUpdate:open":i[0]||(i[0]=l=>y.value=l),placement:"right"},{default:v(()=>[b(W,{onCloseDraw:m,info:E.value},null,8,["info"])]),_:1},8,["open"])])}}};export{ha as default};
