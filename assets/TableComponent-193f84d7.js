import{l as m,aa as k,r as _,E as ae,X as le,j as oe,b as i,o as r,d as p,e as t,t as g,c as n,w as u,v as y,i as C,x as c,h as l,L as te,F as O,ab as D,J as ne,p as se}from"./index-8b66b835.js";import{_ as ie}from"./icoexcel-1b303edf.js";import"./es-db8cee6f.js";import{M as re}from"./MoreOutlined-92befe2d.js";const de={class:"table-component"},ue={class:"title-produce"},ce={class:"table-filters"},pe={key:0,class:"filter-type"},me={key:1,class:"filter-offices"},ve={key:2,class:"filter-year"},_e={key:3,class:"filter-range-date"},ge={key:4,class:"filter-asesor"},fe={class:"filter-search"},ye={key:1},we={class:"paginator"},he="DD/MM/YYYY",xe={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(E,{emit:L}){m.locale("es");const a=E,f=L,U=JSON.parse(localStorage.getItem("role"))||[],s=k("search"),x=k("loading"),F=k("loadingFile"),z=_(window.innerHeight-100),w=_({page:1}),A=_(1200),I=_([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),R=_([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),P=_([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),T=d=>U.some(e=>d.includes(e.id)),Y=ae(()=>d=>(w.value.page-1)*a.pageSize+d+1),B=()=>{f("handleNew")},M=async()=>{f("handleDownloadExcel")},V=()=>{w.value.page=1,f("handleSearch",!0)},j=d=>{w.value.page=d,f("handlePaginator",d)},h=()=>{z.value=window.innerHeight-310},G=(d,e)=>{const v=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(v)};return le(()=>{window.removeEventListener("resize",h)}),oe(()=>{window.addEventListener("resize",h),h()}),(d,e)=>{const v=i("a-button"),b=i("a-col"),S=i("a-select"),H=i("a-date-picker"),J=i("a-range-picker"),X=i("a-input"),$=i("a-row"),q=i("a-menu"),K=i("a-dropdown"),Q=i("a-table"),W=i("a-tag"),Z=i("a-pagination");return r(),p(O,null,[t("div",de,[t("h3",ue,g(a.title),1),n($,{style:{margin:"1rem 0"}},{default:u(()=>[n(b,{xs:24,md:5},{default:u(()=>[a.new?(r(),y(v,{key:0,type:"primary",onClick:B,style:{"margin-right":".6rem"}},{default:u(()=>[C(g(a.textNuevo),1)]),_:1})):c("",!0),n(v,{class:"btn-excel",onClick:M,loading:l(F),type:"primary"},{default:u(()=>e[7]||(e[7]=[t("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:ie},null,-1)])),_:1},8,["loading"])]),_:1}),n(b,{xs:24,md:19},{default:u(()=>[t("div",ce,[a.tipoformalizacion?(r(),p("div",pe,[e[8]||(e[8]=t("small",null,"TIPO",-1)),n(S,{value:l(s).type,"onUpdate:value":e[0]||(e[0]=o=>l(s).type=o),options:R.value},null,8,["value","options"])])):c("",!0),a.tipooficina?(r(),p("div",me,[e[9]||(e[9]=t("small",null,"OFICINA",-1)),n(S,{value:l(s).offices,"onUpdate:value":e[1]||(e[1]=o=>l(s).offices=o),options:P.value},null,8,["value","options"])])):c("",!0),a.searchYear?(r(),p("div",ve,[e[10]||(e[10]=t("small",null,"AÑO",-1)),n(H,{allowClear:!1,value:l(s).year,"onUpdate:value":e[2]||(e[2]=o=>l(s).year=o),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):c("",!0),a.rangeDate?(r(),p("div",_e,[e[11]||(e[11]=t("small",null,"POR RANGO DE FECHAS",-1)),n(J,{value:l(s).range,"onUpdate:value":e[3]||(e[3]=o=>l(s).range=o),presets:I.value,format:he},null,8,["value","presets"])])):c("",!0),T([1,5])&&a.asesoresList?(r(),p("div",ge,[e[12]||(e[12]=t("small",null,"Por asesor",-1)),a.asesoresList?(r(),y(S,{key:0,allowClear:!0,value:l(s).asesor,"onUpdate:value":e[4]||(e[4]=o=>l(s).asesor=o),placeholder:"Selecciona Asesor","show-search":"",options:a.asesoresList,"filter-option":G},null,8,["value","options"])):c("",!0)])):c("",!0),t("div",fe,[t("small",null,g(a.titleSearch),1),n(X,{value:l(s).name,"onUpdate:value":e[5]||(e[5]=o=>l(s).name=o),placeholder:a.placeholderSearch},null,8,["value","placeholder"])]),n(v,{type:"primary",onClick:V},{default:u(()=>[l(x)?(r(),y(l(te),{key:0})):(r(),p("span",ye,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),n(Q,{bordered:"",scroll:{x:A.value,y:z.value},class:"table-pnte",columns:a==null?void 0:a.columns,"data-source":a==null?void 0:a.dataSource,pagination:!1,loading:l(x),size:"small"},{bodyCell:u(({column:o,record:N,index:ee})=>[o.dataIndex=="idx"?(r(),p(O,{key:0},[C(g(Y.value(ee)),1)],64)):c("",!0),D(d.$slots,"data-cell",{column:o,record:N}),o.dataIndex=="actions"?(r(),y(K,{key:1,trigger:["click"]},{overlay:u(()=>[n(q,null,{default:u(()=>[D(d.$slots,"custom-options",{record:N})]),_:2},1024)]),default:u(()=>[t("a",{class:"ant-dropdown-link",onClick:e[6]||(e[6]=ne(()=>{},["prevent"]))},[n(v,{shape:"circle",icon:se(l(re)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),t("div",we,[t("span",null,[n(W,{color:"blue"},{default:u(()=>[t("b",null,g(a==null?void 0:a.total),1)]),_:1}),C(g(a.nameTotal),1)]),n(Z,{size:"small",total:a==null?void 0:a.total,pageSize:a.pageSize,onChange:j,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{xe as _};
