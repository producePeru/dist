import{_ as N}from"./FormComponent-c07f9a86.js";import{u as E}from"./selectes-65e8e291.js";import{p as u,r as l,a as w,k as T,U as O,X as _,o as q,d as D,c as A,m as k,h as x}from"./index-2b01f423.js";import"./es-6c2e2afd.js";const B={class:"f-20"},Y={__name:"ParticipanteSed",props:["info"],emits:["closeDraw"],setup(p,{emit:v}){u.locale("es");const c=l({ruc:{type:"iText",label:"RUC",name:"ruc",required:!0,message:"Ingrese el RUC",disabled:!1},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Ingrese la razón social",disabled:!1},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Ingrese el nombre comercial",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccione el sector económico",disabled:!1},category_id:{type:"iSelect",label:"RUBRO",name:"category_id",required:!0,message:"Seleccione el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccione la actividad comercial",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccione la región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccione la provincia",disabled:!1},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccione un distrito",disabled:!1},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Ingrese el tipo de asistente",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const y=v,o=p,f=l("GUARDAR"),e=w({}),n=l(!1),a=E(),b=l(null),t=l({city_id:[],province_id:[],district_id:[],modality_id:[]}),S=i=>{console.log("handleInputEvent",i)},g=async i=>{i=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),c.value.dateTramite.disabled=!1)},h=async i=>{i=="city_id"&&(await a.fetchProvinces(e.city_id),t.value.province_id=a.provinces,c.value.province_id.disabled=!1),i=="province_id"&&(await a.fetchDistricts(e.province_id),t.value.district_id=a.districts,c.value.district_id.disabled=!1)},C=async i=>{console.log("handleFocusSelect",i),i=="city_id"&&(await a.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,t.value.province_id=[],t.value.city_id=a.cities)},R=i=>{},I=async()=>{n.value=!0;const i={ruc:e.ruc,comercialName:e.comercialName,socialReason:e.socialReason,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,gender_id:e.gender_id,phone:e.phone,email:e.email,birthday:u(e.birthday).format("YYYY-MM-DD HH:mm"),positionCompany:e.positionCompany,instagram:e.instagram,facebook:e.facebook,web:e.web};try{const s=await k({url:`fair/sed-update-data-user/${o.info.id}`,method:"PUT",data:i});s.status===200&&(x.success(s.message),d(),y("closeDraw",!0))}catch(s){console.error("Error:",s);const m=document.getElementsByClassName("ant-drawer-body")[0];m&&(m.scrollTop=0)}finally{n.value=!1}},d=()=>{e.nameEvent=null,e.city_id=null,e.place=null,e.modality_id=null,e.dates=null,e.hours=null,e.description=null},r=async i=>{i&&(console.log("aaaa",i),e.ruc=i.ruc,e.comercialName=i.comercialName,e.socialReason=i.socialReason,await a.fetchEconomicSectors(),t.value.economicsector_id=a.economicSectors,e.category_id=i.category_id,await a.fetchRubros(),t.value.rubros_id=a.rubros,e.economicsector_id=i.economicsector_id,await a.fetchCities(),t.value.city_id=a.cities,e.city_id=i.city_id,await a.fetchProvinces(e.city_id),t.value.province_id=a.provinces,c.value.province_id.disabled=!1,e.province_id=i.province_id,await a.fetchDistricts(e.province_id),t.value.district_id=a.districts,c.value.district_id.disabled=!1,e.district_id=i.district_id)};return T(()=>{o.info&&r(o.info)}),O(()=>o.info,i=>{i?r(i):d()}),_("formState",e),_("loadingState",n),(i,s)=>(q(),D("div",B,[A(N,{fields:c.value,options:t.value,btnSaveName:f.value,onHandleInputEvent:S,resetSelect:b.value,onHandleChangeSelect:h,onHandleFocusSelect:C,onHandleBlurSelect:R,onHandleChangeClock:g,onOnSubmit:I},null,8,["fields","options","btnSaveName","resetSelect"])]))}};export{Y as _};
