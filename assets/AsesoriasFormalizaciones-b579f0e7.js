import{c as i,A as Oe,L as he,y as we,r as h,a as ye,k as Ce,b as y,o as l,d as P,w as t,e as m,F as K,x as ce,h as b,q as v,s as c,t as I,M as Fe,_ as Ue,i as Y,$ as Se,z as Z,f as Ee,m as J,T as Ie,u as qe,a1 as Te,p as Pe,j as Le}from"./index-eaf064bf.js";import{u as ue}from"./selectes-2264d99c.js";import{f as Me,r as Ye,a as Ge}from"./ReservaNombre.vue_vue_type_style_index_1_lang-4fa31e62.js";import"./storage-ff23f026.js";import"./es-46f191be.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Ve}from"./DrawerSolicitante.componente-27df68af.js";var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const je=He;function xe(F){for(var N=1;N<arguments.length;N++){var $=arguments[N]!=null?Object(arguments[N]):{},d=Object.keys($);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols($).filter(function(G){return Object.getOwnPropertyDescriptor($,G).enumerable}))),d.forEach(function(G){Be(F,G,$[G])})}return F}function Be(F,N,$){return N in F?Object.defineProperty(F,N,{value:$,enumerable:!0,configurable:!0,writable:!0}):F[N]=$,F}var ge=function(N,$){var d=xe({},N,$.attrs);return i(Oe,xe({},d,{icon:je}),null)};ge.displayName="RedoOutlined";ge.inheritAttrs=!1;const Je=ge;const We={class:"wrapper-booking"},Ke={class:"grid-ruc20"},Qe={class:"select-notaries"},Ze={class:"name"},Xe={class:"city"},ea={class:"address"},aa={style:{display:"none"}},ta="DD/MM/YYYY",na={__name:"AllFormalizacion20",props:["info","idCde"],emits:["closeDraw"],setup(F,{emit:N}){he.locale("es");const $=Se({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),d=JSON.parse(localStorage.getItem("profile")),G=JSON.parse(localStorage.getItem("role"));we();const A=F,z=N,q=h(!1),k=h(null);h(null);const a=h(!0),H=h(!1),p=ue(),s=h(null);p.$patch({cities:p.cities}),p.$patch({modalities:p.modalities}),p.$patch({economicSectors:p.economicSectors}),p.$patch({comercialActivities:p.comercialActivities}),p.$patch({regimes:p.regimes}),p.$patch({typeCapital:p.typeCapital}),p.fetchEconomicSectors(),p.fetchComercialActivities(),p.fetchRegimes(),p.fetchModalities(),p.fetchTypeCapital(),p.fetchCities(),h(null);const e=ye({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:d.user_id,montocapital:null,ruc:null}),T=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}],E=x=>{if(x=="ruc"){const n=e.ruc;(n<2e10||n>20999999999)&&(e.ruc=null)}},W=x=>{(x=="ruc"||x=="montocapital")&&(e[x]=e[x].replace(/\D/g,""))},B=()=>{var n;e.dni=A.info.documentnumber,G.some(U=>U.id===7)&&(e.modality_id=1,e.notary_id=d.notary_id),(n=p.regimes)!=null&&n.length&&(a.value=!1)},C=(x,n)=>{const U=x.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),f=n.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),r=n.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),ae=n.province.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),D=n.district.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return f.includes(U)||r.includes(U)||ae.includes(U)||D.includes(U)},R=async()=>{try{q.value=!0;const x={name:k.value};(await Z({url:"create/comercial-activities",method:"POST",data:x})).status==200&&(k.value=null,p.fetchComercialActivities())}catch(x){console.log(x)}finally{q.value=!1}},u=x=>{e.province_id=null,e.district_id=null,p.fetchProvinces(x)},S=x=>{e.district_id=null,p.fetchDistricts(x)},j=async()=>{try{const x={city_id:e.city_id},{data:n}=await Ee({url:"public/notaries-filters",method:"GET"});s.value=null,e.notary_id=null;const U=n.map(f=>({value:f.id,name:f.name,city:f.city.name,province:f.province.name,district:f.district.name,address:f.address}));s.value=U}catch(x){console.error("Error de red:",x)}},V=(x,n)=>{const U=x.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return n.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(U)},X=async()=>{if(H.value=!0,!A.info.id)return J.error("Error al registrar, actualiza la página");const x={codesunarp:e.codesunarp,numbernotary:e.numbernotary,address:e.address,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,regime_id:e.regime_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,modality_id:e.modality_id,notary_id:e.notary_id,user_id:d.user_id,people_id:A.info.id,nameMype:e.nameMype,dateReception:e.dateReception?he(e.dateReception).format("YYYY-MM-DD"):null,dateTramite:e.dateTramite?he(e.dateTramite).format("YYYY-MM-DD"):null,ruc:e.ruc,dni:e.dni,typecapital_id:e.typecapital_id,isbic:e.isbic,montocapital:e.montocapital,cde_id:A.idCde?A.idCde:null};try{const n=await Z({url:"formalization/create-ruc20",method:"POST",data:x});n.status===200&&(J.success(n.message),e.codesunarp=null,e.economicsector_id=null,e.comercialactivity_id=null,e.regime_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.modality_id=null,e.nameMype=null,e.dateReception=null,e.dateTramite=null,e.notary_id=null,e.ruc=null,e.numbernotary=null,e.isbic=null,e.montocapital=null,e.typecapital_id=null,z("closeDraw",!0))}catch(n){console.log("Error: "+n)}finally{H.value=!1}},ee=()=>{J.warning("Debes de completar todos los espacios requeridos")};return Ce(()=>{j()}),(x,n)=>{const U=y("a-select"),f=y("a-form-item"),r=y("a-date-picker"),ae=y("a-divider"),D=y("a-input"),te=y("a-button"),me=y("a-space"),oe=y("a-input-number"),pe=y("a-form"),_e=y("a-spin");return l(),P("div",We,[i(_e,{spinning:a.value},{default:t(()=>[i(pe,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:X,onFinishFailed:ee},{default:t(()=>[m("div",Ke,[(l(!0),P(K,null,ce(b(Me),(o,ve)=>(l(),P(K,{key:ve},[o.type==="iSelect"?(l(),v(f,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[o.name=="regime_id"?(l(),v(U,{key:0,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,options:b(p).regimes,"show-search":"","filter-option":V},null,8,["value","onUpdate:value","options"])):c("",!0),o.name=="modality_id"?(l(),v(U,{key:1,disabled:o.disabled,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,options:b(p).modalities},null,8,["disabled","value","onUpdate:value","options"])):c("",!0),o.name=="typecapital_id"?(l(),v(U,{key:2,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,options:b(p).typeCapital},null,8,["value","onUpdate:value","options"])):c("",!0),o.name=="isbic"?(l(),v(U,{key:3,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,options:T},null,8,["value","onUpdate:value"])):c("",!0),o.name=="notary_id"?(l(),v(U,{key:4,disabled:o.disabled,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,options:s.value,"option-label-prop":"name","show-search":"","filter-option":C},{option:t(({value:_,name:ne,city:se,province:O,district:g,address:Q})=>[m("div",Qe,[m("span",Ze,I(ne),1),m("span",Xe,I(se)+" - "+I(O)+" - "+I(g),1),m("span",ea,I(Q),1)])]),_:2},1032,["disabled","value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iDate"?(l(),v(f,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[i(r,{locale:b(Fe),value:e[o.name],"onUpdate:value":_=>e[o.name]=_,style:{width:"100%"},format:ta,placeholder:"día/mes/año",onChange:n[0]||(n[0]=_=>e.birthday=x.birthdateDate),disabled:o.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iSelectWrite"?(l(),v(f,{key:2,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[o.name=="comercialactivity_id"?(l(),v(U,{key:0,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,"show-search":"",options:b(p).comercialActivities,"filter-option":V},{dropdownRender:t(({menuNode:_})=>[i(b($),{vnodes:_},null,8,["vnodes"]),i(ae,{style:{margin:"4px 0"}}),i(me,{style:{padding:"4px 8px"}},{default:t(()=>[i(D,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":n[1]||(n[1]=ne=>k.value=ne),placeholder:"Nueva actividad"},null,8,["value"]),i(te,{type:"text",onClick:R,loading:q.value},{icon:t(()=>[i(b(Ue))]),default:t(()=>[Y(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):c("",!0),o.name=="economicsector_id"?(l(),v(U,{key:1,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,"show-search":"",options:b(p).economicSectors,"filter-option":V},null,8,["value","onUpdate:value","options"])):c("",!0),o.name=="city_id"?(l(),v(U,{key:2,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,"show-search":"",options:b(p).cities,"filter-option":V,onChange:u},null,8,["value","onUpdate:value","options"])):c("",!0),o.name=="province_id"?(l(),v(U,{key:3,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,"show-search":"",options:b(p).provinces,"filter-option":V,onChange:S,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),o.name=="district_id"?(l(),v(U,{key:4,value:e[o.name],"onUpdate:value":_=>e[o.name]=_,"show-search":"",options:b(p).districts,"filter-option":V,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iText"?(l(),v(f,{key:3,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email,max:o.max,min:o.min}]},{default:t(()=>[i(D,{onInput:_=>W(o.name),value:e[o.name],"onUpdate:value":_=>e[o.name]=_,disabled:o.disabled,maxlength:o.max,placeholder:o.placeholder},null,8,["onInput","value","onUpdate:value","disabled","maxlength","placeholder"])]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iNumber"?(l(),v(f,{key:4,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[i(oe,{style:{width:"100%"},value:e[o.name],"onUpdate:value":_=>e[o.name]=_,maxlength:11,onChange:_=>E(o.name)},null,8,["value","onUpdate:value","onChange"])]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iTextLol"?(l(),v(f,{key:5,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[i(D,{onInput:_=>W(o.name),value:e.dni,"onUpdate:value":n[2]||(n[2]=_=>e.dni=_),disabled:!A.documentnumber,maxlength:o.max,placeholder:o.placeholder},null,8,["onInput","value","disabled","maxlength","placeholder"])]),_:2},1032,["name","label","rules"])):c("",!0),o.type==="iMoney"?(l(),v(f,{key:6,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:t(()=>[i(oe,{"min:":0,style:{width:"100%"},value:e[o.name],"onUpdate:value":_=>e[o.name]=_,formatter:_=>`S/ ${_}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:_=>_.replace(/S\/\s?|(,*)/g,"")},null,8,["value","onUpdate:value","formatter","parser"])]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),m("pre",aa,":::::"+I(e),1),m("div",null,I(B()),1),i(f,null,{default:t(()=>[i(te,{class:"btn-produce",type:"primary","html-type":"submit",loading:H.value},{default:t(()=>[Y("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},oa=le(na,[["__scopeId","data-v-37527b71"]]);const ia={class:"wrapper-booking"},la={class:"grid-booking"},sa={__name:"FormalizacionRUC10",props:["info","idCde"],emits:["closeDraw"],setup(F,{emit:N}){const $=JSON.parse(localStorage.getItem("role")),d=Se({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),G=JSON.parse(localStorage.getItem("profile")),A=F,z=N,q=h(!1),k=h(null);h(null),h(!1);const a=ue(),H=h(!1);a.$patch({cities:a.cities}),a.$patch({provinces:a.provinces}),a.$patch({districts:a.districts}),a.$patch({modalities:a.modalities}),a.$patch({detailProcedures:a.detailProcedures}),a.$patch({economicSectors:a.economicSectors}),a.$patch({comercialActivities:a.comercialActivities}),a.fetchDetailProcedures(),a.fetchModalities(),a.fetchEconomicSectors(),a.fetchComercialActivities(),a.fetchCities();const p=h(!0),s=ye({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:G.user_id}),e=()=>{s.dni=A.info.documentnumber,$.some(u=>u.id===7)?s.modality_id=1:s.modality_id=null,a.cities&&(p.value=!1)},T=async()=>{try{H.value=!0;const u={name:k.value};(await Z({url:"create/comercial-activities",method:"POST",data:u})).status==200&&(k.value=null,a.fetchComercialActivities())}catch(u){console.log(u)}finally{H.value=!1}},E=u=>{s.province_id=null,s.district_id=null,a.fetchProvinces(u)},W=u=>{s.district_id=null,a.fetchDistricts(u)},B=(u,S)=>{const j=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(j)},C=async()=>{if(q.value=!0,!A.info.id)return J.error("Error al registrar, actualiza la página");const u={dni:s.dni,detailprocedure_id:s.detailprocedure_id,modality_id:s.modality_id,economicsector_id:s.economicsector_id,comercialactivity_id:s.comercialactivity_id,city_id:s.city_id,province_id:s.province_id,district_id:s.district_id,address:s.address,ruc:s.ruc,user_id:G.user_id,people_id:A.info.id,cde_id:A.idCde?A.idCde:null};try{const S=await Z({url:"formalization/create-ruc-10",method:"POST",data:u});S.status===200&&(J.success(S.message),s.detailprocedure_id=null,s.modality_id=null,s.economicsector_id=null,s.comercialactivity_id=null,s.city_id=null,s.province_id=null,s.district_id=null,s.address=null,s.ruc=null,z("closeDraw",!0))}catch(S){console.log("Error: "+S)}finally{q.value=!1}},R=()=>{J.warning("Debes de completar todos los espacios requeridos")};return(u,S)=>{const j=y("a-select"),V=y("a-form-item"),X=y("a-input"),ee=y("a-divider"),x=y("a-button"),n=y("a-space"),U=y("a-form"),f=y("a-spin");return l(),P("div",ia,[i(f,{spinning:p.value},{default:t(()=>[i(U,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:C,onFinishFailed:R},{default:t(()=>[m("div",la,[(l(!0),P(K,null,ce(b(Ye),(r,ae)=>(l(),P(K,{key:ae},[r.type==="iSelect"?(l(),v(V,{key:0,class:"item-max",name:r.name,label:r.label,rules:[{required:r.required,message:r.message}]},{default:t(()=>[r.name=="detailprocedure_id"?(l(),v(j,{key:0,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,options:b(a).detailProcedures},null,8,["value","onUpdate:value","options"])):c("",!0),r.name=="modality_id"?(l(),v(j,{key:1,disabled:r.disabled,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,options:b(a).modalities},null,8,["disabled","value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),r.type==="iText"?(l(),v(V,{key:1,name:r.name,label:r.label,rules:[{required:r.required,message:r.message,type:r.email,max:r.max}]},{default:t(()=>[i(X,{value:s[r.name],"onUpdate:value":D=>s[r.name]=D,disabled:r.name==="dni"&&!!s[r.name],maxlength:r.max,placeholder:r.placeholder},null,8,["value","onUpdate:value","disabled","maxlength","placeholder"])]),_:2},1032,["name","label","rules"])):c("",!0),r.type==="iSelectWrite"?(l(),v(V,{key:2,class:"item-max",name:r.name,label:r.label,rules:[{required:r.required,message:r.message}]},{default:t(()=>[r.name=="comercialactivity_id"?(l(),v(j,{key:0,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,"show-search":"",options:b(a).comercialActivities,"filter-option":B},{dropdownRender:t(({menuNode:D})=>[i(b(d),{vnodes:D},null,8,["vnodes"]),i(ee,{style:{margin:"4px 0"}}),i(n,{style:{padding:"4px 8px"}},{default:t(()=>[i(X,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":S[0]||(S[0]=te=>k.value=te),placeholder:"Nueva actividad"},null,8,["value"]),i(x,{type:"text",onClick:T,loading:H.value},{icon:t(()=>[i(b(Ue))]),default:t(()=>[Y(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):c("",!0),r.name=="economicsector_id"?(l(),v(j,{key:1,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,"show-search":"",options:b(a).economicSectors,"filter-option":B},null,8,["value","onUpdate:value","options"])):c("",!0),r.name=="city_id"?(l(),v(j,{key:2,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,"show-search":"",options:b(a).cities,"filter-option":B,onChange:E},null,8,["value","onUpdate:value","options"])):c("",!0),r.name=="province_id"?(l(),v(j,{key:3,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,"show-search":"",options:b(a).provinces,"filter-option":B,onChange:W,disabled:!s.city_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),r.name=="district_id"?(l(),v(j,{key:4,value:s[r.name],"onUpdate:value":D=>s[r.name]=D,"show-search":"",options:b(a).districts,"filter-option":B,disabled:!s.province_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),i(V,null,{default:t(()=>[i(x,{type:"primary",class:"btn-produce","html-type":"submit",loading:q.value},{default:t(()=>[Y("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),m("div",null,I(e()),1)]),_:1},8,["spinning"])])}}},da=le(sa,[["__scopeId","data-v-ff923333"]]);const ra={class:"wrapper-booking"},ca={class:"grid-booking"},ua={__name:"AsesoriaNuevo",props:["info","idCde"],emits:["closeDraw"],setup(F,{emit:N}){const $=JSON.parse(localStorage.getItem("role")),d=ue(),G=JSON.parse(localStorage.getItem("profile")),A=h(!1),z=F,q=N;h(!1),h(null),h(null),d.$patch({components:d.components}),d.$patch({componentThemes:d.componentThemes}),d.$patch({modalities:d.modalities}),d.$patch({cities:d.cities}),d.$patch({economicSectors:d.economicSectors}),d.$patch({comercialActivities:d.comercialActivities}),d.fetchEconomicSectors(),d.fetchComercialActivities(),d.fetchComponents(),d.fetchComponentThemes(),d.fetchModalities(),d.fetchCities(),d.fetchGenders();const k=h(!0),a=ye({cde_id:null,dni:null,economicsector_id:null,comercialactivity_id:null,component_id:null,theme_id:null,modality_id:null,ruc:null,city_id:null,province_id:null,district_id:null,observations:null,user_id:G.user_id}),H=C=>{C=="ruc"&&(a[C]=a[C].replace(/\D/g,""))},p=()=>{a.dni=z.info.documentnumber,d.cities&&(k.value=!1),$.some(C=>C.id===7)?a.component_id=4:a.component_id=null,$.some(C=>C.id===7)?a.modality_id=1:a.modality_id=null,$.some(C=>C.id===7)&&d.fetchComponentThemes(4)},s=C=>{a.theme_id=null,d.fetchComponentThemes(C)},e=C=>{a.province_id=null,a.district_id=null,d.fetchProvinces(C)},T=C=>{a.district_id=null,d.fetchDistricts(C)},E=(C,R)=>{const u=C.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return R.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(u)},W=async()=>{if(A.value=!0,!z.info.id)return J.error("Error al registrar actualiza la página");const C={dni:a.dni,economicsector_id:a.economicsector_id,comercialactivity_id:a.comercialactivity_id,observations:a.observations,user_id:G.user_id,people_id:z.info.id,component_id:a.component_id,theme_id:a.theme_id,modality_id:a.modality_id,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,ruc:a.ruc,cde_id:z.idCde?z.idCde:null};try{const R=await Z({url:"advisory/create",method:"POST",data:C});R.status===200&&(J.success(R.message),a.component_id=null,a.theme_id=null,a.modality_id=null,a.city_id=null,a.province_id=null,a.district_id=null,a.observations=null,a.ruc=null,a.economicsector_id=null,a.comercialactivity_id=null,q("closeDraw",!0))}catch(R){console.log("Error: "+R)}finally{A.value=!1}},B=()=>{J.warning("Debes de completar todos los espacios requeridos")};return(C,R)=>{const u=y("a-select"),S=y("a-form-item"),j=y("a-textarea"),V=y("a-input"),X=y("a-button"),ee=y("a-form"),x=y("a-spin");return l(),P("div",ra,[i(x,{spinning:k.value},{default:t(()=>[i(ee,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:W,onFinishFailed:B},{default:t(()=>[m("div",ca,[(l(!0),P(K,null,ce(b(Ge),(n,U)=>(l(),P(K,{key:U},[n.type==="iSelect"?(l(),v(S,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:t(()=>[n.name=="modality_id"?(l(),v(u,{key:0,disabled:n.disabled,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,options:b(d).modalities},null,8,["disabled","value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iTextarea"?(l(),v(S,{key:1,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:t(()=>[i(j,{value:a[n.name],"onUpdate:value":f=>a[n.name]=f,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iText"?(l(),v(S,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email,max:n.max}]},{default:t(()=>[i(V,{value:a[n.name],"onUpdate:value":f=>a[n.name]=f,maxlength:n.max,onInput:f=>H(n.name),placeholder:n.placeholder,disabled:n.name==="dni"&&!!a[n.name]},null,8,["value","onUpdate:value","maxlength","onInput","placeholder","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iSelectWrite"?(l(),v(S,{key:3,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:t(()=>[n.name=="city_id"?(l(),v(u,{key:0,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).cities,"filter-option":E,onChange:e},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="province_id"?(l(),v(u,{key:1,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).provinces,"filter-option":E,onChange:T,disabled:!a.city_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),n.name=="district_id"?(l(),v(u,{key:2,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).districts,"filter-option":E,disabled:!a.province_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),n.name=="economicsector_id"?(l(),v(u,{key:3,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).economicSectors,"filter-option":E},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="comercialactivity_id"?(l(),v(u,{key:4,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).comercialActivities,"filter-option":E},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="component_id"?(l(),v(u,{key:5,disabled:n.disabled,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).components,"filter-option":E,onChange:s},null,8,["disabled","value","onUpdate:value","options"])):c("",!0),n.name=="theme_id"?(l(),v(u,{key:6,value:a[n.name],"onUpdate:value":f=>a[n.name]=f,"show-search":"",options:b(d).componentThemes,"filter-option":E,disabled:!a.component_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),m("div",null,I(p()),1),i(S,null,{default:t(()=>[i(X,{type:"primary",class:"btn-produce","html-type":"submit",loading:A.value},{default:t(()=>[Y("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},ma=le(ua,[["__scopeId","data-v-84730fb3"]]);const pa={key:0},_a={key:0},va={key:0},fa={__name:"AsesoriasHistorial",props:["totaladvisories","totalformalization10","totalformalization20"],setup(F){const N=F,$=h("1"),d=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110,align:"center"},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Componente",dataIndex:"component",width:20},{title:"Tema",dataIndex:"theme",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:60},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],G=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Detalle del trámite",dataIndex:"detailprocedure",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"RUC",dataIndex:"ruc",width:50},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],A=[{title:"#",dataIndex:"idx",width:30,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:110},{title:"Asesor",dataIndex:"asesor",width:140},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Régimen",dataIndex:"regime",width:80,align:"center"},{title:"Número solicitud constancia",dataIndex:"numbernotary",width:100},{title:"Nombre empresa",dataIndex:"mypename",width:160},{title:"RUC",dataIndex:"ruc",width:80},{title:"Modalidad",dataIndex:"modality",align:"center",width:70},{title:"Ciudad",dataIndex:"city",width:30},{title:"Provincia",dataIndex:"province",width:20},{title:"Distrito",dataIndex:"district",width:20},{title:"Dirección",dataIndex:"address",width:200}],z=q=>Ie(q).format("DD/MM/YYYY HH:mm A");return(q,k)=>{const a=y("a-table"),H=y("a-card"),p=y("a-tab-pane"),s=y("a-tabs");return l(),v(s,{activeKey:$.value,"onUpdate:activeKey":k[0]||(k[0]=e=>$.value=e),type:"card",class:"box-hist"},{default:t(()=>[i(p,{key:"1",tab:"ASESORÍAS"},{default:t(()=>[i(H,null,{default:t(()=>[i(a,{columns:d,"data-source":N.totaladvisories,bordered:"",pagination:!1,size:"small",scroll:{x:1200},"expand-column-width":100},{bodyCell:t(({index:e,column:T,record:E})=>[T.dataIndex==="idx"?(l(),P("span",pa,I(e+1),1)):c("",!0),T.dataIndex==="date_start"?(l(),P(K,{key:1},[Y(I(z(E.createDate)),1)],64)):c("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),i(p,{key:"2",tab:"RUC 10"},{default:t(()=>[i(H,null,{default:t(()=>[i(a,{columns:G,"data-source":N.totalformalization10,bordered:"",pagination:!1,size:"small",scroll:{x:1800},"expand-column-width":100},{bodyCell:t(({index:e,column:T,record:E})=>[T.dataIndex==="idx"?(l(),P("span",_a,I(e+1),1)):c("",!0),T.dataIndex==="date_start"?(l(),P(K,{key:1},[Y(I(z(E.createDate)),1)],64)):c("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),i(p,{key:"3",tab:"RUC 20"},{default:t(()=>[i(H,null,{default:t(()=>[i(a,{columns:A,"data-source":N.totalformalization20,bordered:"",pagination:!1,size:"small",scroll:{x:2200},"expand-column-width":100},{bodyCell:t(({index:e,column:T,record:E})=>[T.dataIndex==="idx"?(l(),P("span",va,I(e+1),1)):c("",!0),T.dataIndex==="date_start"?(l(),P(K,{key:1},[Y(I(z(E.createDate)),1)],64)):c("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},ha=le(fa,[["__scopeId","data-v-01e75dfe"]]);const L=F=>(Pe("data-v-f618bf9b"),F=F(),Le(),F),ya={class:"asesorias"},ga=L(()=>m("h3",{class:"title-produce"},"REGISTRO DE FORMALIZACIONES Y ASESORÍAS",-1)),ba=L(()=>m("br",null,null,-1)),xa={class:"wrapper-s"},wa=L(()=>m("label",{class:"label"},"Seleccione el tipo de documento",-1)),Ca=L(()=>m("label",{class:"label"},"Digite el número de documento",-1)),Ua=L(()=>m("h4",{class:"title-produce"},"RESULTADO DE LA BÚSQUEDA",-1)),Sa=L(()=>m("b",{class:"box-title"},"Apellidos y nombres:",-1)),Ia=L(()=>m("b",{class:"box-title"},"Número de celular:",-1)),Da=L(()=>m("b",{class:"box-title"},"Correo electrónico:",-1)),ka=L(()=>m("b",{class:"box-title"},"Asesorías:",-1)),Aa=L(()=>m("b",{class:"box-title"},"Formalizaciones RUC 20:",-1)),za=L(()=>m("b",{class:"box-title"},"Formalizaciones RUC 10:",-1)),Ra=L(()=>m("h4",{class:"title-produce"},"SELECCIONAR CDE",-1)),Na=L(()=>m("h4",{class:"title-produce"},"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),$a={key:0,class:"card-as",style:{padding:"1rem"}},Oa=L(()=>m("h4",{class:"title-produce"},"HISTORIAL",-1)),Fa=L(()=>m("div",{class:"steps-content"},null,-1)),Ea={class:"pendient"},qa={class:"info"},Ta=L(()=>m("b",null,"Código SID SUNARP",-1)),Pa={class:"code-number"},La=L(()=>m("b",null,"Atendido por: ",-1)),Ma=L(()=>m("b",null,"Fecha de registro: ",-1)),Ya=L(()=>m("div",{style:{"text-align":"center"}},"NUEVO REGISTRO",-1)),Ga=[Ya],Va={__name:"AsesoriasFormalizaciones",setup(F){const N=JSON.parse(localStorage.getItem("role")),$=()=>N.some(O=>O.id===7),d=ue(),G=qe(),A=we(),z=h(0),q=h(null),k=h(null),a=h([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]);d.$patch({cdes:d.cdes}),d.fetchCdes();const H=h(null),p=h(!1),s=h(null),e=h(!1),T=h(!1),E=h(!1),W=h(!1),B=h(!1),C=h(!1),R=h(""),u=h([]),S=h(!1),j=h(0),V=h(!1),X=h([]);h(null);const ee=h([]),x=h([]),n=h([]),U=h(!1),f=O=>{k.value.cde_id=O,localStorage.setItem("profile",JSON.stringify(k.value))},r=(O,g)=>{const Q=O.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return g.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(Q)},ae=()=>{ne(R.value),p.value=!1},D=O=>Ie(O).format("DD/MM/YYYY HH:mm A"),te=()=>{oe()},me=()=>{R.value=R.value.replace(/\D/g,"")},oe=()=>{U.value=!1,R.value="",u.value=[],X.value=[],G.push({name:"asesorias-formalizaciones"})},pe=()=>{if(s.value=null,s.value=u.value,!q.value)return J.warning("Seleccionar un tipo de servicio");q.value=="asesoria"&&(C.value=!0),q.value=="ruc10"&&(B.value=!0),q.value=="ruc20"&&ve()},_e=()=>{H.value=u.value,p.value=!0},o=()=>{j.value=0,W.value=!0,T.value=!1},ve=async()=>{try{V.value=!0;const O=await Z({url:`formalization/list-ruc-20/${u.value.id}`,method:"GET"});if(O.length<1)return o();E.value=O,T.value=!0}catch(O){console.log(O)}finally{V.value=!1}},_=async()=>{S.value=!0;const O=await Z({url:`person/found/${z.value}/${R.value}`,method:"GET"});if(O.status==200)return u.value=O.data,se(u.value.id),S.value=!1},ne=async O=>{if(S.value=!0,!O)return J.warning("Ingresa un número de documento"),S.value=!1;if(z.value==0)return J.warning("Seleccionar el tipo de documento"),S.value=!1;if(z.value==1&&R.value.length<8){J.warning("El número de DNI está incompleto"),S.value=!1;return}const g=await Z({url:`person/found/${z.value}/${R.value}`,method:"GET"});if(g.status==200)return u.value=g.data,se(g.data.id),k.value=JSON.parse(localStorage.getItem("profile")),S.value=!1;if(g.status===404){const Q={type:z.value,access:"asesorias",number:R.value};G.push({name:"registrar-persona",query:Q})}},se=async O=>{try{const{data:g}=await Z({url:`historial/registers/${O}`,method:"GET"});ee.value=g.advisories,x.value=g.formalization10,n.value=g.formalization20,U.value=!0}catch(g){console.error("Error de red:",g)}};return Ce(()=>{A.query.type&&(z.value=A.query.type,R.value=A.query.number)}),(O,g)=>{const Q=y("a-radio"),ie=y("a-tooltip"),De=y("a-radio-group"),ke=y("a-input-search"),fe=y("a-card"),M=y("a-col"),de=y("a-row"),be=y("a-select"),Ae=y("a-button"),re=y("a-drawer"),ze=y("a-tag"),Re=y("a-spin"),Ne=y("a-modal");return l(),P(K,null,[m("div",ya,[ga,ba,i(fe,{class:"card-as card-gray"},{default:t(()=>[b(A).query.dni?(l(),v(b(Je),{key:0,class:"ico-reload",onClick:te})):c("",!0),m("div",xa,[m("div",null,[wa,i(De,{value:z.value,"onUpdate:value":g[0]||(g[0]=w=>z.value=w),onChange:oe,class:"radio-produce"},{default:t(()=>[i(ie,{color:"cyan"},{title:t(()=>[Y("Documento Nacional de Identidad")]),default:t(()=>[i(Q,{value:"1"},{default:t(()=>[Y("DNI")]),_:1})]),_:1}),i(ie,{color:"cyan"},{title:t(()=>[Y("Carnet de Extranjería")]),default:t(()=>[i(Q,{value:"2"},{default:t(()=>[Y("CE")]),_:1})]),_:1}),i(ie,{color:"cyan"},{title:t(()=>[Y("Pasaporte")]),default:t(()=>[i(Q,{value:"3"},{default:t(()=>[Y("PAS")]),_:1})]),_:1}),i(ie,{color:"cyan"},{title:t(()=>[Y("Permiso Temporal de Permanencia")]),default:t(()=>[i(Q,{value:"4"},{default:t(()=>[Y("PTP")]),_:1})]),_:1})]),_:1},8,["value"])]),m("div",null,[Ca,i(ke,{"enter-button":"BUSCAR",value:R.value,"onUpdate:value":g[1]||(g[1]=w=>R.value=w),placeholder:"",loading:S.value,onSearch:ne,onInput:me,class:"search-produce",maxlength:z.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),i(de,{gutter:[16,16]},{default:t(()=>[i(M,{xs:24,sm:24,lg:12},{default:t(()=>[u.value.length!=0?(l(),v(fe,{key:0},{default:t(()=>[Ua,i(b(Te),{class:"box-icoedit",onClick:_e}),i(de,{gutter:[0,2],class:"box-info"},{default:t(()=>[i(M,{xs:12,sm:8},{default:t(()=>[Sa]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>[m("span",null,I(u.value.lastname)+" "+I(u.value.middlename)+", "+I(u.value.name),1)]),_:1}),i(M,{xs:12,sm:8},{default:t(()=>[Ia]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>[m("span",null,I(u.value.phone?u.value.phone:"-"),1)]),_:1}),i(M,{xs:12,sm:8},{default:t(()=>[Da]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>[m("span",null,I(u.value.email?u.value.email:"-"),1)]),_:1}),i(M,{xs:12,sm:8},{default:t(()=>[ka]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>{var w;return[m("span",null,I((w=u.value)==null?void 0:w.idadvisory.length),1)]}),_:1}),i(M,{xs:12,sm:8},{default:t(()=>[Aa]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>{var w;return[m("span",null,I((w=u.value)==null?void 0:w.idformalization20.length),1)]}),_:1}),i(M,{xs:12,sm:8},{default:t(()=>[za]),_:1}),i(M,{xs:12,sm:12},{default:t(()=>{var w;return[m("span",null,I((w=u.value)==null?void 0:w.idformalization10.length),1)]}),_:1})]),_:1})]),_:1})):c("",!0)]),_:1}),i(M,{xs:24,sm:24,lg:12},{default:t(()=>[u.value.length!=0?(l(),v(fe,{key:0,style:{height:"100%"}},{default:t(()=>[i(de,{gutter:[16,24]},{default:t(()=>[$()?c("",!0):(l(),v(M,{key:0,xs:24,sm:18,md:8,lg:8},{default:t(()=>[Ra,i(be,{class:"w-100",value:k.value.cde_id,"onUpdate:value":g[2]||(g[2]=w=>k.value.cde_id=w),options:b(d).cdes,"show-search":"","filter-option":r,onChange:f},null,8,["value","options"])]),_:1})),i(M,{xs:24,sm:18,md:12,lg:17},{default:t(()=>[Na,i(de,{gutter:[10,0]},{default:t(()=>[i(M,{xs:17,sm:18},{default:t(()=>[i(be,{class:"w-100",value:q.value,"onUpdate:value":g[3]||(g[3]=w=>q.value=w),options:a.value},null,8,["value","options"])]),_:1}),i(M,{xs:6},{default:t(()=>[i(Ae,{type:"primary",onClick:pe},{default:t(()=>[Y("REGISTRAR")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1}),U.value?(l(),P("div",$a,[Oa,i(ha,{totaladvisories:ee.value,totalformalization10:x.value,totalformalization20:n.value},null,8,["totaladvisories","totalformalization10","totalformalization20"])])):c("",!0)]),m("section",null,[i(re,{title:"Regitsrar una Formalización con RUC 20",open:W.value,"onUpdate:open":g[5]||(g[5]=w=>W.value=w),placement:"right",width:"880px"},{default:t(()=>[i(oa,{info:s.value,idCde:k.value.cde_id,onCloseDraw:g[4]||(g[4]=w=>(W.value=!1,_()))},null,8,["info","idCde"]),Fa]),_:1},8,["open"]),i(re,{width:"600px",title:"Regitsrar Formalización con RUC 10",open:B.value,"onUpdate:open":g[7]||(g[7]=w=>B.value=w),placement:"right"},{default:t(()=>[i(da,{info:u.value,idCde:k.value.cde_id,onCloseDraw:g[6]||(g[6]=w=>(B.value=!1,_()))},null,8,["info","idCde"])]),_:1},8,["open"]),i(re,{width:"600px",title:"Registrar una asesoría",open:C.value,"onUpdate:open":g[9]||(g[9]=w=>C.value=w),placement:"right"},{default:t(()=>[i(ma,{info:u.value,idCde:k.value.cde_id,onCloseDraw:g[8]||(g[8]=w=>(C.value=!1,_()))},null,8,["info","idCde"])]),_:1},8,["open"]),i(Ne,{open:T.value,"onUpdate:open":g[10]||(g[10]=w=>T.value=w),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:t(()=>[i(Re,{spinning:e.value},{default:t(()=>[(l(!0),P(K,null,ce(E.value,(w,$e)=>(l(),P("div",{key:$e},[m("div",Ea,[m("div",qa,[Ta,m("span",null,[m("b",Pa,[i(ze,{color:"error",style:{margin:"0"}},{default:t(()=>[Y(I(w.codesunarp),1)]),_:2},1024)])]),La,m("span",null,I(w.user.profile.name)+" "+I(w.user.profile.lastname),1),Ma,m("span",null,I(D(w.updated_at)),1)])])]))),128)),m("div",{class:"pendient pendient-btn btn-produce",onClick:o},Ga)]),_:1},8,["spinning"])]),_:1},8,["open"]),i(re,{width:"600",open:p.value,"onUpdate:open":g[11]||(g[11]=w=>p.value=w),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:t(()=>[i(Ve,{onCloseDraw:ae,updateValues:H.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},Za=le(Va,[["__scopeId","data-v-f618bf9b"]]);export{Za as default};
