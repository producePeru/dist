import{a as De,f as Oe,r as $e,b as Ee,R as Fe}from"./ReservaNombre-e6c6670c.js";import{c as l,A as Te,r as b,b as oe,l as ne,d,o as e,e as x,w as n,f as r,F as H,B as Q,i as J,s as v,v as i,j,m as V,h as M,M as ze,N as Ne,T as qe,a as fe,L as Pe,U as Ge,V as Le,g as K,t as $,u as Me,y as Ve,W as Be,X as Je,p as je,k as He,P as Ye}from"./index-d5bfdd40.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{p as ge,m as he,e as be,a as Se}from"./selects-0fbcf7fc.js";var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Ke=We;function ye(U){for(var y=1;y<arguments.length;y++){var h=arguments[y]!=null?Object(arguments[y]):{},m=Object.keys(h);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(h).filter(function(C){return Object.getOwnPropertyDescriptor(h,C).enumerable}))),m.forEach(function(C){Qe(U,C,h[C])})}return U}function Qe(U,y,h){return y in U?Object.defineProperty(U,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):U[y]=h,U}var ce=function(y,h){var m=ye({},y,h.attrs);return l(Te,ye({},m,{icon:Ke}),null)};ce.displayName="RedoOutlined";ce.inheritAttrs=!1;const Xe=ce;const Ze={class:"wrapper-booking"},ea={class:"grid-booking"},aa={__name:"ActoConstitutivo",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){JSON.parse(localStorage.getItem("user"));const h=JSON.parse(localStorage.getItem("info")),m=U,C=y,B=b([]),z=b(!1),p=oe({id_person:null,dni:null,step:2,code_sid_sunarp:null,social_reason:null,num_notary:null,id_notary:null,updated_by:h.id,created_by:h.id,created_dni:h.dni}),N=async()=>{p.id_person=m.info.id_person,p.dni=m.info.dni,p.code_sid_sunarp=m.info.code_sid_sunarp,z.value=!0;try{const o=await V({url:"/formalization20",method:"POST",data:p});o&&(M.success(o.message),p.social_reason=null,p.id_notary=null,p.num_notary=null,C("closeDraw",!0))}catch{M.error("Error al registrar")}finally{z.value=!1}},R=()=>{M.error("Debes de completar todos los espacios requeridos")},w=async()=>{try{const{data:o}=await V({url:"/notaries-select",method:"GET"});B.value=o}catch(o){console.log(o)}};return ne(async()=>{await w()}),(o,A)=>{const q=d("a-select"),s=d("a-form-item"),k=d("a-input-search"),O=d("a-input"),G=d("a-date-picker"),E=d("a-button"),c=d("a-form");return e(),x("div",Ze,[l(c,{layout:"vertical",model:p,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:R},{default:n(()=>[r("div",ea,[(e(!0),x(H,null,Q(J(De),(t,I)=>(e(),x(H,{key:I},[t.type==="iSelect"?(e(),v(s,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="id_notary"?(e(),v(q,{key:0,value:p[t.name],"onUpdate:value":f=>p[t.name]=f,options:B.value,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),t.type==="iSearch"?(e(),v(s,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[l(k,{maxlength:15,loading:o.searchLoading,value:p[t.name],"onUpdate:value":f=>p[t.name]=f,onSearch:o.handleSearchApi,onInput:o.validateNumber},null,8,["loading","value","onUpdate:value","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):i("",!0),t.type==="iText"?(e(),v(s,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:n(()=>[l(O,{value:p[t.name],"onUpdate:value":f=>p[t.name]=f,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0),t.type==="iDate"?(e(),v(s,{key:3,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[l(G,{locale:o.locale,value:o.birthdateDate,"onUpdate:value":A[0]||(A[0]=f=>o.birthdateDate=f),style:{width:"100%"},format:o.dateFormat,disabled:t.disabled},null,8,["locale","value","format","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(s,null,{default:n(()=>[l(E,{type:"primary","html-type":"submit",loading:z.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ta=X(aa,[["__scopeId","data-v-2c865cf4"]]);const oa={class:"wrapper-booking"},na={class:"grid-booking"},la={class:"emp-20"},sa={__name:"MypeFinal",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){JSON.parse(localStorage.getItem("user"));const h=JSON.parse(localStorage.getItem("info")),m=U,C=y,B=b(!1),z=b(!0),p=oe({id_person:null,dni:null,step:3,code_sid_sunarp:null,ruc:null,updated_by:h.id,created_by:h.id,created_dni:h.dni}),N=async()=>{p.id_person=m.info.id_person,p.dni=m.info.dni,p.code_sid_sunarp=m.info.code_sid_sunarp,p.ruc=`20${p.ruc}`,B.value=!0,z.value=!1;const w={ruc:p.ruc,social_reason:m.info.social_reason,category:m.info.category,person_type:2,economic_sector:m.info.economy_sector,department:m.info.department,province:m.info.province,district:m.info.district,address:m.info.address,email:null,phone:null,created_by:1,update_by:1,status:1},o={number:m.info.dni,id_post:4};try{const A=await V({url:"/formalization20",method:"POST",data:p});await V({url:"/formalization-company",method:"POST",data:w}),await V({url:"/person-post",method:"POST",data:o}),M.success(A.message),p.ruc=null,C("closeDraw",!0)}catch{M.error("Error al registrar")}finally{B.value=!1}},R=()=>{M.error("Debes de completar todos los espacios requeridos")};return(w,o)=>{const A=d("a-input"),q=d("a-form-item"),s=d("a-button"),k=d("a-form");return e(),x("div",oa,[l(k,{layout:"vertical",model:p,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:R},{default:n(()=>[r("div",na,[(e(!0),x(H,null,Q(J(Oe),(O,G)=>(e(),x(H,{key:G},[O.type==="iText"?(e(),v(q,{key:0,name:O.name,label:O.label,rules:[{required:O.required,message:O.message,type:O.email,max:O.max,min:O.min}]},{default:n(()=>[l(A,{value:p[O.name],"onUpdate:value":E=>p[O.name]=E,disabled:O.disabled},{prefix:n(()=>[ze(r("span",la,"20",512),[[Ne,z.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(q,null,{default:n(()=>[l(s,{type:"primary","html-type":"submit",loading:B.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ra=X(sa,[["__scopeId","data-v-773feb14"]]),we=qe("pagestore",{state:()=>({count:0,userPhoto:null}),actions:{increment(){count++},async logout(){const U="https://programa.soporte-pnte.com/",y="http://127.0.0.1:5173/",h=window.location.hostname=="127.0.0.1"?y:U;try{await V({url:"/logout",method:"POST"})&&(fe.remove("token"),localStorage.clear(),window.location.href=h)}catch(m){console.error("Error de red:",m)}},async imgProfile(){console.log("aaaaaalalalalllll");try{const U=window.location.hostname=="127.0.0.1"?"http://127.0.0.1:8000/api/v1":"https://apituempresa.soporte-pnte.com/api/v1",y=fe.get("token"),h=JSON.parse(localStorage.getItem("info")),m=await Pe.get(`${U}/profile-photo/${h.id}/${h.dni}`,{responseType:"blob",headers:{Accept:"application/json",Authorization:`Bearer ${y}`}}),C=window.URL.createObjectURL(new Blob([m.data]));this.userPhoto=C}catch(U){console.error("Error al descargar el archivo",U)}}}});const ia={class:"wrapper-booking"},ua={class:"grid-booking"},ca={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const h=Le({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),m=we(),C=U;JSON.parse(localStorage.getItem("user"));const B=JSON.parse(localStorage.getItem("info")),z=y,p=b(),N=b([]),R=b([]),w=b([]),o=b([]),A=b(!1),q=b(!1),s=oe({detail_procedure:null,modality:null,economy_sector:null,category:null,department:null,province:null,district:null,id_person:C.info.id,created_by:B.id,created_dni:B.dni}),k=(g,D)=>{const F=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return D.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(F)},O=async()=>{const g=s;A.value=!0;try{const D=await V({url:"/formalization10",method:"POST",data:g});if(D.status==400)return M.error(D.message),m.logout();D&&(M.success(D.message),s.detail_procedure=null,s.modality=null,s.economy_sector=null,s.category=null,s.department=null,s.province=null,s.district=null,z("closeDraw",!0))}catch{M.error("Error al registrar")}finally{A.value=!1}},G=async()=>{q.value=!0;try{await V({url:"/create-comercial-activities",method:"POST",data:{name:p.value}}),f(),p.value=""}catch{M.error("Error al registrar")}finally{q.value=!1}},E=()=>{M.warning("Debes de completar todos los espacios requeridos")},c=async()=>{try{const{data:g}=await K({url:"/departaments",method:"GET"});let D=g.map(F=>({label:F.label,value:F.id}));N.value=[...N.value,...D]}catch(g){console.log(g)}},t=async g=>{s.province=null,s.district=null,R.value=[],w.value=[];try{const{data:D}=await K({url:`/province/${g}`,method:"GET"});let F=D.map(u=>({label:u.label,value:u.id}));R.value=[...R.value,...F]}catch(D){console.log(D)}},I=async g=>{s.district=null,w.value=[];try{const{data:D}=await K({url:`/district/${g}`,method:"GET"});let F=D.map(u=>({label:u.label,value:u.id}));w.value=[...w.value,...F]}catch(D){console.log(D)}},f=async()=>{try{const{data:g}=await V({url:"/comercial-activities",method:"GET"});o.value=g}catch(g){console.log(g)}};return ne(()=>{c(),f()}),(g,D)=>{const F=d("a-select"),u=d("a-form-item"),W=d("a-input"),L=d("a-divider"),Z=d("a-button"),Y=d("a-space"),le=d("a-form");return e(),x("div",ia,[l(le,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:O,onFinishFailed:E},{default:n(()=>[r("div",ua,[(e(!0),x(H,null,Q(J($e),(a,_)=>(e(),x(H,{key:_},[a.type==="iSelect"?(e(),v(u,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[a.name=="detail_procedure"?(e(),v(F,{key:0,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,options:J(ge)},null,8,["value","onUpdate:value","options"])):i("",!0),a.name=="modality"?(e(),v(F,{key:1,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,options:J(he)},null,8,["value","onUpdate:value","options"])):i("",!0),a.name=="economy_sector"?(e(),v(F,{key:2,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,options:J(be)},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),a.type==="iText"?(e(),v(u,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:n(()=>[l(W,{value:s[a.name],"onUpdate:value":T=>s[a.name]=T,disabled:a.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0),a.type==="iSelectWrite"?(e(),v(u,{key:2,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[a.name=="category"?(e(),v(F,{key:0,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,"show-search":"",options:o.value,"filter-option":k},{dropdownRender:n(({menuNode:T})=>[l(J(h),{vnodes:T},null,8,["vnodes"]),l(L,{style:{margin:"4px 0"}}),l(Y,{style:{padding:"4px 8px"}},{default:n(()=>[l(W,{ref_for:!0,ref:"inputRef",value:p.value,"onUpdate:value":D[0]||(D[0]=se=>p.value=se),placeholder:"Nueva actividad"},null,8,["value"]),l(Z,{type:"text",onClick:G,loading:q.value},{icon:n(()=>[l(J(Ge))]),default:n(()=>[j(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):i("",!0),a.name=="department"?(e(),v(F,{key:1,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,"show-search":"",options:N.value,"filter-option":k,onChange:t},null,8,["value","onUpdate:value","options"])):i("",!0),a.name=="province"?(e(),v(F,{key:2,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,"show-search":"",options:R.value,"filter-option":k,onChange:I},null,8,["value","onUpdate:value","options"])):i("",!0),a.name=="district"?(e(),v(F,{key:3,value:s[a.name],"onUpdate:value":T=>s[a.name]=T,"show-search":"",options:w.value,"filter-option":k},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(u,null,{default:n(()=>[l(Z,{type:"primary","html-type":"submit",loading:A.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},da=X(ca,[["__scopeId","data-v-d6dca133"]]);const pa={class:"wrapper-booking"},ma={class:"grid-booking"},_a={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const h=we(),m=U;JSON.parse(localStorage.getItem("user"));const C=JSON.parse(localStorage.getItem("info")),B=y,z=b([]),p=b([]),N=b([]),R=b([]),w=b(!1),o=oe({component:null,tema_compoment:null,modality:null,department:null,province:null,district:null,description:null,id_person:m.info.id,created_by:C.id,created_dni:C.dni}),A=(c,t)=>{const I=c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},q=async()=>{const c=o;w.value=!0;try{const t=await V({url:"/create-consulting",method:"POST",data:c});if(t.status==400)return M.error(t.message),h.logout();t&&(M.success(t.message),o.component=null,o.tema_compoment=null,o.modality=null,o.department=null,o.province=null,o.district=null,o.description=null,B("closeDraw",!0))}catch{M.error("Error al registrar")}finally{w.value=!1}},s=()=>{M.warning("Debes de completar todos los espacios requeridos")},k=async()=>{try{const{data:c}=await K({url:"/departaments",method:"GET"});let t=c.map(I=>({label:I.label,value:I.id}));z.value=[...z.value,...t]}catch(c){console.log(c)}},O=async c=>{o.province=null,o.district=null,p.value=[],N.value=[];try{const{data:t}=await K({url:`/province/${c}`,method:"GET"});let I=t.map(f=>({label:f.label,value:f.id}));p.value=[...p.value,...I]}catch(t){console.log(t)}},G=async c=>{o.district=null,N.value=[];try{const{data:t}=await K({url:`/district/${c}`,method:"GET"});let I=t.map(f=>({label:f.label,value:f.id}));N.value=[...N.value,...I]}catch(t){console.log(t)}},E=async()=>{try{const{data:c}=await V({url:"/theme-component",method:"GET"});R.value=c}catch(c){console.log(c)}};return ne(async()=>{await k(),await E()}),(c,t)=>{const I=d("a-select"),f=d("a-form-item"),g=d("a-textarea"),D=d("a-button"),F=d("a-form");return e(),x("div",pa,[l(F,{layout:"vertical",model:o,name:"basic",autocomplete:"off",onFinish:q,onFinishFailed:s},{default:n(()=>[r("div",ma,[(e(!0),x(H,null,Q(J(Ee),(u,W)=>(e(),x(H,{key:W},[u.type==="iSelect"?(e(),v(f,{key:0,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[u.name=="component"?(e(),v(I,{key:0,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,options:J(Se)},null,8,["value","onUpdate:value","options"])):i("",!0),u.name=="modality"?(e(),v(I,{key:1,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,options:J(he)},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),u.type==="iTextarea"?(e(),v(f,{key:1,name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[l(g,{value:o[u.name],"onUpdate:value":L=>o[u.name]=L,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):i("",!0),u.type==="iSelectWrite"?(e(),v(f,{key:2,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[u.name=="tema_compoment"?(e(),v(I,{key:0,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:R.value,"filter-option":A},null,8,["value","onUpdate:value","options"])):i("",!0),u.name=="department"?(e(),v(I,{key:1,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:z.value,"filter-option":A,onChange:O},null,8,["value","onUpdate:value","options"])):i("",!0),u.name=="province"?(e(),v(I,{key:2,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:p.value,"filter-option":A,onChange:G},null,8,["value","onUpdate:value","options"])):i("",!0),u.name=="district"?(e(),v(I,{key:3,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:N.value,"filter-option":A},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(f,null,{default:n(()=>[l(D,{type:"primary","html-type":"submit",loading:w.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},va=X(_a,[["__scopeId","data-v-76b22ab7"]]);const fa={key:0},ya={key:1},ga={key:2},ha={key:0},ba={key:1,class:"steps"},Sa={style:{"text-align":"right"}},wa={key:0},ka={key:1},xa={key:3},Ua={__name:"AsesoriasHistorial",props:["info"],setup(U){const y=U,h=b("1"),m=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"},{title:"Registrado por",dataIndex:"asesor_create"},{title:"Último asesor atendido",dataIndex:"asesor_update"}],C=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"detalle"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],B=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],z=R=>be.find(w=>w.value===R).label,p=R=>ge.find(w=>w.value===R).label,N=R=>Se.find(w=>w.value===R).label;return(R,w)=>{const o=d("a-empty"),A=d("a-table"),q=d("a-card"),s=d("a-tab-pane"),k=d("a-progress"),O=d("a-space"),G=d("a-tabs");return e(),v(G,{activeKey:h.value,"onUpdate:activeKey":w[0]||(w[0]=E=>h.value=E),type:"card",class:"box-hist"},{default:n(()=>[l(s,{key:"1",tab:"ASESORÍAS"},{default:n(()=>[l(q,null,{default:n(()=>{var E,c,t;return[((E=y.info[0])==null?void 0:E.adv.length)==0?(e(),v(o,{key:0})):i("",!0),((c=y.info[0])==null?void 0:c.adv.length)>=1?(e(),v(A,{key:1,columns:B,"data-source":(t=y.info[0])==null?void 0:t.adv,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:f,record:g})=>[f.dataIndex==="idx"?(e(),x("span",fa,$(I+1),1)):i("",!0),f.dataIndex==="component"?(e(),x("span",ya,$(N(g.component)),1)):i("",!0),f.dataIndex==="modality"?(e(),x("span",ga,$(g.modality==1?"Virtual":"Presencial"),1)):i("",!0)]),_:1},8,["data-source"])):i("",!0)]}),_:1})]),_:1}),l(s,{key:"2",tab:"RUC 20"},{default:n(()=>[l(q,null,{default:n(()=>{var E,c,t;return[((E=y.info[0])==null?void 0:E.ruc20.length)==0?(e(),v(o,{key:0})):i("",!0),((c=y.info[0])==null?void 0:c.ruc20.length)>=1?(e(),v(A,{key:1,columns:m,"data-source":(t=y.info[0])==null?void 0:t.ruc20,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:f,record:g})=>[f.dataIndex==="idx"?(e(),x("span",ha,$(I+1),1)):i("",!0),f.dataIndex==="progress"?(e(),x("div",ba,[r("span",Sa,$(g.step==1?"Reserva de nombre":g.step==2?"Proceso de notaría":"Formalizado"),1),l(O,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[l(k,{percent:g.step*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):i("",!0),f.dataIndex==="sector"?(e(),x(H,{key:2},[r("div",null,$(z(g.sector)),1),r("div",null,$(g.category),1)],64)):i("",!0)]),_:1},8,["data-source"])):i("",!0)]}),_:1})]),_:1}),l(s,{key:"3",tab:"RUC 10"},{default:n(()=>[l(q,null,{default:n(()=>{var E,c,t;return[((E=y.info[0])==null?void 0:E.ruc10.length)==0?(e(),v(o,{key:0})):i("",!0),((c=y.info[0])==null?void 0:c.ruc10.length)>=1?(e(),v(A,{key:1,columns:C,"data-source":(t=y.info[0])==null?void 0:t.ruc10,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:f,record:g})=>[f.dataIndex==="idx"?(e(),x("span",wa,$(I+1),1)):i("",!0),f.dataIndex==="detalle"?(e(),x("span",ka,$(p(g.detail_procedure)),1)):i("",!0),f.dataIndex==="sector"?(e(),x(H,{key:2},[r("div",null,$(z(g.economy_sector)),1),r("div",null,$(g.category),1)],64)):i("",!0),f.dataIndex==="modality"?(e(),x("span",xa,$(g.modality==1?"Virtual":"Presencial"),1)):i("",!0)]),_:1},8,["data-source"])):i("",!0)]}),_:1})]),_:1})]),_:1},8,["activeKey"])}}},Ia=X(Ua,[["__scopeId","data-v-dc6fa541"]]);const P=U=>(je("data-v-5b2e7ac6"),U=U(),He(),U),Ra={class:"asesorias"},Aa=P(()=>r("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),Ca=P(()=>r("br",null,null,-1)),Da={class:"wrapper-s"},Oa=P(()=>r("label",{class:"label"},"Seleccione el tipo de documento",-1)),$a=P(()=>r("label",{class:"label"},"Digite el número de documento",-1)),Ea={class:"column-2"},Fa={class:"info-update"},Ta=P(()=>r("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),za={class:"info-personal"},Na=P(()=>r("span",null,"Apellidos y nombres: ",-1)),qa=P(()=>r("span",null,"Número de celular:",-1)),Pa=P(()=>r("span",null,"Correo electrónico:",-1)),Ga=P(()=>r("span",null,"Asesorías:",-1)),La=P(()=>r("span",null,"Formalizaciones RUC 20:",-1)),Ma={class:"alert-incomplete"},Va={key:0,class:"alert"},Ba={class:"small"},Ja=P(()=>r("span",null,"Formalizaciones RUC 10:",-1)),ja=P(()=>r("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Ha={class:"card-as-btn"},Ya=P(()=>r("h4",null,"HISTORIAL",-1)),Wa={class:"steps-content"},Ka=["onClick"],Qa={key:0,class:"info-tag"},Xa=P(()=>r("b",null,"Paso",-1)),Za={key:1,class:"info-tag"},et=P(()=>r("b",null,"Siguiente paso",-1)),at={key:2,class:"info-tag"},tt=P(()=>r("b",null,"Siguiente paso",-1)),ot={class:"info"},nt=P(()=>r("b",null,"Código SID SUNARP",-1)),lt=P(()=>r("b",null,"Última consulta",-1)),st=P(()=>r("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),rt=[st],it={__name:"AsesoriasFormalizaciones",setup(U){const y=Me(),h=Ve(),m=b(1),C=b(),B=b([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),z=b(!1),p=b(!1),N=b(!1),R=b(!1),w=b(!1),o=b(!1),A=b(!1),q=b(!1),s=b(""),k=b([]),O=b(!1),G=b(0),E=b(!1),c=b([]),t=a=>Ye(a).format("DD/MM/YYYY HH:mm A"),I=()=>{g()},f=()=>{s.value=s.value.replace(/\D/g,"")},g=()=>{s.value="",k.value=[],c.value=[],y.push({name:"asesorias-formalizaciones"})},D=()=>{if(!C.value)return M.warning("Selecciona un tipo de servicio");C.value=="asesoria"&&(q.value=!0),C.value=="ruc10"&&(A.value=!0),C.value=="ruc20"&&W()},F=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],u=()=>{const a={rol:"solicitante",access:3,dni:s.value,type:"asesoria",typedoc:m.value==1?"dni":"ce"};y.push({name:"actualizar-persona",query:a})},W=async()=>{try{if(p.value={id:k.value.id,dni:k.value.number_document},E.value=!0,w.value)return R.value=!0;const{data:a}=await V({url:`/my-formalizations20/${k.value.number_document}`,method:"GET"});if(a.length>=1){w.value=a,R.value=!0;return}o.value=!0}catch(a){console.log(a)}finally{E.value=!1}},L=async a=>{z.value=!0;try{const{data:_}=await V({url:`find-formalization20/${a}`,method:"GET"});G.value=_.step,R.value=!1,o.value=!0,N.value=_}catch(_){console.log(_)}finally{z.value=!1}},Z=async a=>{c.value=[];try{const _=await V({url:`/historial-formalization/${a.number_document}/${a.id}`,method:"GET"});c.value=[...c.value,_]}catch(_){console.log(_)}},Y=async()=>{if(w.value=!1,G.value=0,m.value==1&&s.value.length<8)return M.warning("El número a buscar es incorrecto");O.value=!0;try{const a=await V({url:`/applicant-new/${s.value}`,method:"GET"});if(a.status==205){const _={rol:"solicitante",access:3,dni:s.value};y.push({name:"registrar-persona",query:_})}else k.value=a,Z(a)}catch(a){console.log("You have an error",a)}finally{O.value=!1}},le=async()=>{h.query.typedoc=="ce"?m.value=2:m.value=1;const a=await V({url:`/applicant-new/${h.query.dni}`,method:"GET"});s.value=a.number_document,k.value=a,await Z(a)};return ne(()=>{h.query.dni&&le()}),(a,_)=>{const T=d("a-radio"),se=d("a-radio-group"),ke=d("a-input-search"),ae=d("a-card"),xe=d("a-select"),Ue=d("a-button"),Ie=d("a-step"),Re=d("a-steps"),re=d("a-drawer"),ie=d("a-tag"),Ae=d("a-spin"),Ce=d("a-modal");return e(),x(H,null,[r("div",Ra,[Aa,Ca,l(ae,{class:"card-as"},{default:n(()=>[J(h).query.dni?(e(),v(J(Xe),{key:0,class:"ico-reload",onClick:I})):i("",!0),r("div",Da,[r("div",null,[Oa,l(se,{value:m.value,"onUpdate:value":_[0]||(_[0]=S=>m.value=S),onChange:g},{default:n(()=>[l(T,{value:1},{default:n(()=>[j("DNI")]),_:1}),l(T,{value:2},{default:n(()=>[j("CE")]),_:1})]),_:1},8,["value"])]),r("div",null,[$a,l(ke,{"enter-button":"BUSCAR",value:s.value,"onUpdate:value":_[1]||(_[1]=S=>s.value=S),placeholder:"",loading:O.value,onSearch:Y,onInput:f,maxlength:m.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),r("div",Ea,[k.value.length!=0?(e(),v(ae,{key:0,class:"card-as"},{default:n(()=>{var S,te,ue,de,pe,me,_e,ve;return[r("div",Fa,[Ta,l(J(Be),{class:"ico-edit",onClick:u})]),r("div",za,[Na,r("span",null,$(k.value.last_name)+" "+$(k.value.middle_name)+", "+$(k.value.name),1),qa,r("span",null,[r("span",null,$(k.value.phone?k.value.phone:"-"),1)]),Pa,r("span",null,$(k.value.email?k.value.email:"-"),1),Ga,r("b",null,$((S=c.value[0])!=null&&S.adv?(te=c.value[0])==null?void 0:te.adv.length:""),1),La,r("div",Ma,[r("b",null,$((ue=c.value[0])!=null&&ue.ruc20?(de=c.value[0])==null?void 0:de.ruc20.length:""),1),((pe=c.value[0])==null?void 0:pe.ruc20.filter(ee=>ee.step===1||ee.step===2).length)>=1?(e(),x("span",Va,[l(J(Je)),r("span",Ba,"Tienes "+$((me=c.value[0])==null?void 0:me.ruc20.filter(ee=>ee.step===1||ee.step===2).length)+" procesos pendientes",1)])):i("",!0)]),Ja,r("b",null,$((_e=c.value[0])!=null&&_e.ruc10?(ve=c.value[0])==null?void 0:ve.ruc10.length:""),1)])]}),_:1})):i("",!0),k.value.length!=0?(e(),v(ae,{key:1,class:"card-as"},{default:n(()=>[ja,r("div",Ha,[l(xe,{style:{"min-width":"200px"},value:C.value,"onUpdate:value":_[2]||(_[2]=S=>C.value=S),options:B.value},null,8,["value","options"]),l(Ue,{type:"primary",onClick:D},{default:n(()=>[j("REGISTRAR")]),_:1})])]),_:1})):i("",!0)]),k.value.length!=0?(e(),v(ae,{key:0,class:"card-as"},{default:n(()=>[Ya,l(Ia,{info:c.value},null,8,["info"])]),_:1})):i("",!0)]),r("section",null,[l(re,{width:"510",title:"Formalización con RUC 20",open:o.value,"onUpdate:open":_[6]||(_[6]=S=>o.value=S),placement:"right"},{default:n(()=>[l(Re,{current:G.value,size:"small",class:"steps"},{default:n(()=>[(e(),x(H,null,Q(F,S=>l(Ie,{key:S.title,title:S.title},null,8,["title"])),64))]),_:1},8,["current"]),r("div",Wa,[G.value==0?(e(),v(Fe,{key:0,info:p.value,onCloseDraw:_[3]||(_[3]=S=>(o.value=!1,w.value=!1,Y()))},null,8,["info"])):i("",!0),G.value==1?(e(),v(ta,{key:1,info:N.value,onCloseDraw:_[4]||(_[4]=S=>(o.value=!1,w.value=!1,Y()))},null,8,["info"])):i("",!0),G.value==2?(e(),v(ra,{key:2,info:N.value,onCloseDraw:_[5]||(_[5]=S=>(o.value=!1,w.value=!1,Y()))},null,8,["info"])):i("",!0)])]),_:1},8,["open"]),l(re,{title:"Formalización con RUC 10",open:A.value,"onUpdate:open":_[8]||(_[8]=S=>A.value=S),placement:"right"},{default:n(()=>[l(da,{info:k.value,onCloseDraw:_[7]||(_[7]=S=>(A.value=!1,Y()))},null,8,["info"])]),_:1},8,["open"]),l(re,{title:"Nueva asesoría",open:q.value,"onUpdate:open":_[10]||(_[10]=S=>q.value=S),placement:"right"},{default:n(()=>[l(va,{info:k.value,onCloseDraw:_[9]||(_[9]=S=>(q.value=!1,Y()))},null,8,["info"])]),_:1},8,["open"]),l(Ce,{open:R.value,"onUpdate:open":_[12]||(_[12]=S=>R.value=S),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:n(()=>[l(Ae,{spinning:z.value},{default:n(()=>[(e(!0),x(H,null,Q(w.value,(S,te)=>(e(),x("div",{key:te,class:"pendient",onClick:ue=>L(S.id)},[S.step==0?(e(),x("div",Qa,[Xa,j(),l(ie,{color:"error"},{default:n(()=>[j("Reserva de nombre")]),_:1})])):i("",!0),S.step==1?(e(),x("div",Za,[et,j(),l(ie,{color:"warning"},{default:n(()=>[j("Acto constitutivo")]),_:1})])):i("",!0),S.step==2?(e(),x("div",at,[tt,j(),l(ie,{color:"success"},{default:n(()=>[j("Formalizar")]),_:1})])):i("",!0),r("div",ot,[nt,r("span",null,$(S.code_sid_sunarp),1),lt,r("span",null,$(t(S.updated_at)),1)])],8,Ka))),128)),r("div",{class:"pendient pendient-btn",onClick:_[11]||(_[11]=S=>(o.value=!0,R.value=!1,G.value=0))},rt)]),_:1},8,["spinning"])]),_:1},8,["open"])])],64)}}},mt=X(it,[["__scopeId","data-v-5b2e7ac6"]]);export{mt as default};
