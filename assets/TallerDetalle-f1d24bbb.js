import{u as X,k as H,r as h,l as J,b as y,o as e,d as t,e as l,c as _,w as u,t as s,F as o,n as $,m as K,i as g,v as f,h as z,T as N,s as n,z as W,p as Y,j as Z}from"./index-223837af.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const v=k=>(Y("data-v-9bd6a1a8"),k=k(),Z(),k),te=v(()=>l("br",null,null,-1)),ae=v(()=>l("span",null,"Resultados de las evaluaciones",-1)),ne={class:"c-primary"},le=v(()=>l("span",null,"fecha del taller",-1)),se={class:"average"},oe={key:0},de={key:0},ie={key:0},re={class:"ncheck"},ue={key:0},ce={class:"ncheck"},_e={key:0},pe={key:0},he={key:0},ge={class:"average-final"},ye={key:0},ve={key:0},ke={key:0},me={key:0},fe={class:"paginator"},xe={key:0,class:"details-modal"},Ie=v(()=>l("b",null,"RUC",-1)),we=v(()=>l("b",null,"Sugerencia",-1)),be={__name:"TallerDetalle",setup(k){X();const V=H(),S=h([]),x=h([]),I=h(!1),w=h(!1),P=h(1e3);h("60vh");const b=h(!1),m=h(!1),C=h(0);h(null);const E=h({page:1}),B=[{title:"RUC",dataIndex:"ruc_mype",fixed:"left",width:150},{title:"TE1",dataIndex:"te1",align:"center",width:60,key:"te1"},{title:"TE2",dataIndex:"te2",align:"center",width:60,key:"te2"},{title:"TE3",dataIndex:"te3",align:"center",width:60,key:"te3"},{title:"TE4",dataIndex:"te4",align:"center",width:60,key:"te4"},{title:"TE5",dataIndex:"te5",align:"center",width:60,key:"te5"},{title:"Nota",dataIndex:"te_note",align:"center",width:70},{title:"TS1",dataIndex:"ts1",align:"center",width:60,key:"ts1"},{title:"TS2",dataIndex:"ts2",align:"center",width:60,key:"ts2"},{title:"TS3",dataIndex:"ts3",align:"center",width:60,key:"ts3"},{title:"TS4",dataIndex:"ts4",align:"center",width:60,key:"ts4"},{title:"TS5",dataIndex:"ts5",align:"center",width:60,key:"ts5"},{title:"Nota",dataIndex:"ts_note",align:"center",width:70},{title:"Promedio Final",dataIndex:"average_final",align:"center",width:120},{title:"C1",dataIndex:"c1",align:"center",width:70},{title:"C2",dataIndex:"c2",align:"center",width:70},{title:"C3",dataIndex:"c3",align:"center",width:70},{title:"Promedio Satisfacción",dataIndex:"average_satisfaction",align:"center",width:120},{title:"Sugerencias",dataIndex:"suggest",align:"center",width:100}],F=d=>{E.value.page=d,T()},U=async()=>{try{w.value=!0;const d=await $({url:"/workshop/details/average",method:"PUT"});T(),K.success(d.message)}catch(d){console.error("Error de red:",d)}finally{w.value=!1}},A=d=>{m.value=d,b.value=!0},T=async()=>{var d;try{I.value=!0;const i=await $({url:`/workshop/details/${V.query.id}`,method:"GET",params:E.value});if(S.value=i.data,C.value=i.total,i.data.length<1)return;M((d=i==null?void 0:i.data[0])==null?void 0:d.workshop_id)}catch(i){console.error("Error de red:",i)}finally{I.value=!1}},M=async d=>{try{const i=await $({url:`/test-all-questions/${d}`,method:"GET"});x.value=i}catch(i){console.error("Error de red:",i)}};return J(T),(d,i)=>{const G=y("router-link"),q=y("a-breadcrumb-item"),O=y("a-breadcrumb"),D=y("a-button"),R=y("a-tooltip"),Q=y("a-table"),j=y("a-pagination"),L=y("a-modal");return e(),t(o,null,[l("div",null,[_(O,null,{default:u(()=>[_(q,null,{default:u(()=>[_(G,{to:"/admin/ruta-digital/talleres"},{default:u(()=>[g("Volver a Talleres de Ruta Digital")]),_:1})]),_:1}),_(q,null,{default:u(()=>[g("Detalles del taller")]),_:1})]),_:1}),te,l("div",null,[ae,l("h3",ne,s(d.$route.query.taller),1),le,l("h3",null,s(d.$route.query.date),1)]),l("div",se,[_(D,{type:"primary",loading:w.value,onClick:U},{default:u(()=>[g("Promediar")]),_:1},8,["loading"])]),_(Q,{bordered:"",class:"ant-table-striped",scroll:{x:P.value},columns:B,"data-source":S.value,pagination:!1,loading:I.value,size:"small"},{headerCell:u(({column:r})=>[(e(),t(o,null,f(5,(a,c)=>(e(),t(o,{key:c},[r.key===`te${c+1}`?(e(),t("div",oe,[l("span",null,[_(R,null,{title:u(()=>[g(s(x.value[`q_testin_${c+1}`]),1)]),default:u(()=>[g(" "+s(`TE${c+1}`)+" ",1),_(z(N),{class:"tooltip-table"})]),_:2},1024)])])):n("",!0)],64))),64)),(e(),t(o,null,f(5,(a,c)=>(e(),t(o,{key:c},[r.key===`ts${c+1}`?(e(),t("div",de,[l("span",null,[_(R,null,{title:u(()=>[g(s(x.value[`q_testout_${c+1}`]),1)]),default:u(()=>[g(" "+s(`TS${c+1}`)+" ",1),_(z(N),{class:"tooltip-table"})]),_:2},1024)])])):n("",!0)],64))),64))]),bodyCell:u(({column:r,record:a})=>[(e(),t(o,null,f(5,(c,p)=>(e(),t(o,{key:p},[r.dataIndex===`te${p+1}`?(e(),t("div",ie,[l("span",re,s(a[`te${p+1}`]===4?"✔️":a[`te${p+1}`]===0?"❌":a[`te${p+1}`]===null?"-":""),1)])):n("",!0)],64))),64)),(e(),t(o,null,f(5,(c,p)=>(e(),t(o,{key:p},[r.dataIndex===`ts${p+1}`?(e(),t("div",ue,[l("span",ce,s(a[`ts${p+1}`]===4?"✔️":a[`ts${p+1}`]===0?"❌":a[`ts${p+1}`]===null?"-":""),1)])):n("",!0)],64))),64)),r.dataIndex=="te_note"?(e(),t(o,{key:0},[a.te_note?(e(),t("span",_e,[l("b",null,s(a.te_note),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="ts_note"?(e(),t(o,{key:1},[a.ts_note?(e(),t("span",pe,[l("b",null,s(a.ts_note),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="average_final"?(e(),t(o,{key:2},[a.average_final?(e(),t("span",he,[l("b",ge,s(a.average_final),1)])):n("",!0)],64)):n("",!0),r.dataIndex=="average_satisfaction"?(e(),t(o,{key:3},[a.average_satisfaction?(e(),t("span",ye,[l("b",null,s(a.average_satisfaction)+" %",1)])):n("",!0)],64)):n("",!0),r.dataIndex=="c1"?(e(),t(o,{key:4},[a.c1?(e(),t("span",ve,s(a.c1*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="c2"?(e(),t(o,{key:5},[a.c1?(e(),t("span",ke,s(a.c2*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="c3"?(e(),t(o,{key:6},[a.c1?(e(),t("span",me,s(a.c3*20)+" % ",1)):n("",!0)],64)):n("",!0),r.dataIndex=="suggest"?(e(),t(o,{key:7},[a.suggestions?(e(),W(D,{key:0,size:"small",onClick:c=>A(a)},{default:u(()=>[g("Ver")]),_:2},1032,["onClick"])):n("",!0)],64)):n("",!0)]),_:1},8,["scroll","data-source","loading"])]),l("div",fe,[_(j,{size:"small",total:C.value,pageSize:20,onChange:F,showSizeChanger:!1},null,8,["total"])]),_(L,{open:b.value,"onUpdate:open":i[0]||(i[0]=r=>b.value=r),title:"Sugerencias",footer:null,width:"350px"},{default:u(()=>[m.value?(e(),t("div",xe,[Ie,g(),l("span",null,s(m.value.ruc_mype),1),we,g(),l("span",null,s(m.value.suggestions),1)])):n("",!0)]),_:1},8,["open"])],64)}}},Se=ee(be,[["__scopeId","data-v-9bd6a1a8"]]);export{Se as default};
