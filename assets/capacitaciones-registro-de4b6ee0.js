import{_ as M}from"./TableComponent-8102067e.js";import{r as o,a as U,k as D,X as c,b as h,o as H,d as b,c as r,w as n,p as z,m as A,f as F,e as w}from"./index-a14a530f.js";import{E as R}from"./EditarEmpresario-8b12df63.js";import"./es-d615680c.js";import"./icoexcel-1b303edf.js";import"./selectes-295eb48e.js";import"./MoreOutlined-5b3fd7e3.js";import"./FormComponent-0e689fc1.js";import"./quill.snow-2822fd29.js";import"./useBusinessman-59b73b47.js";import"./_plugin-vue_export-helper-c27b6911.js";const V={class:"layout-content"},Y=["onClick"],ee={__name:"capacitaciones-registro",setup(G){JSON.parse(localStorage.getItem("profile"));const u=o([]),m=o(0),p=o(100),d=o(!1),f=o(!1),s=o(!1),g=o(null),v=o(!1),E=o([]),t=U({asesor:null,name:null,page:1}),_=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"Fecha/Hora",fixed:"left",dataIndex:"typedocument",align:"center",width:120},{title:"Especialista",dataIndex:"documentnumber",fixed:"left",width:120,align:"center"},{title:"Tema",dataIndex:"name",width:170},{title:"Modalidad",dataIndex:"last_name",width:180},{title:"Participantes",dataIndex:"city",align:"center",width:140},{title:"Estado",dataIndex:"province",align:"center",width:140},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],x=()=>{console.log("handleNew...")},y=async()=>{s.value=!1,await l()},S=async()=>{f.value=!0},I=async e=>{t.page=e,await l()},N=async e=>{e&&(t.page=1,await l())},T=e=>{g.value=e,s.value=!0},l=async()=>{d.value=!0;try{const e={page:t.page};t.year&&(e.year=z(t.year).format("YYYY")),t.asesor&&(e.asesor=t.asesor),t.name&&(e.name=t.name);const a=await A({url:"businessman/list",method:"GET",params:e});a.status==200&&(u.value=a.data.data,m.value=a.data.total,p.value=a.data.per_page,v.value=a.rol,a.rol!=2&&await k())}catch(e){console.error("Error de red:",e)}finally{d.value=!1}},k=async()=>{try{const e=await F({url:"select/asesores-report",method:"GET"});e.status==200&&(E.value=e.data)}catch{console.log("Failed to delete")}};return D(async()=>{await l()}),c("search",t),c("loading",d),c("loadingFile",f),(e,a)=>{const O=h("a-menu-item"),B=h("a-drawer");return H(),b("div",V,[r(M,{title:"SEGUIMIENTO",new:!1,textNuevo:"NUEVO EVENTO",columns:_,titleSearch:"NÃšMERO DE DOCUMENTO",pageSize:p.value,nameTotal:"Capacitaciones",dataSource:u.value,total:m.value,onHandleNew:x,onHandleDownloadExcel:S,onHandleSearch:N,onHandlePaginator:I},{header:n(()=>a[1]||(a[1]=[w("div",null," Setiembre ",-1)])),"data-cell":n(({column:i,record:C})=>a[2]||(a[2]=[])),"custom-options":n(({record:i})=>[r(O,null,{default:n(()=>[w("a",{onClick:C=>T(i)},"Editar",8,Y)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),r(B,{width:"500",title:"Actualizar datos del empresario",open:s.value,"onUpdate:open":a[0]||(a[0]=i=>s.value=i),placement:"right"},{default:n(()=>[r(R,{updateInfoBusinessman:g.value,onRegistered:y},null,8,["updateInfoBusinessman"])]),_:1},8,["open"])])}}};export{ee as default};
