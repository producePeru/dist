import{u as H,y as J,r as h,k as K,b as y,o as e,d as t,e as n,c as u,w as c,t as s,F as o,z as S,m as W,i as g,x as f,h as N,Q as R,s as l,q as Y,p as Z,j as ee}from"./index-400de86f.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";const v=k=>(Z("data-v-9757ec24"),k=k(),ee(),k),ae=v(()=>n("br",null,null,-1)),ne=v(()=>n("span",null,"Detalles:",-1)),le={class:"c-primary details-title"},se=v(()=>n("span",null,"fecha del taller",-1)),oe=v(()=>n("span",null,"Total inscritas",-1)),ie={class:"average"},de={key:0},re={key:0},ce={key:0},ue={class:"ncheck"},_e={key:0},pe={class:"ncheck"},he={key:0},ge={key:0},ye={key:0},ve={class:"average-final"},ke={key:0},me={key:0},fe={key:0},xe={key:0},Ie={class:"paginator"},we={key:0,class:"details-modal"},be=v(()=>n("b",null,"RUC",-1)),Te=v(()=>n("b",null,"Sugerencia",-1)),$e={__name:"TallerDetalle",setup(k){H();const V=J(),C=h([]),x=h([]),I=h(!1),w=h(!1),P=h(1e3);h("60vh");const b=h(!1),m=h(!1),T=h(0);h(null);const E=h({page:1}),B=[{title:"RUC",dataIndex:"ruc_mype",fixed:"left",width:150},{title:"TE1",dataIndex:"te1",align:"center",width:60,key:"te1"},{title:"TE2",dataIndex:"te2",align:"center",width:60,key:"te2"},{title:"TE3",dataIndex:"te3",align:"center",width:60,key:"te3"},{title:"TE4",dataIndex:"te4",align:"center",width:60,key:"te4"},{title:"TE5",dataIndex:"te5",align:"center",width:60,key:"te5"},{title:"Nota",dataIndex:"te_note",align:"center",width:70},{title:"TS1",dataIndex:"ts1",align:"center",width:60,key:"ts1"},{title:"TS2",dataIndex:"ts2",align:"center",width:60,key:"ts2"},{title:"TS3",dataIndex:"ts3",align:"center",width:60,key:"ts3"},{title:"TS4",dataIndex:"ts4",align:"center",width:60,key:"ts4"},{title:"TS5",dataIndex:"ts5",align:"center",width:60,key:"ts5"},{title:"Nota",dataIndex:"ts_note",align:"center",width:70},{title:"Promedio Final",dataIndex:"average_final",align:"center",width:120},{title:"C1",dataIndex:"c1",align:"center",width:70},{title:"C2",dataIndex:"c2",align:"center",width:70},{title:"C3",dataIndex:"c3",align:"center",width:70},{title:"Promedio Satisfacción",dataIndex:"average_satisfaction",align:"center",width:120},{title:"Sugerencias",dataIndex:"suggest",align:"center",width:100}],F=i=>{E.value.page=i,$()},U=async()=>{try{w.value=!0;const i=await S({url:"/workshop/details/average",method:"PUT"});$(),W.success(i.message)}catch(i){console.error("Error de red:",i)}finally{w.value=!1}},A=i=>{m.value=i,b.value=!0},$=async()=>{var i;try{I.value=!0;const d=await S({url:`/workshop/details/${V.query.id}`,method:"GET",params:E.value});if(C.value=d.data,T.value=d.total,d.data.length<1)return;M((i=d==null?void 0:d.data[0])==null?void 0:i.workshop_id)}catch(d){console.error("Error de red:",d)}finally{I.value=!1}},M=async i=>{try{const d=await S({url:`/test-all-questions/${i}`,method:"GET"});x.value=d}catch(d){console.error("Error de red:",d)}};return K(()=>{$()}),(i,d)=>{const Q=y("router-link"),q=y("a-breadcrumb-item"),G=y("a-breadcrumb"),O=y("a-tag"),D=y("a-button"),z=y("a-tooltip"),j=y("a-table"),L=y("a-pagination"),X=y("a-modal");return e(),t(o,null,[n("div",null,[u(G,null,{default:c(()=>[u(q,null,{default:c(()=>[u(Q,{to:"/admin/ruta-digital/talleres"},{default:c(()=>[g("Volver a Talleres de Ruta Digital")]),_:1})]),_:1}),u(q,null,{default:c(()=>[g("Detalles del taller")]),_:1})]),_:1}),ae,n("div",null,[ne,n("h3",le,s(i.$route.query.taller),1),se,n("h3",null,s(i.$route.query.date),1),oe,n("div",null,[u(O,{color:"processing"},{default:c(()=>[g(s(T.value),1)]),_:1})])]),n("div",ie,[u(D,{type:"primary",loading:w.value,onClick:U},{default:c(()=>[g("Promediar")]),_:1},8,["loading"])]),u(j,{bordered:"",class:"ant-table-striped",scroll:{x:P.value},columns:B,"data-source":C.value,pagination:!1,loading:I.value,size:"small"},{headerCell:c(({column:r})=>[(e(),t(o,null,f(5,(a,_)=>(e(),t(o,{key:_},[r.key===`te${_+1}`?(e(),t("div",de,[n("span",null,[u(z,null,{title:c(()=>[g(s(x.value[`q_testin_${_+1}`]),1)]),default:c(()=>[g(" "+s(`TE${_+1}`)+" ",1),u(N(R),{class:"tooltip-table"})]),_:2},1024)])])):l("",!0)],64))),64)),(e(),t(o,null,f(5,(a,_)=>(e(),t(o,{key:_},[r.key===`ts${_+1}`?(e(),t("div",re,[n("span",null,[u(z,null,{title:c(()=>[g(s(x.value[`q_testout_${_+1}`]),1)]),default:c(()=>[g(" "+s(`TS${_+1}`)+" ",1),u(N(R),{class:"tooltip-table"})]),_:2},1024)])])):l("",!0)],64))),64))]),bodyCell:c(({column:r,record:a})=>[(e(),t(o,null,f(5,(_,p)=>(e(),t(o,{key:p},[r.dataIndex===`te${p+1}`?(e(),t("div",ce,[n("span",ue,s(a[`te${p+1}`]===4?"✔️":a[`te${p+1}`]===0?"❌":a[`te${p+1}`]===null?"-":""),1)])):l("",!0)],64))),64)),(e(),t(o,null,f(5,(_,p)=>(e(),t(o,{key:p},[r.dataIndex===`ts${p+1}`?(e(),t("div",_e,[n("span",pe,s(a[`ts${p+1}`]===4?"✔️":a[`ts${p+1}`]===0?"❌":a[`ts${p+1}`]===null?"-":""),1)])):l("",!0)],64))),64)),r.dataIndex=="te_note"?(e(),t(o,{key:0},[a.te_note?(e(),t("span",he,[n("b",null,s(a.te_note),1)])):l("",!0)],64)):l("",!0),r.dataIndex=="ts_note"?(e(),t(o,{key:1},[a.ts_note?(e(),t("span",ge,[n("b",null,s(a.ts_note),1)])):l("",!0)],64)):l("",!0),r.dataIndex=="average_final"?(e(),t(o,{key:2},[a.average_final?(e(),t("span",ye,[n("b",ve,s(a.average_final),1)])):l("",!0)],64)):l("",!0),r.dataIndex=="average_satisfaction"?(e(),t(o,{key:3},[a.average_satisfaction?(e(),t("span",ke,[n("b",null,s(a.average_satisfaction)+" %",1)])):l("",!0)],64)):l("",!0),r.dataIndex=="c1"?(e(),t(o,{key:4},[a.c1?(e(),t("span",me,s(a.c1*20)+" % ",1)):l("",!0)],64)):l("",!0),r.dataIndex=="c2"?(e(),t(o,{key:5},[a.c1?(e(),t("span",fe,s(a.c2*20)+" % ",1)):l("",!0)],64)):l("",!0),r.dataIndex=="c3"?(e(),t(o,{key:6},[a.c1?(e(),t("span",xe,s(a.c3*20)+" % ",1)):l("",!0)],64)):l("",!0),r.dataIndex=="suggest"?(e(),t(o,{key:7},[a.suggestions?(e(),Y(D,{key:0,size:"small",onClick:_=>A(a)},{default:c(()=>[g("Ver")]),_:2},1032,["onClick"])):l("",!0)],64)):l("",!0)]),_:1},8,["scroll","data-source","loading"])]),n("div",Ie,[u(L,{size:"small",total:T.value,pageSize:20,onChange:F,showSizeChanger:!1},null,8,["total"])]),u(X,{open:b.value,"onUpdate:open":d[0]||(d[0]=r=>b.value=r),title:"Sugerencias",footer:null,width:"350px"},{default:c(()=>[m.value?(e(),t("div",we,[be,g(),n("span",null,s(m.value.ruc_mype),1),Te,g(),n("span",null,s(m.value.suggestions),1)])):l("",!0)]),_:1},8,["open"])],64)}}},Ee=te($e,[["__scopeId","data-v-9757ec24"]]);export{Ee as default};
