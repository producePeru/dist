import{r as p,a as de,I as re,v as ce,k as ue,b as r,o as l,d as u,e as _,c as o,w as a,i as c,F as m,z as B,t as s,s as i,q as I,h as V,U as pe,J as me,P as _e,p as fe,j as ge,Z as he,m as ve}from"./index-35c2d705.js";import{S as Ie}from"./DrawerSolicitante.componente-f2705afb.js";import{u as xe}from"./selectes-6ff0a8ca.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";import{M as ye}from"./MoreOutlined-98ae2477.js";import"./es-36023a69.js";const G=x=>(fe("data-v-cb5d6a55"),x=x(),ge(),x),Se=G(()=>_("h3",{class:"title-produce"},"SOLICITANTES",-1)),ke={key:7,class:"lowercase"},Ce={key:10,class:"uppercase"},be=["onClick"],Ee=G(()=>_("a",null,"Eliminar",-1)),Oe={class:"paginator-asesories"},F=50,De={__name:"SolicitantesLista",setup(x){JSON.parse(localStorage.getItem("profile")),xe();const b=p(window.innerHeight-100),H=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",width:120},{title:"NOMBRES",dataIndex:"name",width:170},{title:"APELLIDOS",dataIndex:"apellidos",width:170},{title:"REGIÓN",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:100},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:90},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"HIJOS",dataIndex:"hasSoon",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:200},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],f=de({names:""}),S=p(0),g=p({page:0}),J=p(1200),E=p([]),k=p(!1),w=p(!1),O=p(null);p(null);const $=()=>{f.names||console.log("Res")},q=d=>({DNI:"blue",CE:"yellow",PAS:"red",PTP:"purple"})[d],j=()=>{h(f.names)},Q=d=>{g.value.page=d,h()},C=()=>{b.value=window.innerHeight-280},X=()=>{h(),w.value=!1},Y=async d=>{try{const e=await B({url:`person/delete/${d.id}`,method:"DELETE"});e.status==500?he.warning({title:"Aviso",content:e.message}):(h(),ve.success(e.message))}catch(e){console.error("Error de red:",e)}},Z=d=>{O.value=d,w.value=!0},K=re(()=>d=>((g.value.page==0?1:g.value.page)-1)*F+d+1),h=async d=>{try{k.value=!0;let e;d?e={...f.names&&{search:d},page:1}:e={...g.value.page!=0&&{page:g.value.page}};const y=await B({url:"person/list",method:"GET",params:e});E.value=y.data,S.value=y.total}catch(e){console.error("Error de red:",e)}finally{k.value=!1}};return ce(()=>{window.removeEventListener("resize",C)}),ue(()=>{window.addEventListener("resize",C),C(),h()}),(d,e)=>{const y=r("a-input"),D=r("a-form-item"),N=r("a-button"),W=r("a-form"),v=r("a-tag"),A=r("a-menu-item"),ee=r("a-popconfirm"),te=r("a-menu"),ae=r("a-dropdown"),ne=r("a-table"),oe=r("a-pagination"),le=r("a-drawer");return l(),u(m,null,[_("div",null,[Se,o(W,{layout:"inline",model:f,onFinish:j,class:"form-filter"},{default:a(()=>[o(D,null,{default:a(()=>[o(y,{value:f.names,"onUpdate:value":e[0]||(e[0]=n=>f.names=n),placeholder:"BUSCAR por Nombres o Apellidos",style:{width:"240px"},onInput:$},null,8,["value"])]),_:1}),o(D,null,{default:a(()=>[o(N,{type:"primary","html-type":"submit",disabled:f.names===""},{default:a(()=>[c(" BUSCAR ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),o(ne,{bordered:"",scroll:{x:J.value,y:b.value},class:"solicitantes-table",columns:H,"data-source":E.value,pagination:!1,loading:k.value,size:"small"},{bodyCell:a(({column:n,record:t,index:se})=>{var R,L,T,z,P,M,U;return[n.dataIndex=="idx"?(l(),u(m,{key:0},[c(s(K.value(se)),1)],64)):i("",!0),n.dataIndex=="tdocument"?(l(),I(v,{key:1,color:q(t.typedocument.avr)},{default:a(()=>[c(s(t.typedocument.avr),1)]),_:2},1032,["color"])):i("",!0),n.dataIndex=="apellidos"?(l(),u(m,{key:2},[c(s(t.lastname)+" "+s(t.middlename),1)],64)):i("",!0),n.dataIndex=="city"?(l(),u(m,{key:3},[c(s((R=t.city)==null?void 0:R.name),1)],64)):i("",!0),n.dataIndex=="province"?(l(),u(m,{key:4},[c(s((L=t.province)==null?void 0:L.name),1)],64)):i("",!0),n.dataIndex=="district"?(l(),u(m,{key:5},[c(s((T=t.district)==null?void 0:T.name),1)],64)):i("",!0),n.dataIndex=="gender"?(l(),u(m,{key:6},[c(s((z=t.gender)==null?void 0:z.name),1)],64)):i("",!0),n.dataIndex=="email"?(l(),u("span",ke,s(t.email),1)):i("",!0),n.dataIndex=="sickx"?(l(),I(v,{key:8,color:t.sick=="no"?"blue":"pink"},{default:a(()=>[c(s(t.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):i("",!0),n.dataIndex=="hasSoon"?(l(),u(m,{key:9},[t.hasSoon=="no"?(l(),I(v,{key:0,color:"pink"},{default:a(()=>[c("NO")]),_:1})):i("",!0),t.hasSoon=="si"?(l(),I(v,{key:1,color:"green"},{default:a(()=>[c("SI")]),_:1})):i("",!0)],64)):i("",!0),n.dataIndex=="registerby"?(l(),u("span",Ce,s((P=t.user[0])==null?void 0:P.profile.name)+" "+s((M=t.user[0])==null?void 0:M.profile.lastname)+" "+s((U=t.user[0])==null?void 0:U.profile.middlename),1)):i("",!0),n.dataIndex=="actions"?(l(),I(ae,{key:11,trigger:["click"]},{overlay:a(()=>[o(te,null,{default:a(()=>[o(A,null,{default:a(()=>[_("a",{onClick:ie=>Z(t)},"Editar",8,be)]),_:2},1024),o(A,null,{default:a(()=>[o(ee,{title:"¿Seguro de eliminar?",onConfirm:ie=>Y(t)},{icon:a(()=>[o(V(pe),{style:{color:"red"}})]),default:a(()=>[Ee]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[_("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=me(()=>{},["prevent"]))},[o(N,{shape:"circle",icon:_e(V(ye)),size:"small"},null,8,["icon"])])]),_:2},1024)):i("",!0)]}),_:1},8,["scroll","data-source","loading"])]),_("div",Oe,[_("span",null,[o(v,{color:"blue"},{default:a(()=>[_("b",null,s(S.value),1)]),_:1}),c("Solicitantes")]),o(oe,{size:"small",total:S.value,pageSize:F,onChange:Q,showSizeChanger:!1},null,8,["total"])]),o(le,{width:"600",open:w.value,"onUpdate:open":e[2]||(e[2]=n=>w.value=n),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:a(()=>[o(Ie,{onCloseDraw:X,updateValues:O.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},Pe=we(De,[["__scopeId","data-v-cb5d6a55"]]);export{Pe as default};
