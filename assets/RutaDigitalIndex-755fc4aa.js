import{l as z,r as u,a as re,b as p,o as r,d as q,c as m,w as c,I as ae,J as de,e as R,F as j,s as me,x as v,h as M,q as b,H as ye,i as K,m as w,K as A,Y as te,f as ne,g as fe,E as Ee,X as Se,j as Ie,t as ue,a0 as De,p as we}from"./index-78dbf2c8.js";import{_ as Ce}from"./icoexcel-1b303edf.js";import{u as pe}from"./selectes-d2f06a6a.js";import"./es-dbca09a1.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";import{d as xe}from"./downloadExcel-14c2f90f.js";import{M as Re}from"./MoreOutlined-14e99f1d.js";const Oe={class:"agreement-wrapper"},Ne={class:"grid-item"},Te="DD/MM/YYYY",ke={__name:"RutaDigitalEmpresario",emits:["stepNumber"],setup(Z,{emit:N}){z.locale("es");const l=pe(),E=N;l.$patch({typeDocuments:l.typeDocuments}),l.$patch({cities:l.countries}),l.$patch({cities:l.cities}),l.$patch({provinces:l.provinces}),l.$patch({districts:l.districts}),l.$patch({genders:l.genders}),l.fetchTypeDocuments(),l.fetchCountries(),l.fetchCities(),l.fetchGenders();const g=u({typedocument_id:{type:"iSelect",label:"TIPO DE DOCUMENTO",name:"typedocument_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},documentnumber:{type:"iSearch",label:"NÚMERO DOCUMENTO",name:"documentnumber",required:!0,message:"Escribe número de documento",disabled:!0},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribir apellido paterno",disabled:!0},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribir apellido materno",disabled:!0},name:{type:"iText",label:"NOMBRES",name:"name",required:!0,message:"Escribir nombre",disabled:!0},country_id:{type:"iSelect",label:"PAÍS ORIGEN",name:"country_id",required:!0,message:"Seleccionar país de origen",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN RESIDENTE",name:"city_id",required:!0,message:"Seleccionar región",disabled:!0},province_id:{type:"iSelect",label:"PROVINCIA RESIDENTE",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO RESIDENTE",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Escribir dirección",disabled:!0},birthday:{type:"iDate",label:"FECHA DE NACIMIENTO",name:"birthday",required:!0,message:"Seleccionar fecha",disabled:!0},phone:{type:"iText",label:"CELULAR",name:"phone",required:!0,message:"Número de celular",min:9,max:9,disabled:!0},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!1,message:"Ingresar email",email:"email",disabled:!0},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},sick:{type:"iSelect",label:"¿TIENE DISCAPACIDAD?",name:"sick",required:!0,message:"¿Tiene discapacidad?",disabled:!0},hasSoon:{type:"iSelect",label:"¿TIENE HIJOS? (Opcional)",name:"hasSoon",required:!1,message:"¿Tiene hijos?",disabled:!0}}),S=u(null),T=u(null),I=u(!1),C=u(null),U=u(!1);u(!0);const i=[{value:"yes",label:"SI"},{value:"no",label:"NO"}],F=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}],e=re({typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,country_id:null,city_id:null,province_id:null,district_id:null,address:null,birthday:null,phone:null,email:null,gender_id:null,sick:null,hasSoon:null}),G=s=>{s&&(g.value.documentnumber.disabled=!1,e.documentnumber=null)},P=s=>{const a=e[s]?e[s].trim():"";e[s]=a},x=(s,a)=>{if(!a)return Promise.reject("La fecha es requerida");const d=new Date,n=new Date(a);let k=d.getFullYear()-n.getFullYear();const y=d.getMonth()-n.getMonth();return(y<0||y===0&&d.getDate()<n.getDate())&&k--,k<18||k>99?Promise.reject("La edad debe estar entre 18 y 99 años"):Promise.resolve()},B=async s=>{try{const{data:a}=await ne({url:`select/provinces/${s}`,method:"GET"});S.value=a}catch(a){console.error("Error de red:",a)}},H=async s=>{try{const{data:a}=await ne({url:`select/districts/${s}`,method:"GET"});T.value=a}catch(a){console.error("Error de red:",a)}},$=(s,a)=>{const d=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(d)},V=()=>{g.value.lastname.disabled=!1,g.value.middlename.disabled=!1,g.value.name.disabled=!1,g.value.city_id.disabled=!1,g.value.province_id.disabled=!1,g.value.district_id.disabled=!1,g.value.address.disabled=!1,g.value.phone.disabled=!1,g.value.email.disabled=!1,g.value.birthday.disabled=!1,g.value.gender_id.disabled=!1,g.value.sick.disabled=!1,g.value.hasSoon.disabled=!1},Y=async s=>{if(I.value=!0,!s)return w.warning("Debes de ingresar el número de documento"),I.value=!1;try{const a=await A({url:`ruta-digital/is-new/${e.typedocument_id}/${e.documentnumber}`,method:"GET"});if(a.status===200&&(e.lastname=a.data.lastname,e.middlename=a.data.middlename,e.name=a.data.name,e.country_id=a.data.country_id,e.city_id=a.data.city_id,B(a.data.city_id),e.province_id=a.data.province_id,H(a.data.province_id),e.district_id=a.data.district_id,e.address=a.data.address,a.data.birthday&&(e.birthday=z(a.data.birthday,"YYYY-MM-DD")),e.phone=a.data.phone,e.email=a.data.email,e.gender_id=a.data.gender_id,e.sick=a.data.sick,e.hasSoon=a.data.hasSoon,V()),a.status===300&&(D(),e.typedocument_id===1))if(e.documentnumber.length>=8)try{const d=await A({url:`user/only-dni/${e.documentnumber}`,method:"GET"});d.status===429?te.open({message:"ALERTA",description:"Se superó el número de consultas, coméntale a tu supervisor para que actualice el token"}):d.status===200&&(e.lastname=d.data.apellidoPaterno,e.middlename=d.data.apellidoMaterno,e.name=d.data.nombres),V()}catch(d){console.error("Error fetching DNI data:",d),te.open({message:"Error",description:"Hubo un problema al consultar el DNI. Por favor, intente nuevamente."})}else return w.error("COMPLETA EL NÚMERO DE DNI")}catch{console.log("There was an error")}finally{return I.value=!1}},J=()=>{e.documentnumber=e.documentnumber.replace(/\D/g,"")},h=()=>{e.phone=e.phone.replace(/\D/g,"")},o=s=>{e.province_id=null,e.district_id=null,B(s)},f=s=>{e.district_id=null,H(s)},D=()=>{e.lastname=null,e.middlename=null,e.name=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.phone=null,e.email=null,e.birthday=null,e.gender_id=null,e.sick=null,C.value=null,e.country_id=null,e.hasSoon=null},O=async()=>{if(U.value=!0,e.typedocument_id!==1&&e.country_id==155)return U.value=!1,w.error("Por favor cambiar el país, no está permitido para esta opción, Gracias");const s={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,country_id:e.country_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,birthday:z(e.birthday).format("YYYY-MM-DD"),phone:e.phone,email:e.email,gender_id:e.gender_id,sick:e.sick,hasSoon:e.hasSoon};try{const a=await A({url:"ruta-digital/businessman",method:"POST",data:s});if(a.status==200){e.typedocument_id=null,e.documentnumber=null;const d={id:a.id,dni:a.dni,step:1};E("stepNumber",d),D()}}catch{w.error("No se pudo registrar a este usuario")}finally{U.value=!1}},Q=()=>{w.error("COMPLETA LOS VALORES REQUERIDOS")};return(s,a)=>{const d=p("a-select"),n=p("a-form-item"),k=p("a-input-search"),y=p("a-input"),ie=p("a-date-picker"),se=p("a-button"),le=p("a-form"),W=p("a-spin");return r(),q("div",Oe,[m(W,{spinning:I.value},{default:c(()=>[m(le,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:O,onFinishFailed:Q,onKeydown:a[0]||(a[0]=ae(de(()=>{},["prevent"]),["enter"]))},{default:c(()=>[R("div",Ne,[(r(!0),q(j,null,me(g.value,(t,oe)=>(r(),q(j,{key:oe},[t.type==="iSelect"?(r(),v(n,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[t.name=="typedocument_id"?(r(),v(d,{key:0,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:M(l).typeDocuments,disabled:t.disabled,onChange:G},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),t.name=="country_id"?(r(),v(d,{key:1,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:M(l).countries,"show-search":"","filter-option":$},null,8,["value","onUpdate:value","options"])):b("",!0),t.name=="city_id"?(r(),v(d,{key:2,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:M(l).cities,"show-search":"","filter-option":$,onChange:o,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),t.name=="province_id"?(r(),v(d,{key:3,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:S.value,"show-search":"","filter-option":$,onChange:f,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),t.name=="district_id"?(r(),v(d,{key:4,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:T.value,"show-search":"","filter-option":$,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),t.name=="gender_id"?(r(),v(d,{key:5,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:M(l).genders,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),t.name=="sick"?(r(),v(d,{key:6,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:i,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])):b("",!0),t.name=="hasSoon"?(r(),v(d,{key:7,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,options:F,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])):b("",!0)]),_:2},1032,["name","label","rules"])):b("",!0),t.type==="iSearch"?(r(),v(n,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[m(k,{loading:I.value,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,onKeyup:ae(Y,["enter"]),onSearch:Y,onInput:J,maxlength:e.typedocument_id==1?8:20,disabled:t.disabled},null,8,["loading","value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):b("",!0),t.type==="iText"?(r(),v(n,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max,min:t.min}]},{default:c(()=>[t.name=="phone"?(r(),v(y,{key:0,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,disabled:t.disabled,maxlength:t.max,onInput:h},null,8,["value","onUpdate:value","disabled","maxlength"])):(r(),v(y,{key:1,value:e[t.name],"onUpdate:value":_=>e[t.name]=_,disabled:t.disabled,maxlength:t.max,onBlur:_=>P(t.name)},null,8,["value","onUpdate:value","disabled","maxlength","onBlur"]))]),_:2},1032,["name","label","rules"])):b("",!0),t.type==="iDate"?(r(),v(n,{key:3,name:t.name,label:t.label,rules:[{required:t.required,message:t.message},{validator:x,message:"La edad debe estar entre 18 y 99 años"}]},{default:c(()=>[m(ie,{locale:M(ye),value:e[t.name],"onUpdate:value":_=>e[t.name]=_,style:{width:"100%"},format:Te,placeholder:"día/mes/año",disabled:t.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):b("",!0)],64))),128))]),m(n,null,{default:c(()=>[m(se,{class:"btn-produce",type:"primary","html-type":"submit",loading:U.value},{default:c(()=>a[1]||(a[1]=[K("SIGUIENTE")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ae=ce(ke,[["__scopeId","data-v-236e5392"]]);const Ue={class:"agreement-wrapper"},Le={class:"grid-item"},Me={key:3},qe={__name:"RutaDigitalEmpresa",props:["dataStepOne"],emits:["close"],setup(Z,{emit:N}){const l=pe(),E=N,g=Z;l.$patch({cities:l.cities}),l.$patch({provinces:l.provinces}),l.$patch({districts:l.districts}),l.$patch({economicSectors:l.economicSectors}),l.$patch({comercialActivities:l.comercialActivities}),l.fetchCities(),l.fetchEconomicSectors(),l.fetchComercialActivities();const S=u({ruc:{type:"iSearch",label:"NÚMERO RUC",name:"ruc",required:!0,message:"Escribe número de documento",disabled:!1,max:11},space:{type:"space"},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Escribir nombre comercial",disabled:!0},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Escribir razón social",disabled:!0},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!0},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Escribir dirección",disabled:!0},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!0},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar sector económico",disabled:!0}}),T=u(null),I=u(null),C=u(!1);u(null);const U=u(!1);u(!0);const i=re({}),F=h=>{const o=i[h]?i[h].trim():"";i[h]=o},e=async h=>{try{const{data:o}=await ne({url:`select/provinces/${h}`,method:"GET"});T.value=o}catch(o){console.error("Error de red:",o)}},G=async h=>{try{const{data:o}=await ne({url:`select/districts/${h}`,method:"GET"});I.value=o}catch(o){console.error("Error de red:",o)}},P=(h,o)=>{const f=h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return o.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(f)},x=()=>{S.value.comercialName.disabled=!1,S.value.socialReason.disabled=!1,S.value.city_id.disabled=!1,S.value.province_id.disabled=!1,S.value.district_id.disabled=!1,S.value.address.disabled=!1,S.value.comercialactivity_id.disabled=!1,S.value.economicsector_id.disabled=!1},B=async h=>{if(h.length!==11)return w.warning("El RUC debe tener exactamente 11 caracteres.");if(!/^\d+$/.test(h))return w.warning("El RUC debe contener solo números.");if(!/^(10|15|20)/.test(h))return w.warning("El RUC debe comenzar con 10, 15 o 20.");C.value=!0;try{const o=await A({url:`mype/get-by-ruc/${i.ruc}`,method:"GET"});if(o.status===200&&(i.comercialName=o.data.comercialName,i.socialReason=o.data.socialReason,i.city_id=o.data.city_id,e(o.data.city_id),i.province_id=o.data.province_id,G(o.data.province_id),i.district_id=o.data.district_id,i.address=o.data.address,i.comercialactivity_id=o.data.comercialactivity_id,i.economicsector_id=o.data.economicsector_id,x()),o.status===404)if(V(),i.ruc.length>=11)try{const f=await A({url:`mype/search-api-ruc/${i.ruc}`,method:"GET"});f.status===429?te.open({message:"ALERTA",description:"Se superó el número de consultas, coméntale a tu supervisor para que actualice el token"}):f.status===200&&(i.socialReason=f.data.socialReason,i.address=f.data.address),x()}catch(f){console.error("Error fetching DNI data:",f),te.open({message:"Error",description:"Hubo un problema al consultar el RUC. Por favor, revise el número registrado."})}else return w.error("COMPLETA EL NÚMERO DEL RUC")}catch{console.log("There was an error")}finally{return C.value=!1}},H=h=>{i.province_id=null,i.district_id=null,e(h)},$=h=>{i.district_id=null,G(h)},V=()=>{i.comercialName=null,i.socialReason=null,i.city_id=null,i.province_id=null,i.district_id=null,i.address=null,i.comercialactivity_id=null,i.economicsector_id=null},Y=async()=>{U.value=!0;const h={ruc:i.ruc,comercialName:i.comercialName,socialReason:i.socialReason,city_id:i.city_id,province_id:i.province_id,district_id:i.district_id,address:i.address,comercialactivity_id:i.comercialactivity_id,economicsector_id:i.economicsector_id};try{const o=await A({url:"ruta-digital/mype",method:"POST",data:h});if(o.status==200){const f={ruc:o.ruc,dni:g.dataStepOne.dni,person_id:g.dataStepOne.id,mype_id:o.id},D=await A({url:"ruta-digital/create",method:"POST",data:f});if(D.status==409)return w.error(D.message);D.status==200&&(V(),i.ruc=null,w.success(D.message),E("close"))}}catch{w.error("No se pudo registrar a este usuario")}finally{U.value=!1}},J=()=>{w.error("COMPLETA LOS VALORES REQUERIDOS")};return(h,o)=>{const f=p("a-select"),D=p("a-form-item"),O=p("a-input-search"),Q=p("a-input"),s=p("a-button"),a=p("a-form"),d=p("a-spin");return r(),q("div",Ue,[m(d,{spinning:C.value},{default:c(()=>[m(a,{layout:"vertical",model:i,name:"basic",autocomplete:"off",onFinish:Y,onFinishFailed:J,onKeydown:o[0]||(o[0]=ae(de(()=>{},["prevent"]),["enter"]))},{default:c(()=>[R("div",Le,[(r(!0),q(j,null,me(S.value,(n,k)=>(r(),q(j,{key:k},[n.type==="iSelect"?(r(),v(D,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:c(()=>[n.name=="city_id"?(r(),v(f,{key:0,value:i[n.name],"onUpdate:value":y=>i[n.name]=y,options:M(l).cities,"show-search":"","filter-option":P,onChange:H,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),n.name=="province_id"?(r(),v(f,{key:1,value:i[n.name],"onUpdate:value":y=>i[n.name]=y,options:T.value,"show-search":"","filter-option":P,onChange:$,disabled:!i.city_id},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),n.name=="district_id"?(r(),v(f,{key:2,value:i[n.name],"onUpdate:value":y=>i[n.name]=y,options:I.value,"show-search":"","filter-option":P,disabled:!i.province_id},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),n.name=="economicsector_id"?(r(),v(f,{key:3,value:i[n.name],"onUpdate:value":y=>i[n.name]=y,"show-search":"",options:M(l).economicSectors,"filter-option":P,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):b("",!0),n.name=="comercialactivity_id"?(r(),v(f,{key:4,value:i[n.name],"onUpdate:value":y=>i[n.name]=y,"show-search":"",options:M(l).comercialActivities,"filter-option":P,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):b("",!0)]),_:2},1032,["name","label","rules"])):b("",!0),n.type==="iSearch"?(r(),v(D,{key:1,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,max:n.max},{pattern:/^(10|15|20)\d{9,}$/,message:"El número debe comenzar con 10, 15 o 20, tener solo números, y al menos 11 caracteres"}]},{default:c(()=>[m(O,{value:i[n.name],"onUpdate:value":y=>i[n.name]=y,loading:C.value,maxlength:n.max,onSearch:B,onKeyup:ae(B,["enter"])},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):b("",!0),n.type==="iText"?(r(),v(D,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email,max:n.max,min:n.min}]},{default:c(()=>[m(Q,{value:i[n.name],"onUpdate:value":y=>i[n.name]=y,disabled:n.disabled,maxlength:n.max,onBlur:y=>F(n.name)},null,8,["value","onUpdate:value","disabled","maxlength","onBlur"])]),_:2},1032,["name","label","rules"])):b("",!0),n.type==="space"?(r(),q("div",Me)):b("",!0)],64))),128))]),m(D,null,{default:c(()=>[m(s,{class:"btn-produce",type:"primary","html-type":"submit",loading:U.value},{default:c(()=>o[1]||(o[1]=[K("FINALIZAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Pe=ce(qe,[["__scopeId","data-v-db713ee5"]]),$e={__name:"RutaDigitalNuevo",emits:["closeDraw"],setup(Z,{emit:N}){const l=N,E=u(1),g=u(null),S=I=>{g.value=I,E.value=I.step+1},T=()=>{E.value=1,l("closeDraw")};return(I,C)=>(r(),q("section",null,[E.value==1?(r(),v(Ae,{key:0,onStepNumber:S})):b("",!0),E.value==2?(r(),v(Pe,{key:1,dataStepOne:g.value,onClose:T},null,8,["dataStepOne"])):b("",!0)]))}};const Ye=["onClick"],ze={class:"paginator"},Fe={__name:"RutaDigitalIndex",props:["idConvenio"],setup(Z){z.locale("es"),fe.get("token");const N=JSON.parse(localStorage.getItem("role")),l=u(null),E=u(null);u(null);const g=u(!1),S=u(null),T=u(0),I=u(50),C=u({page:1}),U=u(1200),i=u([]),F=u(!1),e=u(!1);u(!1),u(!1),u(!1),u(null);const G=u(window.innerHeight-100),P=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"FECHA DE REGISTRO",dataIndex:"date",fixed:"left",align:"center",width:140},{title:"DNI ASESOR",dataIndex:"asesor_documentnumber",fixed:"left",align:"center",width:100},{title:"NOMBRE DEL ASESOR",dataIndex:"asesor_name",width:180},{title:"CDE/MAC",dataIndex:"asesor_cde",width:160,align:"center"},...N.some(s=>s.id!==1)?[{title:"SUPERVISOR",dataIndex:"supervisador",width:180}]:[],{title:"TIPO DOCUMENTO",dataIndex:"typedocument",align:"center",width:130},{title:"NRO DOCUMENTO",dataIndex:"documentnumber",align:"center",width:130},{title:"NACIONALIDAD (NOMBRE DEL PAIS)",dataIndex:"country",align:"center",width:140},{title:"FECHA DE NACIMIENTO",dataIndex:"birthdate",align:"center",width:120},{title:"APELLIDOS",dataIndex:"lastname",width:150},{title:"NOMBRES",dataIndex:"name",width:150},...N.some(s=>s.id!==1)?[{title:"SEXO (F/M)",dataIndex:"gender",width:60}]:[],...N.some(s=>s.id!==1)?[{title:"DISCAPACIDAD (SI/NO)",dataIndex:"sick",width:120}]:[],...N.some(s=>s.id!==1)?[{title:"CELULAR",dataIndex:"phone",width:100}]:[],...N.some(s=>s.id!==1)?[{title:"CORREO",dataIndex:"email",width:150}]:[],{title:"NÚMERO DE RUC",dataIndex:"ruc",align:"center",width:120},{title:"REGION DE LA MYPE",dataIndex:"region",align:"center",width:120},{title:"PROVINCIA DE LA MYPE",dataIndex:"province",align:"center",width:150},{title:"DISTRITO DE LA MYPE",dataIndex:"district",align:"center",width:130},{title:"DIRECCIÓN",dataIndex:"address",width:240},{title:"SECTOR ECONOMICO",dataIndex:"comercialactivity",align:"center",width:180},{title:"ACTIVIDAD COMERCIAL",dataIndex:"economicsector",align:"center",width:140},{title:"AUTODIAGNÓSTICO",dataIndex:"status",align:"center",fixed:"right",width:140}],x=re({search:""}),B=()=>{C.value.page=1,x.search,O()},H=()=>{x.search||O()},$=s=>{S.value=s,e.value=!0},V=s=>{params.value.page=s,O()},Y=()=>{G.value=window.innerHeight-320},J=()=>{S.value=null,e.value=!0},h=()=>{e.value=!1,O()},o=async s=>{try{const a=await A({url:`agreement/delete/${s.id}`,method:"DELETE"});a.status==200&&(O(),w.success(a.message))}catch(a){console.error("Error de red:",a)}},f=Ee(()=>s=>(C.value.page-1)*I.value+s+1),D=async s=>{try{const a=await A({url:`ruta-digital/status/${s}`,method:"PUT"});a.status==200&&(O(),w.success(a.message))}catch(a){console.error("Error de red:",a)}},O=async s=>{try{F.value=!0;const a={};E.value&&(a.start=z(E.value[0]).format("YYYY-MM-DD"),a.end=z(E.value[1]).format("YYYY-MM-DD")),x.search&&(a.search=x.search),C.value.page&&(a.page=C.value.page);const d=await A({url:"ruta-digital/list",method:"GET",params:a}),n=d.data;i.value=n.data,T.value=n.total,I.value=n.per_page,l.value=d.role}catch(a){console.error("Error de red:",a)}finally{F.value=!1}},Q=async()=>{try{g.value=!0;const s={};E.value&&(s.start=z(E.value[0]).format("YYYY-MM-DD"),s.end=z(E.value[1]).format("YYYY-MM-DD")),x.search&&(s.search=x.search),C.value.page&&(s.page=C.value.page);const{data:a}=await A({url:"ruta-digital/list-all",method:"GET",params:s});await xe("download/digital-routes","ruta-digital",a)}catch(s){console.error("Error de red:",s)}finally{g.value=!1}};return Se(()=>{window.removeEventListener("resize",Y)}),Ie(()=>{window.addEventListener("resize",Y),Y(),O()}),(s,a)=>{const d=p("a-button"),n=p("a-range-picker"),k=p("a-col"),y=p("a-input"),ie=p("a-input-group"),se=p("a-row"),le=p("a-switch"),W=p("a-menu-item"),t=p("a-popconfirm"),oe=p("a-menu"),_=p("a-dropdown"),_e=p("a-table"),ve=p("a-tag"),be=p("a-pagination"),ge=p("a-drawer");return r(),q(j,null,[R("div",null,[a[11]||(a[11]=R("h3",{class:"title-produce"},"RUTA DIGITAL - UGO",-1)),m(se,{style:{margin:"1rem 0"}},{default:c(()=>[m(k,{xs:24,md:16,lg:18},{default:c(()=>[m(d,{type:"primary",onClick:J,style:{}},{default:c(()=>a[4]||(a[4]=[K("REGISTRAR")])),_:1}),m(d,{class:"btn-excel",onClick:Q,loading:g.value,type:"primary",style:{margin:"0 .6rem"}},{default:c(()=>a[5]||(a[5]=[R("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:Ce},null,-1)])),_:1},8,["loading"]),m(n,{value:E.value,"onUpdate:value":a[0]||(a[0]=L=>E.value=L),style:{width:"240px","font-size":"13px"},onChange:O},null,8,["value"])]),_:1}),m(k,{xs:24,md:8,lg:6},{default:c(()=>[m(ie,{compact:""},{default:c(()=>[m(y,{value:x.search,"onUpdate:value":a[1]||(a[1]=L=>x.search=L),style:{width:"calc(100% - 80px)"},onInput:H,placeholder:"Buscar por RUC o DNI"},null,8,["value"]),m(d,{type:"primary",disabled:x.search==="",onClick:B},{default:c(()=>a[6]||(a[6]=[K("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),m(_e,{bordered:"",scroll:{x:U.value,y:G.value},class:"table-agreements-ugse",columns:P,"data-source":i.value,pagination:!1,loading:F.value,size:"small"},{headerCell:c(({column:L})=>a[7]||(a[7]=[])),bodyCell:c(({column:L,record:X,index:he})=>[L.dataIndex=="idx"?(r(),q(j,{key:0},[K(ue(f.value(he)),1)],64)):b("",!0),L.dataIndex=="status"?(r(),v(le,{key:1,checked:X.status,"onUpdate:checked":ee=>X.status=ee,checkedValue:1,unCheckedValue:0,onChange:ee=>D(X.id)},{checkedChildren:c(()=>a[8]||(a[8]=[R("span",{style:{"font-size":"12px"}},"Si",-1)])),unCheckedChildren:c(()=>a[9]||(a[9]=[R("span",{style:{"font-size":"12px"}},"No",-1)])),_:2},1032,["checked","onUpdate:checked","onChange"])):b("",!0),L.dataIndex=="actions"?(r(),v(_,{key:2,trigger:["click"]},{overlay:c(()=>[m(oe,null,{default:c(()=>[m(W,null,{default:c(()=>[R("a",{onClick:ee=>$(X)},"Editar",8,Ye)]),_:2},1024),m(W,null,{default:c(()=>[m(t,{title:"¿Seguro de eliminar?",onConfirm:ee=>o(X)},{icon:c(()=>[m(M(De),{style:{color:"red"}})]),default:c(()=>[a[10]||(a[10]=R("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:c(()=>[R("a",{class:"ant-dropdown-link",onClick:a[2]||(a[2]=de(()=>{},["prevent"]))},[m(d,{shape:"circle",icon:we(M(Re)),size:"small"},null,8,["icon"])])]),_:2},1024)):b("",!0)]),_:1},8,["scroll","data-source","loading"])]),R("div",ze,[R("span",null,[m(ve,{color:"blue"},{default:c(()=>[R("b",null,ue(T.value),1)]),_:1}),a[12]||(a[12]=K("Registros"))]),m(be,{size:"small",total:T.value,pageSize:I.value,onChange:V,showSizeChanger:!1},null,8,["total","pageSize"])]),m(ge,{open:e.value,"onUpdate:open":a[3]||(a[3]=L=>e.value=L),"root-class-name":"root-class-name",title:"Ruta Digital",placement:"right",width:"650"},{default:c(()=>[m($e,{onCloseDraw:h})]),_:1},8,["open"])],64)}}},Qe=ce(Fe,[["__scopeId","data-v-86649681"]]);export{Qe as default};
