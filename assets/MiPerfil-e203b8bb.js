import{G as f,v as W,r as _,a as $,l as H,b as d,o as n,d as g,e as U,c as l,w as u,B as r,F as S,h as q,m as k,f as J,j as M,z as K,i,y as s,M as Q,N as X,H as Z,p as ee,k as ae}from"./index-5a256a9a.js";import"./es-8edd913a.js";import{h as te,g as oe,d as ne,o as re,i as se}from"./selects-1ceaf713.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const ue={document_type:{type:"iSelect",label:"Tipo de documento",name:"document_type",required:!0,message:"Seleccionar tipo de documento",disabled:!0},document_number:{type:"iText",label:"Ingresar número",name:"document_number",required:!0,message:"Escribe número de documento",disabled:!0,max:8},last_name:{type:"iText",label:"Apellido paterno",name:"last_name",required:!0,message:"Escribe el apellido paterno"},middle_name:{type:"iText",label:"Apellido materno",name:"middle_name",required:!0,message:"Escribe el apellido materno"},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el nombre"},country_code:{type:"iSelectWrite",label:"País",name:"country_code",required:!0,message:"Seleccionar país"},email:{type:"iText",label:"Correo",name:"email",required:!0,email:"email",message:"Escribe el correo del usuario"},office_code:{type:"iSelect",label:"Oficina",name:"office_code",required:!0,message:"Seleccionar un tipo"},sede_code:{type:"iSelect",label:"Sede donde labora",name:"sede_code",required:!0,message:"Seleccionar un tipo"},birthdate:{type:"iDate",label:"Fecha de nacimiento",name:"birthdate",required:!1,message:"Seleccionar fecha"},gender:{type:"iSelect",label:"Género",name:"gender",required:!1,message:"Seleccionar tipo de documento"},lession:{type:"iSelect",label:"¿Tiene discapacidad?",name:"lession",required:!1,message:"Seleccionar un tipo"},phone_number:{type:"iText",label:"Número de celular",name:"phone_number",required:!1,message:"Escribe el celular del usuario"}};const de=b=>(ee("data-v-145882d9"),b=b(),ae(),b),ie={class:"profile-header"},me=de(()=>U("h3",null,"MIS DATOS",-1)),ce={key:1,class:"user"},pe={class:"grid-item"},C="YYYY-MM-DD",_e={__name:"MiPerfil",setup(b){f.locale("es");const D=JSON.parse(localStorage.getItem("user")),I=W(),T=_(!0),h=_(!1),x=_([]),w=_([]),E=_(null),v=_(f()),a=$({document_type:1,document_number:null,last_name:null,middle_name:null,name:null,country_code:173,email:null,office_code:null,sede_code:1,birthdate:null,gender:null,lession:0,phone_number:null,updated_by:D.id}),Y=async()=>{a.birthdate=f(v.value).format("YYYY-MM-DD");const t=a;h.value=!0;try{const m=await q({url:`user/${E.value}`,method:"PUT",data:t});k.success(m.message)}catch{k.error("No se pudo registrar este usuario")}finally{h.value=!1}},z=()=>{k.error("Debes de completar todos los espacios requeridos")},G=(t,m)=>{const y=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return m.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(y)},P=async()=>{try{const{data:t}=await J({url:"/countries",method:"GET"});x.value=t}catch(t){console.error("Error de red:",t)}},A=async()=>{try{const{data:t}=await q({url:"/sedes",method:"GET"});w.value=t,T.value=!1}catch(t){console.error("Error de red:",t)}},B=async()=>{try{const{data:t}=await q({url:`/user/${D.document_number}`,method:"GET"});E.value=t.id,a.document_number=t.document_number,a.last_name=t.last_name,a.middle_name=t.middle_name,a.name=t.name,a.country_code=t.country_code,a.email=t.email,a.office_code=t.office_code,a.sede_code=t.sede_code,a.gender=t.gender,a.phone_number=t.phone_number,v.value=f(t.birthdate,C)}catch(t){console.error("Error de red:",t)}};return H(()=>{B(),P(),A()}),(t,m)=>{const y=d("a-button"),N=d("router-link"),L=d("a-divider"),O=d("a-spin"),c=d("a-select"),p=d("a-form-item"),F=d("a-input"),R=d("a-date-picker"),V=d("a-form");return n(),g(S,null,[U("div",ie,[me,l(N,{to:"cambiar-clave"},{default:u(()=>[l(y,null,{default:u(()=>[M("Cambiar contraseña")]),_:1})]),_:1})]),l(L),T.value?(n(),r(O,{key:0})):(n(),g("div",ce,[l(V,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:Y,onFinishFailed:z},{default:u(()=>[U("div",pe,[(n(!0),g(S,null,K(i(ue),(e,j)=>(n(),g(S,{key:j},[e.type==="iSelect"?(n(),r(p,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[e.name=="document_type"?(n(),r(c,{key:0,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(te),disabled:e.disabled},null,8,["value","onUpdate:value","options","disabled"])):s("",!0),e.name=="gender"?(n(),r(c,{key:1,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(oe)},null,8,["value","onUpdate:value","options"])):s("",!0),e.name=="lession"?(n(),r(c,{key:2,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(ne)},null,8,["value","onUpdate:value","options"])):s("",!0),e.name=="office_code"?(n(),r(c,{key:3,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(re)},null,8,["value","onUpdate:value","options"])):s("",!0),e.name=="sede_code"?(n(),r(c,{key:4,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:w.value},null,8,["value","onUpdate:value","options"])):s("",!0),e.name=="role"?(n(),r(c,{key:5,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(se)},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),e.type==="iText"?(n(),r(p,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:u(()=>[l(F,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,disabled:e.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0),e.type==="iPassword"?Q((n(),r(p,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[l(F,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])),[[X,!i(I).query.dni]]):s("",!0),e.type==="iSelectWrite"?(n(),r(p,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[l(c,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,"show-search":"",options:x.value,"filter-option":G},null,8,["value","onUpdate:value","options"])]),_:2},1032,["name","label","rules"])):s("",!0),e.type==="iDate"?(n(),r(p,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[l(R,{locale:i(Z),value:v.value,"onUpdate:value":m[0]||(m[0]=o=>v.value=o),style:{width:"100%"},format:C},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(p,null,{default:u(()=>[l(y,{type:"primary","html-type":"submit",loading:h.value},{default:u(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))],64)}}},ge=le(_e,[["__scopeId","data-v-145882d9"]]);export{ge as default};
