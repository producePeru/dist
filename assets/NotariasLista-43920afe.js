import{_ as B}from"./TableComponent-7f41394f.js";import{l as P,r as n,a as D,j as k,U as G,a6 as _,o as v,x as q,h as M,L as $,d as O,c as p,N,m as H,b as w,w as S,y as R,e as V}from"./index-7bad9f2e.js";import{d as j}from"./downloadExcel-7ff7e7d6.js";import{_ as z}from"./FormComponent-2cf33d59.js";import{u as J}from"./selectes-844aba26.js";import"./es-3528eb64.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-0f0b4d27.js";import"./quill.snow-10c5446b.js";const Q={key:1,class:"notary-grid"},K={__name:"DrawerNotaria.componente",props:["info"],emits:["closeDraw"],setup(C,{emit:y}){P.locale("es");const c=n({name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!1,message:"Escribir el nombre de la notaría",disabled:!1,max:100},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Escribir la dirección de la notaría",disabled:!1,max:200},gastos:{type:"iText",label:"GASTOS NOTARIALES",name:"gastos",required:!0,message:"Escribir gastos notariales",disabled:!1,max:250},tarifa1:{type:"iText",label:"TARIFA SOCIAL -1 - (HASTA 1 UIT)",name:"tarifa1",required:!0,message:"Escribir tarifa social",disabled:!1,max:100},tarifa2:{type:"iText",label:"TARIFA SOCIAL - 2",name:"tarifa2",required:!1,message:"Escribir tarifa social",disabled:!1,max:100},tarifa2Details:{type:"iText",label:"DETALLE - 2",name:"tarifa2Details",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:100},tarifa3:{type:"iText",label:"TARIFA SOCIAL - 3",name:"tarifa3",required:!1,message:"Escribir tarifa social",disabled:!1,max:100},tarifa3Details:{type:"iText",label:"DETALLE - 3",name:"tarifa3Details",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:100},tarifa4:{type:"iText",label:"TARIFA SOCIAL - 4",name:"tarifa4",required:!1,message:"Escribir tarifa social",disabled:!1,max:100},tarifa4Details:{type:"iText",label:"DETALLE - 4",name:"tarifa4Details",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:100},biometrico:{type:"iText",label:"BIOMÉTRICO / HUELLA DIGITAL",name:"biometrico",required:!1,message:"Escribir biométrico o huella digital",disabled:!1,max:100},sociointerveniente:{type:"iText",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"sociointerveniente",required:!1,message:"Escribir socio o interviniente adicional",disabled:!1,max:100},infocontacto:{type:"iQuillEditor",label:"CONTÁCTO",name:"infocontacto",required:!1,message:"Escribir contacto adicional",disabled:!1,rows:3}}),s=J(),u=y,l=C,o=n(!1),I=n("GUARDAR"),e=D({}),f=n(!1),T=n(null),r=n({id_pnte:[],city_id:[],province_id:[],district_id:[]}),A=async a=>{a=="city_id"&&(console.log("city_id kakakaka"),await s.fetchProvinces(e.city_id),r.value.province_id=s.provinces,c.value.province_id.disabled=!1),a=="province_id"&&(await s.fetchDistricts(e.province_id),r.value.district_id=s.districts,c.value.district_id.disabled=!1)},E=async a=>{a=="city_id"&&(await s.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,r.value.province_id=[],r.value.city_id=s.cities),a=="province_id"&&(e.province_id=null,e.district_id=null,r.value.district_id=[])},x=async()=>{f.value=!0;const a={name:e.name,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,gastos:e.gastos,tarifa1:e.tarifa1,tarifa2:e.tarifa2,tarifa3:e.tarifa3,tarifa4:e.tarifa4,biometrico:e.biometrico,sociointerveniente:e.sociointerveniente,infocontacto:e.infocontacto,status:1};try{const t=l.info?`notary/update/${l.info.id}`:"notary/create",i=l.info?"PATCH":"POST",b=await N({url:t,method:i,data:a});b.status===200&&(g(),H.success(b.message),u("closeDraw",!0))}catch(t){console.error("Error:",t);const i=document.getElementsByClassName("ant-drawer-body")[0];i&&(i.scrollTop=0)}finally{f.value=!1}},g=()=>{e.name=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.gastos=null,e.tarifa1=null,e.tarifa2=null,e.tarifa3=null,e.tarifa4=null,e.biometrico=null,e.sociointerveniente=null,e.infocontacto="</p>"},h=async a=>{o.value=!0;try{a&&(e.name=a.name,e.address=a.address,e.gastos=a.gastos,e.tarifa1=a.tarifa1,e.tarifa2=a.tarifa2,e.tarifa3=a.tarifa3,e.tarifa4=a.tarifa4,e.biometrico=a.biometrico,e.sociointerveniente=a.sociointerveniente,e.infocontacto=a.infocontacto,await s.fetchCities(),r.value.city_id=s.cities,e.city_id=a.city_id,await s.fetchProvinces(e.city_id),r.value.province_id=s.provinces,c.value.province_id.disabled=!1,e.province_id=a.province_id,await s.fetchDistricts(e.province_id),r.value.district_id=s.districts,c.value.district_id.disabled=!1,e.district_id=a.district_id)}finally{o.value=!1}};return k(()=>{l.info&&h(l.info)}),G(()=>l.info,a=>{a?h(a):g()}),_("formState",e),_("loadingState",f),(a,t)=>o.value?(v(),q(M($),{key:0,style:{color:"#00a6db"}})):(v(),O("div",Q,[p(z,{fields:c.value,options:r.value,btnSaveName:I.value,mayus:!0,resetSelect:T.value,onHandleChangeSelect:A,onHandleFocusSelect:E,onOnSubmit:x},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const W={class:"advisory-table"},X=["innerHTML"],Y=["onClick"],oe={__name:"NotariasLista",setup(C){JSON.parse(localStorage.getItem("role"));const y=n([]),c=n(0),s=n(150),u=n(!1),l=n(!1),o=n(!1),I=n(null),e=D({asesor:null,name:null,page:1}),f=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"NOMBRE DE LA NOTARÍA",dataIndex:"name",width:240},{title:"REGIÓN",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"DIRECCIÓN",dataIndex:"address",align:"center",width:150},{title:"GASTOS NOTARIALES",dataIndex:"gastos",width:250},{title:"TARIFA SOCIAL",dataIndex:"tarifa1",align:"center",width:100,colSpan:4},{title:"TARIFA SOCIAL",dataIndex:"tarifa2",align:"center",width:100,colSpan:0},{title:"TARIFA SOCIAL",dataIndex:"tarifa3",align:"center",width:100,colSpan:0},{title:"TARIFA SOCIAL",dataIndex:"tarifa4",align:"center",width:100,colSpan:0},{title:"BIOMÉTRICO / HUELLA DIGITAL",dataIndex:"biometrico",align:"center",width:120},{title:"SOCIO O INTERVINIENTE ADICIONAL",dataIndex:"sociointerveniente",align:"center",width:120},{title:"CONTÁCTO",dataIndex:"infocontacto",width:280},{title:"DISPONIBLE",dataIndex:"status",width:100,align:"center"},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],T=()=>{o.value=!1,a()},r=()=>{o.value=!0},A=async()=>{l.value=!0;try{const t={};e.name&&(t.name=e.name),e.city_id&&(t.city_id=e.city_id),await j("download/notaries","notarias-pnte",t)}catch(t){console.error("Error de red:",t)}finally{l.value=!1}},E=async t=>{e.page=t,await a()},x=async t=>{t&&(e.page=1,await a())},g=t=>{I.value=t,o.value=!0},h=async t=>{try{const i=await N({url:`notary/status/${t}`,method:"PUT"});i.status==200&&(a(),H.success(i.message))}catch(i){console.error("Error de red:",i)}},a=async()=>{u.value=!0;try{const t={page:e.page};e.name&&(t.name=e.name),e.city_id&&(t.city_id=e.city_id);const i=await N({url:"notary/list",method:"GET",params:t});y.value=i.data.data,c.value=i.data.total,s.value=i.data.per_page}catch(t){console.error("Error de red:",t)}finally{u.value=!1}};return k(async()=>{await a()}),_("search",e),_("loading",u),_("loadingFile",l),(t,i)=>{const b=w("a-switch"),U=w("a-menu-item"),F=w("a-drawer");return v(),O("div",W,[p(B,{title:"NOTARÍAS",new:!0,textNuevo:"NUEVO",placeholderSearch:"Buscar",columns:f,titleSearch:"NOMBRE DE NOTARÍA",pageSize:s.value,nameTotal:"Notarías",cityList:!0,dataSource:y.value,total:c.value,onHandleNew:r,onHandleDownloadExcel:A,onHandleSearch:x,onHandlePaginator:E},{"data-cell":S(({column:d,record:m})=>[d.dataIndex=="infocontacto"?(v(),O("div",{key:0,class:"custom-html",innerHTML:m.infocontacto},null,8,X)):R("",!0),d.dataIndex=="status"?(v(),q(b,{key:1,checked:m.status,"onUpdate:checked":L=>m.status=L,onChange:L=>h(m.id)},null,8,["checked","onUpdate:checked","onChange"])):R("",!0)]),"custom-options":S(({record:d})=>[p(U,null,{default:S(()=>[V("a",{onClick:m=>g(d)},"Editar",8,Y)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),p(F,{width:"500",title:"NOTARÍA",open:o.value,"onUpdate:open":i[0]||(i[0]=d=>o.value=d),placement:"right"},{default:S(()=>[p(K,{onCloseDraw:T,info:I.value},null,8,["info"])]),_:1},8,["open"])])}}};export{oe as default};
