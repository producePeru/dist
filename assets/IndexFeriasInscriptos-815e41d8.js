import{l as O,E as se,g as xe,r as g,a as oe,G as ve,Z as Ce,j as ie,b as h,o as n,d as s,e as _,c as m,w as r,h as ae,a7 as ke,i as F,t as y,F as C,y as i,x as E,a2 as re,O as Se,q as Re,R as M,m as ne,K as Ne,X as Oe,a6 as $,u as De}from"./index-b8c397e4.js";import{_ as Be}from"./icoexcel-1b303edf.js";import"./es-ea278d56.js";import{M as Te}from"./MoreOutlined-fe4af2e3.js";import{_ as Ye}from"./TableComponent-786e2d4e.js";import{d as Ue}from"./downloadExcel-d58d5069.js";import{_ as Le}from"./FormComponent-e6ac2f25.js";import{u as Pe}from"./selectes-a540eed2.js";import"./quill.snow-27dafa4e.js";const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUfSURBVFiF5ZdLbBxVFoa/U1W3qrp6HNt5GSJaxCGJldiJBAI0BA8EJWEGDSxYzA6BkJCAgFjMII00sOCxYAUbHhnxmmjY8RCw4CESR0gkbEZKhGyHsXkkwiiQBEI7trvreQ+LJu6201ZwQlacVdW9p+7/65xzz/kLfu8mi/7i9dddlm7oB2c9YpejZCjfI0ywf2CEx8ReHAJ7hrcizj2CvV2RqJ2LI1StlbdRfYWbBw78NgT2jfaLtc+psnWZcfPLQt8rucLB0zGZNlyMwFUdIXWrfBun+Y9Z4Yk472lRPMyfN////AkMjd4tyr+7jSMD5cB0ei65wv7qDL4jBE7j89QqiVUGu8p4AtW8YGQmzqqZtYrcwfb+NxeCcBYE3zv6L1RfXR16/pYlken0XABGpmNyVa7pKOEgOAhXd5QoVBmeiQHo8lyuX1I2q0MToPYNhkYfXlwEhkbuAV4MRSS2Spfn0uN7GBFGZxKu6yyxzLgcmmoAXtkRcior+HSyTn/ZJ1M4nuZU84LQEWKrivI3dgy8dW4Ce4Y3iOMcWlsyQV8p4Ic857uk4GSaUbOKIIQOhK5QKxpFELlCXCixBUWJHGFlYLjE91juuYzVE76spYnibmb7hvFWOO8sRg67uj3H6Yt8BFhhPFYYj6/rwngt5cqOkFSVeqEcsxkAK42hFAq+CIemY3pLPmtK/uyZfZHPD1nhVLPiaYXbWvHm1sDe0T+pyo0by4GRluAoytdxxpqST4/vUQkM6yOfTs+l03NZH/lUAkOP77Em9PmqntLaDARhYzkwqnorQ8Nb2qZAjz7+1xcm1z55SsubK6FxW51mCstEkrG25ONJk9ixJAdgVdAMZK7Kl7WMSugRxV8gFLN7E3FWLNPjB+8PPnpMrvn8/VkCevSJncDz89NxoZacfIdAawvs6k65dmxXIwXKX35r8HOb3AJnakAwFxNKO28g3/Au+brdaHD5mWXTJNDqHK4l77kPNZegbjd5z05stAnEJV9xN8WSbYuEF/LKk2jQi5avwq76+5zdNp1Qf1nW5rsWzNar5osk0O78pp3dB+Kv8OIXmg7HdzWfT/7nvAC9bx6lWPUPyKs4x55pQ0DJzkMZ/GqT05/gnf5k/nIGsymQDy4e/AKm2uwDAHr08VuePb3uqUkbDVxwI6qnVALTthF12xOfPRB88IhcO/bhHAIADA1vQeXAYFdEt9fkoChDP9WoBB59UTC73joNz9hYLeGbOGf70ojWdn4qKzgwWQPLYKtamnsLtm36VBw+Hp1JUm2pVkG4IjQcqWccT3MmkozxWspkXjCZF4zXUiaSxt6ResYVJcP8WXK4FmeC7p0v1c66BWrde6s2HxmbSemL5o7jTJX/TdUJRQhdIdUGyRNZRpxAXCiKcqSeMl0olwYuyz2PsVpKNVerykPz8drX/p6RO3HYfZYgcYTR6YTrOkOWGa+9IPlDQGZ1riBRVdC72LbptflQ7SXZjoH/ovJoXFhWh4bBzoj1kU9vaLgsaACntpmi1CoHp+pUQo/esDGqB7tKXB6YhhoS/Wc78IUj0BIJEX25y7gMlEPTNUeUOgS/0E+skraI0p/ygpHpJJvMC6si97Gtf/dCEOduPx8dXidO8aIqW5f6XlYJjCk5wsGp9rJ8IsmyU2luRGSf4t4/X4ItnsBsNA7/EdEHBb1NYUnbw0SmVPVtVF5iR//+X3Ps+f2aLd84gHV6QVcCoLaKOCO4J8a56aYLnVa/M/sZAOBf8qum74sAAAAASUVORK5CYII=",Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAADsAAAA7AF5KHG9AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA59JREFUWIW9l01sG0UYhp9vdh3Hf2nSxjSkFYX0ByEoBSQENNBGRuIS9cKFSpW4kRMV4icNP6J1oUWkNQjBiXJGcIELqtReQAFVlLaRUEFFtJVqIEntJFZwYidOvLvDIY4VbCferZy8txm/872PvN/M7ggutTGeafEVzF7lSEwLe4B7gdbSz/8CSQ2/gnxv68LZyVPRGTd1pZ5hy1vTu2yHAZCDoIPucGVW0F9Zjh6cOL3hxh0BbH1VByzfzPsIrwCmu+AqFdF80hyMHE3GpeAaINqf3WmIfIvw0B0GV+qiZRjPT34Qul0XoPPNqUcdbZwHog0KX9KIY6ve8UT46ooA0f7sTkPJhTUIL0PYjnp84nQ4VQVQeuaXvP7tW1ol9fqz/j+f6jKbws34CwsUswWnOJbFOvz13GPZgm6pWHIxPBvpufmZzMOy5io1nKfw4weaf+zr9j0B7C9PhmArBg/eDW0hGakB8GQuOP02cAxAweJWK3W7ax3uabrQ1+3bB/i9rFuUvBbtz3WUARb3ufut5jNYGHjOv8N7cFlhQ9lHAcyN8UwLc3IQtOvVsfvNa4bikcp52yF1ddS+kclrByA7p/esXEVejMbHj5i+gtnr/oRb1NPbzela4btP5vxTef2MyzIhVQj0KuVIzEs4QHtYnMq5X5LW9am8bvNUyNExVXqxeJKhdNUBlslr98+wJBEeVsB9Xhc2UF0KqNyn66kN0jEwnQNCq7m+eSk4tHe7sX81T6UWbP7a9s7Mtjq2GQWkvRR2q0xOj7uwpRV6bQBuTjj5eh6tSSuUDK8FwPDfllHPo0SumGjnHMjLqxnPXSs2BZr4aWm8a7PRHmrigeWe/AJ/XE/bk0vjs7/bnfUANM552fxGKiRGaNzLaXjmUPPQgd2+/zXld78Vh/q+LHhp1LwK5O5S6URHXuALDwsbpc/H4p2zCkBpIwHMr2P4vGmaH0PpdTx6KjiiRSfWL18PjpwMjpYBANLNLXE0P69D+uXUVMuJpUEZgLhY2nEOAVWfzg3UmLadFzgjxWoAIJ1ovaVtpxtINjxa639sR/ekE623lk+rSl8JIgZcbmD8JZSzr9Y1rQpgCSIViOwFOQYUa3lcqijIu6lApDv1YVuylqEmAABxsVKDkfdsR92D6ON68QbsVjMi8qnC2nF7MHKCuFgrGet+CZduMfH2IxMfGeLvEeixbDYBXcCmki1j2SSBYe3wgy3zQ5OD7q7n/wHBtlLaxU+W2gAAAABJRU5ErkJggg==",He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAX7SURBVFiFtZd/bJ1VGcc/57znfe9tS3vt5sYsLgqujaFgt246aTRDYLDVYEGFRA3BLCFblhj/UQy6YEWcv/5wRubirwTBH1lEFgVnGIEssjmcYTJbnFkry4AV1nYr97b3fd9z3h/HP+693e323q6BcZKbc/Pem/P5nuc8z/c5r2CBw75x+9KkeGIAbddZLbuFcZYLI9rQHgT5Ejr/qtS5IbS3n7h9j9i6a2oh64qL/cGMr1klS+V7rYlvwzh5jIswCiIFoYcIc5U58CDMIUIPQi8kcB/HuNvF93e+9JYE2LN3FKLy0R+IMNpE5CiMYkHwwINAQeBA6MaU5c850/5V8cSgv2AB4emNH5DhsccwrBSR4i3BAwV+TYgzTNw8IP4y+PJFBURjqz+GmXzMRuLySwKffea+wbQ7II5uO1zPk3N2Pr6+8x2B+wp8Z5mR7C1dcV9XpgB75gttMhjZ/Y7AA0WEgymni43IPT7WMdhc46rZ0M8c/iGGVQ3hvAexdDXQBpFCRAoiB4wDkah+l1A0cOQknPXnwHUi0X6ERnVr4X4d2DabA2Z8zSpRPHM4M9t1HnnlFsSKO0EqFjTiBH57AB56jiiVaBR6yqAjgcFFo3xfeJ29r35prLJiqfy1RqUmr9qC6Po8lCexBx9FnBiFsoTQqWa4qoZbQpyDrhVwTz/cvY40ctC7/o7x03o4BtWcWPFNYLOwr9+xJJ568ZVMk6EDefPvIHgTu/teRNHMf+ZeK2zsg6dHsDs+h1jUTHHDzyiPTGHsLLw2+zZUy2RSGmnocKKtF6Sq7Px8uPMu6OyBq68Ft1B5trYHNn2CZN0H0T/eD65DenVHFhyNai43qX6FtusaZTuyvWIWJ0bPwUMFN34K1q8H5VQzOIZHD8DD/yBJPcJ9x4mlIg+khcuy4JXZqhuUNc41wsjsUovcCmDantv59Z+EDbfA04dg378q2d9/HWy6nqSYEPzmhUrWi5QCkAiZDUdhcHuU0HI5kciu87i6w1BBYMG2wM3r4amDsOvJc3V+4M+kViE3f5z4D8Po6QQTp5WCwGkcAdSVEiNaG5pMVC27WpIteT94Huz95wUmo/80jGj2SFZcTlhK0FWLiWkUAReDKqh5Hc5UjTJ0wAfCauswai4cBaoCNMUYnTrEVQEJshEcjUKKMD/d0F6jqoBaqR07DaGBGz88Bx7hoAY+RFrSTA+dwaAwOLNH0AiuUUWFzr8iAmdRprdHdREIgCCBh/8GW24iFR7xk//Beh5Nn1lJ/qZOTm97Fh0JNIqk7giy4BWR6mUldW7Ihs7KzMZSO4K0CYKgEolfHiLBw9nUR9Nneys/zxjGv7Wf8V8Pzy5um/IVAVZmwiuz82+F9vaL0Lkr0+HOBhUBXSvgf8fOhf0XzxPvHsJ2d6AnDdNHJwhn0jmLL+57LwDls1EDuEJb9xlJ3L6H0Asy7fXIyUpjuWcjeK1zzjyc1BSfGKV48NQFcNveQte21aQm5dShqUYl6Dumba8UW3dNEbh7Mr19zK90taUF7O83k9xyLcniNozKYawibm0hKbQQF1pICy3YJa0sHuikb9+t5Jc189LO45Qmk0wf0MJ9ZHCie6ZaO+52QnknvqMuuEw89Bxp5CDvvo789lvJA4WLdOPUpAz96L+8sGO0kQmVjRQPQN2d0H7xyzsJ1Nasm4xGERcuw3Z3kLY0EeMQI6sfZ84clhJeOzTVcOfVHvDtHad674e6GxFl+RUi9VECp/d8uPFTwokpzMjMfLY6T7bXz86wb9Pv1bBzbsW2/xvvo6Sex3eWRTjoWKCnk/MvE28DriYMub6fvtY9mikAwPY8+BEj+Kvx00Xar2X3pYFHqbNh51jPkXpe5otJ6Yr7uozI/VGjrrlE8CFD7tP1O68NmSWg7dR3j5uUtdq639Eo/23Ay8aqBwXh2ix4wwjUjyPLf9KRIO83Vt2lUc0LhPtauI8YKR7YcXLN6/Otf1EBtXHg3b9qLTep/tCqGwxuT4i6KkIVql3tTYM6EQn3xTBVzzqmbe/gRPfMQtb9P3Z1K13sX9kcAAAAAElFTkSuQmCC";const Ve={class:"title-produce"},ze={style:{color:"var(--secondary)"}},Ge={style:{"font-size":"13px"}},qe=["href"],je=["href"],We=["href"],Qe={class:"inscriptos-p"},Ke=["href"],Je={key:1},Ze={class:"paginator"},Xe={__name:"EventFeria",props:["idConvenio"],setup(ee){O.locale("es");const D=se(),k=JSON.parse(localStorage.getItem("role"))||[],B=xe.get("token"),S="https://apituempresa.soporte-pnte.com/api/",R="http://127.0.0.1:8000/api/",e=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?R:S,T=k.some(u=>u.id===10||u.id===11||u.id===5),A=g(!1);g(null);const Y=g(!1);g(null);const l=g(0),H=g(50),L=g({page:0}),Q=g(1200),P=g([]),V=g(!1);g(!1);const z=g(window.innerHeight-100),G=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"APROBACIÓN",dataIndex:"status",fixed:"left",width:100,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",fixed:"left",width:100,align:"center"},{title:"RUC",dataIndex:"ruc",width:100,fixed:"left",align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:180},{title:"RAZÓN SOCIAL",dataIndex:"socialReason",width:180},{title:"SECTOR EMPRESARIAL",dataIndex:"businessSector",width:150,align:"center"},{title:"REGIÓN",dataIndex:"mype_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"mype_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"mype_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"mype_address",width:170},{title:"WEB",dataIndex:"web",width:50,align:"center"},{title:"FACEBOOK",dataIndex:"facebook",width:90,align:"center"},{title:"INSTAGRAM",dataIndex:"instagram",width:100,align:"center"},{title:"DESCRIPCIÓN",dataIndex:"description",width:100,align:"center"},{title:"LOGO",dataIndex:"logo",width:80,align:"center"},{title:"ARCHIVO",dataIndex:"filePDF_name",width:100,align:"center"},{title:"PRODUCTOS",dataIndex:"productos",width:160,align:"center"},{title:"TIPO DOCUMENTO",dataIndex:"typedocument",width:140,align:"center"},{title:"# DOCUMENTO",dataIndex:"documentnumber",width:160,align:"center"},{title:"APELLIDOS",dataIndex:"lastname",width:160,align:"center"},{title:"NOMBRES",dataIndex:"name",width:160,align:"center"},{title:"CELULAR",dataIndex:"phone",width:120,align:"center"},{title:"EMAIL",dataIndex:"email",width:160,align:"center"},{title:"FECHA NAC.",dataIndex:"birthdate",width:120,align:"center"},{title:"PAIS / NACIONALIDAD",dataIndex:"user_country",width:140,align:"center"},{title:"REGIÓN",dataIndex:"user_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"user_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"user_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"address",width:160},{title:"GENERO",dataIndex:"gender",width:100,align:"center"},{title:"COMO SE ENTERÓ",dataIndex:"propagandamedia",width:140,align:"center"},...T?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],q=async u=>{try{const t=await M({url:`fair/status-participant/${u}`,method:"PUT"});t.status==200&&(o(),ne.success(t.message))}catch(t){console.error("Error de red:",t)}},a=oe({search:""}),N=u=>{const t=O();let v=O(u).diff(t,"days");return v===0?1:v},b=()=>{let u={search:a.search};o(u)},d=()=>{a.search||o()},f=u=>O(u).format("DD/MM/YYYY"),U=u=>{L.value.page=u,o()},x=()=>{z.value=window.innerHeight-320},K=async u=>{try{const t=await M({url:`fair/delete-participant/${u.id}`,method:"DELETE"});t.status==200&&(o(),ne.success(t.message))}catch(t){console.error("Error de red:",t)}},J=ve(()=>u=>L.value.page*H.value+u+1),o=async u=>{try{V.value=!0;let t;t=L.value.page==0?"":L.value,t=u?{...t,...u}:t;const v=D.params.slug,{data:w}=await M({url:`fair/applicants/${v}`,method:"GET",params:t});P.value=w==null?void 0:w.data,l.value=w.total,H.value=w.per_page}catch(t){console.error("Error de red:",t)}finally{V.value=!1}},p=async()=>{Y.value=!0;try{const u=D.params.slug,t=await Ne({url:`${e}download/fair-participants/${u}`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${B}`}}),v=window.URL.createObjectURL(new Blob([t.data])),w=document.createElement("a"),j=`${P.value[0].fair_name}.xlsx`;w.href=v,w.setAttribute("download",j),document.body.appendChild(w),w.click(),window.URL.revokeObjectURL(v),document.body.removeChild(w)}catch(u){console.error("Error downloading file:",u)}finally{Y.value=!1}};return Ce(()=>{window.removeEventListener("resize",x)}),ie(()=>{window.addEventListener("resize",x),x(),o()}),(u,t)=>{const v=h("router-link"),w=h("a-breadcrumb-item"),j=h("a-breadcrumb"),W=h("a-button"),Z=h("a-col"),X=h("a-input"),ce=h("a-input-group"),ue=h("a-row"),me=h("a-switch"),pe=h("a-tooltip"),ge=h("a-popover"),te=h("a-image"),he=h("a-image-preview-group"),de=h("a-tag"),Ae=h("a-popconfirm"),fe=h("a-menu-item"),ye=h("a-menu"),_e=h("a-dropdown"),Ie=h("a-table"),we=h("a-pagination"),Ee=h("a-drawer");return n(),s(C,null,[_("div",null,[m(j,null,{default:r(()=>[m(w,null,{default:r(()=>[m(v,{to:"/admin/ferias/empresariales"},{default:r(()=>[m(ae(ke)),t[3]||(t[3]=_("span",{class:"fs-13"},"Atrás",-1))]),_:1})]),_:1}),m(w,null,{default:r(()=>{var I;return[_("h3",Ve,[t[4]||(t[4]=F("INSCRITOS EN FERIA - ")),_("span",ze,y((I=P.value[0])==null?void 0:I.fair_name),1)])]}),_:1})]),_:1}),m(ue,{style:{margin:"1rem 0"}},{default:r(()=>[m(Z,{xs:24,md:12,lg:18},{default:r(()=>[t[6]||(t[6]=_("span",null,null,-1)),m(W,{class:"btn-excel",onClick:p,loading:Y.value,type:"primary"},{default:r(()=>t[5]||(t[5]=[_("img",{width:"20",style:{margin:"-2px 0 0 0"},src:Be},null,-1)])),_:1},8,["loading"])]),_:1}),m(Z,{xs:24,md:12,lg:6},{default:r(()=>[m(ce,{compact:""},{default:r(()=>[m(X,{onPressEnter:b,value:a.search,"onUpdate:value":t[0]||(t[0]=I=>a.search=I),style:{width:"calc(100% - 80px)"},onInput:d},null,8,["value"]),m(W,{type:"primary",disabled:a.search==="",onClick:b},{default:r(()=>t[7]||(t[7]=[F("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),m(Ie,{bordered:"",scroll:{x:Q.value,y:z.value},class:"table-agreements-ugse",columns:G,"data-source":P.value,pagination:!1,loading:V.value,size:"small"},{bodyCell:r(({column:I,record:c,index:be})=>[I.dataIndex=="idx"?(n(),s(C,{key:0},[F(y(J.value(be)),1)],64)):i("",!0),I.dataIndex=="status"?(n(),E(pe,{key:1},{title:r(()=>[_("span",Ge,y(c.status==0?"Habilitar a: ":"Desabilitar a: ")+" "+y(c.comercialName),1)]),default:r(()=>[m(me,{checked:c.status,"onUpdate:checked":le=>c.status=le,"checked-children":"si","un-checked-children":"",checkedValue:1,unCheckedValue:0,onChange:le=>q(c.id)},null,8,["checked","onUpdate:checked","onChange"])]),_:2},1024)):i("",!0),I.dataIndex=="created_at"?(n(),s(C,{key:2},[F(y(f(c==null?void 0:c.created_at)),1)],64)):i("",!0),I.dataIndex=="web"?(n(),s(C,{key:3},[c.web?(n(),s("a",{key:0,href:c.web,target:"_blank"},t[8]||(t[8]=[_("img",{src:Fe,alt:"",width:"22"},null,-1)]),8,qe)):i("",!0)],64)):i("",!0),I.dataIndex=="facebook"?(n(),s(C,{key:4},[c.facebook?(n(),s("a",{key:0,href:c.facebook,target:"_blank"},t[9]||(t[9]=[_("img",{src:Me,alt:"",width:"22"},null,-1)]),8,je)):i("",!0)],64)):i("",!0),I.dataIndex=="instagram"?(n(),s(C,{key:5},[c.instagram?(n(),s("a",{key:0,href:c.instagram,target:"_blank"},t[10]||(t[10]=[_("img",{src:He,alt:"",width:"22"},null,-1)]),8,We)):i("",!0)],64)):i("",!0),I.dataIndex=="description"?(n(),s(C,{key:6},[c.description?(n(),E(ge,{key:0,placement:"left"},{content:r(()=>[_("p",Qe,y(c.description),1)]),default:r(()=>[t[11]||(t[11]=_("span",{class:"inscriptos-a"},"Leer descripción",-1))]),_:2},1024)):i("",!0)],64)):i("",!0),I.dataIndex=="logo"?(n(),s(C,{key:7},[c.logo_url?(n(),E(te,{key:0,class:"fair-prod-img",src:c.logo_url,alt:"logo"},null,8,["src"])):i("",!0)],64)):i("",!0),I.dataIndex=="filePDF_name"?(n(),s(C,{key:8},[c.filePDF_name?(n(),s("a",{key:0,href:c.filePDF_url,target:"_blank"}," Descargar ",8,Ke)):i("",!0)],64)):i("",!0),I.dataIndex=="productos"?(n(),E(he,{key:9},{default:r(()=>[c.img1_url?(n(),E(te,{key:0,class:"fair-prod-img",src:c.img1_url,alt:"Imagen 1"},null,8,["src"])):i("",!0),c.img2_url?(n(),E(te,{key:1,class:"fair-prod-img",src:c.img2_url,alt:"Imagen 2"},null,8,["src"])):i("",!0),c.img3_url?(n(),E(te,{key:2,class:"fair-prod-img",src:c.img3_url,alt:"Imagen 3"},null,8,["src"])):i("",!0)]),_:2},1024)):i("",!0),I.dataIndex=="dateDiff"?(n(),s(C,{key:10},[N(c.endDate2)<0?(n(),E(de,{key:0,color:"red"},{default:r(()=>t[12]||(t[12]=[F(" FINALIZADO ")])),_:1})):(n(),s("span",Je,y(N(c.endDate2)),1))],64)):i("",!0),I.dataIndex=="actions"?(n(),E(_e,{key:11,trigger:["click"]},{overlay:r(()=>[m(ye,null,{default:r(()=>[m(fe,null,{default:r(()=>[m(Ae,{placement:"rightBottom",title:`¿Quieres eliminar ${c.ruc} ?`,onConfirm:le=>K(c)},{icon:r(()=>[m(ae(re),{style:{color:"red"}})]),default:r(()=>[t[13]||(t[13]=_("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1024)]),default:r(()=>[_("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=Se(()=>{},["prevent"]))},[m(W,{shape:"circle",icon:Re(ae(Te)),size:"small"},null,8,["icon"])])]),_:2},1024)):i("",!0)]),_:1},8,["scroll","data-source","loading"])]),_("div",Ze,[_("span",null,[m(de,{color:"blue"},{default:r(()=>[_("b",null,y(l.value),1)]),_:1}),t[14]||(t[14]=F("Inscritos"))]),m(we,{size:"small",total:l.value,pageSize:H.value,onChange:U,showSizeChanger:!1},null,8,["total","pageSize"])]),m(Ee,{open:A.value,"onUpdate:open":t[2]||(t[2]=I=>A.value=I),title:"Nueva Feria",placement:"right",width:"650"},null,8,["open"])],64)}}};const $e={class:"f-20"},et={__name:"ParticipanteSed",props:["info"],emits:["closeDraw"],setup(ee,{emit:D}){O.locale("es");const k=g({ruc:{type:"iText",label:"RUC",name:"ruc",required:!0,message:"Ingrese el RUC",disabled:!1},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Ingrese el nombre comercial",disabled:!1},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Ingrese la razón social",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccione el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccione la actividad comercial",disabled:!1},city_id:{type:"iSelect",label:"CIUDAD",name:"city_id",required:!0,message:"Seleccione la ciudad",disabled:!1},typedocument_id:{type:"iSelect",label:"TIPO DOCUMENTO",name:"typedocument_id",required:!0,message:"Seleccione el tipo de documento",disabled:!1},documentnumber:{type:"iText",label:"N° DOCUMENTO",name:"documentnumber",required:!0,message:"Ingrese el número de documento",disabled:!1},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Ingrese el apellido paterno",disabled:!1},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Ingrese el apellido materno",disabled:!1},name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccione el género",disabled:!1},phone:{type:"iText",label:"TELÉFONO",name:"phone",required:!0,message:"Ingrese el teléfono",disabled:!1},email:{type:"iText",label:"EMAIL",name:"email",required:!0,message:"Ingrese el correo electrónico",disabled:!1},birthday:{type:"iDate",label:"FECHA DE NACIMIENTO",name:"birthday",required:!0,message:"Seleccione la fecha de nacimiento",disabled:!1},positionCompany:{type:"iText",label:"CARGO EN EMPRESA",name:"positionCompany",required:!0,message:"Ingrese el cargo en la empresa",disabled:!1},instagram:{type:"iText",label:"INSTAGRAM",name:"instagram",required:!1,message:"",disabled:!1},facebook:{type:"iText",label:"FACEBOOK",name:"facebook",required:!1,message:"",disabled:!1},web:{type:"iText",label:"WEB",name:"web",required:!1,message:"",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const B=D,S=ee,R=g("GUARDAR"),e=oe({}),T=g(!1),A=Pe(),Y=g(null),l=g({city_id:[],province_id:[],district_id:[],modality_id:[]}),H=a=>{console.log("handleInputEvent",a)},L=async a=>{a=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),k.value.dateTramite.disabled=!1)},Q=async a=>{a=="city_id"&&(await A.fetchProvinces(e.city_id),l.value.province_id=A.provinces,k.value.province_id.disabled=!1),a=="province_id"&&(await A.fetchDistricts(e.province_id),l.value.district_id=A.districts,k.value.district_id.disabled=!1)},P=async a=>{console.log("handleFocusSelect",a),a=="city_id"&&(await A.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,l.value.province_id=[],l.value.city_id=A.cities)},V=a=>{},z=async()=>{T.value=!0;const a={ruc:e.ruc,comercialName:e.comercialName,socialReason:e.socialReason,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,gender_id:e.gender_id,phone:e.phone,email:e.email,birthday:O(e.birthday).format("YYYY-MM-DD HH:mm"),positionCompany:e.positionCompany,instagram:e.instagram,facebook:e.facebook,web:e.web};try{const N=await M({url:`fair/sed-update-data-user/${S.info.id}`,method:"PUT",data:a});N.status===200&&(ne.success(N.message),G(),B("closeDraw",!0))}catch(N){console.error("Error:",N);const b=document.getElementsByClassName("ant-drawer-body")[0];b&&(b.scrollTop=0)}finally{T.value=!1}},G=()=>{e.nameEvent=null,e.city_id=null,e.place=null,e.modality_id=null,e.dates=null,e.hours=null,e.description=null},q=async a=>{a&&(e.ruc=a.ruc,e.comercialName=a.comercialName,e.socialReason=a.socialReason,await A.fetchEconomicSectors(),l.value.economicsector_id=A.economicSectors,e.economicsector_id=a.economicsector.id,await A.fetchComercialActivities(),l.value.comercialactivity_id=A.comercialActivities,e.comercialactivity_id=a.comercialactivity.id,await A.fetchCities(),l.value.city_id=A.cities,e.city_id=a.city.id,await A.fetchTypeDocuments(),l.value.typedocument_id=A.typeDocuments,e.typedocument_id=a.typedocument.id,e.documentnumber=a.documentnumber,e.lastname=a.lastname,e.middlename=a.middlename,e.name=a.name,await A.fetchGenders(),l.value.gender_id=A.genders,e.gender_id=a.gender.id,e.sick=a.sick,e.phone=a.phone,e.email=a.email,a.birthday&&(e.birthday=O(a.birthday,"YYYY-MM-DD")),e.positionCompany=a.positionCompany,e.facebook=a.facebook,e.instagram=a.instagram,e.web=a.web)};return ie(()=>{S.info&&q(S.info)}),Oe(()=>S.info,a=>{a?q(a):G()}),$("formState",e),$("loadingState",T),(a,N)=>(n(),s("div",$e,[m(Le,{fields:k.value,options:l.value,btnSaveName:R.value,onHandleInputEvent:H,resetSelect:Y.value,onHandleChangeSelect:Q,onHandleFocusSelect:P,onHandleBlurSelect:V,onHandleChangeClock:L,onOnSubmit:z},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const tt={class:"advisory-table"},at={key:1},nt={key:2},it={key:3},lt={key:4},st={key:5},ot={key:6},dt={key:7},rt={key:8},ct={key:9},ut=["href"],mt=["href"],pt=["href"],gt={key:0,style:{"line-height":"1.5"}},ht={key:1},At=["onClick"],ft={__name:"EventSed",setup(ee){const D=se(),k=JSON.parse(localStorage.getItem("role"))||[],B=g([]),S=g(0),R=g(150),e=g(!1);De();const T=g(!1),A=g(null),Y=g(!1),l=oe({year:O("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),H=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"RUC",dataIndex:"ruc",fixed:"left",width:100,align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:200},{title:"RAZÓN SOCIAL",dataIndex:"socialReason",width:200},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center"},{title:"SECTOR ECONÓMICO",dataIndex:"economicsector_id",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"comercialactivity_id",width:180},{title:"CATEGORÍA",dataIndex:"category_id",width:150},{title:"CIUDAD",dataIndex:"city_id",width:150,align:"center"},{title:"TIPO ASISTENTE",dataIndex:"typeAsistente",width:150,align:"center"},{title:"TIPO DOCUMENTO",dataIndex:"typedocument_id",width:150,align:"center"},{title:"N° DOCUMENTO",dataIndex:"documentnumber",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"GÉNERO",dataIndex:"gender_id",width:120,align:"center"},{title:"¿TIENE LESIÓN?",dataIndex:"sick",width:120,align:"center"},{title:"TELÉFONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"CARGO EN EMPRESA",dataIndex:"positionCompany",width:180,align:"center"},{title:"CÓMO CONOCIÓ EL EVENTO",dataIndex:"howKnowEvent_id",width:200,align:"center"},{title:"INSTAGRAM",dataIndex:"instagram",width:180,align:"center"},{title:"FACEBOOK",dataIndex:"facebook",width:180,align:"center"},{title:"WEB",dataIndex:"web",width:180,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],L=d=>{A.value=d,e.value=!0},Q=()=>{b(),e.value=!1},P=()=>{A.value=null,e.value=!0},V=async(d,f)=>{const U=D.params.slug,K=O().format("DD/MM/YYYY HH:mm"),J={slug:U,documentnumber:f.documentnumber,check:d.target.checked,date:K};try{const o=await M({url:"fair/update-attended-status",method:"PUT",data:J});o.status==200&&console.log("status",o.message)}catch(o){console.error("Error de red:",o)}},z=async d=>{try{const f=await M({url:`fair/sed-delete-user/${d.id}`,method:"DELETE"});f.status==200&&(b(),ne.success(f.message))}catch(f){console.error("Error de red:",f)}},G=async()=>{Y.value=!0;try{const d={},f=D.params.slug;l.year&&(d.year=O(l.year).format("YYYY")),l.range&&(d.dateStart=l.range[0].format("YYYY/MM/DD"),d.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(d.name=l.name);let U=`download/sed-asistentes/${f}`;await Ue(U,"sed",d)}catch(d){console.error("Error de red:",d)}finally{Y.value=!1}},q=async d=>{l.page=d,await b()},a=async d=>{d&&(l.page=1,await b())},N=d=>k.some(f=>d.includes(f.id)),b=async()=>{try{T.value=!0;const d={page:l.page},f=D.params.slug;l.year&&(d.year=O(l.year).format("YYYY")),l.range&&(d.dateStart=l.range[0].format("YYYY/MM/DD"),d.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(d.name=l.name),l.orderby&&(d.orderby=l.orderby);let U=`fair/list-event-sed/${f}`;const x=await M({url:U,method:"GET",params:d});B.value=x.data.data,S.value=x.data.total,R.value=x.data.per_page}catch(d){console.error("Error de red:",d)}finally{T.value=!1}};return ie(async()=>{await b()}),$("search",l),$("loading",T),$("loadingFile",Y),(d,f)=>{const U=h("a-checkbox"),x=h("a-menu-item"),K=h("a-popconfirm"),J=h("a-drawer");return n(),s("div",tt,[m(Ye,{title:"INSCRITOS EN EL EVENTO SED",new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ferias/empresariales",searchYear:!0,rangeDate:!0,columns:H,titleSearch:"FILTRAR POR RUC O DNI",pageSize:R.value,nameTotal:"Inscritos SED",dataSource:B.value,total:S.value,btnUpdate:!0,onHandleNew:P,onHandleCallFetchData:b,onHandleDownloadExcel:G,onHandleSearch:a,onHandlePaginator:q},{"data-cell":r(({column:o,record:p})=>{var u,t,v,w,j,W,Z;return[o.dataIndex=="asistio"?(n(),E(U,{key:0,checked:p.asistio,"onUpdate:checked":X=>p.asistio=X,onChange:X=>V(X,p)},null,8,["checked","onUpdate:checked","onChange"])):i("",!0),o.dataIndex=="economicsector_id"?(n(),s("span",at,y((u=p.economicsector)==null?void 0:u.name),1)):i("",!0),o.dataIndex=="comercialactivity_id"?(n(),s("span",nt,y((t=p.comercialactivity)==null?void 0:t.name),1)):i("",!0),o.dataIndex=="category_id"?(n(),s("span",it,y((v=p.category)==null?void 0:v.name),1)):i("",!0),o.dataIndex=="city_id"?(n(),s("span",lt,y((w=p.city)==null?void 0:w.name),1)):i("",!0),o.dataIndex=="typeAsistente"?(n(),s("span",st,y(p.typeAsistente==1?"Representante":"Invitado"),1)):i("",!0),o.dataIndex=="typedocument_id"?(n(),s("span",ot,y((j=p.typedocument)==null?void 0:j.name),1)):i("",!0),o.dataIndex=="gender_id"?(n(),s("span",dt,y((W=p.gender)==null?void 0:W.name),1)):i("",!0),o.dataIndex=="sick"?(n(),s("span",rt,y(p.typeAsistente=="yes"?"SI":"NO"),1)):i("",!0),o.dataIndex=="howKnowEvent_id"?(n(),s("span",ct,y((Z=p.howKnowEvent)==null?void 0:Z.name),1)):i("",!0),o.dataIndex=="instagram"?(n(),s("a",{key:10,href:p.instagram,target:"_blank"},y(p.instagram),9,ut)):i("",!0),o.dataIndex=="facebook"?(n(),s("a",{key:11,href:p.facebook,target:"_blank"},y(p.facebook),9,mt)):i("",!0),o.dataIndex=="web"?(n(),s("a",{key:12,href:p.web,target:"_blank"},y(p.web),9,pt)):i("",!0),o.dataIndex=="date"?(n(),s(C,{key:13},[p.dateStart!=p.dateEnd?(n(),s("span",gt,[f[1]||(f[1]=_("b",null,"Desde:",-1)),F(" "+y(p.dateStartFormat)+" ",1),f[2]||(f[2]=_("b",null,"Hasta:",-1)),F(" "+y(p.dateEndFormat),1)])):(n(),s("span",ht,y(p.dateStartFormat),1))],64)):i("",!0)]}),"custom-options":r(({record:o})=>[N([1,5])?(n(),E(x,{key:0},{default:r(()=>[_("a",{onClick:p=>L(o)},"Editar",8,At)]),_:2},1024)):i("",!0),N([1,5])?(n(),E(x,{key:1},{default:r(()=>[m(K,{placement:"rightBottom",title:`¿Quieres eliminar ${o.documentnumber} ?`,onConfirm:p=>z(o)},{icon:r(()=>[m(ae(re),{style:{color:"red"}})]),default:r(()=>[f[3]||(f[3]=_("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):i("",!0)]),_:1},8,["pageSize","dataSource","total"]),m(J,{open:e.value,"onUpdate:open":f[0]||(f[0]=o=>e.value=o),title:A.value?"EDITAR REGISTRO":"NUEVO REGISTRO",placement:"right",width:"650"},{default:r(()=>[m(et,{onCloseDraw:Q,info:A.value},null,8,["info"])]),_:1},8,["open","title"])])}}},kt={__name:"IndexFeriasInscriptos",setup(ee){const D=se(),k=g(!0),B=g(null),S=async()=>{try{k.value=!0;const R=D.params.slug,e=await M({url:`fair/type-fair/${R}`,method:"GET"});B.value=+e.data.fairtype_id}catch(R){console.error("Error de red:",R)}finally{k.value=!1}};return ie(()=>{S()}),(R,e)=>(n(),s(C,null,[B.value==1?(n(),E(ft,{key:0})):i("",!0),B.value==2?(n(),E(Xe,{key:1})):i("",!0)],64))}};export{kt as default};
