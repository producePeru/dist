import{f as ue,_ as ie}from"./nuevaPersonaCompany-ed7b2d3e.js";import{r as b,E as X,u as Z,a as ee,T as H,j as Q,b as p,o as u,d as f,c as _,w as k,e as l,F as N,s as Y,x as y,y as v,h as K,i as E,f as h,m as O,t as x}from"./index-b8c397e4.js";import{t as de,c as ce}from"./selects-c77e0024.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const me={class:"agreement-wrapper"},pe={class:"grid-item"},_e={__name:"EmpresaUsuario",props:["idWorkshop"],emits:["handleCreateItem"],setup(C,{emit:T}){const I=C,i=JSON.parse(localStorage.getItem("user")),m=T,n=b(ue);X(),Z(),b(null);const o=b(!1),P=b(!1),g=b([]),r=b([]),$=b([]),D=[{label:"DNI",value:"dni"},{label:"CE",value:"ce"},{label:"PAS",value:"pas"},{label:"PTP",value:"ptp"}],e=ee({id_workshop:I.idWorkshop,ruc:null,social_reason:null,category:null,person_type:null,document_type:"dni",number_document:null,last_name:null,middle_name:null,name:null,department:null,province:null,district:null,phone:null,email:null,created_by:H,update_by:H,post:4}),L=()=>{e.ruc=null,e.social_reason=null,e.category=null,e.person_type=null,e.document_type=null,e.number_document=null,e.last_name=null,e.middle_name=null,e.name=null,e.department=null,e.province=null,e.district=null,e.phone=null,e.email=null},M=()=>{n.value.category.disabled=!1,n.value.person_type.disabled=!1,n.value.document_type.disabled=!1,n.value.number_document.disabled=!1},A=()=>{n.value.last_name.disabled=!1,n.value.middle_name.disabled=!1,n.value.name.disabled=!1,n.value.department.disabled=!1,n.value.province.disabled=!1,n.value.district.disabled=!1,n.value.phone.disabled=!1,n.value.email.disabled=!1},G=()=>{n.value.social_reason.disabled=!0,n.value.category.disabled=!0,n.value.person_type.disabled=!0,n.value.document_type.disabled=!0,n.value.number_document.disabled=!0,n.value.last_name.disabled=!0,n.value.middle_name.disabled=!0,n.value.name.disabled=!0,n.value.department.disabled=!0,n.value.province.disabled=!0,n.value.district.disabled=!0,n.value.phone.disabled=!0,n.value.email.disabled=!0},q=s=>{e[s]=e[s].replace(/\D/g,"")},V=async()=>{o.value=!0;try{const s=e.ruc,{data:t}=await h({url:`/public/company/${s}`,method:"GET"});t&&(e.social_reason=t.razonSocial,M()),t.social_reason&&(e.social_reason=t.social_reason,e.category=t.category,e.person_type=t.person_type)}catch(s){console.log(s),O.error("El número ingresado no es válido"),e.ruc=null}finally{o.value=!1}},B=async()=>{if(!e.document_type)return O.warning("Debes escoger un tipo de documento");o.value=!0;try{const s=await h({url:`/public/person/${e.document_type}/${e.number_document}`,method:"GET"});if(s.status===404)return A();const t=s.data;e.name=t.nombres,e.last_name=t.apellidoPaterno,e.middle_name=t.apellidoMaterno,t.department&&(e.department=t.department,J(t.department)),t.province&&(e.province=t.province,j(t.province)),t.document_type&&(e.document_type=t.document_type),t.district&&(e.district=t.district),t.email&&(e.email=t.email),t.phone&&(e.phone=t.phone),A()}catch(s){console.log("You have an error",s)}finally{o.value=!1}},z=async s=>{if(s=="ruc")return V();if(s=="number_document")return B()},w=s=>{L(),G(),e.document_type=s},U=(s,t)=>{e.province=null,e.district=null,r.value=[],$.value=[],J(t.value)},R=(s,t)=>{e.district=null,$.value=[],j(t.value)},F=async()=>{try{const{data:s}=await h({url:"/departaments",method:"GET"});let t=s.map(c=>({label:c.label,value:c.id}));g.value=[...g.value,...t],G()}catch(s){console.log(s)}},J=async s=>{try{const{data:t}=await h({url:`/province/${s}`,method:"GET"});let c=t.map(S=>({label:S.label,value:S.id}));r.value=[...r.value,...c]}catch(t){console.log(t)}},j=async s=>{try{const{data:t}=await h({url:`/district/${s}`,method:"GET"});let c=t.map(S=>({label:S.label,value:S.id}));$.value=[...$.value,...c]}catch(t){console.log(t)}},ae=async()=>{P.value=!0;try{const s={ruc:e.ruc,social_reason:e.social_reason,category:e.category,person_type:e.person_type,department:e.department,province:e.province,district:e.district,email:e.email,phone:e.phone,created_by:i?i.id:null,update_by:i?i.id:null},t={document_type:e.document_type,number_document:e.number_document,last_name:e.last_name,middle_name:e.middle_name,name:e.name,department:e.department,province:e.province,district:e.district,email:e.email,phone:e.phone,created_by:i?i.id:null,update_by:i?i.id:null,post:4},c={ruc:e.ruc,number_document:e.number_document};await h({url:"/public/company",method:"POST",data:s}),await h({url:"/public/new-person",method:"POST",data:t}),await h({url:"/public/company-user",method:"POST",data:c}),m("registerMYPE",c)}catch{}finally{P.value=!1}},te=()=>{O.error("Debes de completar todos los espacios requeridos")};return Q(F),(s,t)=>{const c=p("a-select"),S=p("a-form-item"),ne=p("a-input-search"),le=p("a-input"),se=p("a-button"),oe=p("a-form");return u(),f("div",me,[_(oe,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:ae,onFinishFailed:te},{default:k(()=>[l("div",pe,[(u(!0),f(N,null,Y(n.value,(a,re)=>(u(),f(N,{key:re},[a.type==="iSelect"?(u(),y(S,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:k(()=>[a.name=="document_type"?(u(),y(c,{key:0,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:D,disabled:a.disabled,onChange:w},null,8,["value","onUpdate:value","disabled"])):v("",!0),a.name=="department"?(u(),y(c,{key:1,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:g.value,onChange:U,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="province"?(u(),y(c,{key:2,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:r.value,onChange:R,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="district"?(u(),y(c,{key:3,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:$.value,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="person_type"?(u(),y(c,{key:4,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:K(de),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="category"?(u(),y(c,{key:5,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,options:K(ce),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0)]),_:2},1032,["name","label","rules"])):v("",!0),a.type==="iSearch"?(u(),y(S,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:k(()=>[_(ne,{maxlength:15,loading:o.value,value:e[a.name],"onUpdate:value":d=>e[a.name]=d,disabled:a.disabled,onSearch:d=>z(a.name),onInput:d=>q(a.name)},null,8,["loading","value","onUpdate:value","disabled","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):v("",!0),a.type==="iText"?(u(),y(S,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:k(()=>[_(le,{value:e[a.name],"onUpdate:value":d=>e[a.name]=d,disabled:a.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):v("",!0)],64))),128)),_(S,{class:"btn-send"},{default:k(()=>[_(se,{type:"primary","html-type":"submit",loading:P.value},{default:k(()=>t[0]||(t[0]=[E("CONTINUAR")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])])}}},ve=W(_e,[["__scopeId","data-v-69e272a8"]]);const be={key:0},ye={class:"box-mensagge"},ge={class:"box-title"},fe={key:1,class:"box rate"},he={class:"box-title"},ke={class:"rate-wrapper"},Te={class:"box-title"},we={class:"box-title"},Se={key:2,class:"box"},xe={class:"box-title"},Ue={class:"box-btn"},Ee={__name:"TestSalidaQuestions",props:["workshop","rucdni"],setup(C){const T=C,I=Z(),i=b(!1),m=b(null),n=b(!0),o=ee({ruc:null,dni:null,ts1:null,ts2:null,ts3:null,ts4:null,ts5:null,rate_1:null,rate_2:null,rate_3:null,comments:null}),P=()=>{window.scrollTo({top:200,behavior:"smooth"})},g=async()=>{const D={ts1:o.ts1,ts2:o.ts2,ts3:o.ts3,ts4:o.ts4,ts5:o.ts5,c1:o.rate_1,c2:o.rate_2,c3:o.rate_3,suggestions:o.comments,ruc_mype:T.rucdni.ruc,dni_mype:T.rucdni.number_document,workshop_id:T.workshop.id};i.value=!0;try{await h({url:`/sending-test-answers/${T.workshop.id_out}`,method:"POST",data:D});const e={status:"success",title:"¡Gracias por participar de este formulario!",subTitle:"Seguiremos desarrollando más talleres para tí"};I.push({name:"enviado",query:e})}catch(e){console.error("Error:",e.response.data.errors[0])}finally{i.value=!1}},r=()=>{O.error("Debes de completar todos los datos"),P()};return Q(async()=>{try{const{data:D}=await h({url:`/testout-questions/${T.workshop.id}`,method:"GET"});m.value=D,n.value=!1}catch(D){console.error("Error de red:",D)}}),(D,e)=>{const L=p("a-spin"),M=p("a-radio"),A=p("a-radio-group"),G=p("a-form-item"),q=p("a-rate"),V=p("a-textarea"),B=p("a-button"),z=p("a-form");return u(),f(N,null,[n.value?(u(),y(L,{key:0})):v("",!0),_(z,{layout:"vertical",model:o,autocomplete:"off",onFinish:g,onFinishFailed:r},{default:k(()=>[m.value?(u(),f("div",be,[(u(),f(N,null,Y(5,(w,U)=>l("div",{class:"box",key:U},[l("span",ye,"Pregunta "+x(U+1),1),l("h3",ge,x(m.value["question"+(U+1)]),1),_(G,{name:`ts${U+1}`,rules:[{required:!0,message:"Escoge una respuesta"}]},{default:k(()=>[_(A,{class:"group-radios",value:o[`ts${U+1}`],"onUpdate:value":R=>o[`ts${U+1}`]=R},{default:k(()=>[(u(),f(N,null,Y(3,(R,F)=>_(M,{key:F,class:"item-radio",value:F+1},{default:k(()=>[E(x(m.value[`question${U+1}_opt${F+1}`]),1)]),_:2},1032,["value"])),64))]),_:2},1032,["value","onUpdate:value"])]),_:2},1032,["name"])])),64))])):v("",!0),m.value?(u(),f("div",fe,[l("div",null,[l("h3",he,x(m.value.satistaction1),1),_(q,{class:"star-rate",value:o.rate_1,"onUpdate:value":e[0]||(e[0]=w=>o.rate_1=w)},null,8,["value"])]),l("div",ke,[l("h3",Te,x(m.value.satistaction2),1),_(q,{class:"star-rate",value:o.rate_2,"onUpdate:value":e[1]||(e[1]=w=>o.rate_2=w)},null,8,["value"])]),l("div",null,[l("h3",we,x(m.value.satistaction3),1),_(q,{class:"star-rate",value:o.rate_3,"onUpdate:value":e[2]||(e[2]=w=>o.rate_3=w)},null,8,["value"])])])):v("",!0),m.value?(u(),f("div",Se,[e[4]||(e[4]=l("span",{class:"box-mensagge"},"Sugerencias",-1)),l("h3",xe,x(m.value.comments),1),_(V,{value:o.comments,"onUpdate:value":e[3]||(e[3]=w=>o.comments=w),"allow-clear":""},null,8,["value"])])):v("",!0),l("div",Ue,[_(B,{type:"primary","html-type":"submit",loading:i.value},{default:k(()=>e[5]||(e[5]=[E("ENVIAR")])),_:1},8,["loading"])])]),_:1},8,["model"])],64)}}},$e=W(Ee,[["__scopeId","data-v-8a3b3bcd"]]);const De={class:"invitation"},Pe={key:1,class:"container"},Ie={key:0,class:"invitacion-info text-html"},qe={__name:"TestSalida",setup(C){const T=b(!0),I=X(),i=b(null),m=b(!0),n=b(null),o=g=>{m.value=!0,n.value=g},P=async()=>{try{const g=await h({url:`/get-workshop-slug/${I.params.slug}`,method:"GET"});i.value=g.workshop,T.value=!1}catch(g){console.error("Error de red:",g)}};return Q(()=>{P()}),(g,r)=>{const $=p("a-spin");return u(),f("section",De,[T.value?(u(),y($,{key:0})):(u(),f("div",Pe,[r[6]||(r[6]=l("div",{class:"header"},[l("img",{class:"logo-ruta",src:ie,alt:""})],-1)),r[7]||(r[7]=l("div",{class:"lazing"},[l("h3",null,"TEST DE SALIDA")],-1)),i.value?(u(),f("div",Ie,[l("div",null,[r[3]||(r[3]=l("p",null,[E(" ¡Capacítate con "),l("b",null,"#RUTADIGITAL"),E(" del Ministerio de Producción del Perú, a través de "),l("b",null,"#TuEmpresa"),E("! ")],-1)),r[4]||(r[4]=l("br",null,null,-1)),l("p",null,[r[0]||(r[0]=l("b",null,"Taller: ",-1)),E(" "+x(i.value.title),1)]),l("p",null,[r[1]||(r[1]=l("b",null,"Exponente: ",-1)),E(" "+x(i.value.exponent_name),1)]),l("p",null,[r[2]||(r[2]=l("b",null,"Fecha: ",-1)),E(" "+x(i.value.workshop_date),1)])]),r[5]||(r[5]=l("div",null,[l("img",{class:"img-taller",src:"https://img.freepik.com/vector-gratis/proyecto-inicio-negocio-lanzar-idea-exitosa_107791-13390.jpg",alt:""})],-1))])):v("",!0),r[8]||(r[8]=l("br",null,null,-1)),m.value?(u(),y($e,{key:2,workshop:i.value,rucdni:n.value},null,8,["workshop","rucdni"])):(u(),y(ve,{key:1,onRegisterMYPE:o}))]))])}}},Ge=W(qe,[["__scopeId","data-v-b5f78b83"]]);export{Ge as default};
