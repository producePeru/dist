import"./FormComponent-4bf37019.js";import{r as f,a as D,k as T,U as q,b as i,o as r,d as c,c as l,w as n,e as A,F as _,v as B,y as C,i as E,z as U,j as F,m as N,h as P}from"./index-3f88e443.js";import{u as I}from"./selectes-d146f2e5.js";import{Q as O}from"./quill.snow-ba8e47e8.js";const V={class:"grid-event-resultado"},z={__name:"DrawResultados",props:["dataRow"],emits:["closeDraw"],setup(y,{emit:g}){const d=I();d.$patch({officesPnte:d.officesPnte}),d.fetchOfficesPnte();const v=g,s=y,u=f(!1),b={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}],["link"]]},contentType:"html"},w=f({resultados:{type:"iTextArea",label:"DESCRIBIR RESULTADOS",name:"resultados",required:!1,message:"Escribe los resultados de los evento",max:500}}),a=D({resultado:null}),R=async()=>{const e={resultado:a.resultado};u.value=!0;try{const t=await N({url:`event/update/${s.dataRow.id}`,method:"PUT",data:e});t.status===200&&(a.resultado="</p>",P.success(t.message),v("closeDraw"))}catch(t){console.error("Failed to update record",t)}finally{u.value=!1}},m=e=>{console.log("Setting",e),e.resultado?a.resultado=e.resultado:a.resultado="</p>"};return T(()=>{s.dataRow&&m(s.dataRow)}),q(()=>s.dataRow,e=>{e&&m(e)}),(e,t)=>{const p=i("a-form-item"),h=i("a-button"),k=i("a-form");return r(),c("div",null,[l(k,{class:"form-events",layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:R},{default:n(()=>[A("div",V,[(r(!0),c(_,null,B(w.value,(o,x)=>(r(),c(_,{key:x},[o.type==="iTextArea"?(r(),C(p,{key:0,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:n(()=>[l(E(O),{class:"quill-editor",content:a.resultado,"onUpdate:content":t[0]||(t[0]=S=>a.resultado=S),options:b,contentType:"html"},null,8,["content"])]),_:2},1032,["name","label","rules"])):U("",!0)],64))),128))]),l(p,null,{default:n(()=>[l(h,{type:"primary","html-type":"submit",loading:u.value,style:{"margin-top":"1rem"}},{default:n(()=>t[1]||(t[1]=[F("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}};export{z as _};
