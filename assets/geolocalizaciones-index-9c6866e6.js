import{r as f,k as G,b as C,o as d,d as v,c as n,w as i,f as g,e as o,F as w,v as P,n as T,t as h,j as c,m as b,h as r}from"./index-5df45652.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const U={class:"container"},V={class:"card-box"},q=["onClick"],F={class:"card-box"},O=["onClick"],j={class:"card-box"},L={__name:"geolocalizaciones-index",setup(M){const k=f([]),p=f([]),u=f([]),x=f(null),y=f(null),z=async a=>{x.value=a,y.value=null,p.value=[],u.value=[];try{const{data:e}=await g({url:`select/provinces/${a.value}`,method:"GET"});p.value=e}catch(e){console.error("Error al cargar provincias:",e)}},D=async a=>{y.value=a,u.value=[];try{const{data:e}=await g({url:`select/districts/${a.value}`,method:"GET"});u.value=e}catch(e){console.error("Error al cargar distritos:",e)}};async function R(a){const e=prompt("Editar regi贸n",a.label);e&&(a.label=e);const s={id:a.value,name:e};(await b({url:"create/update-city",method:"PUT",data:s})).status==200?(r.success("Regi贸n editada exitosamente"),k.value=k.value.map(l=>l.value===a.value?{...l,label:e}:l)):r.error("Error al editar la regi贸n")}const $=async()=>{if(!x.value)return alert("Selecciona una regi贸n primero");const a=prompt("Nombre de la nueva provincia"),e={city_id:x.value.value,name:a};(await b({url:"create/create-province",method:"POST",data:e})).status==200?(p.value.push({label:a,value:Date.now()}),r.success("Provincia creada exitosamente")):r.error("Error al crear la provincia")};async function N(a){const e=prompt("Editar provincia",a.label);e&&(a.label=e);const s={id:a.value,name:e};(await b({url:"create/update-province",method:"PUT",data:s})).status==200?(r.success("Provincia editada exitosamente"),p.value=p.value.map(l=>l.value===a.value?{...l,label:e}:l)):r.error("Error al editar la provincia")}async function S(){if(!y.value)return alert("Selecciona una provincia primero");const a=prompt("Nombre del nuevo distrito"),e={province_id:y.value.value,name:a};(await b({url:"create/create-district",method:"POST",data:e})).status==200?(u.value.push({label:a,value:Date.now()}),r.success("Distrito creado exitosamente")):r.error("Error al crear el distrito")}async function B(a){const e=prompt("Editar distrito",a.label);e&&(a.label=e);const s={id:a.value,name:e};(await b({url:"create/update-district",method:"PUT",data:s})).status==200?(r.success("Distrito editado exitosamente"),u.value=u.value.map(l=>l.value===a.value?{...l,label:e}:l)):r.error("Error al editar el distrito")}return G(async()=>{try{const{data:a}=await g({url:"select/cities",method:"GET"});k.value=a}catch(a){console.error("Error al cargar regiones:",a)}}),(a,e)=>{const s=C("a-button"),m=C("a-col"),l=C("a-row");return d(),v("div",U,[n(l,{gutter:[16,16]},{default:i(()=>[n(m,{xs:24,sm:8,md:8},{default:i(()=>[o("div",V,[e[1]||(e[1]=o("h3",null," Regiones ",-1)),o("ul",null,[(d(!0),v(w,null,P(k.value,t=>{var _;return d(),v("li",{key:t.value,class:T({active:((_=x.value)==null?void 0:_.value)===t.value})},[o("span",{onClick:E=>z(t),style:{cursor:"pointer"}},h(t.label),9,q),n(s,{type:"link",size:"small",onClick:E=>R(t)},{default:i(()=>e[0]||(e[0]=[c("Editar")])),_:2},1032,["onClick"])],2)}),128))])])]),_:1}),n(m,{xs:24,sm:8,md:8},{default:i(()=>[o("div",F,[o("h3",null,[e[3]||(e[3]=c(" Provincias ")),n(s,{type:"primary",size:"small",onClick:$},{default:i(()=>e[2]||(e[2]=[c("+ Crear")])),_:1})]),o("ul",null,[(d(!0),v(w,null,P(p.value,t=>{var _;return d(),v("li",{key:t.value,class:T({active:((_=y.value)==null?void 0:_.value)===t.value})},[o("span",{onClick:E=>D(t),style:{cursor:"pointer"}},h(t.label),9,O),n(s,{type:"link",size:"small",onClick:E=>N(t)},{default:i(()=>e[4]||(e[4]=[c("Editar")])),_:2},1032,["onClick"])],2)}),128))])])]),_:1}),n(m,{xs:24,sm:8,md:8},{default:i(()=>[o("div",j,[o("h3",null,[e[6]||(e[6]=c(" Distritos ")),n(s,{type:"primary",size:"small",onClick:S},{default:i(()=>e[5]||(e[5]=[c("+ Crear")])),_:1})]),o("ul",null,[(d(!0),v(w,null,P(u.value,t=>(d(),v("li",{key:t.value},[c(h(t.label)+" ",1),n(s,{type:"link",size:"small",onClick:_=>B(t)},{default:i(()=>e[7]||(e[7]=[c("Editar")])),_:2},1032,["onClick"])]))),128))])])]),_:1})]),_:1})])}}},K=I(L,[["__scopeId","data-v-2e9abc95"]]);export{K as default};
