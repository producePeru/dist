import{_ as G}from"./TableComponent-c24be625.js";import{E as q,r as m,u as J,a as Q,p as k,k as Z,X as Y,b as _,o,d as r,c as f,w as u,m as C,y as D,z as i,F as h,j as P,e as y,t as l,v as X,i as K,a2 as ee,h as ae}from"./index-58ae4560.js";import{d as te}from"./downloadExcel-785be48b.js";import{g as ne}from"./usePermissions-550ddfec.js";import"./es-cd98c72c.js";import{_ as oe}from"./ParticipanteSed-1ad6bb61.js";import"./icoexcel-1b303edf.js";import"./selectes-eaf2ccc2.js";import"./MoreOutlined-b316c3db.js";import"./FormComponent-fd8242da.js";import"./quill.snow-cd8e5140.js";const se={class:"layout-content cyber-wow"},re={key:2,class:"cyber-wow-empresario"},ie={key:3,class:"cyber-wow-empresario"},le={key:4,class:"cyber-wow-empresario-ubigeo"},ce={key:5,class:"wow-redes-sociales"},de=["href"],me={key:0,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBF73o0P4eNj_YuVFZtaVHAxum9_p4ARUOAg&s"},ue={key:0,src:"https://a.thumbs.redditmedia.com/JDkvH4BSYJQOZ93RZGUIVUjtEqi1T5WnhTyqeCtgUJ0.png"},pe={key:0,src:"https://cdn-icons-png.flaticon.com/256/4138/4138151.png"},ge={key:0,src:"https://images.freeimages.com/fic/images/icons/2781/google_jfk_icons/256/chrome_ico.png"},Ye={__name:"inscritos-index",setup(we){const I=q();JSON.parse(localStorage.getItem("role"));const T=m([]),O=m(0),R=m(150),A=m({}),E=m(!1);J();const b=m(!1),N=m(null),v=m(!1),M=m({name:"Cargando..."}),U={Facebook:"https://www.facebook.com/",Instagram:"https://www.instagram.com/",TikTok:"https://www.tiktok.com/@",Web:"https://www."},V=e=>U[e.name]?`${U[e.name]}${e.link}`:e.link,a=Q({year:k("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),B=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"EMPRESARIO",dataIndex:"empresario",width:350},{title:"EMPRESA",dataIndex:"empresa",width:350},{title:"SECTOR ECONÃ“MICO",dataIndex:"sectorEconomico",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"actividadComercial",width:180},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:140,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},...A.value.can_delete?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],$=()=>{g(),E.value=!1},H=async(e,t)=>{const p=I.params.slug,x=k().format("DD/MM/YYYY HH:mm"),S={slug:p,documentnumber:t.documentnumber,check:e.target.checked,date:x};try{const w=await C({url:"fair/update-attended-status",method:"PUT",data:S});w.status==200&&console.log("status",w.message)}catch(w){console.error("Error de red:",w)}},L=async e=>{try{const t=await C({url:`events-ugse/cyber-wow-delete-participant/${e.id}`,method:"DELETE"});t.status==200&&(g(),ae.success(t.message))}catch(t){console.error("Error de red:",t)}},W=async()=>{v.value=!0;try{const e={},t=I.params.slug;a.year&&(e.year=k(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name);let p=`download/cyber-wow-participants/${t}`;await te(p,"cyber-wow",e)}catch(e){console.error("Error de red:",e)}finally{v.value=!1}},j=async e=>{a.page=e,await g()},z=async e=>{e&&(a.page=1,await g())},g=async()=>{try{b.value=!0;const e={page:a.page},t=I.params.slug;a.year&&(e.year=k(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);let p=`events-ugse/cyber-wow-list-assistants/${t}`;const d=await C({url:p,method:"GET",params:e});M.value=d.event,T.value=d.data.data,O.value=d.data.total,R.value=d.data.per_page}catch(e){console.error("Error de red:",e)}finally{b.value=!1}};return Z(async()=>{await g(),A.value=await ne("wow-list")}),Y("search",a),Y("loading",b),Y("loadingFile",v),(e,t)=>{var F;const p=_("a-checkbox"),d=_("a-tag"),x=_("a-popconfirm"),S=_("a-menu-item"),w=_("a-drawer");return o(),r("div",se,[f(G,{title:`INSCRITOS CYBER WOW ðŸ“ˆ ${(F=M.value)==null?void 0:F.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/cyber-wow",columns:B,titleSearch:"FILTRAR POR RUC O DNI",pageSize:R.value,nameTotal:"Inscritos Cyber Wow",dataSource:T.value,total:O.value,btnUpdate:!0,onHandleCallFetchData:g,onHandleDownloadExcel:W,onHandleSearch:z,onHandlePaginator:j},{"data-cell":u(({column:c,record:n})=>[c.dataIndex=="asistio"?(o(),D(p,{key:0,checked:n.asistio,"onUpdate:checked":s=>n.asistio=s,onChange:s=>H(s,n)},null,8,["checked","onUpdate:checked","onChange"])):i("",!0),c.dataIndex=="sick"?(o(),r(h,{key:1},[n.sick=="SI"?(o(),D(d,{key:0,color:"red"},{default:u(()=>t[1]||(t[1]=[P("SI")])),_:1})):i("",!0),n.sick=="NO"?(o(),D(d,{key:1,color:"green"},{default:u(()=>t[2]||(t[2]=[P("NO")])),_:1})):i("",!0)],64)):i("",!0),c.dataIndex=="empresario"?(o(),r("div",re,[y("b",null,l(n.name)+" "+l(n.lastname)+" "+l(n.middlename),1),y("span",null,l(n.documentnumber)+" / "+l(n.phone)+" / "+l(n.email),1)])):i("",!0),c.dataIndex=="empresa"?(o(),r("div",ie,[y("b",null,l(n.nombreComercial),1),y("span",null,l(n.razonSocial)+" / "+l(n.ruc),1),y("span",null,l(n.city)+" - "+l(n.province)+" - "+l(n.district),1)])):i("",!0),c.dataIndex=="city"?(o(),r("div",le)):i("",!0),c.dataIndex=="redesSociales"?(o(),r("div",ce,[(o(!0),r(h,null,X(n.socials,s=>(o(),r("a",{key:s.name,href:V(s),target:"_blank"},[s.name==="Facebook"&&s.link?(o(),r(h,{key:0},[s.name==="Facebook"?(o(),r("img",me)):i("",!0)],64)):i("",!0),s.name==="Instagram"&&s.link?(o(),r(h,{key:1},[s.name==="Instagram"?(o(),r("img",ue)):i("",!0)],64)):i("",!0),s.name==="TikTok"&&s.link?(o(),r(h,{key:2},[s.name==="TikTok"?(o(),r("img",pe)):i("",!0)],64)):i("",!0),s.name==="Web"&&s.link?(o(),r(h,{key:3},[s.name==="Web"?(o(),r("img",ge)):i("",!0)],64)):i("",!0)],8,de))),128))])):i("",!0)]),"custom-options":u(({record:c})=>[f(S,null,{default:u(()=>[f(x,{placement:"rightBottom",title:`Â¿Quieres eliminar ${c.documentnumber} ?`,onConfirm:n=>L(c)},{icon:u(()=>[f(K(ee),{style:{color:"red"}})]),default:u(()=>[t[3]||(t[3]=y("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:1},8,["title","pageSize","dataSource","total"]),f(w,{open:E.value,"onUpdate:open":t[0]||(t[0]=c=>E.value=c),title:N.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:u(()=>[f(oe,{onCloseDraw:$,info:N.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ye as default};
