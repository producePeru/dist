import{r as f,j as ee,k as ae,o as i,d as E,e as c,n as te,l as ne,z as oe,a as re,b as p,c as l,w as r,G as se,H as le,F as R,f as U,M as w,p as h,t as k,s as ie,y as u,x as _,h as M,E as de,i as v,m as O}from"./index-342820c3.js";import{_ as me,a as P}from"./logo-tuempresa-c1197180.js";import{u as ue}from"./selectes-3353578e.js";import{F as ce}from"./FormalizacionFooter-c5fb69d9.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */import"./es-6fe2f805.js";import"./EnvironmentOutlined-e84287c4.js";const _e={__name:"FormalizacionHeader",setup(F){const d=f(null),g=f(!1),D=()=>{window.pageYOffset>10?g.value=!0:g.value=!1};return ee(()=>{window.addEventListener("scroll",D)}),ae(()=>{window.removeEventListener("scroll",D)}),(S,A)=>(i(),E("header",{class:te(["header",{floatingNav:g.value}]),ref_key:"navBar",ref:d},A[0]||(A[0]=[c("div",{class:"container header-wrapper",style:{padding:"0"}},[c("img",{src:me,alt:"logo-produce",style:{position:"relative",top:"-8px"}}),c("img",{src:P,alt:"logo-tu-empresa",style:{height:"50px",position:"relative",top:"8px"}})],-1)]),2))}},be=pe(_e,[["__scopeId","data-v-4a43ff94"]]);const fe={class:"attendance"},ve={class:"container"},ge={class:"attendance-section"},ye={class:"attendance-title"},he={class:"qr-form"},Ee={key:0,class:"qr-title"},xe={key:9},De="DD/MM/YYYY",Ne={__name:"ValoracionNotarias",setup(F){ne.locale("es"),oe();const d=ue();d.$patch({typeDocuments:d.typeDocuments}),d.$patch({economicSectors:d.economicSectors}),d.$patch({genders:d.genders}),d.fetchEconomicSectors(),d.fetchTypeDocuments(),d.fetchGenders();const g=f(!1);f(!1),f(!0);const D=f(null),S=f(!1),A=f(!1),q=f(!1),a=re({}),B=[{value:"si",label:"SI"},{value:"no",label:"NO"}],z=n=>{if(n==="country_id")return d.countries;if(n==="gender_id")return d.genders;if(n==="sick")return B;if(n==="typedocument_id")return d.typeDocuments},b=f({title1:{type:"iTittle",label:"DATOS DEL USUARIO"},typedocument_id:{type:"iSelect",label:"TIPO DE DOCUMENTO DE IDENTIDAD",name:"typedocument_id",required:!0,message:"Seleccionar tipo",disabled:!1},documentnumber:{type:"iSearch",label:"INGRESE NÚMERO DE IDENTIDAD",name:"documentnumber",required:!0,message:"Escribir tu número de documento",disabled:!0,max:11},nationality:{type:"iText",label:"NACIONALIDAD",name:"nationality",required:!0,message:"Escribir nacionalidad",disabled:!1,max:50},name:{type:"iText",label:"NOMBRES",name:"name",required:!0,message:"Escribir nombre",disabled:!0,max:80},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribir nombre",disabled:!0,max:80},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribir nombre",disabled:!0,max:80},phone:{type:"iText",label:"NÚMERO DE CELULAR",name:"phone",required:!1,message:"Escribe tu num. de celular",disabled:!1,max:9},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!1,message:"Ingresar email",email:"email",disabled:!1,max:150},economicsector_id:{type:"iSelectWrite",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!1,message:"Seleccionar sector económnico",disabled:!1},title2:{type:"iTittle",label:"DATOS DEL TRAMITE"},motivo:{type:"iRadio",label:"1. EL MOTIVO DE SU VISITA ES PARA REALIZAR EL TRÁMITE DE:",name:"motivo",required:!0,message:"Escoger opción",disabled:!0,other:!1},notary:{type:"iText",label:"2. ¿CUÁL ES EL NOMBRE DE LA NOTARIA?",name:"notary",required:!0,message:"Escribir nombre de la notaría",disabled:!1,max:150},califica:{type:"iRadio",label:"3. ¿CÓMO CALIFICARÍA LA ATENCIÓN?",name:"califica",required:!0,message:"Escoger opción",disabled:!0,other:!1}}),V=(n,t)=>{if(!t)return Promise.reject("La fecha es requerida");const o=new Date,m=new Date(t);let x=o.getFullYear()-m.getFullYear();const T=o.getMonth()-m.getMonth();return(T<0||T===0&&o.getDate()<m.getDate())&&x--,x<18||x>99?Promise.reject("La edad debe estar entre 18 y 99 años"):Promise.resolve()},j=(n,t)=>{if(n.field==="phone"){const o=/^9\d{8}$/;if(t){if(!o.test(t))return Promise.reject("El número debe empezar con 9 y tener exactamente 9 dígitos")}}return Promise.resolve()},$=n=>{const t=a[n]?a[n].trim():"";a[n]=t},Y=n=>{n=="typedocument_id"&&(a.documentnumber=null,a.name=null,a.lastname=null,a.middlename=null,a.typedocument_id!=1?(b.value.name.disabled=!1,b.value.lastname.disabled=!1,b.value.middlename.disabled=!1):(b.value.name.disabled=!0,b.value.lastname.disabled=!0,b.value.middlename.disabled=!0))},Z=(n,t)=>{const o=a.typedocument_id;return/^\d+$/.test(t)?o===1&&t.length!==8?Promise.reject("Debe tener exactamente 8 caracteres."):o!==1&&t.length>12?Promise.reject("Debe tener exactamente 12 caracteres."):(o===1&&t.startsWith("0")&&t.length===8,Promise.resolve()):Promise.reject("Solo se permiten números.")},H=async()=>{const{typedocument_id:n,documentnumber:t}=a;if(!n||!t){O.error("El tipo de documento y el número de documento no pueden estar vacíos.");return}if(!/^\d+$/.test(t)){O.error("El número de documento solo debe contener caracteres numéricos.");return}if(n===1&&t.length!==8){O.error("El número de documento debe tener exactamente 8 caracteres para el tipo de documento DNI.");return}try{if(S.value=!0,a.typedocument_id==1){b.value.name.disabled=!0,b.value.lastname.disabled=!0,b.value.middlename.disabled=!0;const o=await U({url:`public/search-api-dni/${a.documentnumber}`,method:"GET"});o.status==200&&(a.name=o.data.name,a.lastname=o.data.lastname,a.middlename=o.data.middlename,a.nationality="PERUANO")}}catch(o){console.error("Error de red:",o),O.error("Error al procesar ese dato")}finally{S.value=!1}},I=(n,t)=>{const o=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(o)},C=()=>{a.typedocument_id=null,a.documentnumber=null,a.nationality=null,a.name=null,a.lastname=null,a.middlename=null,a.phone=null,a.email=null,a.economicsector_id=null,a.motivo=null,a.notary=null,a.califica=null},G=async()=>{q.value=!0;const n={typedocument_id:a.typedocument_id,documentnumber:a.documentnumber,nationality:a.nationality,name:a.name,lastname:a.lastname,middlename:a.middlename,phone:a.phone,email:a.email,economicsector_id:a.economicsector_id,motivo:a.motivo,notary:a.notary,califica:a.califica};try{const t=await U({url:"public/valorization-notary",method:"POST",data:n});t.status==200&&w.success({title:"¡Tus datos han sido enviados con éxito!",content:h("div",{class:"modal-content"},[h("div",{class:"modal-image-qr"},[h("img",{src:"https://scontent-lim1-1.xx.fbcdn.net/v/t39.30808-6/252069188_248049250706157_5253555468671181943_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=jFiIlZ20jZAQ7kNvgHxxubd&_nc_oc=AdhLxLJuDpQZ7nkF3uBTcdV43rfFZvqTOcI-bLSMC1SPV9w0wjWWRZzOfUZCe9rCF7A&_nc_zt=23&_nc_ht=scontent-lim1-1.xx&_nc_gid=Azp9-j70flv7S7JaLZDDiBY&oh=00_AYC6ciPFwfzSqICPKf_aedPyHftHn4suhPDCp7i3HaBA9A&oe=67B9A3D0",alt:"Éxito",class:"success-image"})]),h("p",{class:"modal-message"},"Gracias por contribuir a mejorar nuestros procesos")]),onOk(){C(),window.scrollTo({top:0,behavior:"smooth"})},class:"attendance-modal"}),t.status==400&&w.warning({title:"REGISTRO AVISO",content:h("div",{},[h("p",t.message)]),onOk(){C(),window.scrollTo({top:0,behavior:"smooth"})},class:"attendance-modal"})}catch(t){console.error("Error de red:",t)}finally{q.value=!1}};return(n,t)=>{const o=p("a-input-search"),m=p("a-form-item"),x=p("a-input"),T=p("a-date-picker"),N=p("a-select"),W=p("a-textarea"),y=p("a-radio"),L=p("a-radio-group"),K=p("a-button"),J=p("a-form"),Q=p("a-modal");return i(),E(R,null,[l(be),c("div",fe,[c("div",ve,[c("section",ge,[l(J,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:G,onKeydown:t[0]||(t[0]=se(le(()=>{},["prevent"]),["enter"]))},{default:r(()=>[c("div",ye,[t[2]||(t[2]=c("h2",null,"VALORIZACIÓN",-1)),c("h3",null,k(D.value),1)]),c("div",he,[(i(!0),E(R,null,ie(b.value,(e,X)=>(i(),E(R,{key:X},[e.type==="iTittle"?(i(),E("div",Ee,[c("h4",null,k(e.label),1)])):u("",!0),e.type==="iSearch"?(i(),_(m,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,validator:Z}]},{default:r(()=>[l(o,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,placeholder:"","enter-button":"BUSCAR",loading:S.value,maxlength:a.typedocument_id===1?8:12,onSearch:H},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iSearchRuc"?(i(),_(m,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max},{pattern:/^(10|15|20)\d{9,}$/,message:"El número debe comenzar con 10, 15 o 20, tener solo números, y al menos 11 caracteres"}]},{default:r(()=>[l(o,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,placeholder:"Ingresar RUC","enter-button":"BUSCAR",loading:A.value,maxlength:e.max,onSearch:n.handleSearchRUCC,disabled:e.disabled},null,8,["value","onUpdate:value","loading","maxlength","onSearch","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iText"?(i(),_(m,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max},{validator:j}]},{default:r(()=>[l(x,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,maxlength:e.max,onBlur:s=>$(e.name),disabled:e.disabled},null,8,["value","onUpdate:value","maxlength","onBlur","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iDate"?(i(),_(m,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message},{validator:V,message:"La edad debe estar entre 18 y 99 años"}]},{default:r(()=>[l(T,{locale:M(de),value:a[e.name],"onUpdate:value":s=>a[e.name]=s,style:{width:"100%"},format:De,placeholder:"día/mes/año",disabled:e.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iSelect"?(i(),_(m,{key:5,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[l(N,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:z(e.name),"show-search":"","filter-option":I,onChange:s=>Y(e.name),disabled:e.disabled},null,8,["value","onUpdate:value","options","onChange","disabled"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iTextarea"?(i(),_(m,{key:6,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[l(W,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,rows:4,maxlength:e.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iSelectWrite"?(i(),_(m,{key:7,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[e.name=="economicsector_id"?(i(),_(N,{key:0,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,"show-search":"",options:M(d).economicSectors,"filter-option":I,disabled:e.disabled},null,8,["value","onUpdate:value","options","disabled"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="iRadio"?(i(),_(m,{key:8,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max}]},{default:r(()=>[e.name=="motivo"?(i(),_(L,{key:0,class:"qr-califica",value:a[e.name],"onUpdate:value":s=>a[e.name]=s,name:e.name},{default:r(()=>[l(y,{value:"reserva",class:"qr-radio"},{default:r(()=>t[3]||(t[3]=[v("RESERVA DE NOMBRE")])),_:1}),l(y,{value:"acto",class:"qr-radio"},{default:r(()=>t[4]||(t[4]=[v("ACTO CONSTITUTIVO")])),_:1})]),_:2},1032,["value","onUpdate:value","name"])):u("",!0),e.name=="califica"?(i(),_(L,{key:1,class:"qr-califica",value:a[e.name],"onUpdate:value":s=>a[e.name]=s,name:e.name},{default:r(()=>[l(y,{value:"4",class:"qr-radio"},{default:r(()=>t[5]||(t[5]=[v("EXCELENTE")])),_:1}),l(y,{value:"3",class:"qr-radio"},{default:r(()=>t[6]||(t[6]=[v("BUENO")])),_:1}),l(y,{value:"2",class:"qr-radio"},{default:r(()=>t[7]||(t[7]=[v("REGULAR")])),_:1}),l(y,{value:"1",class:"qr-radio"},{default:r(()=>t[8]||(t[8]=[v("MALO")])),_:1})]),_:2},1032,["value","onUpdate:value","name"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),e.type==="space1"?(i(),E("div",xe)):u("",!0)],64))),128))]),l(m,null,{default:r(()=>[l(K,{type:"primary","html-type":"submit",loading:q.value,class:"attendance-btn"},{default:r(()=>t[9]||(t[9]=[v("ENVIAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])]),l(ce),l(Q,{open:g.value,"onUpdate:open":t[1]||(t[1]=e=>g.value=e),title:"Basic Modal"},{default:r(()=>t[10]||(t[10]=[c("img",{src:P,alt:"logo-tu-empresa"},null,-1)])),_:1},8,["open"])],64)}}};export{Ne as default};
