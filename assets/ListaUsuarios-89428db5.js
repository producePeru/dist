import{u as L,r as m,l as j,b as i,o as t,d as u,e as c,c as n,w as e,F as p,h as b,j as l,t as f,y as s,B as d,i as C,S as F,E as G,T as P,m as S}from"./index-302d1fe3.js";import{M as q}from"./MoreOutlined-7ae6c402.js";const H=c("h3",null,"USUARIOS",-1),J={class:"filters"},Q={key:0},K=["onClick"],W=c("a",null,"Eliminar",-1),X={class:"paginator"},ae={__name:"ListaUsuarios",setup(Y){const E=JSON.parse(localStorage.getItem("user")),N=L(),v=m([]),g=m(!1),k=m(0),x=m({page:1});m(null);const O=m([{title:"Nombres",dataIndex:"name",fixed:"left",width:60},{title:"Apellidos",dataIndex:"apellidos",fixed:"left",width:50},{title:"N° documento",dataIndex:"document_number",align:"center",width:40},{title:"ROL",dataIndex:"rol",align:"center",width:35},{title:"Correo electrónico",dataIndex:"email",width:60},{title:"Celular",dataIndex:"phone_number",align:"center",width:20},{title:"Género",dataIndex:"gender",align:"center",width:20},{title:"",dataIndex:"actions",align:"center",width:30}]),U=o=>{x.value.page=o,y()},z=async o=>{N.push(`/admin/usuarios/actualizar-usuario/${o.document_number}`)},B=async o=>{try{g.value=!0;const _=await b({url:`delete-user/${o.id}`,method:"POST",data:{id:E.id}});S.success(_.message),y()}catch(_){S.error(_.response.data.message)}finally{g.value=!1}},y=async()=>{try{g.value=!0;const o=await b({url:"/users",method:"GET",params:x.value});v.value=o.data,k.value=o.total}catch(o){console.error("Error de red:",o)}finally{g.value=!1}};return j(y),(o,_)=>{const w=i("a-button"),M=i("router-link"),r=i("a-tag"),I=i("a-menu-item"),V=i("a-popconfirm"),D=i("a-menu"),R=i("a-dropdown"),T=i("a-table"),$=i("a-pagination");return t(),u(p,null,[c("div",null,[H,c("div",J,[n(M,{to:"nuevo-usuario"},{default:e(()=>[n(w,{type:"primary"},{default:e(()=>[l(" NUEVO ")]),_:1})]),_:1})]),n(T,{bordered:"",class:"ant-table-striped",columns:O.value,"data-source":v.value,pagination:!1,loading:g.value,size:"small"},{bodyCell:e(({column:h,record:a})=>[h.dataIndex=="apellidos"?(t(),u(p,{key:0},[l(f(a.last_name)+" "+f(a.middle_name),1)],64)):s("",!0),h.dataIndex=="gender"?(t(),u(p,{key:1},[a.gender=="h"?(t(),d(r,{key:0,color:"blue"},{default:e(()=>[l("Hombre")]),_:1})):(t(),d(r,{key:1,color:"pink"},{default:e(()=>[l("Mujer")]),_:1}))],64)):s("",!0),h.dataIndex=="is_disabled"?(t(),u(p,{key:2},[a.activo!=1?(t(),d(r,{key:0,color:"success"},{default:e(()=>[l("Activo")]),_:1})):(t(),d(r,{key:1,color:"error"},{default:e(()=>[l("Inactivo")]),_:1}))],64)):s("",!0),h.dataIndex=="rol"?(t(),u(p,{key:3},[a.role=="super"?(t(),d(r,{key:0,color:"default"},{default:e(()=>[l(f(a.role),1)]),_:2},1024)):s("",!0),a.role=="admin"?(t(),d(r,{key:1,color:"processing"},{default:e(()=>[l(f(a.role),1)]),_:2},1024)):s("",!0),a.role=="usuario"?(t(),d(r,{key:2,color:"success"},{default:e(()=>[l(f(a.role),1)]),_:2},1024)):s("",!0),a.role=="invitado"?(t(),d(r,{key:3,color:"warning"},{default:e(()=>[l(f(a.role),1)]),_:2},1024)):s("",!0)],64)):s("",!0),h.dataIndex=="actions"?(t(),u(p,{key:4},[a.role!="super"?(t(),u("div",Q,[n(R,{trigger:["click"]},{overlay:e(()=>[n(D,null,{default:e(()=>[n(I,null,{default:e(()=>[c("a",{onClick:A=>z(a)},"Editar",8,K)]),_:2},1024),n(I,null,{default:e(()=>[n(V,{title:"¿Eliminar?",onConfirm:A=>B(a)},{icon:e(()=>[n(C(F),{style:{color:"red"}})]),default:e(()=>[W]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:e(()=>[c("a",{class:"ant-dropdown-link",onClick:_[0]||(_[0]=G(()=>{},["prevent"]))},[n(w,{shape:"circle",icon:P(C(q)),size:"small"},null,8,["icon"])])]),_:2},1024)])):s("",!0)],64)):s("",!0)]),_:1},8,["columns","data-source","loading"])]),c("div",X,[n($,{size:"small",total:k.value,pageSize:20,onChange:U,showSizeChanger:!1},null,8,["total"])])],64)}}};export{ae as default};
