import{u as P,i as G,r as h,a as L,M as D,j as z,b as a,o as g,d as $,c as n,w as l,e as u,t as d,g as c,k as R,m as F,v as H,F as S,q as U,p as J,h as K}from"./index-ba4cf725.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const p=m=>(J("data-v-43c4629b"),m=m(),K(),m),W={class:"test-container"},X=p(()=>u("br",null,null,-1)),Z={class:"test-head"},j=p(()=>u("h1",null,"TEST DE ENTRADA",-1)),x=p(()=>u("b",null,"Expositor:",-1)),ee=p(()=>u("b",null,"Fecha taller:",-1)),te=p(()=>u("br",null,null,-1)),E="DD/MM/YYYY",oe={__name:"TestEntrada",setup(m){const b=P(),q=G(),y=h(!1);h(null);const t=L({workshop_id:+q.query.id,user_id:1,date_end:h(D("04/12/2023",E)),question1:null,question1_opt1:null,question1_opt2:null,question1_opt3:null,question1_resp:null,question2:null,question2_opt1:null,question2_opt2:null,question2_opt3:null,question2_resp:null,question3:null,question3_opt1:null,question3_opt2:null,question3_opt3:null,question3_resp:null,question4:null,question4_opt1:null,question4_opt2:null,question4_opt3:null,question4_resp:null,question5:null,question5_opt1:null,question5_opt2:null,question5_opt3:null,question5_resp:null}),Y=async()=>{y.value=!0;let e=null,r=null;b.currentRoute.value.name=="editar-test-entrada"?(e=`/testin/${q.query.test}`,r="PUT"):(e=`/create-test-in/${q.query.id}`,r="POST");let o=t;try{const i=await R({url:e,method:r,data:o});F.success(i.message),b.push("/admin/ruta-digital/talleres")}catch(i){console.error("Error de red:",i),F.error("No se pudo crear este cuestionario")}finally{y.value=!1}},I=e=>{console.log(e)};return z(async()=>{if(b.currentRoute.value.name=="editar-test-entrada")try{const{data:e}=await R({url:`/testin/${q.query.id}`,method:"GET"});let r=H(e.date_end).format("DD/MM/YYYY");t.date_end=h(D(r,E));for(let o=1;o<=5;o++)t["question"+o]=e["question"+o],t["question"+o+"_opt1"]=e["question"+o+"_opt1"],t["question"+o+"_opt2"]=e["question"+o+"_opt2"],t["question"+o+"_opt3"]=e["question"+o+"_opt3"],t["question"+o+"_resp"]=e["question"+o+"_resp"]}catch(e){console.error("Error de red:",e)}}),(e,r)=>{const o=a("router-link"),i=a("a-breadcrumb-item"),w=a("a-breadcrumb"),M=a("a-divider"),N=a("a-date-picker"),v=a("a-form-item"),T=a("a-input"),A=a("a-radio"),C=a("a-radio-group"),O=a("a-button"),V=a("a-form");return g(),$("div",W,[n(w,null,{default:l(()=>[n(i,null,{default:l(()=>[n(o,{to:"/admin/ruta-digital/talleres"},{default:l(()=>[c("Volver a Talleres de Ruta Digital")]),_:1})]),_:1}),n(i,null,{default:l(()=>[c(d(e.$route.name=="test-entrada"?"Crear":"Editar")+" test de entrada",1)]),_:1})]),_:1}),X,u("div",Z,[j,u("h2",null,d(e.$route.query.taller),1),u("span",null,[x,c(" "+d(e.$route.query.exponent),1)]),u("span",null,[ee,c(" "+d(e.$route.query.date),1)])]),n(M),n(V,{layout:"vertical",model:t,onFinish:Y,onFinishFailed:I},{default:l(()=>[n(v,{label:"Fecha de expiraciÃ³n de la prueba",name:"date_end",rules:[{required:!0,message:"Seleccionar una fecha"}]},{default:l(()=>[n(N,{value:t.date_end,"onUpdate:value":r[0]||(r[0]=k=>t.date_end=k),format:E},null,8,["value"])]),_:1}),(g(),$(S,null,U(5,(k,s)=>u("div",{key:s},[n(v,{label:`Pregunta ${s+1}`,name:[`question${s+1}`],rules:[{required:!0,message:"Escribir pregunta"}]},{default:l(()=>[n(T,{value:t[`question${s+1}`],"onUpdate:value":f=>t[`question${s+1}`]=f},null,8,["value","onUpdate:value"])]),_:2},1032,["label","name"]),n(v,null,{default:l(()=>[n(C,{class:"options",value:t[`question${s+1}_resp`],"onUpdate:value":f=>t[`question${s+1}_resp`]=f},{default:l(()=>[(g(),$(S,null,U(3,(f,_)=>u("div",{class:"option",key:_},[n(A,{value:_+1},null,8,["value"]),n(T,{placeholder:`Option ${_+1}`,value:t[`question${s+1}_opt${_+1}`],"onUpdate:value":B=>t[`question${s+1}_opt${_+1}`]=B},null,8,["placeholder","value","onUpdate:value"])])),64))]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)])),64)),te,n(v,{class:"text-center"},{default:l(()=>[n(O,{type:"primary","html-type":"submit",loading:y.value},{default:l(()=>[c(d(e.$route.name=="test-entrada"?"CREAR":"EDITAR")+" CUESTIONARIO ",1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ue=Q(oe,[["__scopeId","data-v-43c4629b"]]);export{ue as default};
