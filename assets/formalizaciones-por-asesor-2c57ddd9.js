import{r as c,k as C,U as F,o as f,d as z,e as u,p as x,b as d,c as s,w as i,m as E,s as U,i as A,W as T,j as w,y as h,z as y,M as $}from"./index-d32b4ca9.js";import"./es-c1ba93d8.js";import{C as M}from"./auto-ba4ecebb.js";const j={style:{"border-bottom":"1px solid #0505052d",width:"100%"}},b={__name:"LineChart",props:["total","color"],setup(p){const e=p,r=c(null);C(()=>{e.total&&o(e.total)}),F(()=>e.total,t=>{t&&o(t)});function o(t){const n=r.value.getContext("2d");new M(n,{type:"line",data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Registrados",data:t,borderWidth:1,fill:!0,backgroundColor:e.color}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,responsive:!0,scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{beginAtZero:!0,display:!1,ticks:{display:!1},grid:{display:!1}}}}})}return(t,n)=>(f(),z("div",j,[u("canvas",{ref_key:"myChart",ref:r,style:{height:"80px"}},null,512)]))}},W={style:{width:"100%"}},G={__name:"BarChart",props:["total"],setup(p){const e=p,r=c(null);C(()=>{e.total&&o(e.total)}),F(()=>e.total,t=>{t&&o(t)});function o(t){const n=r.value.getContext("2d");new M(n,{type:"bar",data:{labels:["Asesorías","Formalización RUC 10","Formalización RUC 20"],datasets:[{label:"Registrados",data:t,backgroundColor:["#fff5df","#ffe1e7","#def3f2"],borderWidth:1}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,responsive:!0}})}return(t,n)=>(f(),z("div",W,[u("canvas",{ref_key:"myChart",ref:r,style:{height:"250px"}},null,512)]))}};const I={class:"formalization-home layout-content"},J={class:"box-chart"},L={class:"box-chart"},P={class:"box-chart"},V={class:"box-chart"},Z={class:"chart-filter-date"},Q={__name:"formalizaciones-por-asesor",setup(p){x.locale("es");const e=c(!1),r=c(),o=c([]),t=c([]),n=c([]),_=c([]),m=c([]),Y=async()=>{t.value=[],n.value=[],_.value=[],m.value=[],e.value=!0;try{const l={...r.value&&{dateStart:x(r.value[0]).format("YYYY-MM-DD")},...r.value&&{dateEnd:x(r.value[1]).format("YYYY-MM-DD")}},a=await E({url:"formalization/chart",method:"GET",params:l});a&&(o.value=a,t.value=[...a.asesories],n.value=[...a.formalization10],_.value=[...a.formalization20],m.value=[...a.bar])}catch(l){console.error("Error de red:",l)}finally{e.value=!1}},k=async()=>{e.value=!0;try{const l=await E({url:"formalization/chart",method:"GET"});l&&(o.value=l,t.value=[...l.asesories],n.value=[...l.formalization10],_.value=[...l.formalization20],m.value=[...l.bar])}catch(l){console.error("Error de red:",l)}finally{e.value=!1}};return C(async()=>{await k()}),(l,a)=>{const R=d("a-button"),D=d("a-flex"),g=d("a-statistic"),v=d("a-col"),S=d("a-range-picker"),B=d("a-row"),N=d("a-spin");return f(),z("section",I,[s(D,{justify:"space-between",align:"center"},{default:i(()=>[a[2]||(a[2]=u("h1",{class:"title-produce"},"REPORTE DE FORMALIZACIONES Y ASESORÍAS",-1)),s(R,{icon:U(A(T)),type:"primary",danger:"",onClick:k},{default:i(()=>a[1]||(a[1]=[w(" REFRESCAR ")])),_:1},8,["icon"])]),_:1}),a[4]||(a[4]=u("br",null,null,-1)),s(N,{spinning:e.value},{default:i(()=>[s(B,{gutter:[16,16]},{default:i(()=>[s(v,{xs:24,sm:12,md:12,lg:8,xl:8},{default:i(()=>[u("div",J,[s(g,{title:"Asesorías",value:o.value.totalasesories,style:{"margin-right":"50px"}},null,8,["value"]),t.value.length>1?(f(),h(b,{key:0,total:o.value.asesories,color:"#fff5df"},null,8,["total"])):y("",!0)])]),_:1}),s(v,{xs:24,sm:12,md:12,lg:8,xl:8},{default:i(()=>[u("div",L,[s(g,{title:"Formalizaciones RUC 10",value:o.value.totalFormalization10,style:{"margin-right":"50px"}},null,8,["value"]),n.value.length>1?(f(),h(b,{key:0,total:o.value.formalization10,color:"#ffe1e7"},null,8,["total"])):y("",!0)])]),_:1}),s(v,{xs:24,sm:12,md:12,lg:8,xl:8},{default:i(()=>[u("div",P,[s(g,{title:"Formalizaciones RUC 20",value:o.value.totalFormalization20,style:{"margin-right":"50px"}},null,8,["value"]),_.value.length>1?(f(),h(b,{key:0,total:o.value.formalization20,color:"#def3f2"},null,8,["total"])):y("",!0)])]),_:1}),s(v,{xs:24,sm:24,md:24,lg:16,xl:16},{default:i(()=>[u("div",V,[u("div",Z,[s(S,{locale:A($),value:r.value,"onUpdate:value":a[0]||(a[0]=O=>r.value=O)},null,8,["locale","value"]),s(R,{type:"dashed",onClick:Y},{default:i(()=>a[3]||(a[3]=[w("Filtrar")])),_:1})]),m.value.length>1?(f(),h(G,{key:0,total:m.value},null,8,["total"])):y("",!0)])]),_:1})]),_:1})]),_:1},8,["spinning"])])}}};export{Q as default};
