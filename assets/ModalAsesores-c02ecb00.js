import{B as J,r as m,f as U,a as K,N as Q,n as X,b as p,o as i,z as d,w as v,c as b,e as w,d as N,v as Y,F as D,s as u,i as Z,j as ee,t as ae,h,m as M}from"./index-b4c6ca84.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";const ne={document_type:{type:"iSelect",label:"Tipo de documento",name:"document_type",required:!0,message:"Seleccionar tipo de documento"},number_document:{type:"iText",label:"NÃºmero de documento",name:"number_document",required:!0,message:"Error en el tipo de documento"},id_supervisor:{type:"iSelectWrite",label:"Supervisor",name:"id_supervisor",required:!0,message:"Seleccionar supervisor"},id_sede:{type:"iSelect",label:"CDE",name:"id_sede",required:!0,message:"Seleccionar tipo de documento"},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el nombre"},last_name:{type:"iText",label:"Apellido Paterno",name:"last_name",required:!0,message:"Escribe el apellidos"},middle_name:{type:"iText",label:"Apellido Materno",name:"middle_name",required:!0,message:"Escribe el apellidos"},department:{type:"iSelect",label:"Departamento",name:"department",required:!1,message:"Seleccionar un tipo"},province:{type:"iSelect",label:"Provincia",name:"province",required:!1,message:"Seleccionar un tipo"},district:{type:"iSelect",label:"Distrito",name:"district",required:!1,message:"Seleccionar un tipo"},email:{type:"iText",label:"Correo",name:"email",required:!1,email:"email",message:"Escribe el correo del usuario"},phone:{type:"iText",label:"Num. Celular",name:"phone",required:!1,message:"Escribe el celular del usuario",max:9}};const le={class:"grid-item"},oe={class:"wrapper-form_btn"},se={__name:"ModalAsesores",props:["isIdUpdate"],emits:["handleCloseModal","refreshTable"],setup(I,{emit:P}){const o=I,S=P;J(()=>{o.isIdUpdate?(e.document_type=o.isIdUpdate.document_type,e.number_document=o.isIdUpdate.number_document,e.id_sede=o.isIdUpdate.id_sede,e.id_supervisor=o.isIdUpdate.id_supervisor,e.name=o.isIdUpdate.name,e.last_name=o.isIdUpdate.last_name,e.middle_name=o.isIdUpdate.middle_name,e.department=o.isIdUpdate.department,x(o.isIdUpdate.department),e.province=o.isIdUpdate.province,E(o.isIdUpdate.province),e.district=o.isIdUpdate.district,e.email=o.isIdUpdate.email,e.phone=o.isIdUpdate.phone):C()});const y=m([]),_=m([]),c=m([]),q=m([]),T=m([]),A=async()=>{try{const{data:t}=await U({url:"/departaments",method:"GET"});let n=t.map(l=>({label:l.label,value:l.id}));y.value=[...y.value,...n]}catch(t){console.log(t)}},z=(t,n)=>{e.province=null,e.district=null,_.value=[],c.value=[],x(n.value)},x=async t=>{try{const{data:n}=await U({url:`/province/${t}`,method:"GET"});let l=n.map(r=>({label:r.label,value:r.id}));_.value=[..._.value,...l]}catch(n){console.log(n)}},F=(t,n)=>{e.district=null,c.value=[],E(n.value)},E=async t=>{try{const{data:n}=await U({url:`/district/${t}`,method:"GET"});let l=n.map(r=>({label:r.label,value:r.id}));c.value=[...c.value,...l]}catch(n){console.log(n)}},B=(t,n)=>{const l=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return n.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(l)},f=m(!0),g=m(!1),e=K({document_type:null,number_document:null,id_supervisor:null,id_sede:null,last_name:null,middle_name:null,name:null,department:null,province:null,district:null,email:null,phone:null,created_by:Q}),G=[{label:"DNI",value:"dni"},{label:"CE",value:"ce"},{label:"PAS",value:"pas"},{label:"PTP",value:"ptp"}],k=()=>{S("handleCloseModal",!0),f.value=!1},C=()=>{e.document_type=null,e.number_document=null,e.last_name=null,e.middle_name=null,e.name=null,e.department=null,e.province=null,e.district=null,e.email=null,e.phone=null},L=async()=>{const t=e;g.value=!0;let n,l;o.isIdUpdate?(n=`/advisor/${o.isIdUpdate.id}`,l="PUT"):(n="/advisor",l="POST");try{const r=await h({url:n,method:l,data:t});C(),S("refreshTable",!0),M.success(r.message),k()}catch{M.error("No se pudo registrar al exponente")}finally{g.value=!1}},V=async()=>{try{const{data:t}=await h({url:"/sedes",method:"GET"});q.value=t}catch(t){console.error("Error de red:",t)}},$=async()=>{try{const{data:t}=await h({url:"/supervisors-list",method:"GET"});T.value=t}catch(t){console.error("Error de red:",t)}};return X(()=>{A(),V(),$()}),(t,n)=>{const l=p("a-select"),r=p("a-form-item"),O=p("a-input"),R=p("a-button"),W=p("a-form"),j=p("a-modal");return i(),d(j,{open:f.value,"onUpdate:open":n[0]||(n[0]=a=>f.value=a),title:"Asesores",style:{top:"40px"},footer:"",onCancel:k,width:"700px"},{default:v(()=>[b(W,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:L},{default:v(()=>[w("div",le,[(i(!0),N(D,null,Y(Z(ne),(a,H)=>(i(),N(D,{key:H},[a.type==="iSelect"?(i(),d(r,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:v(()=>[a.name=="document_type"?(i(),d(l,{key:0,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:G},null,8,["value","onUpdate:value"])):u("",!0),a.name=="department"?(i(),d(l,{key:1,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:y.value,onChange:z},null,8,["value","onUpdate:value","options"])):u("",!0),a.name=="province"?(i(),d(l,{key:2,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:_.value,onChange:F},null,8,["value","onUpdate:value","options"])):u("",!0),a.name=="district"?(i(),d(l,{key:3,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:c.value},null,8,["value","onUpdate:value","options"])):u("",!0),a.name=="supervisor"?(i(),d(l,{key:4,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:c.value},null,8,["value","onUpdate:value","options"])):u("",!0),a.name=="id_sede"?(i(),d(l,{key:5,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:q.value},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0),a.type==="iSelectWrite"?(i(),d(r,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:v(()=>[b(l,{value:e[a.name],"onUpdate:value":s=>e[a.name]=s,"show-search":"",options:T.value,"filter-option":B},null,8,["value","onUpdate:value","options"])]),_:2},1032,["name","label","rules"])):u("",!0),a.type==="iText"?(i(),d(r,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:v(()=>[b(O,{value:e[a.name],"onUpdate:value":s=>e[a.name]=s},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),w("div",oe,[b(R,{type:"primary","html-type":"submit",loading:g.value},{default:v(()=>[ee(ae(I.isIdUpdate?"Actualizar":"Registrar"),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open"])}}},de=te(se,[["__scopeId","data-v-5b60ef16"]]);export{de as M};
