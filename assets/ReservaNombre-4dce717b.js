import{u as B}from"./selectes-9890a566.js";import{r as g,a as M,b as u,o as l,d as S,c as r,w as s,e as j,F as x,D as G,h as n,q as d,s as c,U as J,i as U,V as H,z as N,m as k}from"./index-baf99455.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const Q={codesunarp:{type:"iText",label:"Código SID sunarp",name:"codesunarp",required:!0,message:"Escribir apellido",disabled:!1},economicsector_id:{type:"iSelect",label:"Sector económico",name:"economicsector_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},comercialactivity_id:{type:"iSelectWrite",label:"Actividad comercial",name:"comercialactivity_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},regime_id:{type:"iSelect",label:"Tipo de régimen societario",name:"regime_id",required:!0,message:"Seleccionar tipo de documento",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"Dirección del negocio",name:"address",required:!1,message:"Escribir apellido",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1}},te={name:{type:"iText",label:"Nombre empresa",name:"name",required:!0,message:"Escribir apellido",disabled:!1},numbernotary:{type:"iText",label:"Número de solicitud de envio a Notaría",name:"numbernotary",required:!1,message:"Seleccionar departamento",disabled:!1},notary_id:{type:"iSelect",label:"Notaría",name:"notary_id",required:!1,message:"Seleccionar notaría",disabled:!1}},oe={ruc:{type:"iText",label:"Número de RUC",name:"ruc",required:!0,message:"Escribir número de RUC",disabled:!1,max:9,min:9}},le={detailprocedure_id:{type:"iSelect",label:"Detalle del trámite",name:"detailprocedure_id",required:!0,message:"Escribir número de RUC",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},economicsector_id:{type:"iSelect",label:"Sector económico",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelectWrite",label:"Actividad comercial",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1}},re={component_id:{type:"iSelect",label:"Componente",name:"component_id",required:!0,message:"Seleccionar un componente",disabled:!1},theme_id:{type:"iSelectWrite",label:"Tema del componente",name:"theme_id",required:!0,message:"Seleccionar un tema del componente",disabled:!1},modality_id:{type:"iSelect",label:"Modalidad de atención",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},city_id:{type:"iSelectWrite",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar departamento",disabled:!1},province_id:{type:"iSelectWrite",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},observations:{type:"iTextarea",label:"Observaciones",name:"observations",required:!1,message:"Seleccionar tipo de documento",disabled:!1}};const X={class:"wrapper-booking"},Y={class:"grid-booking"},Z={__name:"ReservaNombre",props:["info"],emits:["closeDraw"],setup(D,{emit:C}){const w=H({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),R=JSON.parse(localStorage.getItem("profile")),W=D,T=C,y=g(!1),v=g(null),f=g(!1),i=B();i.$patch({cities:i.cities}),i.$patch({modalities:i.modalities}),i.$patch({economicSectors:i.economicSectors}),i.$patch({comercialActivities:i.comercialActivities}),i.$patch({regimes:i.regimes}),i.fetchEconomicSectors(),i.fetchComercialActivities(),i.fetchRegimes(),i.fetchCities(),i.fetchModalities();const a=M({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:R.user_id}),A=async()=>{try{y.value=!0;const o={name:v.value};(await N({url:"create/comercial-activities",method:"POST",data:o})).status==200&&(v.value=null,i.fetchComercialActivities())}catch(o){console.log(o)}finally{y.value=!1}},E=o=>{a.province_id=null,a.district_id=null,i.fetchProvinces(o)},F=o=>{a.district_id=null,i.fetchDistricts(o)},b=(o,p)=>{const m=o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return p.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(m)},P=async()=>{f.value=!0,a.people_id=W.info.id;try{const o=await N({url:"formalization/ruc20-step1",method:"POST",data:a});o.status===200&&(k.success(o.message),a.codesunarp=null,a.economicsector_id=null,a.comercialactivity_id=null,a.regime_id=null,a.city_id=null,a.province_id=null,a.district_id=null,a.address=null,a.modality_id=null,T("closeDraw",!0))}catch(o){console.log("Error: "+o)}finally{f.value=!1}},z=()=>{k.warning("Debes de completar todos los espacios requeridos")};return(o,p)=>{const m=u("a-select"),_=u("a-form-item"),O=u("a-divider"),h=u("a-input"),q=u("a-button"),I=u("a-space"),V=u("a-form");return l(),S("div",X,[r(V,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:P,onFinishFailed:z},{default:s(()=>[j("div",Y,[(l(!0),S(x,null,G(n(Q),(e,L)=>(l(),S(x,{key:L},[e.type==="iSelect"?(l(),d(_,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:s(()=>[e.name=="regime_id"?(l(),d(m,{key:0,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,options:n(i).regimes},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="economicsector_id"?(l(),d(m,{key:1,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,options:n(i).economicSectors},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="modality_id"?(l(),d(m,{key:2,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,options:n(i).modalities},null,8,["value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iSelectWrite"?(l(),d(_,{key:1,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:s(()=>[e.name=="comercialactivity_id"?(l(),d(m,{key:0,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,"show-search":"",options:n(i).comercialActivities,"filter-option":b},{dropdownRender:s(({menuNode:t})=>[r(n(w),{vnodes:t},null,8,["vnodes"]),r(O,{style:{margin:"4px 0"}}),r(I,{style:{padding:"4px 8px"}},{default:s(()=>[r(h,{ref_for:!0,ref:"inputRef",value:v.value,"onUpdate:value":p[0]||(p[0]=$=>v.value=$),placeholder:"Nueva actividad"},null,8,["value"]),r(q,{type:"text",onClick:A,loading:y.value},{icon:s(()=>[r(n(J))]),default:s(()=>[U(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):c("",!0),e.name=="city_id"?(l(),d(m,{key:1,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,"show-search":"",options:n(i).cities,"filter-option":b,onChange:E},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="province_id"?(l(),d(m,{key:2,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,"show-search":"",options:n(i).provinces,"filter-option":b,onChange:F},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="district_id"?(l(),d(m,{key:3,value:a[e.name],"onUpdate:value":t=>a[e.name]=t,"show-search":"",options:n(i).districts,"filter-option":b},null,8,["value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iText"?(l(),d(_,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email,max:e.max}]},{default:s(()=>[r(h,{value:a[e.name],"onUpdate:value":t=>a[e.name]=t,disabled:e.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),r(_,null,{default:s(()=>[r(q,{class:"btn-produce",type:"primary","html-type":"submit",loading:f.value},{default:s(()=>[U("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},se=K(Z,[["__scopeId","data-v-4b71e665"]]);export{se as R,te as a,re as b,oe as f,le as r};
