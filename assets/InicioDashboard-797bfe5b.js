import{r as d,k,T as A,o as r,d as v,e as c,p as b,b as f,c as s,w as u,s as $,i as R,V as B,j as F,y as m,z as p,M as T,m as E}from"./index-a215a23b.js";import"./es-c8b56329.js";import{C as w,a as U}from"./PointStyling-13c6ee81.js";import"./_plugin-vue_export-helper-c27b6911.js";const j={style:{"border-bottom":"1px solid #0505052d",width:"100%"}},C={__name:"LineChart",props:["total","color"],setup(_){const a=_,e=d(null);k(()=>{a.total&&o(a.total)}),A(()=>a.total,t=>{t&&o(t)});function o(t){const i=e.value.getContext("2d");new w(i,{type:"line",data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Registrados",data:t,borderWidth:1,fill:!0,backgroundColor:a.color}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,responsive:!0,scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{beginAtZero:!0,display:!1,ticks:{display:!1},grid:{display:!1}}}}})}return(t,i)=>(r(),v("div",j,[c("canvas",{ref_key:"myChart",ref:e,style:{height:"80px"}},null,512)]))}},J={style:{width:"100%"}},V={__name:"BarChart",props:["total"],setup(_){const a=_,e=d(null);k(()=>{a.total&&o(a.total)}),A(()=>a.total,t=>{t&&o(t)});function o(t){const i=e.value.getContext("2d");new w(i,{type:"bar",data:{labels:["Asesorías","Formalización RUC 10","Formalización RUC 20"],datasets:[{label:"Registrados",data:t,backgroundColor:["#fff5df","#ffe1e7","#def3f2"],borderWidth:1}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,responsive:!0}})}return(t,i)=>(r(),v("div",J,[c("canvas",{ref_key:"myChart",ref:e,style:{height:"250px"}},null,512)]))}};const G={class:"formalization-home"},L={class:"box-chart"},W={class:"box-chart"},Z={class:"box-chart"},q={class:"box-chart"},P={class:"chart-filter-date"},H={__name:"InicioFormalizaciones",setup(_){b.locale("es");const a=d(!1),e=d(),o=d([]),t=d([]),i=d([]),h=d([]),y=d([]),S=async()=>{t.value=[],i.value=[],h.value=[],y.value=[],a.value=!0;try{const n={...e.value&&{dateStart:b(e.value[0]).format("YYYY-MM-DD")},...e.value&&{dateEnd:b(e.value[1]).format("YYYY-MM-DD")}},l=await E({url:"formalization/chart",method:"GET",params:n});l&&(o.value=l,t.value=[...l.asesories],i.value=[...l.formalization10],h.value=[...l.formalization20],y.value=[...l.bar])}catch(n){console.error("Error de red:",n)}finally{a.value=!1}},D=async()=>{a.value=!0;try{const n=await E({url:"formalization/chart",method:"GET"});n&&(o.value=n,t.value=[...n.asesories],i.value=[...n.formalization10],h.value=[...n.formalization20],y.value=[...n.bar])}catch(n){console.error("Error de red:",n)}finally{a.value=!1}};return k(()=>{}),(n,l)=>{const z=f("a-button"),I=f("a-flex"),x=f("a-statistic"),g=f("a-col"),M=f("a-range-picker"),Y=f("a-row"),N=f("a-spin");return r(),v("section",G,[s(I,{justify:"space-between",align:"center"},{default:u(()=>[l[2]||(l[2]=c("h1",{class:"title-produce"},"REPORTE DE FORMALIZACIONES Y ASESORÍAS",-1)),s(z,{icon:$(R(B)),type:"primary",danger:"",onClick:D},{default:u(()=>l[1]||(l[1]=[F(" REFRESCAR ")])),_:1},8,["icon"])]),_:1}),l[4]||(l[4]=c("br",null,null,-1)),s(N,{spinning:a.value},{default:u(()=>[s(Y,{gutter:[16,16]},{default:u(()=>[s(g,{xs:24,sm:12,md:12,lg:8,xl:8},{default:u(()=>[c("div",L,[s(x,{title:"Asesorías",value:o.value.totalasesories,style:{"margin-right":"50px"}},null,8,["value"]),t.value.length>1?(r(),m(C,{key:0,total:o.value.asesories,color:"#fff5df"},null,8,["total"])):p("",!0)])]),_:1}),s(g,{xs:24,sm:12,md:12,lg:8,xl:8},{default:u(()=>[c("div",W,[s(x,{title:"Formalizaciones RUC 10",value:o.value.totalFormalization10,style:{"margin-right":"50px"}},null,8,["value"]),i.value.length>1?(r(),m(C,{key:0,total:o.value.formalization10,color:"#ffe1e7"},null,8,["total"])):p("",!0)])]),_:1}),s(g,{xs:24,sm:12,md:12,lg:8,xl:8},{default:u(()=>[c("div",Z,[s(x,{title:"Formalizaciones RUC 20",value:o.value.totalFormalization20,style:{"margin-right":"50px"}},null,8,["value"]),h.value.length>1?(r(),m(C,{key:0,total:o.value.formalization20,color:"#def3f2"},null,8,["total"])):p("",!0)])]),_:1}),s(g,{xs:24,sm:24,md:24,lg:16,xl:16},{default:u(()=>[c("div",q,[c("div",P,[s(M,{locale:R(T),value:e.value,"onUpdate:value":l[0]||(l[0]=O=>e.value=O)},null,8,["locale","value"]),s(z,{type:"dashed",onClick:S},{default:u(()=>l[3]||(l[3]=[F("Filtrar")])),_:1})]),y.value.length>1?(r(),m(V,{key:0,total:y.value},null,8,["total"])):p("",!0)])]),_:1})]),_:1})]),_:1},8,["spinning"])])}}},K={__name:"InicioConvenios",setup(_){return(a,e)=>(r(),v("div",null,[s(U)]))}};const Q={__name:"InicioFerias",setup(_){return(a,e)=>(r(),v("section",null,e[0]||(e[0]=[c("h3",null,"Ferias Empresariales",-1)])))}},oe={__name:"InicioDashboard",setup(_){const a=JSON.parse(localStorage.getItem("role"))||[],e=o=>a.some(t=>o.includes(t.id));return(o,t)=>(r(),v("section",null,[e([1,2,7])?(r(),m(H,{key:0})):p("",!0),e([6,8,9])?(r(),m(K,{key:1})):p("",!0),e([10,11,12])?(r(),m(Q,{key:2})):p("",!0)]))}};export{oe as default};
