import{r as y,l as M,u as ie,a as de,D as A,n as W,b,o as r,d as T,c as p,w as m,e as o,F,v as ue,B as _,s as v,i as G,j as f,f as g,m as U,p as z,k as B,t as ce}from"./index-ef958b15.js";import{t as me,c as pe}from"./selects-0563509c.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const _e="/assets/logorutadigital-e9b0771e.png",ve="/assets/imgInvitacion-e3c50550.jpg",be="/assets/zoomlogo-bd8e1a39.png",ye="/assets/clock-87f7be37.png",ge={ruc:{type:"iSearch",label:"Ingresar número RUC",name:"ruc",required:!0,message:"Escribe número de documento",disabled:!1},social_reason:{type:"iText",label:"Razón social",name:"social_reason",required:!0,message:"Escribir apellido",disabled:!0},category:{type:"iSelect",label:"Rubro",name:"category",required:!0,message:"Seleccionar tipo de documento",disabled:!0},person_type:{type:"iSelect",label:"Tipo",name:"person_type",required:!0,message:"Seleccionar tipo de documento",disabled:!0},document_type:{type:"iSelect",label:"Tipo de documento",name:"document_type",required:!0,message:"Seleccionar tipo de documento",disabled:!0},number_document:{type:"iSearch",label:"Ingresar número documento",name:"number_document",required:!0,message:"Escribe número de documento",disabled:!0},last_name:{type:"iText",label:"Apellido Paterno",name:"last_name",required:!0,message:"Escribir apellido",disabled:!1},middle_name:{type:"iText",label:"Apellido Materno",name:"middle_name",required:!0,message:"Escribir apellido",disabled:!1},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribir nombre",disabled:!1},department:{type:"iSelect",label:"Departamento",name:"department",required:!1,message:"Seleccionar departamento",disabled:!1},province:{type:"iSelect",label:"Provincia",name:"province",required:!1,message:"Seleccionar provincia",disabled:!1},district:{type:"iSelect",label:"Distrito",name:"district",required:!1,message:"Seleccionar distrito",disabled:!1},phone:{type:"iText",label:"Número Telefónico del contacto",name:"phone",required:!1,message:"Número de contacto y 9 max",max:9,disabled:!1},email:{type:"iText",label:"Correo electrónico",name:"email",required:!0,message:"Ingresa tu correo",email:"email",disabled:!1}};const he=d=>(z("data-v-e3cd9163"),d=d(),B(),d),fe={class:"agreement-wrapper"},Se={class:"grid-item"},Ie=he(()=>o("h4",null,"¿Cómo te enteraste del taller?",-1)),Te={__name:"InvitationForm",props:["idWorkshop"],setup(d){const I=d,n=y(ge);M();const h=ie(),k=y(null),u=y(!1),E=y(!1),x=y([]),P=y([]),q=y([]),V=[{label:"DNI",value:"dni"},{label:"CE",value:"ce"},{label:"PAS",value:"pas"},{label:"PTP",value:"ptp"}],e=de({id_workshop:I.idWorkshop,ruc:null,social_reason:null,category:null,person_type:null,document_type:"dni",number_document:null,last_name:null,middle_name:null,name:null,department:null,province:null,district:null,phone:null,email:null,created_by:A,update_by:A,post:4}),$=()=>{e.ruc=null,e.social_reason=null,e.category=null,e.person_type=null,e.document_type=null,e.number_document=null,e.last_name=null,e.middle_name=null,e.name=null,e.department=null,e.province=null,e.district=null,e.phone=null,e.email=null},j=()=>{n.value.category.disabled=!1,n.value.person_type.disabled=!1,n.value.document_type.disabled=!1,n.value.number_document.disabled=!1},C=()=>{n.value.last_name.disabled=!1,n.value.middle_name.disabled=!1,n.value.name.disabled=!1,n.value.department.disabled=!1,n.value.province.disabled=!1,n.value.district.disabled=!1,n.value.phone.disabled=!1,n.value.email.disabled=!1},w=()=>{n.value.social_reason.disabled=!0,n.value.category.disabled=!0,n.value.person_type.disabled=!0,n.value.document_type.disabled=!0,n.value.number_document.disabled=!0,n.value.last_name.disabled=!0,n.value.middle_name.disabled=!0,n.value.name.disabled=!0,n.value.department.disabled=!0,n.value.province.disabled=!0,n.value.district.disabled=!0,n.value.phone.disabled=!0,n.value.email.disabled=!0},H=l=>{e[l]=e[l].replace(/\D/g,"")},O=async()=>{u.value=!0;try{const l=e.ruc,{data:t}=await g({url:`/public/company/${l}`,method:"GET"});t&&(e.social_reason=t.razonSocial,j()),t.social_reason&&(e.social_reason=t.social_reason,e.category=t.category,e.person_type=t.person_type)}catch(l){console.log(l),U.error("El número ingresado no es válido"),e.ruc=null}finally{u.value=!1}},Y=async()=>{if(!e.document_type)return U.warning("Debes escoger un tipo de documento");u.value=!0;try{const l=await g({url:`/public/person/${e.document_type}/${e.number_document}`,method:"GET"});if(l.status===404)return C();const t=l.data;e.name=t.nombres,e.last_name=t.apellidoPaterno,e.middle_name=t.apellidoMaterno,t.department&&(e.department=t.department,N(t.department)),t.province&&(e.province=t.province,R(t.province)),t.document_type&&(e.document_type=t.document_type),t.district&&(e.district=t.district),t.email&&(e.email=t.email),t.phone&&(e.phone=t.phone),C()}catch(l){console.log("You have an error",l)}finally{u.value=!1}},J=async l=>{if(l=="ruc")return O();if(l=="number_document")return Y()},K=l=>{$(),w(),e.document_type=l},Q=(l,t)=>{e.province=null,e.district=null,P.value=[],q.value=[],N(t.value)},X=(l,t)=>{e.district=null,q.value=[],R(t.value)},Z=async()=>{try{const{data:l}=await g({url:"/departaments",method:"GET"});let t=l.map(i=>({label:i.label,value:i.id}));x.value=[...x.value,...t],w()}catch(l){console.log(l)}},N=async l=>{try{const{data:t}=await g({url:`/province/${l}`,method:"GET"});let i=t.map(c=>({label:c.label,value:c.id}));P.value=[...P.value,...i]}catch(t){console.log(t)}},R=async l=>{try{const{data:t}=await g({url:`/district/${l}`,method:"GET"});let i=t.map(c=>({label:c.label,value:c.id}));q.value=[...q.value,...i]}catch(t){console.log(t)}},ee=async()=>{const l=e;E.value=!0;try{if(await g({url:"/public/accepted-invitation",method:"POST",data:l})){const i={workshop:I.idWorkshop,ruc:l.ruc,dni:l.number_document};await g({url:`/public/add-point/${I.idWorkshop}/${k.value}`,method:"PUT"}),h.push({name:"enviado",query:i}),w(),$()}}catch{U.error("Error al registrar")}finally{E.value=!1}},ae=()=>{U.error("Debes de completar todos los espacios requeridos")};return W(Z),(l,t)=>{const i=b("a-select"),c=b("a-form-item"),te=b("a-input-search"),le=b("a-input"),D=b("a-radio"),ne=b("a-radio-group"),oe=b("a-button"),se=b("a-form");return r(),T("div",fe,[p(se,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:ee,onFinishFailed:ae},{default:m(()=>[o("div",Se,[(r(!0),T(F,null,ue(n.value,(a,re)=>(r(),T(F,{key:re},[a.type==="iSelect"?(r(),_(c,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:m(()=>[a.name=="document_type"?(r(),_(i,{key:0,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:V,disabled:a.disabled,onChange:K},null,8,["value","onUpdate:value","disabled"])):v("",!0),a.name=="department"?(r(),_(i,{key:1,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:x.value,onChange:Q,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="province"?(r(),_(i,{key:2,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:P.value,onChange:X,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="district"?(r(),_(i,{key:3,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:q.value,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="person_type"?(r(),_(i,{key:4,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:G(me),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0),a.name=="category"?(r(),_(i,{key:5,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,options:G(pe),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):v("",!0)]),_:2},1032,["name","label","rules"])):v("",!0),a.type==="iSearch"?(r(),_(c,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:m(()=>[p(te,{maxlength:15,loading:u.value,value:e[a.name],"onUpdate:value":s=>e[a.name]=s,disabled:a.disabled,onSearch:s=>J(a.name),onInput:s=>H(a.name)},null,8,["loading","value","onUpdate:value","disabled","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):v("",!0),a.type==="iText"?(r(),_(c,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:m(()=>[p(le,{value:e[a.name],"onUpdate:value":s=>e[a.name]=s,disabled:a.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):v("",!0)],64))),128)),o("div",null,[Ie,p(ne,{class:"group-radios",value:k.value,"onUpdate:value":t[0]||(t[0]=a=>k.value=a)},{default:m(()=>[p(D,{class:"item-radio",value:"rrss"},{default:m(()=>[f("Redes sociales")]),_:1}),p(D,{class:"item-radio",value:"sms"},{default:m(()=>[f("SMS")]),_:1}),p(D,{class:"item-radio",value:"correo"},{default:m(()=>[f("Correo")]),_:1})]),_:1},8,["value"])]),p(c,{class:"btn-send"},{default:m(()=>[p(oe,{type:"primary","html-type":"submit",loading:E.value},{default:m(()=>[f("PARTICIPAR")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])])}}},ke=L(Te,[["__scopeId","data-v-e3cd9163"]]);const S=d=>(z("data-v-8775d116"),d=d(),B(),d),xe={class:"invitation"},qe={key:1,class:"container"},Ee=S(()=>o("div",{class:"header"},[o("img",{class:"logo-ruta",src:_e,alt:""})],-1)),Pe=S(()=>o("div",{class:"lazing"},[o("h3",null,"REGISTRO DE INVITACIÓN")],-1)),Ue={key:0,class:"invitacion-info text-html"},we=S(()=>o("p",null,[f(" ¡Capacítate con "),o("b",null,"#RUTADIGITAL"),f(" del Ministerio de Producción del Perú, a través de "),o("b",null,"#TuEmpresa"),f("! ")],-1)),De=["innerHTML"],$e=S(()=>o("img",{class:"img-wom",src:ve,alt:""},null,-1)),Ce=S(()=>o("div",{class:"plataforma"},[o("h3",null,"Plataforma"),o("img",{class:"logo-zoom",src:be,alt:""})],-1)),Ne=S(()=>o("img",{class:"logo-clock",src:ye,alt:""},null,-1)),Re={class:"horario"},Ae=S(()=>o("br",null,null,-1)),Fe={__name:"InvitacionPage",setup(d){const I=y(!0),n=M(),h=y(null),k=async()=>{try{const{data:u}=await g({url:`/public/invitation/${n.params.slug}`,method:"GET"});h.value=u,I.value=!1}catch(u){console.error("Error de red:",u)}};return W(()=>{k()}),(u,E)=>{const x=b("a-spin");return r(),T("section",xe,[I.value?(r(),_(x,{key:0})):(r(),T("div",qe,[Ee,Pe,h.value?(r(),T("div",Ue,[o("div",null,[we,o("div",{innerHTML:h.value.content},null,8,De)]),o("div",null,[$e,Ce,o("div",null,[Ne,o("span",Re,ce(h.value.date),1)])])])):v("",!0),Ae,p(ke,{idWorkshop:h.value.id},null,8,["idWorkshop"])]))])}}},ze=L(Fe,[["__scopeId","data-v-8775d116"]]);export{ze as default};
