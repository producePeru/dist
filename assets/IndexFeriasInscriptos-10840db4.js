import{l as x,r as b,E as oe,a as re,X as le,j as de,b as d,o as n,x as c,w as l,e as A,d as y,F as h,s as xe,c as s,y as o,h as k,M as De,v as Re,i as B,t as E,R as j,m as q,g as ke,G as Ce,Z as Be,a6 as Ne,a2 as Ue,O as Se,q as Oe,K as Pe}from"./index-83e70800.js";import{_ as Le}from"./icoexcel-1b303edf.js";import{Q as Ye}from"./quill.snow-52908c69.js";import{u as Fe}from"./selectes-68e17202.js";import"./es-c19fb304.js";import{M as Te}from"./MoreOutlined-c1194e6e.js";const Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUfSURBVFiF5ZdLbBxVFoa/U1W3qrp6HNt5GSJaxCGJldiJBAI0BA8EJWEGDSxYzA6BkJCAgFjMII00sOCxYAUbHhnxmmjY8RCw4CESR0gkbEZKhGyHsXkkwiiQBEI7trvreQ+LJu6201ZwQlacVdW9p+7/65xzz/kLfu8mi/7i9dddlm7oB2c9YpejZCjfI0ywf2CEx8ReHAJ7hrcizj2CvV2RqJ2LI1StlbdRfYWbBw78NgT2jfaLtc+psnWZcfPLQt8rucLB0zGZNlyMwFUdIXWrfBun+Y9Z4Yk472lRPMyfN////AkMjd4tyr+7jSMD5cB0ei65wv7qDL4jBE7j89QqiVUGu8p4AtW8YGQmzqqZtYrcwfb+NxeCcBYE3zv6L1RfXR16/pYlken0XABGpmNyVa7pKOEgOAhXd5QoVBmeiQHo8lyuX1I2q0MToPYNhkYfXlwEhkbuAV4MRSS2Spfn0uN7GBFGZxKu6yyxzLgcmmoAXtkRcior+HSyTn/ZJ1M4nuZU84LQEWKrivI3dgy8dW4Ce4Y3iOMcWlsyQV8p4Ic857uk4GSaUbOKIIQOhK5QKxpFELlCXCixBUWJHGFlYLjE91juuYzVE76spYnibmb7hvFWOO8sRg67uj3H6Yt8BFhhPFYYj6/rwngt5cqOkFSVeqEcsxkAK42hFAq+CIemY3pLPmtK/uyZfZHPD1nhVLPiaYXbWvHm1sDe0T+pyo0by4GRluAoytdxxpqST4/vUQkM6yOfTs+l03NZH/lUAkOP77Em9PmqntLaDARhYzkwqnorQ8Nb2qZAjz7+1xcm1z55SsubK6FxW51mCstEkrG25ONJk9ixJAdgVdAMZK7Kl7WMSugRxV8gFLN7E3FWLNPjB+8PPnpMrvn8/VkCevSJncDz89NxoZacfIdAawvs6k65dmxXIwXKX35r8HOb3AJnakAwFxNKO28g3/Au+brdaHD5mWXTJNDqHK4l77kPNZegbjd5z05stAnEJV9xN8WSbYuEF/LKk2jQi5avwq76+5zdNp1Qf1nW5rsWzNar5osk0O78pp3dB+Kv8OIXmg7HdzWfT/7nvAC9bx6lWPUPyKs4x55pQ0DJzkMZ/GqT05/gnf5k/nIGsymQDy4e/AKm2uwDAHr08VuePb3uqUkbDVxwI6qnVALTthF12xOfPRB88IhcO/bhHAIADA1vQeXAYFdEt9fkoChDP9WoBB59UTC73joNz9hYLeGbOGf70ojWdn4qKzgwWQPLYKtamnsLtm36VBw+Hp1JUm2pVkG4IjQcqWccT3MmkozxWspkXjCZF4zXUiaSxt6ResYVJcP8WXK4FmeC7p0v1c66BWrde6s2HxmbSemL5o7jTJX/TdUJRQhdIdUGyRNZRpxAXCiKcqSeMl0olwYuyz2PsVpKNVerykPz8drX/p6RO3HYfZYgcYTR6YTrOkOWGa+9IPlDQGZ1riBRVdC72LbptflQ7SXZjoH/ovJoXFhWh4bBzoj1kU9vaLgsaACntpmi1CoHp+pUQo/esDGqB7tKXB6YhhoS/Wc78IUj0BIJEX25y7gMlEPTNUeUOgS/0E+skraI0p/ygpHpJJvMC6si97Gtf/dCEOduPx8dXidO8aIqW5f6XlYJjCk5wsGp9rJ8IsmyU2luRGSf4t4/X4ItnsBsNA7/EdEHBb1NYUnbw0SmVPVtVF5iR//+X3Ps+f2aLd84gHV6QVcCoLaKOCO4J8a56aYLnVa/M/sZAOBf8qum74sAAAAASUVORK5CYII=",Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAADsAAAA7AF5KHG9AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA59JREFUWIW9l01sG0UYhp9vdh3Hf2nSxjSkFYX0ByEoBSQENNBGRuIS9cKFSpW4kRMV4icNP6J1oUWkNQjBiXJGcIELqtReQAFVlLaRUEFFtJVqIEntJFZwYidOvLvDIY4VbCferZy8txm/872PvN/M7ggutTGeafEVzF7lSEwLe4B7gdbSz/8CSQ2/gnxv68LZyVPRGTd1pZ5hy1vTu2yHAZCDoIPucGVW0F9Zjh6cOL3hxh0BbH1VByzfzPsIrwCmu+AqFdF80hyMHE3GpeAaINqf3WmIfIvw0B0GV+qiZRjPT34Qul0XoPPNqUcdbZwHog0KX9KIY6ve8UT46ooA0f7sTkPJhTUIL0PYjnp84nQ4VQVQeuaXvP7tW1ol9fqz/j+f6jKbws34CwsUswWnOJbFOvz13GPZgm6pWHIxPBvpufmZzMOy5io1nKfw4weaf+zr9j0B7C9PhmArBg/eDW0hGakB8GQuOP02cAxAweJWK3W7ax3uabrQ1+3bB/i9rFuUvBbtz3WUARb3ufut5jNYGHjOv8N7cFlhQ9lHAcyN8UwLc3IQtOvVsfvNa4bikcp52yF1ddS+kclrByA7p/esXEVejMbHj5i+gtnr/oRb1NPbzela4btP5vxTef2MyzIhVQj0KuVIzEs4QHtYnMq5X5LW9am8bvNUyNExVXqxeJKhdNUBlslr98+wJBEeVsB9Xhc2UF0KqNyn66kN0jEwnQNCq7m+eSk4tHe7sX81T6UWbP7a9s7Mtjq2GQWkvRR2q0xOj7uwpRV6bQBuTjj5eh6tSSuUDK8FwPDfllHPo0SumGjnHMjLqxnPXSs2BZr4aWm8a7PRHmrigeWe/AJ/XE/bk0vjs7/bnfUANM552fxGKiRGaNzLaXjmUPPQgd2+/zXld78Vh/q+LHhp1LwK5O5S6URHXuALDwsbpc/H4p2zCkBpIwHMr2P4vGmaH0PpdTx6KjiiRSfWL18PjpwMjpYBANLNLXE0P69D+uXUVMuJpUEZgLhY2nEOAVWfzg3UmLadFzgjxWoAIJ1ovaVtpxtINjxa639sR/ekE623lk+rSl8JIgZcbmD8JZSzr9Y1rQpgCSIViOwFOQYUa3lcqijIu6lApDv1YVuylqEmAABxsVKDkfdsR92D6ON68QbsVjMi8qnC2nF7MHKCuFgrGet+CZduMfH2IxMfGeLvEeixbDYBXcCmki1j2SSBYe3wgy3zQ5OD7q7n/wHBtlLaxU+W2gAAAABJRU5ErkJggg==",qe="data:image/png;base64,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";const ze={class:"form-fair"},He="DD/MM/YYYY",je={__name:"NuevaFeria",props:["dataRow"],emits:["closeDraw"],setup(G,{emit:z}){x.locale("es");const f=Fe();f.$patch({cities:f.cities}),f.$patch({provinces:f.provinces}),f.$patch({districts:f.districts}),f.fetchCities();const S=b(!1),W={theme:"snow",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["clean"]]},contentType:"html"},D=G,Q=z;oe();const t=re({}),v=b({title:{type:"iText",label:"NOMBRE DE LA EVENTO",name:"title",required:!0,message:"Escribir el nombre de la EVENTO",disabled:!0,max:100},subTitle:{type:"iText",label:"SUBTÍTULO DE LA EVENTO",name:"subTitle",required:!0,message:"Escribir un sub título a la EVENTO",disabled:!0,max:100},description:{type:"iQuillEditor",label:"DESCRIPCIÓN DE LA EVENTO",name:"description",required:!1,message:"Escribir la descripción",disabled:!1},modality:{type:"iSelect",label:"MODALIDAD",name:"modality",required:!0,message:"Seleccionar una opción",disabled:!0},metaMypes:{type:"iNumber",label:"META MYPES PARTICIPANTES",name:"metaMypes",required:!0,message:"Meta MYPEs Participantes",disabled:!0},startDate:{type:"iDate",label:"FECHA INICIO DE LA EVENTO",name:"startDate",required:!0,message:"Seleccionar fecha de Inicio",disabled:!1},endDate:{type:"iDate",label:"FECHA FIN DE LA EVENTO",name:"endDate",required:!0,message:"Seleccionar fecha de Fin",disabled:!1},powerBy:{type:"iSelect",label:"PERTENECE AL",name:"powerBy",required:!0,message:"Seleccionar una opción",disabled:!0},fairtype_id:{type:"iSelect",label:"TIPO DE EVENTO",name:"fairtype_id",required:!0,message:"Seleccionar una opción",disabled:!0},nationalEvent:{type:"iSelect",label:"EVENTO TIPO",name:"nationalEvent",required:!0,message:"Seleccionar región",disabled:!1},city_id:{type:"iSelectWrite",label:"REGIÓN",name:"city_id",required:!1,message:"Seleccionar región",disabled:!1,visible:!1}}),J=[{label:"NACIONAL",value:0},{label:"POR REGIÓN",value:1}],O=[{label:"PRESENCIAL",value:"p"},{label:"VIRTUAL",value:"v"}],P=[{label:"PP093",value:"pp093"},{label:"PUNCHE",value:"punche"},{label:"APNOP",value:"apnop"}],L=[{label:"PERÚ PRODUCE EN MACROEVENTO",value:1},{label:"CYBER WOW",value:2},{label:"MUJER PRODUCE ",value:3},{label:"PERÚ PRODUCE REGIONAL",value:4}],N=a=>g=>{const _=new Date().setHours(0,0,0,0);if(a==="startDate")return g&&g.valueOf()<_;if(a==="endDate"){const m=t.startDate?new Date(t.startDate).setHours(0,0,0,0):null;return g&&(g.valueOf()<_||m&&g.valueOf()<m)}return g&&g.valueOf()<_};le(()=>t.startDate,a=>{t.endDate&&new Date(a)>new Date(t.endDate)&&(t.endDate=null)}),le(()=>t.endDate,a=>{t.startDate&&new Date(a)<new Date(t.startDate)&&(t.startDate=null)});const Y=(a,g)=>{const _=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return g.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)},U=a=>{if(a=="modality")return O;if(a=="powerBy")return P;if(a=="fairtype_id")return L;if(a=="nationalEvent")return J},F=a=>{a=="nationalEvent"&&(t.nationalEvent!=0?(v.value.city_id.visible=!0,v.value.city_id.required=!0):(v.value.city_id.visible=!1,v.value.city_id.required=!1,t.city_id=null))},T=a=>{t.province_id=null,t.district_id=null,f.fetchProvinces(a)},K=a=>{t.district_id=null,f.fetchDistricts(a)},V=()=>{t.title=null,t.subTitle=null,t.description="</span>",t.metaMypes=null,t.metaSales=null,t.startDate=null,t.endDate=null,t.modality=null,t.powerBy=null,t.fairtype_id=null,t.city_id=null,t.province_id=null,t.district_id=null},C=async()=>{S.value=!0;const a={title:t.title,subTitle:t.subTitle,description:t.description,metaMypes:t.metaMypes,metaSales:t.metaSales,startDate:x(t.startDate).format("YYYY-MM-DD"),endDate:x(t.endDate).format("YYYY-MM-DD"),modality:t.modality,powerBy:t.powerBy,fairtype_id:t.fairtype_id,city_id:t.city_id,province_id:t.province_id,district_id:t.district_id};try{const g=D.dataRow?"PUT":"POST",_=D.dataRow?`fair/update/${D.dataRow.id}`:"fair/create",m=await j({url:_,method:g,data:a});m.status==200&&(q.success(m.message),Q("closeDraw"),V()),m.status==500&&(q.error(m.message),V())}catch{q.error("Se presentó un error, los valores son requeridos")}finally{S.value=!1}},X=a=>{const g=t[a]?t[a].trim():"";t[a]=g};function M(a){a&&(t.title=a.title,t.subTitle=a.subTitle,t.description=a.description,t.metaMypes=a.metaMypes,t.metaSales=a.metaSales,t.startDate=a.startDate?x(a.startDate,"DD/MM/YYYY"):null,t.endDate=a.endDate?x(a.endDate,"DD/MM/YYYY"):null,t.modality=a.modality,t.powerBy=a.powerBy,t.fairtype_id=a.fairtype_id,a.city_id?(t.nationalEvent=1,v.value.city_id.visible=!0,v.value.city_id.required=!0,T(a.city_id),t.city_id=a.city_id):(t.nationalEvent=0,t.city_id=null,v.value.city_id.visible=!1,v.value.city_id.required=!1))}return de(()=>{D.dataRow&&M(D.dataRow)}),le(()=>D.dataRow,a=>{a?M(a):(V(),t.description='<p><strong style="color: rgb(0, 26, 78);">Lugar:</strong><span style="color: rgb(0, 26, 78);">&nbsp;</span>Centro de Exposiciones Jockey</p><p><strong style="color: rgb(0, 26, 78);">Sectores participantes:</strong></p><ul><li>Textil - confecciones y cuero - calzado relacionados al sector minero.</li></ul><p><strong style="color: rgb(0, 26, 78);">Requisitos:</strong></p><ul><li>RUC activo y habido</li><li>Ser MYPE productora</li><li>Mínimo de 2 años de antigüedad</li><li>Presencia en redes sociales</li><li>Contar con medios de pagos digitales</li><li>Contar con productos de valor agregado</li><li>De preferencia haber realizado ventas anuales mayores a 13 UIT, en el 2022/2023, validado con Reporte Tributario. (PRIORIDAD)</li></ul><p><strong style="color: rgb(0, 26, 78);">Fecha:</strong><span style="color: rgb(0, 102, 204);">&nbsp;</span>Del lunes 28 al jueves 31 de octubre de 2024</p>')}),(a,g)=>{const _=d("a-input"),m=d("a-form-item"),R=d("a-select"),Z=d("a-textarea"),$=d("a-input-number"),I=d("a-date-picker"),ee=d("a-button"),u=d("a-form");return n(),c(u,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:C},{default:l(()=>[A("div",ze,[(n(!0),y(h,null,xe(v.value,(e,w)=>(n(),y(h,{key:w},[e.type==="iText"?(n(),c(m,{key:0,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max}]},{default:l(()=>[s(_,{value:t[e.name],"onUpdate:value":i=>t[e.name]=i,maxlength:e.max,onBlur:i=>X(e.name)},null,8,["value","onUpdate:value","maxlength","onBlur"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iSelect"?(n(),c(m,{key:1,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:l(()=>[s(R,{value:t[e.name],"onUpdate:value":i=>t[e.name]=i,options:U(e.name),onChange:i=>F(e.name)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iTextarea"?(n(),c(m,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:l(()=>[s(Z,{value:t[e.name],"onUpdate:value":i=>t[e.name]=i,rows:3,maxlength:e.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iNumber"?(n(),c(m,{key:3,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:l(()=>[s($,{value:t[e.name],"onUpdate:value":i=>t[e.name]=i,min:1,max:500,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iQuillEditor"?(n(),c(m,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:l(()=>[s(k(Ye),{class:"quill-height-200",content:t[e.name],"onUpdate:content":i=>t[e.name]=i,options:W,contentType:"html"},null,8,["content","onUpdate:content"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iDate"?(n(),c(m,{key:5,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:l(()=>[s(I,{locale:k(De),value:t[e.name],"onUpdate:value":i=>t[e.name]=i,style:{width:"100%"},format:He,placeholder:"día/mes/año","disabled-date":N(e.name)},null,8,["locale","value","onUpdate:value","disabled-date"])]),_:2},1032,["name","label","rules"])):o("",!0),e.type==="iSelectWrite"?(n(),c(m,{key:6,class:"item-max",name:e.name,label:e.label,style:Re({display:e.visible?"block":"none"}),rules:[{required:e.required,message:e.message}]},{default:l(()=>[e.name=="city_id"?(n(),c(R,{key:0,value:t[e.name],"onUpdate:value":i=>t[e.name]=i,options:k(f).cities,"show-search":"","filter-option":Y,onChange:T},null,8,["value","onUpdate:value","options"])):o("",!0),e.name=="province_id"?(n(),c(R,{key:1,value:t[e.name],"onUpdate:value":i=>t[e.name]=i,options:k(f).provinces,"show-search":"","filter-option":Y,onChange:K,disabled:!t.city_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),e.name=="district_id"?(n(),c(R,{key:2,value:t[e.name],"onUpdate:value":i=>t[e.name]=i,options:k(f).districts,"show-search":"","filter-option":Y,disabled:!t.province_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0)]),_:2},1032,["name","label","style","rules"])):o("",!0)],64))),128))]),s(m,null,{default:l(()=>[s(ee,{type:"primary","html-type":"submit",loading:S.value},{default:l(()=>[B(E(G.dataRow?"ACTUALIZAR":"GUARDAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}};const Ge={class:"title-produce"},We={style:{color:"var(--secondary)"}},Qe={style:{"font-size":"13px"}},Je=["href"],Ke=["href"],Xe=["href"],Ze={class:"inscriptos-p"},$e=["href"],et={key:1},tt={class:"paginator"},rt={__name:"IndexFeriasInscriptos",props:["idConvenio"],setup(G){x.locale("es");const z=oe(),f=JSON.parse(localStorage.getItem("role"))||[],S=ke.get("token"),W="https://apituempresa.soporte-pnte.com/api/",D="http://127.0.0.1:8000/api/",Q=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?D:W,t=f.some(u=>u.id===10||u.id===11||u.id===5),v=b(!1),J=b(null),O=b(!1);b(null);const P=b(0),L=b(50),N=b({page:0}),Y=b(1200),U=b([]),F=b(!1);b(!1);const T=b(window.innerHeight-100),K=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"APROBACIÓN",dataIndex:"status",fixed:"left",width:100,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",fixed:"left",width:100,align:"center"},{title:"RUC",dataIndex:"ruc",width:100,fixed:"left",align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:180},{title:"RAZÓN SOCIAL",dataIndex:"socialReason",width:180},{title:"SECTOR EMPRESARIAL",dataIndex:"businessSector",width:150,align:"center"},{title:"REGIÓN",dataIndex:"mype_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"mype_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"mype_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"mype_address",width:170},{title:"WEB",dataIndex:"web",width:50,align:"center"},{title:"FACEBOOK",dataIndex:"facebook",width:90,align:"center"},{title:"INSTAGRAM",dataIndex:"instagram",width:100,align:"center"},{title:"DESCRIPCIÓN",dataIndex:"description",width:100,align:"center"},{title:"LOGO",dataIndex:"logo",width:80,align:"center"},{title:"ARCHIVO",dataIndex:"filePDF_name",width:100,align:"center"},{title:"PRODUCTOS",dataIndex:"productos",width:160,align:"center"},{title:"TIPO DOCUMENTO",dataIndex:"typedocument",width:140,align:"center"},{title:"# DOCUMENTO",dataIndex:"documentnumber",width:160,align:"center"},{title:"APELLIDOS",dataIndex:"lastname",width:160,align:"center"},{title:"NOMBRES",dataIndex:"name",width:160,align:"center"},{title:"CELULAR",dataIndex:"phone",width:120,align:"center"},{title:"EMAIL",dataIndex:"email",width:160,align:"center"},{title:"FECHA NAC.",dataIndex:"birthdate",width:120,align:"center"},{title:"PAIS / NACIONALIDAD",dataIndex:"user_country",width:140,align:"center"},{title:"REGIÓN",dataIndex:"user_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"user_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"user_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"address",width:160},{title:"GENERO",dataIndex:"gender",width:100,align:"center"},{title:"COMO SE ENTERÓ",dataIndex:"propagandamedia",width:140,align:"center"},...t?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],V=async u=>{try{const e=await j({url:`fair/status-participant/${u}`,method:"PUT"});e.status==200&&(I(),q.success(e.message))}catch(e){console.error("Error de red:",e)}},C=re({search:""}),X=()=>{I(),v.value=!1},M=u=>{const e=x();let w=x(u).diff(e,"days");return w===0?1:w},a=()=>{let u={search:C.search};I(u)},g=()=>{C.search||I()},_=u=>x(u).format("DD/MM/YYYY"),m=u=>{N.value.page=u,I()},R=()=>{T.value=window.innerHeight-320},Z=async u=>{try{const e=await j({url:`fair/delete-participant/${u.id}`,method:"DELETE"});e.status==200&&(I(),q.success(e.message))}catch(e){console.error("Error de red:",e)}},$=Ce(()=>u=>N.value.page*L.value+u+1),I=async u=>{try{F.value=!0;let e;e=N.value.page==0?"":N.value,e=u?{...e,...u}:e;const w=z.params.slug,{data:i}=await j({url:`fair/applicants/${w}`,method:"GET",params:e});U.value=i==null?void 0:i.data,P.value=i.total,L.value=i.per_page}catch(e){console.error("Error de red:",e)}finally{F.value=!1}},ee=async()=>{O.value=!0;try{const u=z.params.slug,e=await Pe({url:`${Q}download/fair-participants/${u}`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${S}`}}),w=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a"),te=`${U.value[0].fair_name}.xlsx`;i.href=w,i.setAttribute("download",te),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(w),document.body.removeChild(i)}catch(u){console.error("Error downloading file:",u)}finally{O.value=!1}};return Be(()=>{window.removeEventListener("resize",R)}),de(()=>{window.addEventListener("resize",R),R(),I()}),(u,e)=>{const w=d("router-link"),i=d("a-breadcrumb-item"),te=d("a-breadcrumb"),ae=d("a-button"),ie=d("a-col"),ue=d("a-input"),ce=d("a-input-group"),me=d("a-row"),pe=d("a-switch"),Ae=d("a-tooltip"),ge=d("a-popover"),H=d("a-image"),ye=d("a-image-preview-group"),se=d("a-tag"),fe=d("a-popconfirm"),be=d("a-menu-item"),ve=d("a-menu"),he=d("a-dropdown"),_e=d("a-table"),we=d("a-pagination"),Ie=d("a-drawer");return n(),y(h,null,[A("div",null,[s(te,null,{default:l(()=>[s(i,null,{default:l(()=>[s(w,{to:"/admin/ferias/empresariales"},{default:l(()=>[s(k(Ne)),e[3]||(e[3]=A("span",{class:"fs-13"},"Atrás",-1))]),_:1})]),_:1}),s(i,null,{default:l(()=>{var p;return[A("h3",Ge,[e[4]||(e[4]=B("INSCRITOS EN FERIA - ")),A("span",We,E((p=U.value[0])==null?void 0:p.fair_name),1)])]}),_:1})]),_:1}),s(me,{style:{margin:"1rem 0"}},{default:l(()=>[s(ie,{xs:24,md:12,lg:18},{default:l(()=>[e[6]||(e[6]=A("span",null,null,-1)),s(ae,{class:"btn-excel",onClick:ee,loading:O.value,type:"primary"},{default:l(()=>e[5]||(e[5]=[A("img",{width:"20",style:{margin:"-2px 0 0 0"},src:Le},null,-1)])),_:1},8,["loading"])]),_:1}),s(ie,{xs:24,md:12,lg:6},{default:l(()=>[s(ce,{compact:""},{default:l(()=>[s(ue,{onPressEnter:a,value:C.search,"onUpdate:value":e[0]||(e[0]=p=>C.search=p),style:{width:"calc(100% - 80px)"},onInput:g},null,8,["value"]),s(ae,{type:"primary",disabled:C.search==="",onClick:a},{default:l(()=>e[7]||(e[7]=[B("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),s(_e,{bordered:"",scroll:{x:Y.value,y:T.value},class:"table-agreements-ugse",columns:K,"data-source":U.value,pagination:!1,loading:F.value,size:"small"},{bodyCell:l(({column:p,record:r,index:Ee})=>[p.dataIndex=="idx"?(n(),y(h,{key:0},[B(E($.value(Ee)),1)],64)):o("",!0),p.dataIndex=="status"?(n(),c(Ae,{key:1},{title:l(()=>[A("span",Qe,E(r.status==0?"Habilitar a: ":"Desabilitar a: ")+" "+E(r.comercialName),1)]),default:l(()=>[s(pe,{checked:r.status,"onUpdate:checked":ne=>r.status=ne,"checked-children":"si","un-checked-children":"",checkedValue:1,unCheckedValue:0,onChange:ne=>V(r.id)},null,8,["checked","onUpdate:checked","onChange"])]),_:2},1024)):o("",!0),p.dataIndex=="created_at"?(n(),y(h,{key:2},[B(E(_(r==null?void 0:r.created_at)),1)],64)):o("",!0),p.dataIndex=="web"?(n(),y(h,{key:3},[r.web?(n(),y("a",{key:0,href:r.web,target:"_blank"},e[8]||(e[8]=[A("img",{src:Ve,alt:"",width:"22"},null,-1)]),8,Je)):o("",!0)],64)):o("",!0),p.dataIndex=="facebook"?(n(),y(h,{key:4},[r.facebook?(n(),y("a",{key:0,href:r.facebook,target:"_blank"},e[9]||(e[9]=[A("img",{src:Me,alt:"",width:"22"},null,-1)]),8,Ke)):o("",!0)],64)):o("",!0),p.dataIndex=="instagram"?(n(),y(h,{key:5},[r.instagram?(n(),y("a",{key:0,href:r.instagram,target:"_blank"},e[10]||(e[10]=[A("img",{src:qe,alt:"",width:"22"},null,-1)]),8,Xe)):o("",!0)],64)):o("",!0),p.dataIndex=="description"?(n(),y(h,{key:6},[r.description?(n(),c(ge,{key:0,placement:"left"},{content:l(()=>[A("p",Ze,E(r.description),1)]),default:l(()=>[e[11]||(e[11]=A("span",{class:"inscriptos-a"},"Leer descripción",-1))]),_:2},1024)):o("",!0)],64)):o("",!0),p.dataIndex=="logo"?(n(),y(h,{key:7},[r.logo_url?(n(),c(H,{key:0,class:"fair-prod-img",src:r.logo_url,alt:"logo"},null,8,["src"])):o("",!0)],64)):o("",!0),p.dataIndex=="filePDF_name"?(n(),y(h,{key:8},[r.filePDF_name?(n(),y("a",{key:0,href:r.filePDF_url,target:"_blank"}," Descargar ",8,$e)):o("",!0)],64)):o("",!0),p.dataIndex=="productos"?(n(),c(ye,{key:9},{default:l(()=>[r.img1_url?(n(),c(H,{key:0,class:"fair-prod-img",src:r.img1_url,alt:"Imagen 1"},null,8,["src"])):o("",!0),r.img2_url?(n(),c(H,{key:1,class:"fair-prod-img",src:r.img2_url,alt:"Imagen 2"},null,8,["src"])):o("",!0),r.img3_url?(n(),c(H,{key:2,class:"fair-prod-img",src:r.img3_url,alt:"Imagen 3"},null,8,["src"])):o("",!0)]),_:2},1024)):o("",!0),p.dataIndex=="dateDiff"?(n(),y(h,{key:10},[M(r.endDate2)<0?(n(),c(se,{key:0,color:"red"},{default:l(()=>e[12]||(e[12]=[B(" FINALIZADO ")])),_:1})):(n(),y("span",et,E(M(r.endDate2)),1))],64)):o("",!0),p.dataIndex=="actions"?(n(),c(he,{key:11,trigger:["click"]},{overlay:l(()=>[s(ve,null,{default:l(()=>[s(be,null,{default:l(()=>[s(fe,{placement:"rightBottom",title:`¿Quieres eliminar ${r.ruc} ?`,onConfirm:ne=>Z(r)},{icon:l(()=>[s(k(Ue),{style:{color:"red"}})]),default:l(()=>[e[13]||(e[13]=A("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[A("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=Se(()=>{},["prevent"]))},[s(ae,{shape:"circle",icon:Oe(k(Te)),size:"small"},null,8,["icon"])])]),_:2},1024)):o("",!0)]),_:1},8,["scroll","data-source","loading"])]),A("div",tt,[A("span",null,[s(se,{color:"blue"},{default:l(()=>[A("b",null,E(P.value),1)]),_:1}),e[14]||(e[14]=B("Inscritos"))]),s(we,{size:"small",total:P.value,pageSize:L.value,onChange:m,showSizeChanger:!1},null,8,["total","pageSize"])]),s(Ie,{open:v.value,"onUpdate:open":e[2]||(e[2]=p=>v.value=p),title:"Nueva Feria",placement:"right",width:"650"},{default:l(()=>[s(je,{onCloseDraw:X,dataRow:J.value},null,8,["dataRow"])]),_:1},8,["open"])],64)}}};export{rt as default};
