import{_ as C,a as m,b as I}from"./ico-fb-52730242.js";import{u as P,r as s,l as L,b as f,o as q,d as T,e as o,q as G,t as g,c as b,w as h,F as O,s as V,f as w,j as D,p as R,k as j,g as y,m as k}from"./index-302d1fe3.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const v=r=>(R("data-v-4c744a1b"),r=r(),j(),r),J=v(()=>o("div",{class:"container header-wrapper"},[o("img",{src:I,alt:"logo-produce"}),o("img",{src:C,alt:"logo-tu-empresa"})],-1)),Q=[J],U={class:"form-map"},Y={class:"container"},Z={class:"background-map"},H=v(()=>o("h2",{class:"title ff"},"Puntos de atención sugeridos",-1)),K={class:"modal-info ff"},W=v(()=>o("span",null,"Quiero atenderme aquí",-1)),X=V('<footer data-v-4c744a1b><div class="container" data-v-4c744a1b><div class="footer-wrapper" data-v-4c744a1b><div class="footer-tuempresa-info" data-v-4c744a1b><img src="'+C+'" alt="footer logo tu empresa" data-v-4c744a1b><p class="ff" data-v-4c744a1b>Programa Nacional &quot;Tu Empresa&quot; Brindamos a los emprendedores acompañamiento en formalización y constitución de empresas.</p></div><div data-v-4c744a1b></div><div data-v-4c744a1b><b data-v-4c744a1b>Contáctanos</b><p data-v-4c744a1b>Lima - Guardia Civil : Av. Guardia Civil N° 834 - Primer Piso, San Isidro - Lima - Lima - San Isidro - Perú </p><p data-v-4c744a1b>016162291</p></div><div class="footer-redes" data-v-4c744a1b><a href="" data-v-4c744a1b><img src="'+m+'" alt="tu empresa facebook" data-v-4c744a1b></a><a href="" data-v-4c744a1b><img src="'+m+'" alt="tu empresa facebook" data-v-4c744a1b></a><a href="" data-v-4c744a1b><img src="'+m+'" alt="tu empresa facebook" data-v-4c744a1b></a></div></div></div></footer>',1),$={__name:"FormalizacionMapa",setup(r){const S=P();let n;const _=s(null);let i;const c=s(!1),d=s(!1),z=s(null),p=s(!1),u=s([]),l=s(null),x=e=>{l.value=e,d.value=!0},E=async()=>{let e=y.get("formalization-data");e=JSON.parse(e),e.id_gps_cdes=l.value.title,c.value=!0;try{const a=await w({url:"/public/formalization",method:"POST",data:e});a.status==200&&(S.push({name:"formalizacion"}),k.success(a.message),y.remove("formalization-data"))}catch{k.error("Error al registrar xd")}finally{c.value=!1}},F=()=>{window.pageYOffset>10?p.value=!0:p.value=!1},M=async()=>{try{const{data:e}=await w({url:"/public/location-cdes",method:"GET"}),a=e.map(t=>({position:{lat:parseFloat(t.position.lat),lng:parseFloat(t.position.lng)},title:t.title}));u.value=[...u.value,a]}catch(e){console.log(e)}};return L(async()=>{window.addEventListener("scroll",F),await M(),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{n=new window.google.maps.Map(_.value,{center:{lat:e.coords.latitude,lng:e.coords.longitude},zoom:11}),u.value[0].forEach(a=>{new window.google.maps.Marker({position:a.position,map:n,title:a.title}).addListener("click",()=>{x(a)})}),i=new window.google.maps.places.SearchBox(document.getElementById("searchInput")),i.addListener("places_changed",()=>{const a=i.getPlaces();if(a.length===0)return;const t=a[0];n.setCenter(t.geometry.location),n.setZoom(15),new window.google.maps.Marker({position:t.geometry.location,map:n,title:t.name})})},()=>{console.error("Error al obtener la ubicación del usuario.")}):console.error("La geolocalización no está disponible en este navegador.")}),(e,a)=>{const t=f("a-button"),N=f("a-modal");return q(),T(O,null,[o("header",{class:G(["header",{floatingNav:p.value}]),ref_key:"navBar",ref:z},Q,2),o("pre",null,g(l.value),1),o("section",U,[o("div",Y,[o("div",Z,[H,o("div",{ref_key:"mapContainer",ref:_,style:{height:"500px"}},null,512)])])]),b(N,{open:d.value,"onUpdate:open":a[0]||(a[0]=B=>d.value=B),title:"",width:"350px",footer:!1},{default:h(()=>[o("div",K,[W,o("h3",null,g(l.value.title),1)]),b(t,{onClick:E,loading:c.value,class:"form-button",type:"primary","html-type":"submit"},{default:h(()=>[D("ESCOGER")]),_:1},8,["loading"])]),_:1},8,["open"]),X],64)}}},ta=A($,[["__scopeId","data-v-4c744a1b"]]);export{ta as default};
