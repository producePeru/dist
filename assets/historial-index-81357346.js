import{c as i,A as R,r as v,U as q,k as $,b as m,o as a,d as p,e as s,w as f,m as F,i as u,Z as J,W as L,t as r,F as C,v as P,n as I,y as g,_ as T,P as G,$ as W,z as x,j as b,C as Z,B as Q}from"./index-b953f785.js";import{u as X}from"./useNotificationStore-941bc003.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{U as K}from"./UserOutlined-13263f33.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560zM610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z"}}]},name:"idcard",theme:"outlined"};const se=ee;function S(d){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?Object(arguments[o]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable}))),c.forEach(function(_){te(d,_,n[_])})}return d}function te(d,o,n){return o in d?Object.defineProperty(d,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):d[o]=n,d}var w=function(o,n){var c=S({},o,n.attrs);return i(R,S({},c,{icon:se}),null)};w.displayName="IdcardOutlined";w.inheritAttrs=!1;const ae=w;const ne={class:"historial"},oe={class:"page"},le={class:"filters"},re={class:"card"},ie={class:"card-head"},ce={class:"muted"},de={class:"rows"},ue={class:"content"},pe={class:"topline"},_e={class:"name"},ve={key:0,class:"extra"},fe={class:"value",style:{"font-size":"13px"}},ge={key:1,class:"extra"},me={class:"value"},he={class:"extra"},be={class:"value"},ye={class:"desc"},Oe={key:0,class:"description-p"},ke={class:"meta"},xe={class:"meta-item"},we={class:"meta-item"},ze={class:"pager"},Ce={__name:"historial-index",setup(d){const o=X(),n=v(""),c=v(1),_=v(20),D=v("desc"),z=v([]),y=v(0),O=v(!1);async function k(){O.value=!0;try{await o.resetCount();const l=await F({url:"token/shows-all-reasons",method:"GET",params:{q:n.value,page:c.value,per_page:_.value,order:D.value}});z.value=l.data,y.value=l.total}finally{O.value=!1}}function N(){k()}function B(l){return new Date(l).toLocaleDateString("es-PE",{day:"2-digit",month:"short",year:"numeric"}).replace(".","")}function E(l){return l==="c"?"Creado":l==="u"?"Editado":l==="d"?"Eliminado":l==="imp"?"Importado":l==="dow"?"Descargado":l}return q([n,c],k),$(k),(l,t)=>{const A=m("a-input"),U=m("a-button"),h=m("a-tag"),V=m("a-pagination"),j=m("a-spin");return a(),p("div",ne,[s("div",oe,[i(A,{value:n.value,"onUpdate:value":t[0]||(t[0]=e=>n.value=e),placeholder:"Buscar por nombre de asesor...","allow-clear":"",class:"search"},{prefix:f(()=>[i(u(J))]),_:1},8,["value"]),s("div",le,[t[3]||(t[3]=s("div",null,null,-1)),i(U,{type:"primary",class:"btn-refresh",onClick:N},{default:f(()=>[i(u(L)),t[2]||(t[2]=s("span",null,"Actualizar",-1))]),_:1})]),i(j,{spinning:O.value,tip:"Cargando...",size:"large"},{default:f(()=>[s("div",re,[s("div",ie,[t[4]||(t[4]=s("h3",null,"Registro de Actividades",-1)),s("span",ce,r(y.value)+" registros encontrados",1)]),s("div",de,[(a(!0),p(C,null,P(z.value,e=>(a(),p("div",{key:e.id,class:"row"},[s("div",{class:I(["avatar",{"is-edited":e.action==="u","is-created":e.action==="c","is-deleted":e.action==="d"}]),"aria-hidden":"true"},[e.action==="u"?(a(),g(u(T),{key:0})):e.action==="c"?(a(),g(u(G),{key:1})):(a(),g(u(W),{key:2}))],2),s("div",ue,[s("div",pe,[s("div",null,[s("span",_e,r(e.user),1)])]),e.businessman?(a(),p("div",ve,[i(u(K),{style:{"padding-right":"4px","font-size":"13px"}}),s("span",fe,r(e.businessman.name)+" "+r(e.businessman.lastname)+" "+r(e.businessman.middlename)+" - "+r(e.businessman.documentnumber),1)])):x("",!0),e.ruc?(a(),p("div",ge,[i(u(ae)),t[5]||(t[5]=s("span",{class:"label"}," RUC:",-1)),s("span",me,r(e.ruc),1)])):x("",!0),s("div",he,[s("span",be,[e.table==="f10"?(a(),g(h,{key:0,color:"blue"},{default:f(()=>t[6]||(t[6]=[b("PPNN")])),_:1})):e.table==="f20"?(a(),g(h,{key:1,color:"purple"},{default:f(()=>t[7]||(t[7]=[b("PPJJ")])),_:1})):e.table==="asesoria"?(a(),g(h,{key:2,color:"orange"},{default:f(()=>t[8]||(t[8]=[b("AsesorÃ­a")])),_:1})):e.table==="people"?(a(),g(h,{key:3,color:"green"},{default:f(()=>t[9]||(t[9]=[b("Datos de empresario")])),_:1})):x("",!0)])]),s("div",ye,[e.descriptions.length==1?(a(),p("p",Oe,r(e.descriptions[0]),1)):(a(!0),p(C,{key:1},P(e.descriptions,(H,M)=>(a(),p("p",{key:M,class:"description-pp"},r(H),1))),128))]),s("div",ke,[s("span",xe,[i(u(Z)),s("span",null,r(B(e.date)),1)]),t[10]||(t[10]=s("span",{class:"dot"},null,-1)),s("span",we,[i(u(Q)),s("span",null,r(e.time),1)])])]),s("div",null,[s("span",{class:I(["pill",{"pill--blue":e.action==="u","pill--green":e.action==="c","pill--red":e.action==="d"}])},r(E(e.action)),3)])]))),128))]),s("div",ze,[i(V,{current:c.value,"onUpdate:current":t[1]||(t[1]=e=>c.value=e),total:y.value,"page-size":_.value,"show-less-items":"","show-size-changer":!1},null,8,["current","total","page-size"])])])]),_:1},8,["spinning"])])])}}},Ne=Y(Ce,[["__scopeId","data-v-c804b5bb"]]);export{Ne as default};
