import{l as m,ab as x,r as v,G as te,Y as oe,j as ne,b as r,o as i,d as c,e as n,t as f,c as s,w as p,x as w,i as z,y as d,h as a,L as se,F as D,ac as L,K as ie,q as re}from"./index-a6c9c53b.js";import{_ as de}from"./icoexcel-1b303edf.js";import{u as ue}from"./selectes-84c27ebd.js";import"./es-1d7105f5.js";import{M as ce}from"./MoreOutlined-30e9b600.js";const pe={class:"table-component"},me={class:"title-produce"},ve={class:"table-filters"},ge={key:0,class:"filter-year"},_e={key:1,class:"filter-type"},fe={key:2,class:"filter-type"},ye={key:3,class:"filter-offices"},he={key:4,class:"filter-range-date"},we={key:5,class:"filter-asesor"},be={key:6,class:"filter-asesor"},Se={key:7,class:"filter-asesor"},Ce={class:"filter-search"},ke={key:1},Oe={class:"paginator"},xe="DD/MM/YYYY",Re={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(R,{emit:U}){m.locale("es");const y=ue();y.$patch({cities:y.cities}),y.fetchCities();const l=R,h=U,A=JSON.parse(localStorage.getItem("role"))||[],o=x("search"),N=x("loading"),I=x("loadingFile"),b=v(window.innerHeight-100),S=v({page:1}),T=v(1200),F=v([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),P=v([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),Y=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),B=v([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),M=u=>A.some(e=>u.includes(e.id)),G=te(()=>u=>(S.value.page-1)*l.pageSize+u+1),H=()=>{h("handleNew")},V=async()=>{h("handleDownloadExcel")},j=()=>{S.value.page=1,h("handleSearch",!0)},$=u=>{S.value.page=u,h("handlePaginator",u)},C=()=>{if(l.heightTable)return b.value=window.innerHeight-l.heightTable;b.value=window.innerHeight-310},k=(u,e)=>{const g=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)};return oe(()=>{window.removeEventListener("resize",C)}),ne(()=>{window.addEventListener("resize",C),C()}),(u,e)=>{const g=r("a-button"),O=r("a-col"),q=r("a-date-picker"),_=r("a-select"),J=r("a-range-picker"),K=r("a-input"),X=r("a-row"),Q=r("a-menu"),W=r("a-dropdown"),Z=r("a-table"),ee=r("a-tag"),le=r("a-pagination");return i(),c(D,null,[n("div",pe,[n("h3",me,f(l.title),1),s(X,{style:{margin:"1rem 0"}},{default:p(()=>[s(O,{xs:24,md:5},{default:p(()=>[l.new?(i(),w(g,{key:0,type:"primary",onClick:H,style:{"margin-right":".6rem"}},{default:p(()=>[z(f(l.textNuevo),1)]),_:1})):d("",!0),s(g,{class:"btn-excel",onClick:V,loading:a(I),type:"primary"},{default:p(()=>e[10]||(e[10]=[n("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:de},null,-1)])),_:1},8,["loading"])]),_:1}),s(O,{xs:24,md:19},{default:p(()=>[n("div",ve,[l.searchYear?(i(),c("div",ge,[e[11]||(e[11]=n("small",null,"AÑO",-1)),s(q,{allowClear:!1,value:a(o).year,"onUpdate:value":e[0]||(e[0]=t=>a(o).year=t),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):d("",!0),l.tipoformalizacion?(i(),c("div",_e,[e[12]||(e[12]=n("small",null,"TIPO",-1)),s(_,{value:a(o).type,"onUpdate:value":e[1]||(e[1]=t=>a(o).type=t),options:Y.value},null,8,["value","options"])])):d("",!0),l.tipoformalizacion?(i(),c("div",fe,[e[13]||(e[13]=n("small",null,"TIPO CDE",-1)),s(_,{allowClear:!0,value:a(o).typeCdes,"onUpdate:value":e[2]||(e[2]=t=>a(o).typeCdes=t),options:P.value},null,8,["value","options"])])):d("",!0),l.tipooficina?(i(),c("div",ye,[e[14]||(e[14]=n("small",null,"OFICINA",-1)),s(_,{value:a(o).offices,"onUpdate:value":e[3]||(e[3]=t=>a(o).offices=t),options:B.value},null,8,["value","options"])])):d("",!0),l.rangeDate?(i(),c("div",he,[e[15]||(e[15]=n("small",null,"POR RANGO DE FECHAS",-1)),s(J,{value:a(o).range,"onUpdate:value":e[4]||(e[4]=t=>a(o).range=t),presets:F.value,format:xe},null,8,["value","presets"])])):d("",!0),M([1,5])&&l.asesoresList?(i(),c("div",we,[e[16]||(e[16]=n("small",null,"POR ASESOR",-1)),l.asesoresList?(i(),w(_,{key:0,allowClear:!0,value:a(o).asesor,"onUpdate:value":e[5]||(e[5]=t=>a(o).asesor=t),placeholder:"Selecciona Asesor","show-search":"",options:l.asesoresList,"filter-option":k},null,8,["value","options"])):d("",!0)])):d("",!0),l.cityList?(i(),c("div",be,[e[17]||(e[17]=n("small",null,"POR REGIÓN",-1)),s(_,{allowClear:!0,value:a(o).city_id,"onUpdate:value":e[6]||(e[6]=t=>a(o).city_id=t),placeholder:"Selecciona región","show-search":"",options:a(y).cities,"filter-option":k},null,8,["value","options"])])):d("",!0),l.othersList?(i(),c("div",Se,[e[18]||(e[18]=n("small",null,"ORDENAR POR",-1)),s(_,{allowClear:!0,value:a(o).orderby,"onUpdate:value":e[7]||(e[7]=t=>a(o).orderby=t),placeholder:"Filtrador por:","show-search":"",options:l.othersList,"filter-option":k},null,8,["value","options"])])):d("",!0),n("div",Ce,[n("small",null,f(l.titleSearch),1),s(K,{value:a(o).name,"onUpdate:value":e[8]||(e[8]=t=>a(o).name=t),placeholder:l.placeholderSearch},null,8,["value","placeholder"])]),s(g,{type:"primary",onClick:j},{default:p(()=>[a(N)?(i(),w(a(se),{key:0})):(i(),c("span",ke,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),s(Z,{bordered:"",scroll:{x:T.value,y:b.value},class:"table-pnte",columns:l==null?void 0:l.columns,"data-source":l==null?void 0:l.dataSource,pagination:!1,loading:a(N),size:"small"},{bodyCell:p(({column:t,record:E,index:ae})=>[t.dataIndex=="idx"?(i(),c(D,{key:0},[z(f(G.value(ae)),1)],64)):d("",!0),L(u.$slots,"data-cell",{column:t,record:E}),t.dataIndex=="actions"?(i(),w(W,{key:1,trigger:["click"]},{overlay:p(()=>[s(Q,null,{default:p(()=>[L(u.$slots,"custom-options",{record:E})]),_:2},1024)]),default:p(()=>[n("a",{class:"ant-dropdown-link",onClick:e[9]||(e[9]=ie(()=>{},["prevent"]))},[s(g,{shape:"circle",icon:re(a(ce)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),n("div",Oe,[n("span",null,[s(ee,{color:"blue"},{default:p(()=>[n("b",null,f(l==null?void 0:l.total),1)]),_:1}),z(f(l.nameTotal),1)]),s(le,{size:"small",total:l==null?void 0:l.total,pageSize:l.pageSize,onChange:$,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Re as _};
