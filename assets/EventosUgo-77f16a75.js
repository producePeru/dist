import{p as E,r as _,E as J,a as Q,T as y,k as K,b as c,o as d,y as n,i as D,L as X,d as N,c as m,w as u,e as ee,F as M,v as ae,z as o,M as te,j as ie,t as le,m as L,h as f}from"./index-863dc2fe.js";import{u as se}from"./selectes-f7760c72.js";import"./es-a10fe7d7.js";/* empty css                                                   */const re={key:1},de={class:"form-activity-ugo"},ne="DD/MM/YYYY",Ee={__name:"EventosUgo",props:["dataRow"],emits:["closeDraw"],setup(P,{emit:q}){E.locale("es");const r=se();r.$patch({cities:r.cities}),r.$patch({provinces:r.provinces}),r.$patch({districts:r.districts}),r.fetchCities(),r.fetchAsesores();const T=_(!1),p=P,x=q;J();const S=_(!0),e=Q({}),I=_({startDate:{type:"iDate",label:"FECHA INICIO DE LA ACTIVIDAD",name:"startDate",required:!0,message:"Seleccionar fecha de Inicio",disabled:!1,disabledDate:t=>t&&t<E().startOf("day")},endDate:{type:"iDate",label:"FECHA CIERRE DE LA ACTIVIDAD",name:"endDate",required:!0,message:"Seleccionar fecha de Fin",disabled:!1,placeholder:"Ejemplo: Lunes 20 de enero",disabledDate:t=>t&&t<E().startOf("day")},eventsoffice_id:{type:"iSelect",label:"TIPO DE ACTIVIDAD",name:"eventsoffice_id",required:!0,message:"Seleccionar un tipo de actividad",disabled:!0},title:{type:"iSelect",label:"NOMBRE DE ACTIVIDAD",name:"title",required:!0,message:"Escribir el nombre de la actividad",disabled:!0,max:100},theme:{type:"iText",label:"TEMA DE LA ACTIVIDAD",name:"theme",required:!0,message:"Seleccionar tema de actividad",disabled:!1},entidad:{type:"iText",label:"NOMBRE DE ENTIDAD ORGANIZADORA",name:"entidad",required:!0,message:"Escribir nombre de la entidad",disabled:!1},entidad_aliada:{type:"iText",label:"NOMBRE DE ENTIDAD O INSTITUCION ALIADA / PARTICIPANTE",name:"entidad_aliada",required:!0,message:"Escribir nombre de la entidad aliada",disabled:!1},people_id:{type:"iSelectWrite",label:"REPRESENTANTE DE PRODUCE QUE PARTICIPA (APELLIDOS Y NOMBRES)",name:"people_id",required:!0,message:"Seleccionar al asesor",disabled:!0},beneficiarios:{type:"iNumber",label:"MYPE Y/O EMPRENDEDORES BENEFICIADOS ESPERADOS",name:"beneficiarios",required:!0,message:"Escribir número de beneficiarios",disabled:!0},modality:{type:"iSelect",label:"MODALIDAD",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!0},city_id:{type:"iSelectWrite",label:"REGIÓN DE LA ACTIVIDAD",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelectWrite",label:"PROVINCIA DE LA ACTIVIDAD",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"DISTRITO DE LA ACTIVIDAD",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"LUGAR DE LA ACTIVIDAD",name:"address",required:!0,message:"Escribir lugar de la actividad",disabled:!1,max:100,placeholder:"Ejemplo: Av. Los Incas 1234 - San Miguel"},pasaje:{type:"iSelect",label:"¿REQUERIRÁ PASAJES?",name:"pasaje",required:!0,message:"Seleccionar si requiere pasajes",disabled:!0},monto:{type:"iNumber",label:"COLOCAR SOLO EL MONTO DE GASTOS EN PASAJES EN SOLES IDA + VUELTA (INTERPROVINCIAL)",name:"monto",required:!0,message:"Escribir el monto de pasajes",disabled:!0}}),A=_([]),w=_([]),Y=[{label:"SI",value:"s"},{label:"NO",value:"n"}],V=[{label:"PRESENCIAL",value:"p"},{label:"VIRTUAL",value:"v"}],C=(t,l)=>{t=="pasaje"&&(l=="n"?e.monto=0:e.monto=null),t=="eventsoffice_id"&&(e.title=null,e.theme=null,I.value.theme.disabled=!1,l==12?(I.value.theme.type="iText",A.value=[{label:"POTENCIA TU EMPRESA - FORMALIZACIÓN",value:"POTENCIA TU EMPRESA - FORMALIZACIÓN"},{label:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL",value:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL"},{label:"POTENCIA TU EMPRESA - DIGITALIZACIÓN",value:"POTENCIA TU EMPRESA - DIGITALIZACIÓN"},{label:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO",value:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO"},{label:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO",value:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO"},{label:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO",value:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO"}]):l==13?A.value=[{label:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE",value:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE"}]:l==14?A.value=[{label:"FORTALECE TU MERCADO",value:"FORTALECE TU MERCADO"}]:l==15?A.value=[{label:"CAMPAÑA DESPEGA TU EMPRESA",value:"CAMPAÑA DESPEGA TU EMPRESA"}]:A.value=[]),t=="title"&&(l=="DIFUSIÓN DE LOS SERVICIOS DEL PNTE"&&(I.value.theme.type="iText",e.theme="Brindar difusión de los servicios de los cinco componentes del PNTE"),l=="CAMPAÑA DESPEGA TU EMPRESA"&&(I.value.theme.type="iText",e.theme="Difusión, asesorías y formalización de MYPES"))};y(()=>e.startDate,t=>{e.endDate&&new Date(t)>new Date(e.endDate)&&(e.endDate=null)}),y(()=>e.endDate,t=>{e.startDate&&new Date(t)<new Date(e.startDate)&&(e.startDate=null)});const O=(t,l)=>{const b=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return l.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(b)},k=t=>{if(t=="modality")return V;if(t=="eventsoffice_id")return F();if(t=="pasaje")return Y;if(t=="title")return A.value;if(t=="theme")return w.value},F=()=>[{value:12,label:"CAPACITACIÓN"},{value:13,label:"DIFUSIÓN"},{value:14,label:"CICLO DE CAPACITACIONES"},{value:15,label:"DESPEGA TU EMPRESA Y PRODUCE"}],h=t=>{e.province_id=null,e.district_id=null,r.fetchProvinces(t)},g=t=>{e.district_id=null,r.fetchDistricts(t)},R=()=>{Object.keys(e).forEach(t=>{e[t]=null})},j=async()=>{T.value=!0;const t={eventsoffice_id:e.eventsoffice_id,title:e.title,theme:e.theme,entidad:e.entidad,entidad_aliada:e.entidad_aliada,beneficiarios:e.beneficiarios,startDate:E(e.startDate).format("YYYY-MM-DD"),endDate:E(e.endDate).format("YYYY-MM-DD"),modality:e.modality,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,pasaje:e.pasaje,monto:e.monto,asesorId:e.people_id};try{const l=p.dataRow?"PUT":"POST",b=p.dataRow?`attendance/update/${p.dataRow.id}`:"attendance/create",s=await L({url:b,method:l,data:t});s.status==200&&(f.success(s.message),x("closeDraw"),await L({url:"attendance/email-create-activity",method:"POST",data:s.data}),R()),s.status==500&&(f.error(s.message),R()),s.status==403&&f.error(s.message)}catch(l){f.error("Se presentó un error, los valores son requeridos",l)}finally{T.value=!1}},G=t=>{const l=e[t]?e[t].trim():"";e[t]=l};function U(t){S.value=!0;try{C("eventsoffice_id",t.tipo_actividad_id),e.eventsoffice_id=t.tipo_actividad_id,e.title=t.nombre_actividad,e.theme=t.tema,e.entidad=t.entidad,e.entidad_aliada=t.entidad_aliada,e.people_id=t.people_id,e.beneficiarios=t.beneficiarios,e.startDate=t.startDate?E(t.startDate,"DD/MM/YYYY"):null,e.endDate=t.endDate?E(t.endDate,"DD/MM/YYYY"):null,e.modality=t.modality,C("modality",t.modality),e.city_id=t.city_id,h(t.city_id),e.province_id=t.province_id,g(t.province_id),e.district_id=t.district_id,e.address=t.address,e.pasaje=t.pasaje,e.monto=t.monto}catch(l){console.error("Error al cargar la información:",l)}finally{S.value=!1}}return K(()=>{p.dataRow?U(p.dataRow):(S.value=!1,console.log("NUECVOOOOOO"))}),y(()=>p.dataRow,t=>{t?U(t):R()}),(t,l)=>{const b=c("a-input"),s=c("a-form-item"),v=c("a-select"),B=c("a-textarea"),Z=c("a-input-number"),z=c("a-date-picker"),W=c("a-button"),$=c("a-form");return S.value?(d(),n(D(X),{key:0,style:{color:"#00a6db"}})):(d(),N("div",re,[m($,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:j},{default:u(()=>[ee("div",de,[(d(!0),N(M,null,ae(I.value,(a,H)=>(d(),N(M,{key:H},[a.type==="iText"?(d(),n(s,{key:0,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:u(()=>[m(b,{disabled:a.disabled,value:e[a.name],"onUpdate:value":i=>e[a.name]=i,maxlength:a.max,onBlur:i=>G(a.name),placeholder:a.placeholder},null,8,["disabled","value","onUpdate:value","maxlength","onBlur","placeholder"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iSelect"?(d(),n(s,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(v,{value:e[a.name],"onUpdate:value":i=>e[a.name]=i,options:k(a.name),onChange:i=>C(a.name,i)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iTextarea"?(d(),n(s,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(B,{value:e[a.name],"onUpdate:value":i=>e[a.name]=i,rows:8,maxlength:a.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iNumber"?(d(),n(s,{key:3,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(Z,{value:e[a.name],"onUpdate:value":i=>e[a.name]=i,min:0,max:1e4,style:{width:"100px"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iDate"?(d(),n(s,{key:4,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(z,{locale:D(te),value:e[a.name],"onUpdate:value":i=>e[a.name]=i,style:{width:"100%"},format:ne,placeholder:"día/mes/año","disabled-date":a.disabledDate},null,8,["locale","value","onUpdate:value","disabled-date"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iSelectWrite"?(d(),n(s,{key:5,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[a.name=="city_id"?(d(),n(v,{key:0,value:e[a.name],"onUpdate:value":i=>e[a.name]=i,options:D(r).cities,"show-search":"","filter-option":O,onChange:h},null,8,["value","onUpdate:value","options"])):o("",!0),a.name=="province_id"?(d(),n(v,{key:1,value:e[a.name],"onUpdate:value":i=>e[a.name]=i,options:D(r).provinces,"show-search":"","filter-option":O,onChange:g,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),a.name=="district_id"?(d(),n(v,{key:2,value:e[a.name],"onUpdate:value":i=>e[a.name]=i,options:D(r).districts,"show-search":"","filter-option":O,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),a.name=="people_id"?(d(),n(v,{key:3,value:e[a.name],"onUpdate:value":i=>e[a.name]=i,options:D(r).asesores,"show-search":"","filter-option":O},null,8,["value","onUpdate:value","options"])):o("",!0)]),_:2},1032,["name","label","rules"])):o("",!0)],64))),128))]),m(s,null,{default:u(()=>[m(W,{type:"primary","html-type":"submit",loading:T.value},{default:u(()=>[ie(le(P.dataRow?"ACTUALIZAR":"GUARDAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))}}};export{Ee as _};
