import{F as R,_ as Q,a as V}from"./FormalizacionFooter-13e37465.js";import{a as Y,r as u,u as G,l as J,n as X,b as c,o as U,d as k,e as i,q as $,c as o,w as s,F as H,m as N,g as P,f,j as z,s as K,p as W,k as Z}from"./index-2f54a29e.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAfCAYAAACYn/8/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABfSURBVHgB7c4hEYBAAAXRDxJFABwhMFQgAflIQAUMEdCEQHIdTuzMzexL8LpnnP9Ums4jw7qkxnfdebc9tfo0yjjNOM04zTjNOM04zTjNOM04zTjNOM04zTjNOK3ZeAGQ1whJsy738gAAAABJRU5ErkJggg==";const _=m=>(W("data-v-e2c416c5"),m=m(),Z(),m),oe=_(()=>i("div",{class:"container header-wrapper"},[i("img",{src:Q,alt:"logo-produce"}),i("img",{src:V,alt:"logo-tu-empresa"})],-1)),te=[oe],le={class:"form"},ne={class:"container"},re={class:"form-wrapper"},se=_(()=>i("h2",{class:"ff title"},"Formulario de formalización digital",-1)),ie=_(()=>i("h2",{class:"ff title2"},"Paso 1: Registro de datos",-1)),ue={class:"number-cel"},ce=_(()=>i("div",{class:"flat-51"},[i("img",{src:ae,alt:"peru"}),i("span",null,"+51")],-1)),de={key:0,class:"error-msn"},me={__name:"FormalizacionPge",setup(m){const a=Y({dni:null,name_lastname:null,email:null,phone:null,departament:null,province:null,district:null,address:null,id_cde:null}),p=u(!1),g=u(!1),A=u(!1),x=u(null),h=u(!1),b=u([]),v=u([]),d=u([]),I=G(),B=()=>{p.value&&(p.value=!1)},E=async()=>{if(!g.value)return p.value=!0,N.error("Completa los valores del formulario");P.remove("formalizacion"),A.value=!0;try{await f({url:"/public/formalization",method:"POST",data:a})&&(P.set("formalization-data",JSON.stringify(a)),I.push({name:"formalizacion-mapa"}))}catch{N.error("Error al registrar")}finally{A.value=!1}},T=()=>{N.error("Completa los valores del formulario")},C=n=>{a[n]=a[n].replace(/\D/g,"")},y=(n,e)=>{const r=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)},D=async()=>{try{const{data:n}=await f({url:"/departaments",method:"GET"});let e=n.map(r=>({label:r.label,value:r.id}));b.value=[...b.value,...e]}catch(n){console.log(n)}},q=async n=>{a.province=null,a.district=null,v.value=[],d.value=[];try{const{data:e}=await f({url:`/province/${n}`,method:"GET"});let r=e.map(l=>({label:l.label,value:l.id}));v.value=[...v.value,...r]}catch(e){console.log(e)}},O=async n=>{a.district=null,d.value=[];try{const{data:e}=await f({url:`/district/${n}`,method:"GET"});let r=e.map(l=>({label:l.label,value:l.id}));d.value=[...d.value,...r]}catch(e){console.log(e)}},F=()=>{window.pageYOffset>10?h.value=!0:h.value=!1};return J(()=>{D(),window.addEventListener("scroll",F)}),X(()=>{window.removeEventListener("scroll",F)}),(n,e)=>{const r=c("a-input"),l=c("a-form-item"),w=c("a-select"),S=c("router-link"),j=c("a-checkbox"),L=c("a-button"),M=c("a-form");return U(),k(H,null,[i("header",{class:$(["header",{floatingNav:h.value}]),ref_key:"navBar",ref:x},te,2),i("section",le,[i("div",ne,[i("div",re,[se,o(M,{class:"form-values",model:a,name:"basic",layout:"vertical",autocomplete:"off",onFinish:E,onFinishFailed:T},{default:s(()=>[ie,o(l,{label:"Número DNI",name:"dni",rules:[{required:!0,message:"Por favor ingresa tu número de DNI",min:8,max:8}]},{default:s(()=>[o(r,{value:a.dni,"onUpdate:value":e[0]||(e[0]=t=>a.dni=t),onInput:e[1]||(e[1]=t=>C("dni"))},null,8,["value"])]),_:1}),o(l,{label:"Nombres y Apellidos",name:"name_lastname",rules:[{required:!0,message:"Por favor ingresa tu número de DNI"}]},{default:s(()=>[o(r,{value:a.name_lastname,"onUpdate:value":e[2]||(e[2]=t=>a.name_lastname=t)},null,8,["value"])]),_:1}),o(l,{label:"Correo electrónico",name:"email",rules:[{required:!0,message:"Por favor ingresa tu correo electrónico",type:"email"}]},{default:s(()=>[o(r,{value:a.email,"onUpdate:value":e[3]||(e[3]=t=>a.email=t)},null,8,["value"])]),_:1}),o(l,{label:"Número de celular",name:"phone",rules:[{required:!0,message:"Por favor ingresa tu número de celular",min:9,max:9}]},{default:s(()=>[i("div",ue,[ce,o(r,{value:a.phone,"onUpdate:value":e[4]||(e[4]=t=>a.phone=t),onInput:e[5]||(e[5]=t=>C("phone"))},null,8,["value"])])]),_:1}),o(l,{label:"Departamento",name:"departament",rules:[{required:!0,message:"Por favor selecciona un departamento"}]},{default:s(()=>[o(w,{value:a.departament,"onUpdate:value":e[6]||(e[6]=t=>a.departament=t),"show-search":"",options:b.value,"filter-option":y,onChange:q},null,8,["value","options"])]),_:1}),o(l,{label:"Provincia",name:"province",rules:[{required:!0,message:"Por favor selecciona tu provincia"}]},{default:s(()=>[o(w,{value:a.province,"onUpdate:value":e[7]||(e[7]=t=>a.province=t),"show-search":"",options:v.value,"filter-option":y,onChange:O},null,8,["value","options"])]),_:1}),o(l,{label:"Distrito",name:"district",rules:[{required:!0,message:"Por favor selecciona tu distrito"}]},{default:s(()=>[o(w,{value:a.district,"onUpdate:value":e[8]||(e[8]=t=>a.district=t),"show-search":"",options:d.value,"filter-option":y},null,8,["value","options"])]),_:1}),o(l,{label:"Dirección",name:"address",rules:[{required:!0,message:"Por favor ingresa tu dirección"}]},{default:s(()=>[o(r,{value:a.address,"onUpdate:value":e[9]||(e[9]=t=>a.address=t)},null,8,["value"])]),_:1}),o(l,null,{default:s(()=>[o(j,{checked:g.value,"onUpdate:checked":e[10]||(e[10]=t=>g.value=t),name:"type",onChange:B},{default:s(()=>[z(" He leído y acepto los términos y condiciones "),o(S,{to:"/politicas-privacidad",target:"_blank",style:{"margin-left":".5rem"}},{default:s(()=>[z("Ver términos y condiciones")]),_:1})]),_:1},8,["checked"]),p.value?(U(),k("div",de,"Acepta los términos y condiciones")):K("",!0)]),_:1}),o(l,null,{default:s(()=>[o(L,{loading:A.value,class:"form-button",type:"primary","html-type":"submit"},{default:s(()=>[z("CONTINUAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])]),o(R)],64)}}},_e=ee(me,[["__scopeId","data-v-e2c416c5"]]);export{_e as default};
