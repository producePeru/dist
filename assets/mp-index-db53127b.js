import{_ as G}from"./TableComponent-84f8432e.js";import{c as s,A as U,r as m,u as q,a as J,k as X,X as E,b as _,o as f,d as y,w as i,p as V,m as K,y as w,i as k,z as h,F as Q,j as b,t as O,e as D}from"./index-389451b6.js";import{_ as W}from"./DrawMP-997b589f.js";import"./downloadExcel-5a6edee5.js";import"./es-2b761259.js";import{g as Z}from"./publicInscripcion-ebc9ecb9.js";import{G as ee}from"./GlobalOutlined-c7262350.js";import"./icoexcel-1b303edf.js";import"./selectes-8f92e328.js";import"./SyncOutlined-4626500b.js";import"./MoreOutlined-0bbf32d4.js";import"./FormComponent-239f3b9a.js";import"./quill.snow-b6ced09c.js";import"./UpImage-fa5482e8.js";import"./_plugin-vue_export-helper-c27b6911.js";var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};const ae=te;function T(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),c.forEach(function(o){ne(r,o,n[o])})}return r}function ne(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var I=function(t,n){var c=T({},t,n.attrs);return s(U,T({},c,{icon:ae}),null)};I.displayName="VideoCameraOutlined";I.inheritAttrs=!1;const oe=I;const re={class:"layout-content"},le={key:3},ie=["onClick"],Oe={__name:"mp-index",setup(r){JSON.parse(localStorage.getItem("role"));const t=m([]),n=m(0),c=m(150),o=m(!1);m(!1),q();const x=m(!1),v=m(null),A=m(!1),a=J({page:1}),R=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK INSCRIPCIONES",dataIndex:"link",width:80,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"LINK SALA",dataIndex:"link_sala",width:50,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],C=e=>e?V(e,["HH:mm:ss","HH:mm"]).format("hh:mm A"):null,H=e=>{v.value=e,o.value=!0},P=()=>{g(),o.value=!1},Y=()=>{v.value=null,o.value=!0},$=async()=>{},z=async e=>{a.page=e,await g()},M=async e=>{e&&(a.page=1,await g())},N=(e,d)=>{const u=`${Z()}/${d}/${e}`;window.open(u,"_blank")},g=async()=>{try{x.value=!0;const e={page:a.page};a.year&&(e.year=V(a.year).format("YYYY")),a.range&&(e.startDate=a.range[0].format("YYYY/MM/DD"),e.endDate=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const d=await K({url:"mp/index-events",method:"GET",params:e}),{data:u}=d;t.value=u.data,n.value=u.total,c.value=u.per_page}catch(e){console.error("Error de red:",e)}finally{x.value=!1}};return X(async()=>{await g()}),E("search",a),E("loading",x),E("loadingFile",A),(e,d)=>{const u=_("a-button"),j=_("a-tag"),B=_("router-link"),S=_("a-menu-item"),L=_("a-drawer");return f(),y("div",re,[s(G,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:R,titleSearch:"BUSCAR POR EVENTO",pageSize:c.value,nameTotal:"Capacitaciones",dataSource:t.value,total:n.value,btnUpdate:!0,onHandleNew:Y,onHandleCallFetchData:g,onHandleDownloadExcel:$,onHandleSearch:M,onHandlePaginator:z},{"data-cell":i(({column:l,record:p})=>[l.dataIndex=="link"?(f(),w(u,{key:0,onClick:F=>N(p.slug,"mujer-produce"),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:i(()=>[s(k(ee))]),_:2},1032,["onClick"])):h("",!0),l.dataIndex=="link_sala"?(f(),y(Q,{key:1},[p.link?(f(),w(u,{key:0,onClick:F=>N(p.slug,"mujer-produce-sala-link"),style:{color:"#2196f3","font-size":"16px","margin-top":"-2px"},type:"text"},{default:i(()=>[s(k(oe))]),_:2},1032,["onClick"])):h("",!0)],64)):h("",!0),l.dataIndex=="registered"?(f(),w(j,{key:2,color:"purple"},{default:i(()=>[b(O(p.registered),1)]),_:2},1024)):h("",!0),l.dataIndex=="hours"?(f(),y("span",le,[D("span",null,O(C(p.hourStart))+" – "+O(C(p.hourEnd)),1)])):h("",!0)]),"custom-options":i(({record:l})=>[s(S,null,{default:i(()=>[s(B,{to:`/admin/mp/inscritos/${l.slug}`},{default:i(()=>d[1]||(d[1]=[b(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),s(S,null,{default:i(()=>[D("a",{onClick:p=>H(l)},"Editar",8,ie)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),s(L,{open:o.value,"onUpdate:open":d[0]||(d[0]=l=>o.value=l),title:v.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:i(()=>[s(W,{onCloseDraw:P,info:v.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Oe as default};
