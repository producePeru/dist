import{_ as A}from"./TableComponent-c89fcc82.js";import{r as l,u as V,a as H,p as R,k as M,X as v,b as g,o as i,d as p,c as r,w as s,m as W,i as U,z as w,F as $,e as y,j as _,t as f,y as G}from"./index-2c1d98b1.js";import{_ as z}from"./DrawSed-1faa7d45.js";import"./es-d9bd4dcd.js";import{g as P}from"./publicInscripcion-ebc9ecb9.js";import{C as j}from"./CloudUploadOutlined-af0e0be4.js";import"./icoexcel-1b303edf.js";import"./selectes-8e7f3aac.js";import"./MoreOutlined-39110c8e.js";import"./FormComponent-6fc03bc7.js";import"./quill.snow-eb3ad49c.js";import"./UpImage-9a4d0e0a.js";import"./_plugin-vue_export-helper-c27b6911.js";const L={class:"layout-content"},q=["onClick"],J={key:0,style:{"line-height":"1.5"}},X={key:1},Z=["onClick"],me={__name:"list-index",setup(K){JSON.parse(localStorage.getItem("role"));const h=l([]),S=l(0),x=l(150),d=l(!1);V();const E=l(!1),m=l(null),C=l(!1),a=H({year:R("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:3}),D=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:50},{title:"NOMBRE DEL EVENTO",fixed:"left",dataIndex:"title",width:180},{title:"FECHAS INSCRIPCIONES",dataIndex:"date",width:70,align:"center"},{title:"REGISTRADOS",dataIndex:"registered",width:100,align:"center"},{title:"META DE REGISTRO",dataIndex:"metaMypes",width:100,align:"center"},{title:"REGISTRAR",dataIndex:"",width:120,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}];l([{value:1,label:"EN CURSO"},{value:2,label:"FINALIZADOS"},{value:3,label:"TODOS"}]);const Y=e=>{const t=`${P()}/sed/${e}`;window.open(t,"_blank")},k=e=>{m.value=e,d.value=!0},O=()=>{u(),d.value=!1},N=()=>{m.value=null,d.value=!0},b=async e=>{a.page=e,await u()},T=async e=>{e&&(a.page=1,await u())},u=async()=>{try{E.value=!0;const e={page:a.page};a.year&&(e.year=R(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const c=await W({url:"events-ugse/cyber-wow",method:"GET",params:e});h.value=c.data.data,S.value=c.data.total,x.value=c.data.per_page}catch(e){console.error("Error de red:",e)}finally{E.value=!1}};return M(async()=>{await u()}),v("search",a),v("loading",E),v("loadingFile",C),(e,t)=>{const c=g("a-tag"),B=g("router-link"),I=g("a-menu-item"),F=g("a-drawer");return i(),p("div",L,[r(A,{title:"CYBER WOW",new:!0,textNuevo:"NUEVO",placeholderSearch:"Buscar",searchYear:!0,columns:D,titleSearch:"BUSCAR POR EVENTO",pageSize:x.value,nameTotal:"Eventos CYBER WOW",dataSource:h.value,total:S.value,btnUpdate:!0,onHandleNew:N,onHandleCallFetchData:u,onHandleDownloadExcel:e.handleDownloadExcel,onHandleSearch:T,onHandlePaginator:b},{"data-cell":s(({column:n,record:o})=>[n.dataIndex=="link"?(i(),p("a",{key:0,onClick:Q=>Y(o.slug),href:"javascript:void(0)",target:"_blank"},[r(U(j),{style:{"font-size":"18px"}})],8,q)):w("",!0),n.dataIndex=="date"?(i(),p($,{key:1},[o.startDate!=o.endDate?(i(),p("span",J,[t[1]||(t[1]=y("b",null,"Desde:",-1)),_(" "+f(o.dateStartFormat)+" ",1),t[2]||(t[2]=y("b",null,"Hasta:",-1)),_(" "+f(o.dateEndFormat),1)])):(i(),p("span",X,f(o.dateStartFormat),1))],64)):w("",!0),n.dataIndex=="registered"?(i(),G(c,{key:2,color:"processing"},{default:s(()=>[_(f(o.registered),1)]),_:2},1024)):w("",!0)]),"custom-options":s(({record:n})=>[r(I,null,{default:s(()=>[r(B,{to:`/admin/ugse/cyber-wow/inscritos/${n.slug}`,target:"_blank"},{default:s(()=>t[3]||(t[3]=[_(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),r(I,null,{default:s(()=>[y("a",{onClick:o=>k(n)},"Editar",8,Z)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total","onHandleDownloadExcel"]),r(F,{open:d.value,"onUpdate:open":t[0]||(t[0]=n=>d.value=n),title:m.value?"EDITAR EVENTO CYBER WOW":"REGISTRAR UN EVENTO CYBER WOW",placement:"right",width:"550"},{default:s(()=>[r(z,{onCloseDraw:O,info:m.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{me as default};
