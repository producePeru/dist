import{l as m,ab as h,r as v,G as le,Y as te,j as oe,b as r,o as i,d as p,e as o,t as g,c as n,w as u,x as w,i as k,y as c,h as l,L as ne,F as N,ac as E,K as se,q as ie}from"./index-319b6133.js";import{_ as re}from"./icoexcel-1b303edf.js";import"./es-144fca61.js";import{M as de}from"./MoreOutlined-da8a55d6.js";const ue={class:"table-component"},ce={class:"title-produce"},pe={class:"table-filters"},me={key:0,class:"filter-year"},ve={key:1,class:"filter-type"},_e={key:2,class:"filter-type"},ge={key:3,class:"filter-offices"},fe={key:4,class:"filter-range-date"},ye={key:5,class:"filter-asesor"},we={class:"filter-search"},Se={key:1},be={class:"paginator"},Ce="DD/MM/YYYY",Oe={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(D,{emit:A}){m.locale("es");const a=D,f=A,U=JSON.parse(localStorage.getItem("role"))||[],s=h("search"),x=h("loading"),I=h("loadingFile"),z=v(window.innerHeight-100),S=v({page:1}),L=v(1200),F=v([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),R=v([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),T=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),P=v([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),Y=d=>U.some(e=>d.includes(e.id)),B=le(()=>d=>(S.value.page-1)*a.pageSize+d+1),M=()=>{f("handleNew")},G=async()=>{f("handleDownloadExcel")},V=()=>{S.value.page=1,f("handleSearch",!0)},j=d=>{S.value.page=d,f("handlePaginator",d)},b=()=>{z.value=window.innerHeight-310},H=(d,e)=>{const _=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)};return te(()=>{window.removeEventListener("resize",b)}),oe(()=>{window.addEventListener("resize",b),b()}),(d,e)=>{const _=r("a-button"),C=r("a-col"),$=r("a-date-picker"),y=r("a-select"),q=r("a-range-picker"),J=r("a-input"),K=r("a-row"),X=r("a-menu"),Q=r("a-dropdown"),W=r("a-table"),Z=r("a-tag"),ee=r("a-pagination");return i(),p(N,null,[o("div",ue,[o("h3",ce,g(a.title),1),n(K,{style:{margin:"1rem 0"}},{default:u(()=>[n(C,{xs:24,md:5},{default:u(()=>[a.new?(i(),w(_,{key:0,type:"primary",onClick:M,style:{"margin-right":".6rem"}},{default:u(()=>[k(g(a.textNuevo),1)]),_:1})):c("",!0),n(_,{class:"btn-excel",onClick:G,loading:l(I),type:"primary"},{default:u(()=>e[8]||(e[8]=[o("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:re},null,-1)])),_:1},8,["loading"])]),_:1}),n(C,{xs:24,md:19},{default:u(()=>[o("div",pe,[a.searchYear?(i(),p("div",me,[e[9]||(e[9]=o("small",null,"AÑO",-1)),n($,{allowClear:!1,value:l(s).year,"onUpdate:value":e[0]||(e[0]=t=>l(s).year=t),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):c("",!0),a.tipoformalizacion?(i(),p("div",ve,[e[10]||(e[10]=o("small",null,"TIPO",-1)),n(y,{value:l(s).type,"onUpdate:value":e[1]||(e[1]=t=>l(s).type=t),options:T.value},null,8,["value","options"])])):c("",!0),a.tipoformalizacion?(i(),p("div",_e,[e[11]||(e[11]=o("small",null,"TIPO CDE",-1)),n(y,{allowClear:!0,value:l(s).typeCdes,"onUpdate:value":e[2]||(e[2]=t=>l(s).typeCdes=t),options:R.value},null,8,["value","options"])])):c("",!0),a.tipooficina?(i(),p("div",ge,[e[12]||(e[12]=o("small",null,"OFICINA",-1)),n(y,{value:l(s).offices,"onUpdate:value":e[3]||(e[3]=t=>l(s).offices=t),options:P.value},null,8,["value","options"])])):c("",!0),a.rangeDate?(i(),p("div",fe,[e[13]||(e[13]=o("small",null,"POR RANGO DE FECHAS",-1)),n(q,{value:l(s).range,"onUpdate:value":e[4]||(e[4]=t=>l(s).range=t),presets:F.value,format:Ce},null,8,["value","presets"])])):c("",!0),Y([1,5])&&a.asesoresList?(i(),p("div",ye,[e[14]||(e[14]=o("small",null,"POR ASESOR",-1)),a.asesoresList?(i(),w(y,{key:0,allowClear:!0,value:l(s).asesor,"onUpdate:value":e[5]||(e[5]=t=>l(s).asesor=t),placeholder:"Selecciona Asesor","show-search":"",options:a.asesoresList,"filter-option":H},null,8,["value","options"])):c("",!0)])):c("",!0),o("div",we,[o("small",null,g(a.titleSearch),1),n(J,{value:l(s).name,"onUpdate:value":e[6]||(e[6]=t=>l(s).name=t),placeholder:a.placeholderSearch},null,8,["value","placeholder"])]),n(_,{type:"primary",onClick:V},{default:u(()=>[l(x)?(i(),w(l(ne),{key:0})):(i(),p("span",Se,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),n(W,{bordered:"",scroll:{x:L.value,y:z.value},class:"table-pnte",columns:a==null?void 0:a.columns,"data-source":a==null?void 0:a.dataSource,pagination:!1,loading:l(x),size:"small"},{bodyCell:u(({column:t,record:O,index:ae})=>[t.dataIndex=="idx"?(i(),p(N,{key:0},[k(g(B.value(ae)),1)],64)):c("",!0),E(d.$slots,"data-cell",{column:t,record:O}),t.dataIndex=="actions"?(i(),w(Q,{key:1,trigger:["click"]},{overlay:u(()=>[n(X,null,{default:u(()=>[E(d.$slots,"custom-options",{record:O})]),_:2},1024)]),default:u(()=>[o("a",{class:"ant-dropdown-link",onClick:e[7]||(e[7]=se(()=>{},["prevent"]))},[n(_,{shape:"circle",icon:ie(l(de)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),o("div",be,[o("span",null,[n(Z,{color:"blue"},{default:u(()=>[o("b",null,g(a==null?void 0:a.total),1)]),_:1}),k(g(a.nameTotal),1)]),n(ee,{size:"small",total:a==null?void 0:a.total,pageSize:a.pageSize,onChange:j,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Oe as _};
