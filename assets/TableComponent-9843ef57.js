import{l as m,ab as C,r as v,G as le,Y as oe,j as te,b as i,o as r,d as p,e as t,t as _,c as n,w as u,x as w,i as k,y as c,h as l,L as ne,F as E,ac as D,K as se,q as re}from"./index-03132ef7.js";import{_ as ie}from"./icoexcel-1b303edf.js";import"./es-09d24158.js";import{M as de}from"./MoreOutlined-e3293f05.js";const ue={class:"table-component"},ce={class:"title-produce"},pe={class:"table-filters"},me={key:0,class:"filter-year"},ve={key:1,class:"filter-type"},ge={key:2,class:"filter-type"},_e={key:3,class:"filter-offices"},fe={key:4,class:"filter-range-date"},ye={key:5,class:"filter-asesor"},we={key:6,class:"filter-asesor"},be={class:"filter-search"},Se={key:1},he={class:"paginator"},Ce="DD/MM/YYYY",Ne={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(A,{emit:L}){m.locale("es");const a=A,y=L,U=JSON.parse(localStorage.getItem("role"))||[],s=C("search"),O=C("loading"),R=C("loadingFile"),x=v(window.innerHeight-100),b=v({page:1}),I=v(1200),F=v([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),T=v([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),P=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),Y=v([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),B=d=>U.some(e=>d.includes(e.id)),M=le(()=>d=>(b.value.page-1)*a.pageSize+d+1),G=()=>{y("handleNew")},V=async()=>{y("handleDownloadExcel")},j=()=>{b.value.page=1,y("handleSearch",!0)},H=d=>{b.value.page=d,y("handlePaginator",d)},S=()=>{x.value=window.innerHeight-310},z=(d,e)=>{const g=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)};return oe(()=>{window.removeEventListener("resize",S)}),te(()=>{window.addEventListener("resize",S),S()}),(d,e)=>{const g=i("a-button"),h=i("a-col"),$=i("a-date-picker"),f=i("a-select"),q=i("a-range-picker"),J=i("a-input"),K=i("a-row"),X=i("a-menu"),Q=i("a-dropdown"),W=i("a-table"),Z=i("a-tag"),ee=i("a-pagination");return r(),p(E,null,[t("div",ue,[t("h3",ce,_(a.title),1),n(K,{style:{margin:"1rem 0"}},{default:u(()=>[n(h,{xs:24,md:5},{default:u(()=>[a.new?(r(),w(g,{key:0,type:"primary",onClick:G,style:{"margin-right":".6rem"}},{default:u(()=>[k(_(a.textNuevo),1)]),_:1})):c("",!0),n(g,{class:"btn-excel",onClick:V,loading:l(R),type:"primary"},{default:u(()=>e[9]||(e[9]=[t("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:ie},null,-1)])),_:1},8,["loading"])]),_:1}),n(h,{xs:24,md:19},{default:u(()=>[t("div",pe,[a.searchYear?(r(),p("div",me,[e[10]||(e[10]=t("small",null,"AÑO",-1)),n($,{allowClear:!1,value:l(s).year,"onUpdate:value":e[0]||(e[0]=o=>l(s).year=o),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):c("",!0),a.tipoformalizacion?(r(),p("div",ve,[e[11]||(e[11]=t("small",null,"TIPO",-1)),n(f,{value:l(s).type,"onUpdate:value":e[1]||(e[1]=o=>l(s).type=o),options:P.value},null,8,["value","options"])])):c("",!0),a.tipoformalizacion?(r(),p("div",ge,[e[12]||(e[12]=t("small",null,"TIPO CDE",-1)),n(f,{allowClear:!0,value:l(s).typeCdes,"onUpdate:value":e[2]||(e[2]=o=>l(s).typeCdes=o),options:T.value},null,8,["value","options"])])):c("",!0),a.tipooficina?(r(),p("div",_e,[e[13]||(e[13]=t("small",null,"OFICINA",-1)),n(f,{value:l(s).offices,"onUpdate:value":e[3]||(e[3]=o=>l(s).offices=o),options:Y.value},null,8,["value","options"])])):c("",!0),a.rangeDate?(r(),p("div",fe,[e[14]||(e[14]=t("small",null,"POR RANGO DE FECHAS",-1)),n(q,{value:l(s).range,"onUpdate:value":e[4]||(e[4]=o=>l(s).range=o),presets:F.value,format:Ce},null,8,["value","presets"])])):c("",!0),B([1,5])&&a.asesoresList?(r(),p("div",ye,[e[15]||(e[15]=t("small",null,"POR ASESOR",-1)),a.asesoresList?(r(),w(f,{key:0,allowClear:!0,value:l(s).asesor,"onUpdate:value":e[5]||(e[5]=o=>l(s).asesor=o),placeholder:"Selecciona Asesor","show-search":"",options:a.asesoresList,"filter-option":z},null,8,["value","options"])):c("",!0)])):c("",!0),a.othersList?(r(),p("div",we,[e[16]||(e[16]=t("small",null,"ORDENAR POR",-1)),n(f,{allowClear:!0,value:l(s).orderby,"onUpdate:value":e[6]||(e[6]=o=>l(s).orderby=o),placeholder:"Filtrador por:","show-search":"",options:a.othersList,"filter-option":z},null,8,["value","options"])])):c("",!0),t("div",be,[t("small",null,_(a.titleSearch),1),n(J,{value:l(s).name,"onUpdate:value":e[7]||(e[7]=o=>l(s).name=o),placeholder:a.placeholderSearch},null,8,["value","placeholder"])]),n(g,{type:"primary",onClick:j},{default:u(()=>[l(O)?(r(),w(l(ne),{key:0})):(r(),p("span",Se,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),n(W,{bordered:"",scroll:{x:I.value,y:x.value},class:"table-pnte",columns:a==null?void 0:a.columns,"data-source":a==null?void 0:a.dataSource,pagination:!1,loading:l(O),size:"small"},{bodyCell:u(({column:o,record:N,index:ae})=>[o.dataIndex=="idx"?(r(),p(E,{key:0},[k(_(M.value(ae)),1)],64)):c("",!0),D(d.$slots,"data-cell",{column:o,record:N}),o.dataIndex=="actions"?(r(),w(Q,{key:1,trigger:["click"]},{overlay:u(()=>[n(X,null,{default:u(()=>[D(d.$slots,"custom-options",{record:N})]),_:2},1024)]),default:u(()=>[t("a",{class:"ant-dropdown-link",onClick:e[8]||(e[8]=se(()=>{},["prevent"]))},[n(g,{shape:"circle",icon:re(l(de)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),t("div",he,[t("span",null,[n(Z,{color:"blue"},{default:u(()=>[t("b",null,_(a==null?void 0:a.total),1)]),_:1}),k(_(a.nameTotal),1)]),n(ee,{size:"small",total:a==null?void 0:a.total,pageSize:a.pageSize,onChange:H,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Ne as _};
