import{r as s,u as U,n as F,b as l,o as r,d as u,e as i,c as t,w as a,F as m,h as S,j as p,t as _,s as h,B as L,i as z,Q,E as j,N as X,m as H}from"./index-47172f5e.js";import{M as J}from"./MoreOutlined-f0be1d21.js";const K=i("h3",null,"ASESORES",-1),W={class:"filters"},Y=["onClick"],Z=i("a",null,"Eliminar",-1),ee={class:"paginator"},oe={__name:"AsesoresLista",setup(te){const g=s("asesor"),v=s(2),x=s([]),d=s(!1),A=s(1e3),y=s(0),w=U(),k=s({page:1}),B=[{title:"Apellidos",dataIndex:"lastName",fixed:"left",width:200},{title:"Nombres",dataIndex:"name",fixed:"left",width:120},{title:"Tipo documento",dataIndex:"document_type",align:"center",width:100},{title:"Num. documento",dataIndex:"number_document",align:"center",width:120},{title:"Departamento",dataIndex:"departamento",align:"center",width:140},{title:"Provincia",dataIndex:"province",align:"center",width:140},{title:"Distrito",dataIndex:"distrite",align:"center",width:140},{title:"Correo",dataIndex:"email",width:180},{title:"Celular",dataIndex:"phone",width:100},{title:"",dataIndex:"actions",align:"center",width:50}],D=e=>{k.value.page=e,f()},M=e=>{const n={rol:g.value,dni:e.number_document,access:v.value};w.push({name:"actualizar-persona",query:n})},R=()=>{const e={rol:g.value,access:v.value};w.push({name:"registrar-persona",query:e})},$=async e=>{try{d.value=!0;const n=await S({url:`person-dni/${e.number_document}/${v.value}`,method:"PUT"});f(),H.success(n.message)}catch(n){console.error("Error de red:",n)}finally{d.value=!1}},f=async()=>{try{d.value=!0;const e=await S({url:`/person/${v.value}`,method:"GET",params:k.value});x.value=e.data,y.value=e.total}catch(e){console.error("Error de red:",e)}finally{d.value=!1}};return F(f),(e,n)=>{const C=l("a-button"),I=l("a-menu-item"),O=l("a-popconfirm"),T=l("a-menu"),V=l("a-dropdown"),q=l("a-table"),G=l("a-pagination");return r(),u(m,null,[i("div",null,[K,i("div",W,[t(C,{type:"primary",onClick:R},{default:a(()=>[p("AGREGAR")]),_:1})]),t(q,{bordered:"",scroll:{x:A.value},class:"ant-table-striped",columns:B,"data-source":x.value,pagination:!1,loading:d.value,size:"small"},{bodyCell:a(({column:c,record:o})=>{var b,E,N;return[c.dataIndex=="lastName"?(r(),u(m,{key:0},[p(_(o.last_name)+" "+_(o.middle_name),1)],64)):h("",!0),c.dataIndex=="departamento"?(r(),u(m,{key:1},[p(_((b=o.department)==null?void 0:b.descripcion),1)],64)):h("",!0),c.dataIndex=="province"?(r(),u(m,{key:2},[p(_((E=o.province)==null?void 0:E.descripcion),1)],64)):h("",!0),c.dataIndex=="distrite"?(r(),u(m,{key:3},[p(_((N=o.district)==null?void 0:N.descripcion),1)],64)):h("",!0),c.dataIndex=="actions"?(r(),L(V,{key:4,trigger:["click"]},{overlay:a(()=>[t(T,null,{default:a(()=>[t(I,null,{default:a(()=>[i("a",{onClick:P=>M(o)},"Editar",8,Y)]),_:2},1024),t(I,null,{default:a(()=>[t(O,{title:"Â¿Eliminar?",onConfirm:P=>$(o)},{icon:a(()=>[t(z(Q),{style:{color:"red"}})]),default:a(()=>[Z]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[i("a",{class:"ant-dropdown-link",onClick:n[0]||(n[0]=j(()=>{},["prevent"]))},[t(C,{shape:"circle",icon:X(z(J)),size:"small"},null,8,["icon"])])]),_:2},1024)):h("",!0)]}),_:1},8,["scroll","data-source","loading"])]),i("div",ee,[t(G,{size:"small",total:y.value,pageSize:20,onChange:D,showSizeChanger:!1},null,8,["total"])])],64)}}};export{oe as default};
