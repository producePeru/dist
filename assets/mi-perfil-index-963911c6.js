import{r as m,a as k,b as t,o as T,d as U,c as e,w as s,e as p,t as d,i as c,j as u,m as V,h as B}from"./index-9c3e0987.js";const E={style:{"max-width":"900px",margin:"0 auto",padding:"24px"}},I={style:{"text-align":"center"}},D={style:{"margin-top":"12px","font-weight":"600"}},L={style:{color:"#888"}},M={style:{"text-align":"right"}},G={__name:"mi-perfil-index",setup(A){const n=JSON.parse(localStorage.getItem("profile"));m(null),m(!1),k({fullName:"",email:"",phone:"",document:"",company:""});const C=m(null),_=m(!1),o=k({currentPassword:"",newPassword:"",confirmPassword:""}),N={currentPassword:[{required:!0,message:"Ingrese su contraseña actual"}],newPassword:[{required:!0,message:"Ingrese una nueva contraseña"},{min:8,message:"Mínimo 8 caracteres"}],confirmPassword:[{required:!0,message:"Confirme la nueva contraseña"},{validator:(l,a)=>a!==o.newPassword?Promise.reject("Las contraseñas no coinciden"):Promise.resolve()}]},z=async()=>{try{_.value=!0;const l={current_password:o.currentPassword,password:o.newPassword,password_confirmation:o.confirmPassword,dni:n.dni},a=await V({url:"users/password-reset",method:"POST",data:l});B.success(a.message),v()}finally{_.value=!1}},v=()=>Object.keys(o).forEach(l=>o[l]="");return(l,a)=>{const R=t("a-page-header"),S=t("a-avatar"),j=t("a-divider"),f=t("a-descriptions-item"),q=t("a-descriptions"),P=t("a-card"),y=t("a-col"),w=t("a-input-password"),g=t("a-form-item"),b=t("a-button"),F=t("a-form"),O=t("a-row");return T(),U("div",E,[e(R,{title:"Perfil del Usuario","sub-title":"Visualiza y actualiza tu información personal",style:{padding:"0","margin-bottom":"16px"}}),e(O,{gutter:16},{default:s(()=>[e(y,{xs:24,md:8},{default:s(()=>[e(P,{bordered:""},{default:s(()=>{var r,x,h;return[p("div",I,[e(S,{size:128,src:"https://img.freepik.com/premium-vector/user-icon-icon_1076610-59410.jpg"}),p("h3",D,d((r=c(n))==null?void 0:r.name)+" "+d((x=c(n))==null?void 0:x.lastname),1),p("p",L,d((h=c(n))==null?void 0:h.email),1),e(j),e(q,{column:1,size:"small"},{default:s(()=>[e(f,{label:"Teléfono"},{default:s(()=>{var i;return[u(d((i=c(n))==null?void 0:i.phone),1)]}),_:1}),e(f,{label:"Documento"},{default:s(()=>{var i;return[u(d((i=c(n))==null?void 0:i.dni),1)]}),_:1}),e(f,{label:"Organización"},{default:s(()=>a[3]||(a[3]=[u("PNTE")])),_:1})]),_:1})])]}),_:1})]),_:1}),e(y,{xs:24,md:16},{default:s(()=>[e(P,{title:"Seguridad - Cambiar contraseña"},{default:s(()=>[e(F,{layout:"vertical",model:o,rules:N,ref_key:"passwordFormRef",ref:C,onFinish:z},{default:s(()=>[e(g,{label:"Contraseña actual",name:"currentPassword"},{default:s(()=>[e(w,{value:o.currentPassword,"onUpdate:value":a[0]||(a[0]=r=>o.currentPassword=r),placeholder:"••••••••"},null,8,["value"])]),_:1}),e(g,{label:"Nueva contraseña",name:"newPassword"},{default:s(()=>[e(w,{value:o.newPassword,"onUpdate:value":a[1]||(a[1]=r=>o.newPassword=r),placeholder:"Mínimo 8 caracteres"},null,8,["value"])]),_:1}),e(g,{label:"Confirmar nueva contraseña",name:"confirmPassword"},{default:s(()=>[e(w,{value:o.confirmPassword,"onUpdate:value":a[2]||(a[2]=r=>o.confirmPassword=r),placeholder:"Repite la nueva contraseña"},null,8,["value"])]),_:1}),p("div",M,[e(b,{onClick:v,style:{"margin-right":"8px"}},{default:s(()=>a[4]||(a[4]=[u("Limpiar")])),_:1}),e(b,{type:"primary","html-type":"submit",loading:_.value},{default:s(()=>a[5]||(a[5]=[u("Actualizar contraseña")])),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}};export{G as default};
