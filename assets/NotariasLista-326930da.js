import{_ as G}from"./TableComponent-3ae0b9fb.js";import{l as $,r as c,a as k,j as M,U as V,a6 as T,o as r,x as F,h as j,L as Z,d as m,c as N,N as R,m as B,b as w,w as D,t as p,y as g,e as J}from"./index-5de0aa66.js";import{d as K}from"./downloadExcel-2f3658bc.js";import{_ as Q}from"./FormComponent-6cd1b026.js";import{u as W}from"./selectes-e5994f0a.js";import"./es-881bf315.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-fb6ee7c2.js";import"./quill.snow-e1196aa4.js";const X={key:1,class:"notary-grid"},Y={__name:"DrawerNotaria.componente",props:["info"],emits:["closeDraw"],setup(L,{emit:P}){$.locale("es");const y=c({name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!1,message:"Escribir el nombre de la notaría",disabled:!1,max:100},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},addressNotary:{type:"iText",label:"DIRECCIÓN",name:"addressNotary",required:!0,message:"Escribir la dirección de la notaría",disabled:!1,max:200},etiqueta1:{type:"iLabel",label:"GASTOS NOTARIALES",name:"etiqueta1"},gasto1:{type:"iMoney",label:"OPCION 1 (HASTA 1 UIT)",name:"gasto1",required:!0,message:"Escribir gastos notariales",disabled:!1,max:20},gasto1Detail:{type:"iText",label:"OPCION 1 DETALLE",name:"gasto1Detail",required:!1,message:"Escribir gastos notariales",disabled:!1,max:20},gasto2:{type:"iMoney",label:"OPCION 2 MONTO",name:"gasto2",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto2Detail:{type:"iText",label:"OPCION 2 DETALLE",name:"gasto2Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},gasto3:{type:"iMoney",label:"OPCION 3 MONTO",name:"gasto3",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto3Detail:{type:"iText",label:"OPCION 2 DETALLE",name:"gasto3Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},gasto4:{type:"iMoney",label:"OPCION 4 MONTO",name:"gasto4",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},gasto4Detail:{type:"iText",label:"OPCION 4 DETALLE",name:"gasto4Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},testimonio:{type:"iMoney",label:"TESTIMONIO",name:"testimonio",required:!1,message:"Escribir testimonio",disabled:!1,max:20},legalization:{type:"iMoney",label:"LEGALIZACION DE BENEFICIARIO FINAL",name:"legalization",required:!1,message:"Escribir tarifa social",disabled:!1,max:20},biometric:{type:"iMoney",label:"BIOMÉTRICO / HUELLA DIGITAL",name:"biometric",required:!1,message:"Escribir biométrico o huella digital",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20},aclaratory:{type:"iMoney",label:"ACLARATORIA",name:"aclaratory",required:!1,message:"Escribir tarifa aclaratoria",disabled:!1,max:20},socio:{type:"iMoney",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"socio",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20},conditions:{type:"iText",label:"CONDICIONES",name:"conditions",required:!1,message:"Escribir monto de condiciones",disabled:!1,max:200},etiqueta2:{type:"iLabel",label:"CONTÁCTO",name:"etiqueta2"},contactName:{type:"iText",label:"NOMBRE DE CONTACTO",name:"contactName",required:!1,message:"Escribir nombre de contacto",disabled:!1,max:100},contactEmail:{type:"iText",label:"CORREO ELECTRÓNICO",name:"contactEmail",required:!1,message:"Escribir correo electrónico",disabled:!1,max:100},contactPhone:{type:"iText",label:"TELEFONO",name:"contactPhone",required:!1,message:"Escribir teléfono de contacto",disabled:!1,max:9},etiqueta3:{type:"iLabel",label:"COSTO DE TARIFAS",name:"etiqueta3"},normalTarifa:{type:"iMoney",label:"TARIFA NORMAL",name:"normalTarifa",required:!1,message:"Escribir tarifa normal",disabled:!1,max:20}}),i=W(),x=P,_=L,f=c(!1),E=c("GUARDAR"),a=k({}),h=c(!1),o=c(null),u=c({id_pnte:[],city_id:[],province_id:[],district_id:[]}),d=async e=>{e=="city_id"&&(console.log("city_id kakakaka"),await i.fetchProvinces(a.city_id),u.value.province_id=i.provinces,y.value.province_id.disabled=!1),e=="province_id"&&(await i.fetchDistricts(a.province_id),u.value.district_id=i.districts,y.value.district_id.disabled=!1)},A=async e=>{e=="city_id"&&(await i.fetchCities(),a.city_id=null,a.province_id=null,a.district_id=null,u.value.province_id=[],u.value.city_id=i.cities),e=="province_id"&&(a.province_id=null,a.district_id=null,u.value.district_id=[])},C=async()=>{h.value=!0;const e={name:a.name,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,addressNotary:a.addressNotary,gasto1:a.gasto1,gasto1Detail:a.gasto1Detail,gasto2:a.gasto2,gasto2Detail:a.gasto2Detail,gasto3:a.gasto3,gasto3Detail:a.gasto3Detail,gasto4:a.gasto4,gasto4Detail:a.gasto4Detail,testimonio:a.testimonio,legalization:a.legalization,biometric:a.biometric,aclaratory:a.aclaratory,socio:a.socio,conditions:a.conditions,contactName:a.contactName,contactEmail:a.contactEmail,contactPhone:a.contactPhone,normalTarifa:a.normalTarifa,status:1};try{const O=_.info?`notary/update/${_.info.id}`:"notary/create",b=_.info?"PATCH":"POST",I=await R({url:O,method:b,data:e});I.status===200&&(v(),B.success(I.message),x("closeDraw",!0))}catch(O){console.error("Error:",O);const b=document.getElementsByClassName("ant-drawer-body")[0];b&&(b.scrollTop=0)}finally{h.value=!1}},v=()=>{a.name=null,a.city_id=null,a.province_id=null,a.district_id=null,a.addressNotary=null,a.gasto1=null,a.gasto2=null,a.gasto2Detail=null,a.gasto3=null,a.gasto3Detail=null,a.gasto4=null,a.gasto4Detail=null,a.testimonio=null,a.legalization=null,a.biometric=null,a.aclaratory=null,a.socio=null,a.conditions=null,a.contactName=null,a.contactEmail=null,a.contactPhone=null,a.normalTarifa=null},S=async e=>{f.value=!0;try{e&&(a.name=e.name,a.addressNotary=e.addressNotary,a.gasto1=e.gasto1,a.gasto1Detail=e.gasto1Detail,a.gasto2=e.gasto2,a.gasto2Detail=e.gasto2Detail,a.gasto3=e.gasto3,a.gasto3Detail=e.gasto3Detail,a.gasto4=e.gasto4,a.gasto4Detail=e.gasto4Detail,a.testimonio=e.testimonio,a.legalization=e.legalization,a.biometric=e.biometric,a.aclaratory=e.aclaratory,a.socio=e.socio,a.conditions=e.conditions,a.contactName=e.contactName,a.contactEmail=e.contactEmail,a.contactPhone=e.contactPhone,a.normalTarifa=e.normalTarifa,await i.fetchCities(),u.value.city_id=i.cities,a.city_id=e.city_id,await i.fetchProvinces(a.city_id),u.value.province_id=i.provinces,y.value.province_id.disabled=!1,a.province_id=e.province_id,await i.fetchDistricts(a.province_id),u.value.district_id=i.districts,y.value.district_id.disabled=!1,a.district_id=e.district_id)}finally{f.value=!1}};return M(()=>{_.info&&S(_.info)}),V(()=>_.info,e=>{e?S(e):v()}),T("formState",a),T("loadingState",h),(e,O)=>f.value?(r(),F(j(Z),{key:0,style:{color:"#00a6db"}})):(r(),m("div",X,[N(Q,{fields:y.value,options:u.value,btnSaveName:E.value,mayus:!0,resetSelect:o.value,onHandleChangeSelect:d,onHandleFocusSelect:A,onOnSubmit:C},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const aa={class:"advisory-table"},ea={key:0},ta={key:1},ia={key:2},sa={key:3},oa={key:4},la={key:5},na={key:6},ra={key:7},ca={key:8},da={key:9},ma=["onClick"],ba={__name:"NotariasLista",setup(L){const y=(JSON.parse(localStorage.getItem("role"))||[]).some(t=>t.id===10||t.id===5||t.id===1),i=c([]),x=c(0),_=c(150),f=c(!1),E=c(!1),a=c(!1),h=c(null),o=k({asesor:null,name:null,page:1}),u=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"NOMBRE DE LA NOTARÍA",dataIndex:"name",width:240,fixed:"left"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"PROVINCIA",dataIndex:"province_name",width:120},{title:"DISTRITO",dataIndex:"district_name",width:120},{title:"DIRECCIÓN",dataIndex:"addressNotary",width:180},{title:"GASTOS NOTARIALES",children:[{title:"TARIFA SOCIAL",children:[{title:"OPCION 1 (HASTA 1 UIT)",colSpan:2,children:[{dataIndex:"gasto1",width:100,colSpan:0,align:"center"},{dataIndex:"gasto1Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 2",colSpan:2,children:[{dataIndex:"gasto2",width:100,colSpan:0,align:"center"},{dataIndex:"gasto2Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 3",colSpan:2,children:[{dataIndex:"gasto3",width:100,colSpan:0,align:"center"},{dataIndex:"gasto3Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 4",colSpan:2,children:[{dataIndex:"gasto4",width:100,colSpan:0,align:"center"},{dataIndex:"gasto4Detail",width:120,colSpan:0,align:"center"}]}]},{title:"TESTIMONIO",width:150,align:"center",dataIndex:"testimonio"},{title:"LEGALIZACION DE BENEFICIARIO FINAL",width:150,align:"center",dataIndex:"legalization"},{title:"BIOMÉTRICO / HUELLA DIGITAL",width:150,align:"center",dataIndex:"biometric"},{title:"ACLARATORIA",width:150,align:"center",dataIndex:"aclaratory"},{title:"SOCIO O INTERVINIENTE ADICIONAL",width:150,align:"center",dataIndex:"socio"}]},{title:"CONDICIONES",dataIndex:"conditions",width:280},{title:"NOMBRE DE CONTACTO",dataIndex:"contactName",width:200},{title:"CORREO",dataIndex:"contactEmail",width:180},{title:"TELEFONO",dataIndex:"contactPhone",width:100,align:"center"},{title:"TARIFA NORMAL",dataIndex:"normalTarifa",align:"center",width:100},...y?[{title:"DISPONIBLE",dataIndex:"status",width:100,align:"center"}]:[],...y?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],d=t=>{const l=parseFloat(t);return isNaN(l)?"":`S/ ${l.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}`},A=()=>{a.value=!1,I()},C=()=>{a.value=!0},v=async()=>{E.value=!0;try{const t={};o.name&&(t.name=o.name),o.city_id&&(t.city_id=o.city_id),await K("download/notaries","notarias-pnte",t)}catch(t){console.error("Error de red:",t)}finally{E.value=!1}},S=async t=>{o.page=t,await I()},e=async t=>{t&&(o.page=1,await I())},O=t=>{h.value=t,a.value=!0},b=async t=>{try{const l=await R({url:`notary/status/${t}`,method:"PUT"});l.status==200&&(I(),B.success(l.message))}catch(l){console.error("Error de red:",l)}},I=async()=>{f.value=!0;try{const t={page:o.page};o.name&&(t.name=o.name),o.city_id&&(t.city_id=o.city_id);const l=await R({url:"notary/list",method:"GET",params:t});i.value=l.data.data,x.value=l.data.total,_.value=l.data.per_page}catch(t){console.error("Error de red:",t)}finally{f.value=!1}};return M(async()=>{await I()}),T("search",o),T("loading",f),T("loadingFile",E),(t,l)=>{const U=w("a-switch"),z=w("a-menu-item"),H=w("a-drawer");return r(),m("div",aa,[N(G,{title:"NOTARÍAS",new:!0,textNuevo:"NUEVO",placeholderSearch:"Buscar",columns:u,titleSearch:"NOMBRE DE NOTARÍA",pageSize:_.value,nameTotal:"Notarías",cityList:!0,dataSource:i.value,total:x.value,onHandleNew:C,heightTable:350,onHandleDownloadExcel:v,onHandleSearch:e,onHandlePaginator:S},{"data-cell":D(({column:s,record:n})=>[s.dataIndex=="gasto1"?(r(),m("span",ea,p(d(n.gasto1)),1)):g("",!0),s.dataIndex=="gasto2"?(r(),m("span",ta,p(d(n.gasto2)),1)):g("",!0),s.dataIndex=="gasto3"?(r(),m("span",ia,p(d(n.gasto3)),1)):g("",!0),s.dataIndex=="gasto4"?(r(),m("span",sa,p(d(n.gasto4)),1)):g("",!0),s.dataIndex=="testimonio"?(r(),m("span",oa,p(d(n.testimonio)),1)):g("",!0),s.dataIndex=="legalization"?(r(),m("span",la,p(d(n.legalization)),1)):g("",!0),s.dataIndex=="biometric"?(r(),m("span",na,p(d(n.biometric)),1)):g("",!0),s.dataIndex=="aclaratory"?(r(),m("span",ra,p(d(n.aclaratory)),1)):g("",!0),s.dataIndex=="socio"?(r(),m("span",ca,p(d(n.socio)),1)):g("",!0),s.dataIndex=="normalTarifa"?(r(),m("span",da,p(d(n.normalTarifa)),1)):g("",!0),s.dataIndex=="status"?(r(),F(U,{key:10,checked:n.status,"onUpdate:checked":q=>n.status=q,onChange:q=>b(n.id)},null,8,["checked","onUpdate:checked","onChange"])):g("",!0)]),"custom-options":D(({record:s})=>[N(z,null,{default:D(()=>[J("a",{onClick:n=>O(s)},"Editar",8,ma)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),N(H,{width:"900",title:"EDITAR NOTARÍA",open:a.value,"onUpdate:open":l[0]||(l[0]=s=>a.value=s),placement:"right"},{default:D(()=>[N(Y,{onCloseDraw:A,info:h.value},null,8,["info"])]),_:1},8,["open"])])}}};export{ba as default};
