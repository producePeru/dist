import{_ as H}from"./TableComponent-7d327c5c.js";import{l as G,r as c,a as q,j as M,U as $,a6 as x,o as r,x as B,h as j,L as Z,d as m,c as N,N as R,m as F,b as w,w as D,t as p,y as g,e as J}from"./index-990216a9.js";import{d as K}from"./downloadExcel-832d0659.js";import{_ as Q}from"./FormComponent-48c81835.js";import{u as W}from"./selectes-65b6c542.js";import"./es-4911415a.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-cdb62a6b.js";import"./quill.snow-ba96b9f6.js";const X={key:1,class:"notary-grid"},Y={__name:"DrawerNotaria.componente",props:["info"],emits:["closeDraw"],setup(L,{emit:k}){G.locale("es");const y=c({name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!1,message:"Escribir el nombre de la notaría",disabled:!1,max:100},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},addressNotary:{type:"iText",label:"DIRECCIÓN",name:"addressNotary",required:!0,message:"Escribir la dirección de la notaría",disabled:!1,max:200},etiqueta1:{type:"iLabel",label:"GASTOS NOTARIALES",name:"etiqueta1"},gasto1:{type:"iMoney",label:"OPCION 1 MONTO",name:"gasto1",required:!0,message:"Escribir gastos notariales",disabled:!1,max:20,minValue:0},gasto1Detail:{type:"iText",label:"OPCION 1 DETALLE",name:"gasto1Detail",required:!1,message:"Escribir gastos notariales",disabled:!1,max:20},gasto2:{type:"iMoney",label:"OPCION 2 MONTO",name:"gasto2",required:!1,message:"Escribir tarifa social",disabled:!1,max:20,minValue:0},gasto2Detail:{type:"iText",label:"OPCION 2 DETALLE",name:"gasto2Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},blank1:{type:"iBlanket",label:"",name:"blank1"},gasto3:{type:"iMoney",label:"OPCION 3 MONTO",name:"gasto3",required:!1,message:"Escribir tarifa social",disabled:!1,max:20,minValue:0},gasto3Detail:{type:"iText",label:"OPCION 3 DETALLE",name:"gasto3Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},gasto4:{type:"iMoney",label:"OPCION 4 MONTO",name:"gasto4",required:!1,message:"Escribir tarifa social",disabled:!1,max:20,minValue:0},gasto4Detail:{type:"iText",label:"OPCION 4 DETALLE",name:"gasto4Detail",required:!1,message:"Escribir tarifa social",disabled:!1,max:50},blank2:{type:"iBlanket",label:"",name:"blank2"},testimonio:{type:"iMoney",label:"TESTIMONIO",name:"testimonio",required:!1,message:"Escribir testimonio",disabled:!1,max:20,minValue:0},legalization:{type:"iMoney",label:"LEGALIZACION DE BENEFICIARIO FINAL",name:"legalization",required:!1,message:"Escribir tarifa social",disabled:!1,max:20,minValue:0},biometric:{type:"iMoney",label:"BIOMÉTRICO / HUELLA DIGITAL",name:"biometric",required:!1,message:"Escribir biométrico o huella digital",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20,minValue:0},aclaratory:{type:"iMoney",label:"ACLARATORIA",name:"aclaratory",required:!1,message:"Escribir tarifa aclaratoria",disabled:!1,max:20,minValue:0},socio:{type:"iMoney",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"socio",required:!1,message:"Escribir tarifa social",disabled:!1,placeholder:"Ejemplo: Hasta 3 UIT",max:20,minValue:0},conditions:{type:"iText",label:"CONDICIONES",name:"conditions",required:!1,message:"Escribir monto de condiciones",disabled:!1,max:200},etiqueta2:{type:"iLabel",label:"CONTÁCTO",name:"etiqueta2"},contactName:{type:"iText",label:"NOMBRE DE CONTACTO",name:"contactName",required:!1,message:"Escribir nombre de contacto",disabled:!1,max:100},contactEmail:{type:"iText",label:"CORREO ELECTRÓNICO",name:"contactEmail",required:!1,message:"Escribir correo electrónico",disabled:!1,max:100},contactPhone:{type:"iText",label:"TELEFONO",name:"contactPhone",required:!1,message:"Escribir teléfono de contacto",disabled:!1,max:9},etiqueta3:{type:"iLabel",label:"COSTO DE TARIFAS",name:"etiqueta3"},normalTarifa:{type:"iMoney",label:"TARIFA NORMAL",name:"normalTarifa",required:!1,message:"Escribir tarifa normal",disabled:!1,max:20,minValue:0}}),i=W(),T=k,_=L,f=c(!1),E=c("GUARDAR"),a=q({}),h=c(!1),l=c(null),u=c({id_pnte:[],city_id:[],province_id:[],district_id:[]}),d=async e=>{e=="city_id"&&(console.log("city_id kakakaka"),await i.fetchProvinces(a.city_id),u.value.province_id=i.provinces,y.value.province_id.disabled=!1),e=="province_id"&&(await i.fetchDistricts(a.province_id),u.value.district_id=i.districts,y.value.district_id.disabled=!1)},A=async e=>{e=="city_id"&&(await i.fetchCities(),a.city_id=null,a.province_id=null,a.district_id=null,u.value.province_id=[],u.value.city_id=i.cities),e=="province_id"&&(a.province_id=null,a.district_id=null,u.value.district_id=[])},C=async()=>{h.value=!0;const e={name:a.name,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,addressNotary:a.addressNotary,gasto1:a.gasto1,gasto1Detail:a.gasto1Detail,gasto2:a.gasto2,gasto2Detail:a.gasto2Detail,gasto3:a.gasto3,gasto3Detail:a.gasto3Detail,gasto4:a.gasto4,gasto4Detail:a.gasto4Detail,testimonio:a.testimonio,legalization:a.legalization,biometric:a.biometric,aclaratory:a.aclaratory,socio:a.socio,conditions:a.conditions,contactName:a.contactName,contactEmail:a.contactEmail,contactPhone:a.contactPhone,normalTarifa:a.normalTarifa,status:1};try{const b=_.info?`notary/update/${_.info.id}`:"notary/create",O=_.info?"PATCH":"POST",I=await R({url:b,method:O,data:e});I.status===200&&(v(),F.success(I.message),T("closeDraw",!0))}catch(b){console.error("Error:",b);const O=document.getElementsByClassName("ant-drawer-body")[0];O&&(O.scrollTop=0)}finally{h.value=!1}},v=()=>{a.name=null,a.city_id=null,a.province_id=null,a.district_id=null,a.addressNotary=null,a.gasto1=null,a.gasto2=null,a.gasto2Detail=null,a.gasto3=null,a.gasto3Detail=null,a.gasto4=null,a.gasto4Detail=null,a.testimonio=null,a.legalization=null,a.biometric=null,a.aclaratory=null,a.socio=null,a.conditions=null,a.contactName=null,a.contactEmail=null,a.contactPhone=null,a.normalTarifa=null},S=async e=>{f.value=!0;try{e&&(a.name=e.name,a.addressNotary=e.addressNotary,a.gasto1=e.gasto1,a.gasto1Detail=e.gasto1Detail,a.gasto2=e.gasto2,a.gasto2Detail=e.gasto2Detail,a.gasto3=e.gasto3,a.gasto3Detail=e.gasto3Detail,a.gasto4=e.gasto4,a.gasto4Detail=e.gasto4Detail,a.testimonio=e.testimonio,a.legalization=e.legalization,a.biometric=e.biometric,a.aclaratory=e.aclaratory,a.socio=e.socio,a.conditions=e.conditions,a.contactName=e.contactName,a.contactEmail=e.contactEmail,a.contactPhone=e.contactPhone,a.normalTarifa=e.normalTarifa,await i.fetchCities(),u.value.city_id=i.cities,a.city_id=e.city_id,await i.fetchProvinces(a.city_id),u.value.province_id=i.provinces,y.value.province_id.disabled=!1,a.province_id=e.province_id,await i.fetchDistricts(a.province_id),u.value.district_id=i.districts,y.value.district_id.disabled=!1,a.district_id=e.district_id)}finally{f.value=!1}};return M(()=>{_.info&&S(_.info)}),$(()=>_.info,e=>{e?S(e):v()}),x("formState",a),x("loadingState",h),(e,b)=>f.value?(r(),B(j(Z),{key:0,style:{color:"#00a6db"}})):(r(),m("div",X,[N(Q,{fields:y.value,options:u.value,btnSaveName:E.value,mayus:!0,resetSelect:l.value,onHandleChangeSelect:d,onHandleFocusSelect:A,onOnSubmit:C},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const aa={class:"advisory-table"},ea={key:0},ta={key:1},ia={key:2},sa={key:3},la={key:4},oa={key:5},na={key:6},ra={key:7},ca={key:8},da={key:9},ma=["onClick"],Oa={__name:"NotariasLista",setup(L){const y=(JSON.parse(localStorage.getItem("role"))||[]).some(t=>t.id===10||t.id===5||t.id===1),i=c([]),T=c(0),_=c(150),f=c(!1),E=c(!1),a=c(!1),h=c(null),l=q({asesor:null,name:null,page:1}),u=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"NOMBRE DE LA NOTARÍA",dataIndex:"name",width:240,fixed:"left"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"PROVINCIA",dataIndex:"province_name",width:120},{title:"DISTRITO",dataIndex:"district_name",width:120},{title:"DIRECCIÓN",dataIndex:"addressNotary",width:180},{title:"GASTOS NOTARIALES",children:[{title:"TARIFA SOCIAL",children:[{title:"OPCION 1 (HASTA 1 UIT)",colSpan:2,children:[{dataIndex:"gasto1",width:100,colSpan:0,align:"center"},{dataIndex:"gasto1Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 2",colSpan:2,children:[{dataIndex:"gasto2",width:100,colSpan:0,align:"center"},{dataIndex:"gasto2Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 3",colSpan:2,children:[{dataIndex:"gasto3",width:100,colSpan:0,align:"center"},{dataIndex:"gasto3Detail",width:120,colSpan:0,align:"center"}]},{title:"OPCION 4",colSpan:2,children:[{dataIndex:"gasto4",width:100,colSpan:0,align:"center"},{dataIndex:"gasto4Detail",width:120,colSpan:0,align:"center"}]}]},{title:"TESTIMONIO",width:150,align:"center",dataIndex:"testimonio"},{title:"LEGALIZACION DE BENEFICIARIO FINAL",width:150,align:"center",dataIndex:"legalization"},{title:"BIOMÉTRICO / HUELLA DIGITAL",width:150,align:"center",dataIndex:"biometric"},{title:"ACLARATORIA",width:150,align:"center",dataIndex:"aclaratory"},{title:"SOCIO O INTERVINIENTE ADICIONAL",width:150,align:"center",dataIndex:"socio"}]},{title:"CONDICIONES",dataIndex:"conditions",width:280},{title:"NOMBRE DE CONTACTO",dataIndex:"contactName",width:200},{title:"CORREO",dataIndex:"contactEmail",width:180},{title:"TELEFONO",dataIndex:"contactPhone",width:100,align:"center"},{title:"TARIFA NORMAL",dataIndex:"normalTarifa",align:"center",width:100},...y?[{title:"DISPONIBLE",dataIndex:"status",width:100,align:"center"}]:[],...y?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],d=t=>{const o=parseFloat(t);return isNaN(o)?"":`S/ ${o.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}`},A=()=>{a.value=!1,I()},C=()=>{a.value=!0},v=async()=>{E.value=!0;try{const t={};l.name&&(t.name=l.name),l.city_id&&(t.city_id=l.city_id),await K("download/notaries","notarias-pnte",t)}catch(t){console.error("Error de red:",t)}finally{E.value=!1}},S=async t=>{l.page=t,await I()},e=async t=>{t&&(l.page=1,await I())},b=t=>{h.value=t,a.value=!0},O=async t=>{try{const o=await R({url:`notary/status/${t}`,method:"PUT"});o.status==200&&(I(),F.success(o.message))}catch(o){console.error("Error de red:",o)}},I=async()=>{f.value=!0;try{const t={page:l.page};l.name&&(t.name=l.name),l.city_id&&(t.city_id=l.city_id);const o=await R({url:"notary/list",method:"GET",params:t});i.value=o.data.data,T.value=o.data.total,_.value=o.data.per_page}catch(t){console.error("Error de red:",t)}finally{f.value=!1}};return M(async()=>{await I()}),x("search",l),x("loading",f),x("loadingFile",E),(t,o)=>{const V=w("a-switch"),z=w("a-menu-item"),U=w("a-drawer");return r(),m("div",aa,[N(H,{title:"NOTARÍAS",new:!0,textNuevo:"NUEVO",placeholderSearch:"Buscar",columns:u,titleSearch:"NOMBRE DE NOTARÍA",pageSize:_.value,nameTotal:"Notarías",cityList:!0,dataSource:i.value,total:T.value,onHandleNew:C,heightTable:350,onHandleDownloadExcel:v,onHandleSearch:e,onHandlePaginator:S},{"data-cell":D(({column:s,record:n})=>[s.dataIndex=="gasto1"?(r(),m("span",ea,p(d(n.gasto1)),1)):g("",!0),s.dataIndex=="gasto2"?(r(),m("span",ta,p(d(n.gasto2)),1)):g("",!0),s.dataIndex=="gasto3"?(r(),m("span",ia,p(d(n.gasto3)),1)):g("",!0),s.dataIndex=="gasto4"?(r(),m("span",sa,p(d(n.gasto4)),1)):g("",!0),s.dataIndex=="testimonio"?(r(),m("span",la,p(d(n.testimonio)),1)):g("",!0),s.dataIndex=="legalization"?(r(),m("span",oa,p(d(n.legalization)),1)):g("",!0),s.dataIndex=="biometric"?(r(),m("span",na,p(d(n.biometric)),1)):g("",!0),s.dataIndex=="aclaratory"?(r(),m("span",ra,p(d(n.aclaratory)),1)):g("",!0),s.dataIndex=="socio"?(r(),m("span",ca,p(d(n.socio)),1)):g("",!0),s.dataIndex=="normalTarifa"?(r(),m("span",da,p(d(n.normalTarifa)),1)):g("",!0),s.dataIndex=="status"?(r(),B(V,{key:10,checked:n.status,"onUpdate:checked":P=>n.status=P,onChange:P=>O(n.id)},null,8,["checked","onUpdate:checked","onChange"])):g("",!0)]),"custom-options":D(({record:s})=>[N(z,null,{default:D(()=>[J("a",{onClick:n=>b(s)},"Editar",8,ma)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),N(U,{width:"900",title:"EDITAR NOTARÍA",open:a.value,"onUpdate:open":o[0]||(o[0]=s=>a.value=s),placement:"right"},{default:D(()=>[N(Y,{onCloseDraw:A,info:h.value},null,8,["info"])]),_:1},8,["open"])])}}};export{Oa as default};
