import{r,a as ne,H as oe,v as le,k as se,b as c,o as l,d as u,e as _,c as i,w as s,F as m,y as z,i as p,t as o,s as d,q as x,h as P,Q as ie,I as de,M as re,p as ce,j as ue,X as pe,m as me}from"./index-785b6043.js";import{S as _e}from"./DrawerSolicitante.componente-d5056334.js";import{u as ge}from"./selectes-232e0630.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";import{M as ve}from"./MoreOutlined-47cce9ea.js";import"./es-83000981.js";const y=f=>(ce("data-v-98e63cf5"),f=f(),ue(),f),he=y(()=>_("h3",{class:"title-produce"},"SOLICITANTES",-1)),Ie=y(()=>_("br",null,null,-1)),we={key:8,class:"uppercase"},xe=["onClick"],ye=y(()=>_("a",null,"Eliminar",-1)),Se={class:"paginator"},V=20,Ce={__name:"SolicitantesLista",setup(f){JSON.parse(localStorage.getItem("profile")),ge();const S=r(window.innerHeight-100),B=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",width:120},{title:"NOMBRES",dataIndex:"name",width:170},{title:"APELLIDOS",dataIndex:"apellidos",width:170},{title:"REGIÓN",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:200},{title:"GÉNERO",dataIndex:"gender",align:"center",width:90},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:200},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}];ne({user:"",password:""});const C=r(0),g=r({page:0}),U=r(1200),k=r([]),I=r(!1),v=r(!1),E=r(null);r(null);const G=t=>({DNI:"blue",CE:"yellow",PAS:"red",PTP:"purple"})[t],H=t=>{g.value.page=t,h()},w=()=>{S.value=window.innerHeight-280},$=t=>{console.log("open",t)},q=()=>{h(),v.value=!1},F=async t=>{try{const a=await z({url:`person/delete/${t.id}`,method:"DELETE"});a.status==500?pe.warning({title:"Aviso",content:a.message}):(h(),me.success(a.message))}catch(a){console.error("Error de red:",a)}},Q=t=>{E.value=t,v.value=!0},X=oe(()=>t=>((g.value.page==0?1:g.value.page)-1)*V+t+1),h=async()=>{try{I.value=!0;let t=g.value.page==0?"":g.value;const a=await z({url:"person/list",method:"GET",params:t});k.value=a.data,C.value=a.total}catch(t){console.error("Error de red:",t)}finally{I.value=!1}};return le(()=>{window.removeEventListener("resize",w)}),se(()=>{window.addEventListener("resize",w),w(),h()}),(t,a)=>{const O=c("a-tag"),j=c("a-button"),b=c("a-menu-item"),J=c("a-popconfirm"),Y=c("a-menu"),K=c("a-dropdown"),W=c("a-table"),Z=c("a-pagination"),ee=c("a-drawer");return l(),u(m,null,[_("div",null,[he,Ie,i(W,{bordered:"",scroll:{x:U.value,y:S.value},class:"ant-table-striped",columns:B,"data-source":k.value,pagination:!1,loading:I.value,size:"small","row-class-name":(n,e)=>e%2===1?"table-striped":null},{bodyCell:s(({column:n,record:e,index:te})=>{var D,N,A,L,T,M,R;return[n.dataIndex=="idx"?(l(),u(m,{key:0},[p(o(X.value(te)),1)],64)):d("",!0),n.dataIndex=="tdocument"?(l(),x(O,{key:1,color:G(e.typedocument.avr)},{default:s(()=>[p(o(e.typedocument.avr),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="apellidos"?(l(),u(m,{key:2},[p(o(e.lastname)+" "+o(e.middlename),1)],64)):d("",!0),n.dataIndex=="city"?(l(),u(m,{key:3},[p(o((D=e.city)==null?void 0:D.name),1)],64)):d("",!0),n.dataIndex=="province"?(l(),u(m,{key:4},[p(o((N=e.province)==null?void 0:N.name),1)],64)):d("",!0),n.dataIndex=="district"?(l(),u(m,{key:5},[p(o((A=e.district)==null?void 0:A.name),1)],64)):d("",!0),n.dataIndex=="gender"?(l(),u(m,{key:6},[p(o((L=e.gender)==null?void 0:L.name),1)],64)):d("",!0),n.dataIndex=="sickx"?(l(),x(O,{key:7,color:e.sick=="no"?"blue":"pink"},{default:s(()=>[p(o(e.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),n.dataIndex=="registerby"?(l(),u("span",we,o((T=e.user[0])==null?void 0:T.profile.name)+" "+o((M=e.user[0])==null?void 0:M.profile.lastname)+" "+o((R=e.user[0])==null?void 0:R.profile.middlename),1)):d("",!0),n.dataIndex=="actions"?(l(),x(K,{key:9,trigger:["click"]},{overlay:s(()=>[i(Y,null,{default:s(()=>[i(b,null,{default:s(()=>[_("a",{onClick:ae=>Q(e)},"Editar",8,xe)]),_:2},1024),i(b,null,{default:s(()=>[i(J,{title:"¿Seguro de eliminar?",onConfirm:ae=>F(e)},{icon:s(()=>[i(P(ie),{style:{color:"red"}})]),default:s(()=>[ye]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[_("a",{class:"ant-dropdown-link",onClick:a[0]||(a[0]=de(()=>{},["prevent"]))},[i(j,{shape:"circle",icon:re(P(ve)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading","row-class-name"])]),_("div",Se,[i(Z,{size:"small",total:C.value,pageSize:V,onChange:H,showSizeChanger:!1},null,8,["total"])]),i(ee,{width:"600",open:v.value,"onUpdate:open":a[1]||(a[1]=n=>v.value=n),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:$},{default:s(()=>[i(_e,{onCloseDraw:q,updateValues:E.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},Ae=fe(Ce,[["__scopeId","data-v-98e63cf5"]]);export{Ae as default};
