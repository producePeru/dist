import{l as p,aa as S,r as v,E as ee,X as ae,j as le,b as s,o as i,d as m,e as t,t as g,c as o,w as d,x as y,i as k,q as u,h as l,L as te,F as N,ab as D,J as oe,p as ne}from"./index-78dbf2c8.js";import{_ as se}from"./icoexcel-1b303edf.js";import"./es-dbca09a1.js";import{M as re}from"./MoreOutlined-14e99f1d.js";const ie={class:"table-component"},de={class:"title-produce"},ce={class:"table-filters"},ue={key:0,class:"filter-type"},pe={key:1,class:"filter-year"},me={key:2,class:"filter-range-date"},_e={key:3,class:"filter-asesor"},ge={class:"filter-search"},ve={key:1},he={class:"paginator"},ye="DD/MM/YYYY",ke={__name:"TableComponent",props:["title","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","tipoformalizacion","searchYear","rangeDate"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(F,{emit:U}){p.locale("es");const e=F,h=U,E=JSON.parse(localStorage.getItem("role"))||[],c=S("search"),x=S("loading"),O=S("loadingFile"),z=v(window.innerHeight-100),f=v({page:1}),P=v(1200),Y=v([{label:"Últimos 7 días",value:[p().add(-7,"d"),p()]},{label:"Últimos 14 días",value:[p().add(-14,"d"),p()]},{label:"Último mes",value:[p().add(-30,"d"),p()]}]),A=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),B=r=>E.some(a=>r.includes(a.id)),I=ee(()=>r=>(f.value.page-1)*e.pageSize+r+1),M=()=>{h("handleNew")},R=async()=>{h("handleDownloadExcel")},T=()=>{f.value.page=1,h("handleSearch",!0)},V=r=>{f.value.page=r,h("handlePaginator",r)},w=()=>{z.value=window.innerHeight-310},j=(r,a)=>{const _=r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(_)};return ae(()=>{window.removeEventListener("resize",w)}),le(()=>{window.addEventListener("resize",w),w()}),(r,a)=>{const _=s("a-button"),b=s("a-col"),C=s("a-select"),H=s("a-date-picker"),J=s("a-range-picker"),X=s("a-input"),$=s("a-row"),q=s("a-menu"),G=s("a-dropdown"),K=s("a-table"),Q=s("a-tag"),W=s("a-pagination");return i(),m(N,null,[t("div",ie,[t("h3",de,g(e.title),1),o($,{style:{margin:"1rem 0"}},{default:d(()=>[o(b,{xs:24,md:5},{default:d(()=>[e.new?(i(),y(_,{key:0,type:"primary",onClick:M,style:{"margin-right":".6rem"}},{default:d(()=>[k(g(e.textNuevo),1)]),_:1})):u("",!0),o(_,{class:"btn-excel",onClick:R,loading:l(O),type:"primary"},{default:d(()=>a[6]||(a[6]=[t("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:se},null,-1)])),_:1},8,["loading"])]),_:1}),o(b,{xs:24,md:19},{default:d(()=>[t("div",ce,[e.tipoformalizacion?(i(),m("div",ue,[a[7]||(a[7]=t("small",null,"TIPO",-1)),o(C,{value:l(c).type,"onUpdate:value":a[0]||(a[0]=n=>l(c).type=n),options:A.value},null,8,["value","options"])])):u("",!0),e.searchYear?(i(),m("div",pe,[a[8]||(a[8]=t("small",null,"AÑO",-1)),o(H,{allowClear:!1,value:l(c).year,"onUpdate:value":a[1]||(a[1]=n=>l(c).year=n),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):u("",!0),e.rangeDate?(i(),m("div",me,[a[9]||(a[9]=t("small",null,"Por rango de fechas",-1)),o(J,{value:l(c).range,"onUpdate:value":a[2]||(a[2]=n=>l(c).range=n),presets:Y.value,format:ye},null,8,["value","presets"])])):u("",!0),B([1,5])&&e.asesoresList?(i(),m("div",_e,[a[10]||(a[10]=t("small",null,"Por asesor",-1)),e.asesoresList?(i(),y(C,{key:0,allowClear:!0,value:l(c).asesor,"onUpdate:value":a[3]||(a[3]=n=>l(c).asesor=n),placeholder:"Selecciona Asesor","show-search":"",options:e.asesoresList,"filter-option":j},null,8,["value","options"])):u("",!0)])):u("",!0),t("div",ge,[t("small",null,g(e.titleSearch),1),o(X,{value:l(c).name,"onUpdate:value":a[4]||(a[4]=n=>l(c).name=n),placeholder:e.placeholderSearch},null,8,["value","placeholder"])]),o(_,{type:"primary",onClick:T},{default:d(()=>[l(x)?(i(),y(l(te),{key:0})):(i(),m("span",ve,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),o(K,{bordered:"",scroll:{x:P.value,y:z.value},class:"table-pnte",columns:e==null?void 0:e.columns,"data-source":e==null?void 0:e.dataSource,pagination:!1,loading:l(x),size:"small"},{bodyCell:d(({column:n,record:L,index:Z})=>[n.dataIndex=="idx"?(i(),m(N,{key:0},[k(g(I.value(Z)),1)],64)):u("",!0),D(r.$slots,"data-cell",{column:n,record:L}),n.dataIndex=="actions"?(i(),y(G,{key:1,trigger:["click"]},{overlay:d(()=>[o(q,null,{default:d(()=>[D(r.$slots,"custom-options",{record:L})]),_:2},1024)]),default:d(()=>[t("a",{class:"ant-dropdown-link",onClick:a[5]||(a[5]=oe(()=>{},["prevent"]))},[o(_,{shape:"circle",icon:ne(l(re)),size:"small"},null,8,["icon"])])]),_:2},1024)):u("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),t("div",he,[t("span",null,[o(Q,{color:"blue"},{default:d(()=>[t("b",null,g(e==null?void 0:e.total),1)]),_:1}),k(g(e.nameTotal),1)]),o(W,{size:"small",total:e==null?void 0:e.total,pageSize:e.pageSize,onChange:V,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{ke as _};
