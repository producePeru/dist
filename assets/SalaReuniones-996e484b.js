import{E as y,r as i,a as le,U as se,x as re,j as ie,b as o,o as u,d as g,e as c,c as t,w as n,i as d,F as f,N as z,v as H,q as p,I as O,h as k,S as de,t as v,a0 as ue,K as ce,m as me}from"./index-82784c73.js";import{_ as pe}from"./DrawEventosCalendario-7bc7adf1.js";import"./es-291f921f.js";import{M as _e}from"./MoreOutlined-2fa1ab6a.js";const ge={class:"paginator"},Ee={__name:"SalaReuniones",setup(fe){y.locale("es");const F=JSON.parse(localStorage.getItem("role"))||[],w=i(!1),E=i(null),I=i(0),C=i(50),h=i({page:0}),B=i(1200),D=i([]),S=i(!1),N=i(window.innerHeight-100),M=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"NOMBRE EVENTO",fixed:"left",dataIndex:"summary",width:100},{title:"FECHA INICIO",dataIndex:"startDate",width:100,align:"center"},{title:"FECHA FIN",dataIndex:"endDate",width:120,align:"center"},{title:"HORARIO",dataIndex:"hours",width:120,align:"center"},{title:"DESCRIPCIÓN",dataIndex:"description",width:240},{title:"",dataIndex:"actions",width:30,align:"center",fixed:"right"}],_=le({search:""}),U=a=>F.some(e=>a.includes(e.id)),V=()=>{m(),w.value=!1},L=()=>{E.value=null,w.value=!0},T=()=>{let a={search:_.search};m(a)},Y=()=>{_.search||m()},b=a=>y(a).format("DD/MM/YYYY"),$=(a,e)=>{const l=y(a).format("HH:mm"),x=y(e).format("HH:mm");return l==="00:00"&&x==="00:00"?"Todo el día":`${l} hasta ${x}`},P=a=>{h.value.page=a,m()},R=()=>{N.value=window.innerHeight-330},j=async a=>{try{const e=await z({url:`google/delete-event-pnte/${a.id}/room`,method:"DELETE"});e.status==200&&(m(),me.success(e.message))}catch(e){console.error("Error de red:",e)}},q=se(()=>a=>h.value.page*C.value+a+1),m=async a=>{try{S.value=!0;let e;e=h.value.page==0?"":h.value,e=a?{...e,...a}:e;const l=await z({url:"google/events-pnte/rooms",method:"GET",params:e});D.value=l==null?void 0:l.data,I.value=l.total,C.value=l.per_page}catch(e){console.error("Error de red:",e)}finally{S.value=!1}};return re(()=>{window.removeEventListener("resize",R)}),ie(()=>{window.addEventListener("resize",R),R(),m()}),(a,e)=>{const l=o("a-button"),x=o("router-link"),A=o("a-col"),Q=o("a-input"),G=o("a-input-group"),J=o("a-row"),K=o("a-popconfirm"),X=o("a-menu-item"),W=o("a-menu"),Z=o("a-dropdown"),ee=o("a-table"),te=o("a-tag"),ae=o("a-pagination"),ne=o("a-drawer");return u(),g(f,null,[c("div",null,[e[7]||(e[7]=c("h3",{class:"title-produce"},"SALA DE REUNIONES",-1)),t(J,{style:{margin:"1rem 0"}},{default:n(()=>[t(A,{xs:24,md:12,lg:18},{default:n(()=>[U([5,10,11])?(u(),H(l,{key:0,type:"primary",onClick:L,class:"box-btn-add"},{default:n(()=>e[3]||(e[3]=[d(" RESERVAR SALA ")])),_:1})):p("",!0),t(x,{to:"/calendario/sala-reuniones",target:"_blank",style:{"margin-left":"1rem"}},{default:n(()=>[t(l,{type:"dashed",icon:O(k(de))},{default:n(()=>e[4]||(e[4]=[d("Ver Calendario")])),_:1},8,["icon"])]),_:1})]),_:1}),t(A,{xs:24,md:12,lg:6},{default:n(()=>[t(G,{compact:""},{default:n(()=>[t(Q,{value:_.search,"onUpdate:value":e[0]||(e[0]=r=>_.search=r),style:{width:"calc(100% - 80px)"},onInput:Y},null,8,["value"]),t(l,{type:"primary",disabled:_.search==="",onClick:T},{default:n(()=>e[5]||(e[5]=[d("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),t(ee,{bordered:"",scroll:{x:B.value,y:N.value},class:"table-events-google",columns:M,"data-source":D.value,pagination:!1,loading:S.value,size:"small"},{bodyCell:n(({column:r,record:s,index:oe})=>[r.dataIndex=="idx"?(u(),g(f,{key:0},[d(v(q.value(oe)),1)],64)):p("",!0),r.dataIndex=="startDate"?(u(),g(f,{key:1},[d(v(b(s==null?void 0:s.start)),1)],64)):p("",!0),r.dataIndex=="endDate"?(u(),g(f,{key:2},[d(v(b(s==null?void 0:s.end)),1)],64)):p("",!0),r.dataIndex=="hours"?(u(),g(f,{key:3},[d(v($(s==null?void 0:s.start,s==null?void 0:s.end)),1)],64)):p("",!0),r.dataIndex=="actions"?(u(),H(Z,{key:4,trigger:["click"]},{overlay:n(()=>[t(W,null,{default:n(()=>[t(X,null,{default:n(()=>[t(K,{placement:"rightBottom",title:"¿Quieres eliminar este registro ?",onConfirm:ve=>j(s)},{icon:n(()=>[t(k(ue),{style:{color:"red"}})]),default:n(()=>[e[6]||(e[6]=c("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[c("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=ce(()=>{},["prevent"]))},[t(l,{shape:"circle",icon:O(k(_e)),size:"small"},null,8,["icon"])])]),_:2},1024)):p("",!0)]),_:1},8,["scroll","data-source","loading"])]),c("div",ge,[c("span",null,[t(te,{color:"blue"},{default:n(()=>[c("b",null,v(I.value),1)]),_:1}),e[8]||(e[8]=d("Eventos creados"))]),t(ae,{size:"small",total:I.value,pageSize:C.value,onChange:P,showSizeChanger:!1},null,8,["total","pageSize"])]),t(ne,{open:w.value,"onUpdate:open":e[2]||(e[2]=r=>w.value=r),title:E.value?"Editar Evento":"SEPARAR SALA DE REUNIÓN",placement:"right",width:"450"},{default:n(()=>[t(pe,{onCloseDraw:V,dataRow:E.value,type:"rooms"},null,8,["dataRow"])]),_:1},8,["open","title"])],64)}}};export{Ee as default};
