import{_ as ne}from"./TableComponent-531f6edc.js";import{c as y,A as K,p as x,r as g,a as ee,k as te,U as ie,X as k,o as m,d as b,m as F,h as ae,E as oe,u as le,b as N,w as h,y as E,z as p,F as Q,j as P,i as H,e as X,a2 as re}from"./index-f327d191.js";import{d as se}from"./downloadExcel-a1975631.js";import"./es-741391a2.js";import{_ as ce}from"./FormComponent-e452898a.js";import{u as de}from"./selectes-d815f1a8.js";import{C as ue}from"./ChromeOutlined-6683b42b.js";import"./icoexcel-1b303edf.js";import"./MoreOutlined-8ed8c9f0.js";import"./quill.snow-27b25bfc.js";var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"};const fe=me;function Z(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),d.forEach(function(c){pe(s,c,n[c])})}return s}function pe(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var j=function(i,n){var d=Z({},i,n.attrs);return y(K,Z({},d,{icon:fe}),null)};j.displayName="FacebookOutlined";j.inheritAttrs=!1;const ge=j;var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"};const he=_e;function W(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),d.forEach(function(c){ye(s,c,n[c])})}return s}function ye(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var G=function(i,n){var d=W({},i,n.attrs);return y(K,W({},d,{icon:he}),null)};G.displayName="InstagramOutlined";G.inheritAttrs=!1;const ve=G;const be={class:"f-20"},Ie={__name:"ParticipanteSed",props:["info"],emits:["closeDraw"],setup(s,{emit:i}){x.locale("es");const n=g({ruc:{type:"iText",label:"RUC",name:"ruc",required:!0,message:"Ingrese el RUC",disabled:!1},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Ingrese la razón social",disabled:!1},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Ingrese el nombre comercial",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccione el sector económico",disabled:!1},category_id:{type:"iSelect",label:"RUBRO",name:"category_id",required:!0,message:"Seleccione el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccione la actividad comercial",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccione la región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccione la provincia",disabled:!1},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccione un distrito",disabled:!1},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!0,message:"Ingrese el tipo de asistente",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const d=i,c=s,A=g("GUARDAR"),e=ee({}),I=g(!1),r=de(),R=g(null),f=g({city_id:[],province_id:[],district_id:[],modality_id:[]}),l=t=>{console.log("handleInputEvent",t)},$=async t=>{t=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),n.value.dateTramite.disabled=!1)},U=async t=>{t=="city_id"&&(await r.fetchProvinces(e.city_id),f.value.province_id=r.provinces,n.value.province_id.disabled=!1),t=="province_id"&&(await r.fetchDistricts(e.province_id),f.value.district_id=r.districts,n.value.district_id.disabled=!1)},B=async t=>{console.log("handleFocusSelect",t),t=="city_id"&&(await r.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,f.value.province_id=[],f.value.city_id=r.cities)},L=t=>{},V=async()=>{I.value=!0;const t={ruc:e.ruc,comercialName:e.comercialName,socialReason:e.socialReason,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,gender_id:e.gender_id,phone:e.phone,email:e.email,birthday:x(e.birthday).format("YYYY-MM-DD HH:mm"),positionCompany:e.positionCompany,instagram:e.instagram,facebook:e.facebook,web:e.web};try{const S=await F({url:`fair/sed-update-data-user/${c.info.id}`,method:"PUT",data:t});S.status===200&&(ae.success(S.message),T(),d("closeDraw",!0))}catch(S){console.error("Error:",S);const D=document.getElementsByClassName("ant-drawer-body")[0];D&&(D.scrollTop=0)}finally{I.value=!1}},T=()=>{e.nameEvent=null,e.city_id=null,e.place=null,e.modality_id=null,e.dates=null,e.hours=null,e.description=null},Y=async t=>{t&&(console.log("aaaa",t),e.ruc=t.ruc,e.comercialName=t.comercialName,e.socialReason=t.socialReason,await r.fetchEconomicSectors(),f.value.economicsector_id=r.economicSectors,e.category_id=t.category_id,await r.fetchRubros(),f.value.rubros_id=r.rubros,e.economicsector_id=t.economicsector_id,await r.fetchCities(),f.value.city_id=r.cities,e.city_id=t.city_id,await r.fetchProvinces(e.city_id),f.value.province_id=r.provinces,n.value.province_id.disabled=!1,e.province_id=t.province_id,await r.fetchDistricts(e.province_id),f.value.district_id=r.districts,n.value.district_id.disabled=!1,e.district_id=t.district_id)};return te(()=>{c.info&&Y(c.info)}),ie(()=>c.info,t=>{t?Y(t):T()}),k("formState",e),k("loadingState",I),(t,S)=>(m(),b("div",be,[y(ce,{fields:n.value,options:f.value,btnSaveName:A.value,onHandleInputEvent:l,resetSelect:R.value,onHandleChangeSelect:U,onHandleFocusSelect:B,onHandleBlurSelect:L,onHandleChangeClock:$,onOnSubmit:V},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const Se={class:"layout-content"},Oe={key:3,class:"sed-socials"},Ee=["href"],Ce=["href"],we=["href"],xe=["onClick"],Fe={__name:"sed-inscritos",setup(s){const i=oe(),n=JSON.parse(localStorage.getItem("role"))||[],d=g([]),c=g(0),A=g(150),e=g(!1);le();const I=g(!1),r=g(null),R=g(!1),f=g({name:"Cargando..."}),l=ee({year:x("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),$=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center",fixed:"left"},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"N° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"TIPO ASISTENTE",dataIndex:"typeAsistente",width:150,align:"center"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:200},{title:"SECTOR ECONÓMICO",dataIndex:"economicsector_name",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"comercialactivity_name",width:180},{title:"CIUDAD",dataIndex:"city_name",width:120,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"GÉNERO",dataIndex:"gender_name",width:120,align:"center"},{title:"TELÉFONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"CARGO EN EMPRESA",dataIndex:"positionCompany",width:180,align:"center"},{title:"CÓMO CONOCIÓ EL EVENTO",dataIndex:"howKnowEvent_name",width:200,align:"center"},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:180,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],U=a=>{r.value=a,e.value=!0},B=()=>{C(),e.value=!1},L=()=>{r.value=null,e.value=!0},V=async(a,o)=>{const O=i.params.slug,M=x().format("DD/MM/YYYY HH:mm"),z={slug:O,documentnumber:o.documentnumber,check:a.target.checked,date:M};try{const w=await F({url:"fair/update-attended-status",method:"PUT",data:z});w.status==200&&console.log("status",w.message)}catch(w){console.error("Error de red:",w)}},T=async a=>{try{const o=await F({url:`fair/sed-delete-user/${a.id}`,method:"DELETE"});o.status==200&&(C(),ae.success(o.message))}catch(o){console.error("Error de red:",o)}},Y=async()=>{R.value=!0;try{const a={},o=i.params.slug;l.year&&(a.year=x(l.year).format("YYYY")),l.range&&(a.dateStart=l.range[0].format("YYYY/MM/DD"),a.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(a.name=l.name);let O=`download/sed-asistentes/${o}`;await se(O,"sed",a)}catch(a){console.error("Error de red:",a)}finally{R.value=!1}},t=async a=>{l.page=a,await C()},S=async a=>{a&&(l.page=1,await C())},D=a=>n.some(o=>a.includes(o.id)),C=async()=>{try{I.value=!0;const a={page:l.page},o=i.params.slug;l.year&&(a.year=x(l.year).format("YYYY")),l.range&&(a.dateStart=l.range[0].format("YYYY/MM/DD"),a.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(a.name=l.name),l.orderby&&(a.orderby=l.orderby);let O=`events-ugse/users-registered-list/${o}`;const _=await F({url:O,method:"GET",params:a});f.value=_.event,d.value=_.data.data,c.value=_.data.total,A.value=_.data.per_page}catch(a){console.error("Error de red:",a)}finally{I.value=!1}};return te(async()=>{await C()}),k("search",l),k("loading",I),k("loadingFile",R),(a,o)=>{var J;const O=N("a-checkbox"),_=N("a-tag"),M=N("a-menu-item"),z=N("a-popconfirm"),w=N("a-drawer");return m(),b("div",Se,[y(ne,{title:`INSCRITOS SED 📀 ${(J=f.value)==null?void 0:J.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/sed",searchYear:!0,rangeDate:!0,columns:$,titleSearch:"FILTRAR POR RUC O DNI",pageSize:A.value,nameTotal:"Inscritos SED",dataSource:d.value,total:c.value,btnUpdate:!0,onHandleNew:L,onHandleCallFetchData:C,onHandleDownloadExcel:Y,onHandleSearch:S,onHandlePaginator:t},{"data-cell":h(({column:v,record:u})=>[v.dataIndex=="asistio"?(m(),E(O,{key:0,checked:u.asistio,"onUpdate:checked":q=>u.asistio=q,onChange:q=>V(q,u)},null,8,["checked","onUpdate:checked","onChange"])):p("",!0),v.dataIndex=="sick"?(m(),b(Q,{key:1},[u.sick=="SI"?(m(),E(_,{key:0,color:"red"},{default:h(()=>o[1]||(o[1]=[P("SI")])),_:1})):p("",!0),u.sick=="NO"?(m(),E(_,{key:1,color:"green"},{default:h(()=>o[2]||(o[2]=[P("NO")])),_:1})):p("",!0)],64)):p("",!0),v.dataIndex=="typeAsistente"?(m(),b(Q,{key:2},[u.typeAsistente==1?(m(),E(_,{key:0,color:"blue"},{default:h(()=>o[3]||(o[3]=[P("Representante")])),_:1})):p("",!0),u.typeAsistente==2?(m(),E(_,{key:1,color:"pink"},{default:h(()=>o[4]||(o[4]=[P("Invitado")])),_:1})):p("",!0)],64)):p("",!0),v.dataIndex=="redesSociales"?(m(),b("div",Oe,[u.instagram?(m(),b("a",{key:0,href:u.instagram,target:"_blank"},[y(H(ge),{class:"ico-sed-socials"})],8,Ee)):p("",!0),u.facebook?(m(),b("a",{key:1,href:u.facebook,target:"_blank"},[y(H(ve),{class:"ico-sed-socials"})],8,Ce)):p("",!0),u.web?(m(),b("a",{key:2,href:u.web,target:"_blank"},[y(H(ue),{class:"ico-sed-socials"})],8,we)):p("",!0)])):p("",!0)]),"custom-options":h(({record:v})=>[D([1,5])?(m(),E(M,{key:0},{default:h(()=>[X("a",{onClick:u=>U(v)},"Editar",8,xe)]),_:2},1024)):p("",!0),D([1,5])?(m(),E(M,{key:1},{default:h(()=>[y(z,{placement:"rightBottom",title:`¿Quieres eliminar ${v.documentnumber} ?`,onConfirm:u=>T(v)},{icon:h(()=>[y(H(re),{style:{color:"red"}})]),default:h(()=>[o[5]||(o[5]=X("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):p("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),y(w,{open:e.value,"onUpdate:open":o[0]||(o[0]=v=>e.value=v),title:r.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:h(()=>[y(Ie,{onCloseDraw:B,info:r.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Fe as default};
