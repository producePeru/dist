import{l as f,p as Z,a as ee,r as i,q as te,j as le,b as _,o as d,d as u,e as t,c as n,h as v,w as g,t as o,L as ae,f as H,i as E,F as se,s as oe,v as k,x as ne,y,z as re,B as ie}from"./index-78e145e7.js";import{l as de,C as ue}from"./localizedFormat-07382b9f.js";import"./es-f82889cb.js";import{u as ce}from"./selectes-eca35e9b.js";import{H as ve}from"./HomeOutlined-0e5e1b3d.js";import{T as pe}from"./TeamOutlined-1d792ac7.js";import{E as me}from"./EnvironmentOutlined-e318508f.js";import{U as fe}from"./UserOutlined-0df08d80.js";const ye={class:"container-events"},_e={class:"filter-calendar-25"},ge={class:"filter-calendar-25-opts"},he={class:"filter-calendar-check"},be={class:"schedule"},ke={class:"schedule-header"},Ce={class:"schedule-date"},Ee={key:0,class:"event-time"},Me={key:1,class:"event-time"},xe={class:"event-hour-2"},Oe={class:"title"},De={class:"event-description"},Ae=["onClick"],Ue={class:"modal-calendar-detail"},we={style:{"line-height":"1.3","margin-bottom":".5rem","margin-top":"0"}},Re=["innerHTML"],Te={key:0},Le={style:{"margin-left":".5rem"}},Se={key:1},Ne={style:{"margin-left":".5rem"}},Ge={style:{"margin-left":"21px"}},ze={key:2},Ve={style:{"margin-left":".5rem"}},Ye={style:{"margin-left":".5rem"}},Fe={key:0},Pe={style:{"margin-left":".5rem"}},Ie={key:3},Be={style:{"margin-left":".5rem"}},He={key:4},$e=["href"],je={key:5},qe=["innerHTML"],Je={style:{"font-size":"13px","margin-bottom":"5px"}},Ke={style:{margin:"0"}},Qe={class:"filter-modal"},We={style:{display:"flex","flex-direction":"column"}},it={__name:"EventosGoogleCalendar",setup(Xe){f.locale("es"),f.extend(Z),f.extend(de);const h=ce();h.$patch({cities:h.cities}),h.fetchCities();const p=ee({value1:["UGO","UGSE"]}),m=i(null),$=te(ae,{style:{fontSize:"24px"},spin:!0}),M=i(null),x=i(!1),b=i(null);i(!1);const a=i(null),O=i(!1),R=i(!1),T=i(null),L=i(null),S=i(new Date),D=i([]),N=i(null),C=i([]),A=i(!1),j=l=>{a.value=l,O.value=!0},G=[{label:"UGO",value:"UGO"},{label:"UGSE",value:"UGSE"}],z=l=>l.canceled?M.value="#ff78755c":l.rescheduled?M.value="#f7b4002b":M.value="#fff",V=(l,e)=>{const r=l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)},q=l=>{if(Array.isArray(l)&&l.length>0&&l[0].id){const e=l[0].id;T.value=e,N.value!==e&&(N.value=e,console.log("onPageChange",l),F(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},U=l=>({1:"#808080",red:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",blue:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[l],J=l=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[l],K=l=>{if(!Array.isArray(l)||l.length===0)return"";const e=f(l[0]).locale("es").format("DD [de] MMMM"),r=l.length>1?f(l[l.length-1]).locale("es").format("DD [de] MMMM"):null;return r?`Desde: ${e} Hasta: ${r}`:`${e}`},Y=async()=>{x.value=!0,await F(T.value),await w()},w=async l=>{l&&(b.value=l.id),A.value=!0;const e={},r=f().format("YYYY-MM-DD");p.value1&&(e.office=p.value1),m.value&&(e.city_id=m.value),b.value?e.dateSelected=b.value:e.dateSelected=l?l.id:r,L.value=b.value?f(b.value).format("dddd D [de] MMMM [de] YYYY"):f(r).format("dddd D [de] MMMM [de] YYYY");try{C.value=[];const c=await H({url:"pnte/events-day",method:"GET",params:e});c.data&&Array.isArray(c.data)?C.value=c.data:console.warn("⚠️ Respuesta inesperada de la API:",c)}catch(c){console.error("❌ Error al obtener eventos:",c)}finally{A.value=!1,x.value=!1}},F=async l=>{const e={};m.value&&(e.city_id=m.value),p.value1&&(e.office=p.value1),l&&(e.year_month=l);try{const r=await H({url:"pnte/dots",method:"GET",params:e});D.value=[],r&&Array.isArray(r)?D.value=[{key:"today",highlight:"",dates:[new Date]},...r]:console.warn("⚠️ Respuesta de API inesperada:",r)}catch(r){console.error("❌ Error al obtener eventos:",r)}};return le(async()=>{await w()}),(l,e)=>{const r=_("VCalendar"),c=_("a-checkbox-group"),P=_("a-select"),I=_("a-button"),Q=_("a-empty"),W=_("a-spin"),B=_("a-modal");return d(),u("section",ye,[e[19]||(e[19]=t("h1",{class:"title-pc"},"CALENDARIO 2025",-1)),t("div",null,[n(r,{ref:"calendar",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),attributes:D.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":q,onDayclick:w},null,8,["modelValue","attributes"]),t("div",_e,[t("div",null,[e[8]||(e[8]=t("h4",{style:{display:"block"}},"FILTRAR POR",-1)),t("div",ge,[t("div",he,[n(c,{value:p.value1,"onUpdate:value":e[1]||(e[1]=s=>p.value1=s),name:"checkboxgroup",options:G},null,8,["value"])]),n(P,{style:{width:"100%"},value:m.value,"onUpdate:value":e[2]||(e[2]=s=>m.value=s),options:v(h).cities,"show-search":"","filter-option":V,placeholder:"SELECCIONAR REGIÓN"},null,8,["value","options"]),n(I,{class:"btn-modal-filter",type:"primary",onClick:Y,loading:x.value},{default:g(()=>e[7]||(e[7]=[E("BUSCAR")])),_:1},8,["loading"])])])])]),t("div",be,[t("div",ke,[e[9]||(e[9]=t("h4",null,"EVENTOS",-1)),t("span",Ce,o(L.value),1)]),n(W,{indicator:v($),spinning:A.value},{default:g(()=>[C.value.length>0?(d(!0),u(se,{key:0},oe(C.value,(s,X)=>(d(),u("div",{key:X,class:"event",style:k({backgroundColor:z(s)})},[s.start?(d(),u("div",Me,[t("div",null,o(s.start),1),e[11]||(e[11]=t("br",null,null,-1)),t("div",xe,o(s.end),1)])):(d(),u("div",Ee,e[10]||(e[10]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:k({"border-color":U(s.dot)})},[t("small",{class:"schedule-tag",style:k({"background-color":U(s.dot)})},o(s.id_pnte),5),t("div",Oe,o(s.title),1),t("div",De,[E(o(s.descriptionparse)+" ",1),t("span",{onClick:Ze=>j(s),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,Ae)])],4)],4))),128)):(d(),ne(Q,{key:1,class:"no-events"},{description:g(()=>e[12]||(e[12]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),n(B,{open:O.value,"onUpdate:open":e[3]||(e[3]=s=>O.value=s),title:"",footer:""},{default:g(()=>[t("div",Ue,[t("div",null,[t("h3",we,o(a.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:k({"background-color":U(a.value.id_pnte)})},o(J(a.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:a.value.descripionAll},null,8,Re),a.value.organiza?(d(),u("div",Te,[n(v(ve)),t("span",Le,o(a.value.organiza),1)])):y("",!0),a.value.region?(d(),u("div",Se,[n(v(me)),t("span",Ne,o(a.value.region)+" "+o(a.value.province)+" "+o(a.value.district),1),t("div",null,[t("span",Ge,o(a.value.place),1)])])):y("",!0),a.value.numMypes?(d(),u("div",ze,[t("span",null,[n(v(pe))]),t("span",Ve,o(a.value.numMypes)+" Participantes",1)])):y("",!0),t("div",null,[t("div",null,[n(v(re)),t("span",Ye,o(K(a.value.dates)),1)]),a.value.start?(d(),u("div",Fe,[n(v(ie)),t("span",Pe,o(a.value.start),1),e[13]||(e[13]=E(" - ")),t("span",null,o(a.value.end),1)])):y("",!0)]),a.value.nameUser?(d(),u("div",Ie,[n(v(fe)),t("span",Be,[E(o(a.value.nameUser)+" ",1),e[14]||(e[14]=t("small",null,"(Representante)",-1))])])):y("",!0),a.value.link?(d(),u("div",He,[n(v(ue)),t("a",{style:{"margin-left":".5rem"},href:a.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,$e)])):y("",!0),a.value.resultado?(d(),u("div",je,[e[15]||(e[15]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:a.value.resultado},null,8,qe)])):y("",!0)]),a.value.canceled||a.value.rescheduled?(d(),u("div",{key:0,style:k({backgroundColor:z(a.value),padding:"5px",marginTop:"10px",borderRadius:"4px"})},[t("h3",Je,o(a.value.canceled?"EVENTO CANCELADO":"EVENTO REPROGRAMADO"),1),t("p",Ke,o(a.value.canceled?a.value.canceled:a.value.rescheduled),1)],4)):y("",!0)]),_:1},8,["open"]),n(B,{open:R.value,"onUpdate:open":e[6]||(e[6]=s=>R.value=s),title:"",footer:"",width:"350px"},{default:g(()=>[t("div",Qe,[e[18]||(e[18]=t("h3",null,"FILTRAR POR:",-1)),n(c,{value:p.value1,"onUpdate:value":e[4]||(e[4]=s=>p.value1=s),name:"checkboxgroup",options:G},null,8,["value"]),t("div",We,[e[16]||(e[16]=t("label",{style:{margin:"10px 0 6px 0","font-size":"13px"}},"REGIÓN",-1)),n(P,{allowClear:!0,value:m.value,"onUpdate:value":e[5]||(e[5]=s=>m.value=s),options:v(h).cities,"show-search":"","filter-option":V},null,8,["value","options"])]),t("pre",null,o(p.value1),1),n(I,{class:"btn-modal-filter",type:"primary",onClick:Y},{default:g(()=>e[17]||(e[17]=[t("b",{style:{"font-weight":"500"}},"BUSCAR",-1)])),_:1})])]),_:1},8,["open"])])}}};export{it as default};
