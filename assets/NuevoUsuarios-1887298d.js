import{H as x,r as b,y as G,a as M,b as o,o as n,d as v,e as g,t as V,h as u,c as i,w as d,F as y,m as $,g as h,B as L,q as s,s as r,I as H,i as j}from"./index-3e84d68c.js";import"./es-23ff5321.js";import{u as J}from"./selectes-6d893d2f.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const Z={email:{type:"iText",label:"Correo",name:"email",required:!0,email:"email",message:"Escribe el correo del usuario"},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el apellido paterno"},lastname:{type:"iText",label:"Apellido paterno",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"Apellido materno",name:"middlename",required:!0,message:"Escribe el apellido paterno"},documentnumber:{type:"iText",label:"Número de DNI",name:"documentnumber",required:!0,message:"Escribe el apellido paterno",max:8},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!1,message:"año-mes-día"},phone:{type:"iText",label:"Ingresar número celular",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"Género",name:"gender_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},cde_id:{type:"iSelect",label:"CDE",name:"cde_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},office_id:{type:"iSelect",label:"Oficina",name:"office_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},role_id:{type:"iSelect",label:"Rol",name:"role_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0}};const z={class:"user"},K={class:"grid-item"},Q="YYYY-MM-DD",W={__name:"NuevoUsuarios",setup(X){x.locale("es");const S=JSON.parse(localStorage.getItem("profile")),t=J();t.$patch({genders:t.genders}),t.$patch({cdes:t.cdes}),t.$patch({Offices:t.Offices}),t.$patch({roles:t.roles}),t.fetchGenders(),t.fetchCdes(),t.fetchOffices(),t.fetchRoles();const m=b(null),U=G(),f=b(!1),k=b(!1),D=b(!1),a=M({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:S.id,email:null,password:null}),N=()=>{a.name=null,a.lastname=null,a.middlename=null,a.documentnumber=null,m.value=null,a.phone=null,a.gender_id=null,a.cde_id=null,a.office_id=null,a.email=null,a.password=null,a.role_id=null},T=async()=>{f.value=!0,a.password=a.documentnumber,a.birthday=m.value?x(m.value).format("YYYY-MM-DD"):null;try{const c=await $({url:"user/create",method:"POST",data:a});N(),h.success(c.message)}catch{h.error("No se pudo registrar este usuario")}finally{f.value=!1}},E=()=>{h.error("Debes de completar todos los espacios requeridos")},R=async c=>{console.log("Hello",c)},A=()=>{a.document_number=a.document_number.replace(/\D/g,"")};return(c,q)=>{const F=o("a-divider"),_=o("a-select"),p=o("a-form-item"),I=o("a-input-search"),O=o("a-input"),C=o("a-date-picker"),Y=o("a-button"),w=o("a-form");return n(),v(y,null,[g("h3",null,V(u(U).query.dni?"ACTUALIZAR":"REGISTRO DE")+" USUARIO",1),i(F),g("div",z,[i(w,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:T,onFinishFailed:E},{default:d(()=>[g("div",K,[(n(!0),v(y,null,L(u(Z),(e,B)=>(n(),v(y,{key:B},[e.type==="iSelect"?(n(),s(p,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[e.name=="gender_id"?(n(),s(_,{key:0,value:a[e.name],"onUpdate:value":l=>a[e.name]=l,options:u(t).genders},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="cde_id"?(n(),s(_,{key:1,value:a[e.name],"onUpdate:value":l=>a[e.name]=l,options:u(t).cdes},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="office_id"?(n(),s(_,{key:2,value:a[e.name],"onUpdate:value":l=>a[e.name]=l,options:u(t).Offices},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="role_id"?(n(),s(_,{key:3,value:a[e.name],"onUpdate:value":l=>a[e.name]=l,options:u(t).roles},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iSearch"?(n(),s(p,{key:1,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max}]},{default:d(()=>[i(I,{maxlength:15,loading:k.value,value:a[e.name],"onUpdate:value":l=>a[e.name]=l,onSearch:R,onInput:A,disabled:D.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iText"?(n(),s(p,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:d(()=>[i(O,{value:a[e.name],"onUpdate:value":l=>a[e.name]=l,maxlength:e.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iDate"?(n(),s(p,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[i(C,{locale:u(H),value:m.value,"onUpdate:value":q[0]||(q[0]=l=>m.value=l),style:{width:"100%"},format:Q},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),i(p,null,{default:d(()=>[i(Y,{class:"btn-produce",type:"primary","html-type":"submit",loading:f.value},{default:d(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])],64)}}},ne=P(W,[["__scopeId","data-v-b4fa9af4"]]);export{ne as default};
