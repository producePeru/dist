import{c as n,A as L,r as P,u as q,a as g,b as x,d,o as E,e as V,f as l,w as c,g as z,m as v,h,C as N,i as b,j,p as T,k as F}from"./index-8877eb57.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{U as B}from"./UserOutlined-8d121d2e.js";var C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const D=C;function w(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable}))),o.forEach(function(i){U(a,i,s[i])})}return a}function U(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}var _=function(t,s){var o=w({},t,s.attrs);return n(L,w({},o,{icon:D}),null)};_.displayName="LockOutlined";_.inheritAttrs=!1;const $=_;const f=a=>(T("data-v-43e9a5f3"),a=a(),F(),a),H={class:"container-login"},J=f(()=>l("img",{class:"hero",src:"https://soporte-pnte.com/tuempresa/assets/images/fondo.jpeg",alt:""},null,-1)),M={class:"wrapper-login"},G=f(()=>l("div",{class:"title"},[l("img",{class:"logo",src:"https://www.tuempresa.gob.pe/wp-content/uploads/2021/10/Produce-TuEmpresa.png",alt:""}),l("h1",null,"Iniciar Sesión"),l("span",null,"Ingrese su usuario y contraseña para ingresar a la plataforma.")],-1)),R=f(()=>l("br",null,null,-1)),Q={__name:"LoginPage",setup(a){const t=P(!1),s=q();g.get("token");const o=x({email:"",password:""}),i=async()=>{t.value=!0;try{const u=o,{data:e}=await z({url:"/login",method:"POST",data:u});g.set("token",e.access_token);const p={access_token:e.access_token,id:e.id,document_number:e.document_number,role:e.role};localStorage.setItem("user",JSON.stringify(p));const r=await v({url:`/personal-data/${e.document_number}`,method:"GET"});console.log("qqqqq",r),e&&y(e.id)}catch(u){h.error("Las credenciales son incorrectas"),console.log("Error: "+u)}finally{t.value=!1}},y=async u=>{const{data:e}=await v({url:`/views/${u}`,method:"GET"}),p=N.AES.encrypt(JSON.stringify(e),"appvistas").toString();try{localStorage.setItem("views",p)}catch(r){console.error("Error al guardar en localStorage:",r);return}s.push("/admin/inicio")},S=()=>{h.error("Sin acceso")};return(u,e)=>{const p=d("a-input"),r=d("a-form-item"),O=d("a-input-password"),k=d("a-button"),I=d("a-form");return E(),V("div",H,[J,l("div",M,[G,n(I,{class:"form-wrapper",model:o,name:"basic",autocomplete:"off",onFinish:i,onFinishFailed:S},{default:c(()=>[n(r,{name:"email",rules:[{required:!0,message:"Ingresa tu cuenta de email"}]},{default:c(()=>[n(p,{value:o.email,"onUpdate:value":e[0]||(e[0]=m=>o.email=m),size:"large"},{prefix:c(()=>[n(b(B),{class:"input-ico"})]),_:1},8,["value"])]),_:1}),n(r,{name:"password",rules:[{required:!0,message:"La contraseña es incorrecta"}]},{default:c(()=>[n(O,{value:o.password,"onUpdate:value":e[1]||(e[1]=m=>o.password=m),size:"large"},{prefix:c(()=>[n(b($),{class:"input-ico"})]),_:1},8,["value"])]),_:1}),R,n(r,null,{default:c(()=>[n(k,{size:"large",block:"",type:"primary","html-type":"submit",class:"btn-login",loading:t.value},{default:c(()=>[j("Ingresar")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},Z=A(Q,[["__scopeId","data-v-43e9a5f3"]]);export{Z as default};
