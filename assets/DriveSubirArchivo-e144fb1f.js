import{g as h,r as b,a as L,b as u,o as l,d as f,e as d,c as r,w as s,F as _,J as N,m as p,v as j,B as g,i as y,j as x,s as S,t as q,p as H,k as P}from"./index-7d06017e.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{U as $}from"./UploadOutlined-f4bff9bc.js";const z={pdfDocument:{type:"iUpload",label:"",name:"pdfDocument",required:!1,message:""}};const D=i=>(H("data-v-c3f989be"),i=i(),P(),i),J=D(()=>d("h3",null,"SUBIR ARCHIVOS",-1)),W=D(()=>d("br",null,null,-1)),G={class:"agreement-wrapper"},K={class:"grid-item"},M={__name:"DriveSubirArchivo",setup(i){const w=h.get("usuario"),I=h.get("token"),k="https://apituempresa.soporte-pnte.com/api/v1",B="http://127.0.0.1:8000/api/v1",C=window.location.hostname=="127.0.0.1"?B:k,m=b(!1),e=b([]),c=L({pdfDocument:null}),F=o=>{c.pdfDocument=null;const t=e.value.indexOf(o),a=e.value.slice();a.splice(t,1),e.value=a},U=o=>{const t=["pdf","xls","xlsx","doc","docx","ppt","pptx","png","jpg","jpeg","gif"],a=o.name.split(".").pop().toLowerCase();return t.includes(a)?(e.value=[...e.value,o],c.pdfDocument="file",!1):(p.error("Solo se permiten archivos PDF, Excel, Word, PowerPoint e imÃ¡genes."),!1)},A=async()=>{m.value=!0;const o={created_by:w,files:e.value};try{const{data:t}=await N.post(`${C}/drive/up-files`,o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${I}`}});p.success(t.message),e.value=[]}catch{p.error("Error al subir")}finally{m.value=!1}},R=()=>{e.value>=1?c.pdfDocument="file":p.error("Debes al menos subir un archivo")};return(o,t)=>{const a=u("a-button"),V=u("a-upload"),v=u("a-form-item"),E=u("a-form");return l(),f(_,null,[J,W,d("div",G,[r(E,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:A,onFinishFailed:R},{default:s(()=>[d("div",K,[(l(!0),f(_,null,j(y(z),(n,O)=>(l(),f(_,{key:O},[n.type==="iUpload"?(l(),g(v,{key:0,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:s(()=>[r(V,{"file-list":e.value,"before-upload":U,onRemove:F},{default:s(()=>[r(a,null,{default:s(()=>[r(y($)),x(" Seleccionar archivo ")]),_:1})]),_:1},8,["file-list"])]),_:2},1032,["name","label","rules"])):S("",!0)],64))),128))]),e.value.length>=1?(l(),g(v,{key:0},{default:s(()=>[r(a,{type:"primary","html-type":"submit",loading:m.value},{default:s(()=>[x("SUBIR "+q(e.value.length==1?"ARCHIVO":"ARCHIVOS"),1)]),_:1},8,["loading"])]),_:1})):S("",!0)]),_:1},8,["model"])])],64)}}},Z=T(M,[["__scopeId","data-v-c3f989be"]]);export{Z as default};
