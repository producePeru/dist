import{f as oe,_ as se}from"./nuevaPersonaCompany-ed7b2d3e.js";import{r as y,E as A,u as re,a as ie,Q as F,j as M,b,o as i,d as k,c as p,w as m,e as o,F as G,s as de,x as v,y as _,h as R,i as h,f,m as x,t as ue}from"./index-cc9eac84.js";import{t as ce,c as me}from"./selects-c77e0024.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const pe="/assets/imgInvitacion-e3c50550.jpg",ve="/assets/zoomlogo-bd8e1a39.png",_e="/assets/clock-87f7be37.png";const be={class:"agreement-wrapper"},ye={class:"grid-item"},fe={__name:"InvitationForm",props:["idWorkshop"],setup(D){const I=D,l=y(oe);A();const g=re(),T=y(null),u=y(!1),s=y(!1),S=y([]),P=y([]),U=y([]),V=[{label:"DNI",value:"dni"},{label:"CE",value:"ce"},{label:"PAS",value:"pas"},{label:"PTP",value:"ptp"}],e=ie({id_workshop:I.idWorkshop,ruc:null,social_reason:null,category:null,person_type:null,document_type:"dni",number_document:null,last_name:null,middle_name:null,name:null,department:null,province:null,district:null,phone:null,email:null,created_by:F,update_by:F,post:4}),$=()=>{e.ruc=null,e.social_reason=null,e.category=null,e.person_type=null,e.document_type=null,e.number_document=null,e.last_name=null,e.middle_name=null,e.name=null,e.department=null,e.province=null,e.district=null,e.phone=null,e.email=null},W=()=>{l.value.category.disabled=!1,l.value.person_type.disabled=!1,l.value.document_type.disabled=!1,l.value.number_document.disabled=!1},C=()=>{l.value.last_name.disabled=!1,l.value.middle_name.disabled=!1,l.value.name.disabled=!1,l.value.department.disabled=!1,l.value.province.disabled=!1,l.value.district.disabled=!1,l.value.phone.disabled=!1,l.value.email.disabled=!1},E=()=>{l.value.social_reason.disabled=!0,l.value.category.disabled=!0,l.value.person_type.disabled=!0,l.value.document_type.disabled=!0,l.value.number_document.disabled=!0,l.value.last_name.disabled=!0,l.value.middle_name.disabled=!0,l.value.name.disabled=!0,l.value.department.disabled=!0,l.value.province.disabled=!0,l.value.district.disabled=!0,l.value.phone.disabled=!0,l.value.email.disabled=!0},z=n=>{e[n]=e[n].replace(/\D/g,"")},B=async()=>{u.value=!0;try{const n=e.ruc,{data:a}=await f({url:`/public/company/${n}`,method:"GET"});a&&(e.social_reason=a.razonSocial,W()),a.social_reason&&(e.social_reason=a.social_reason,e.category=a.category,e.person_type=a.person_type)}catch(n){console.log(n),x.error("El número ingresado no es válido"),e.ruc=null}finally{u.value=!1}},j=async()=>{if(!e.document_type)return x.warning("Debes escoger un tipo de documento");u.value=!0;try{const n=await f({url:`/public/person/${e.document_type}/${e.number_document}`,method:"GET"});if(n.status===404)return C();const a=n.data;e.name=a.nombres,e.last_name=a.apellidoPaterno,e.middle_name=a.apellidoMaterno,a.department&&(e.department=a.department,N(a.department)),a.province&&(e.province=a.province,q(a.province)),a.document_type&&(e.document_type=a.document_type),a.district&&(e.district=a.district),a.email&&(e.email=a.email),a.phone&&(e.phone=a.phone),C()}catch(n){console.log("You have an error",n)}finally{u.value=!1}},H=async n=>{if(n=="ruc")return B();if(n=="number_document")return j()},O=n=>{$(),E(),e.document_type=n},Q=(n,a)=>{e.province=null,e.district=null,P.value=[],U.value=[],N(a.value)},Y=(n,a)=>{e.district=null,U.value=[],q(a.value)},J=async()=>{try{const{data:n}=await f({url:"/departaments",method:"GET"});let a=n.map(d=>({label:d.label,value:d.id}));S.value=[...S.value,...a],E()}catch(n){console.log(n)}},N=async n=>{try{const{data:a}=await f({url:`/province/${n}`,method:"GET"});let d=a.map(c=>({label:c.label,value:c.id}));P.value=[...P.value,...d]}catch(a){console.log(a)}},q=async n=>{try{const{data:a}=await f({url:`/district/${n}`,method:"GET"});let d=a.map(c=>({label:c.label,value:c.id}));U.value=[...U.value,...d]}catch(a){console.log(a)}},K=async()=>{const n=e;s.value=!0;try{if(await f({url:"/public/accepted-invitation",method:"POST",data:n})){const d={status:"success",title:"¡Gracias por participar de este formulario!",subTitle:"Se te enviará un correo incluyendo el link del taller ♥"};await f({url:`/public/add-point/${I.idWorkshop}/${T.value}`,method:"PUT"}),g.push({name:"enviado",query:d}),E(),$()}}catch{x.error("Error al registrar")}finally{s.value=!1}},X=()=>{x.error("Debes de completar todos los espacios requeridos")};return M(J),(n,a)=>{const d=b("a-select"),c=b("a-form-item"),Z=b("a-input-search"),ee=b("a-input"),w=b("a-radio"),ae=b("a-radio-group"),te=b("a-button"),ne=b("a-form");return i(),k("div",be,[p(ne,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:K,onFinishFailed:X},{default:m(()=>[o("div",ye,[(i(!0),k(G,null,de(l.value,(t,le)=>(i(),k(G,{key:le},[t.type==="iSelect"?(i(),v(c,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:m(()=>[t.name=="document_type"?(i(),v(d,{key:0,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:V,disabled:t.disabled,onChange:O},null,8,["value","onUpdate:value","disabled"])):_("",!0),t.name=="department"?(i(),v(d,{key:1,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:S.value,onChange:Q,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):_("",!0),t.name=="province"?(i(),v(d,{key:2,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:P.value,onChange:Y,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):_("",!0),t.name=="district"?(i(),v(d,{key:3,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:U.value,disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):_("",!0),t.name=="person_type"?(i(),v(d,{key:4,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:R(ce),disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):_("",!0),t.name=="category"?(i(),v(d,{key:5,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,options:R(me),disabled:t.disabled},null,8,["value","onUpdate:value","options","disabled"])):_("",!0)]),_:2},1032,["name","label","rules"])):_("",!0),t.type==="iSearch"?(i(),v(c,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:m(()=>[p(Z,{maxlength:15,loading:u.value,value:e[t.name],"onUpdate:value":r=>e[t.name]=r,disabled:t.disabled,onSearch:r=>H(t.name),onInput:r=>z(t.name)},null,8,["loading","value","onUpdate:value","disabled","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):_("",!0),t.type==="iText"?(i(),v(c,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:m(()=>[p(ee,{value:e[t.name],"onUpdate:value":r=>e[t.name]=r,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):_("",!0)],64))),128)),o("div",null,[a[4]||(a[4]=o("h4",null,"¿Cómo te enteraste del taller?",-1)),p(ae,{class:"group-radios",value:T.value,"onUpdate:value":a[0]||(a[0]=t=>T.value=t)},{default:m(()=>[p(w,{class:"item-radio",value:"rrss"},{default:m(()=>a[1]||(a[1]=[h("Redes sociales")])),_:1}),p(w,{class:"item-radio",value:"sms"},{default:m(()=>a[2]||(a[2]=[h("SMS")])),_:1}),p(w,{class:"item-radio",value:"correo"},{default:m(()=>a[3]||(a[3]=[h("Correo")])),_:1})]),_:1},8,["value"])]),p(c,{class:"btn-send"},{default:m(()=>[p(te,{type:"primary","html-type":"submit",loading:s.value},{default:m(()=>a[5]||(a[5]=[h("PARTICIPAR")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])])}}},ge=L(fe,[["__scopeId","data-v-c97933d4"]]);const he={class:"invitation"},ke={key:1,class:"container"},Ie={key:0,class:"invitacion-info text-html"},Te=["innerHTML"],Se={class:"horario"},Ue={__name:"InvitacionPage",setup(D){const I=y(!0),l=A(),g=y(null),T=async()=>{try{const{data:u}=await f({url:`/public/invitation/${l.params.slug}`,method:"GET"});g.value=u,I.value=!1}catch(u){console.error("Error de red:",u)}};return M(()=>{T()}),(u,s)=>{const S=b("a-spin");return i(),k("section",he,[I.value?(i(),v(S,{key:0})):(i(),k("div",ke,[s[4]||(s[4]=o("div",{class:"header"},[o("img",{class:"logo-ruta",src:se,alt:""})],-1)),s[5]||(s[5]=o("div",{class:"lazing"},[o("h3",null,"REGISTRO DE INVITACIÓN")],-1)),g.value?(i(),k("div",Ie,[o("div",null,[s[0]||(s[0]=o("p",null,[h(" ¡Capacítate con "),o("b",null,"#RUTADIGITAL"),h(" del Ministerio de Producción del Perú, a través de "),o("b",null,"#TuEmpresa"),h("! ")],-1)),o("div",{innerHTML:g.value.content},null,8,Te)]),o("div",null,[s[2]||(s[2]=o("img",{class:"img-wom",src:pe,alt:""},null,-1)),s[3]||(s[3]=o("div",{class:"plataforma"},[o("h3",null,"Plataforma"),o("img",{class:"logo-zoom",src:ve,alt:""})],-1)),o("div",null,[s[1]||(s[1]=o("img",{class:"logo-clock",src:_e,alt:""},null,-1)),o("span",Se,ue(g.value.date),1)])])])):_("",!0),s[6]||(s[6]=o("br",null,null,-1)),p(ge,{idWorkshop:g.value.id},null,8,["idWorkshop"])]))])}}},De=L(Ue,[["__scopeId","data-v-6db3956b"]]);export{De as default};
