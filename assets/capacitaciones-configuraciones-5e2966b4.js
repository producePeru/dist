import{p as $,r as l,a as W,k as B,U as Z,X as Y,o as b,d as E,c as t,m as P,h as x,b as H,e as s,w as c,F as j,v as X,t as O,i as C,_ as J,$ as K,P as Q,j as V}from"./index-a14a530f.js";import{_ as ee}from"./FormComponent-0e689fc1.js";import{u as ae}from"./selectes-295eb48e.js";import"./es-d615680c.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./quill.snow-2822fd29.js";const oe={__name:"EspecialistaCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:w}){$.locale("es");const h=l({name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1},ocupation:{type:"iText",label:"ESPECIALIDAD",name:"ocupation",required:!0,message:"Ingrese la especialidad",disabled:!1}}),I=w,p=G,S=l("REGISTRAR"),n=W({office_id:1}),f=l(!1),i=ae(),D=l(null),m=l({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},k=async e=>{e=="dateReception"&&(n.dateTramite&&(n.dateTramite=null),h.value.dateTramite.disabled=!1)},A=async e=>{console.log("handleChangeSelect",e)},R=async e=>{e=="gender_id"&&(await i.fetchGenders(),m.value.gender_id=i.genders),e=="office_id"&&(await i.fetchOffices(),m.value.office_id=i.Offices),e=="cde_id"&&(await i.fetchCdes(),m.value.cde_id=i.cdes)},M=async()=>{f.value=!0;const e={name:n.name,ocupation:n.ocupation};try{let o,r=null;p.info?(o=`training/update-specialist/${p.info.id}`,r="PUT"):(o="training/register-specialist",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),I("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{n.name=null,n.ocupation=null},y=async e=>{e&&(n.name=e.name,n.ocupation=e.ocupation)};return B(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),Y("formState",n),Y("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:A,onHandleFocusSelect:R,onHandleChangeClock:k,onOnSubmit:M,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}},ie={__name:"DimensionCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:w}){$.locale("es");const h=l({name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1}}),I=w,p=G,S=l("REGISTRAR"),n=W({office_id:1}),f=l(!1),i=ae(),D=l(null),m=l({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},k=async e=>{e=="dateReception"&&(n.dateTramite&&(n.dateTramite=null),h.value.dateTramite.disabled=!1)},A=async e=>{console.log("handleChangeSelect",e)},R=async e=>{e=="gender_id"&&(await i.fetchGenders(),m.value.gender_id=i.genders),e=="office_id"&&(await i.fetchOffices(),m.value.office_id=i.Offices),e=="cde_id"&&(await i.fetchCdes(),m.value.cde_id=i.cdes)},M=async()=>{f.value=!0;const e={name:n.name,ocupation:n.ocupation};try{let o,r=null;p.info?(o=`training/update-dimension/${p.info.id}`,r="PUT"):(o="training/register-dimension",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),I("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{n.name=null,n.ocupation=null},y=async e=>{e&&(n.name=e.name,n.ocupation=e.ocupation)};return B(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),Y("formState",n),Y("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:A,onHandleFocusSelect:R,onHandleChangeClock:k,onOnSubmit:M,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}},le={__name:"MetasCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:w}){$.locale("es");const h=l({month:{type:"iDatePickerType",label:"MES",name:"month",required:!0,message:"Seleccionar fecha",disabled:!1,picker:"month"},capacitaciones:{type:"iNumber",label:"CANTIDAD DE CAPACITACIONES",name:"capacitaciones",required:!0,message:"Ingrese el número de capacitaciones",disabled:!1,maxlength:5},participantes:{type:"iNumber",label:"CANTIDAD DE PARTICIPANTES",name:"participantes",required:!0,message:"Ingrese el número de participantes",disabled:!1,maxlength:5},empresas:{type:"iNumber",label:"CANTIDAD DE EMPRESAS",name:"empresas",required:!0,message:"Ingrese el número de empresas",disabled:!1,maxlength:5}}),I=w,p=G,S=l("REGISTRAR"),n=W({office_id:1}),f=l(!1),i=ae(),D=l(null),m=l({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},k=async e=>{e=="dateReception"&&(n.dateTramite&&(n.dateTramite=null),h.value.dateTramite.disabled=!1)},A=async e=>{console.log("handleChangeSelect",e)},R=async e=>{e=="gender_id"&&(await i.fetchGenders(),m.value.gender_id=i.genders),e=="office_id"&&(await i.fetchOffices(),m.value.office_id=i.Offices),e=="cde_id"&&(await i.fetchCdes(),m.value.cde_id=i.cdes)},M=async()=>{f.value=!0;const e={month:$(n.month).format("YYYY-MM"),capacitaciones:n.capacitaciones,participantes:n.participantes,empresas:n.empresas};try{let o,r=null;p.info?(o=`training/update-meta/${p.info.id}`,r="PUT"):(o="training/register-meta",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),I("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{n.name=null,n.ocupation=null},y=async e=>{e&&(n.month=$(e.month,"YYYY-MM"),n.capacitaciones=e.capacitaciones,n.participantes=e.participantes,n.empresas=e.empresas)};return B(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),Y("formState",n),Y("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:A,onHandleFocusSelect:R,onHandleChangeClock:k,onOnSubmit:M,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const ce={class:""},re={class:"capacitaciones-content"},de={class:"cap-esp-box"},ue={style:{display:"flex","flex-direction":"column"}},pe={style:{"font-size":"12px",color:"#838383"}},fe={class:"capacitaciones-content"},me={class:"cap-esp-box"},ve={style:{display:"flex","flex-direction":"column"}},ge={class:"capacitaciones-content"},_e={class:"cap-esp-box"},he={style:{display:"flex","flex-direction":"column"}},Se={style:{"font-size":"13px",color:"#838383"}},ye={style:{"font-size":"13px",color:"#838383"}},Ce={style:{"font-size":"13px",color:"#838383"}},be={style:{"font-size":"13px",color:"#838383"}},Ee={__name:"capacitaciones-configuraciones",setup(G){$.locale("es");const w=l([]),h=l([]),I=l([]),p=l(!1),S=l(!1),n=l(!1),f=l(!1),i=l(!1),D=l(!1),m=l(null),T=l(null),k=l(null),A=()=>{p.value=!0},R=()=>{S.value=!0},M=()=>{n.value=!0},g=(d,a)=>{d=="especialistas"?(p.value=!0,m.value=a):d=="dimension"?(S.value=!0,T.value=a):d=="metas"&&(n.value=!0,k.value=a)},y=()=>{p.value=!1,r()},e=()=>{S.value=!1,F()},o=()=>{n.value=!1,ne()},r=async()=>{f.value=!0;try{const d=await P({url:"training/list-specialist",method:"GET"});d.status==200&&(w.value=d.data)}catch(d){console.error("Error de red:",d)}finally{f.value=!1}},_=async(d,a)=>{let v=null;d=="especialistas"?(v=`training/delete-specialist/${a}`,f.value=!0):d=="dimension"&&(v=`training/delete-dimension/${a}`,i.value=!0);try{const N=await P({url:v,method:"DELETE"});N.status==200&&(x.success(N.message),d=="especialistas"?(f.value=!1,r()):d=="dimension"&&(i.value=!1,F()))}catch(N){console.error("Error de red:",N)}},F=async()=>{i.value=!0;try{const d=await P({url:"training/list-dimension",method:"GET"});d.status==200&&(h.value=d.data)}catch(d){console.error("Error de red:",d)}finally{i.value=!1}},ne=async()=>{D.value=!0;try{const d=await P({url:"training/list-meta",method:"GET"});d.status==200&&(I.value=d.data)}catch(d){console.error("Error de red:",d)}finally{D.value=!1}};return B(async()=>{await r(),await F(),await ne()}),(d,a)=>{const v=H("a-button"),N=H("a-popconfirm"),U=H("a-spin"),z=H("a-col"),te=H("a-row"),L=H("a-drawer");return b(),E("div",ce,[a[16]||(a[16]=s("div",{class:"capacitaciones-title"},[s("h2",{class:""},"⚙️ Configuraciones")],-1)),t(te,{gutter:24},{default:c(()=>[t(z,{span:8},{default:c(()=>[s("div",re,[a[4]||(a[4]=s("h3",null,"👨‍⚕️ Especialistas ",-1)),t(U,{spinning:f.value},{default:c(()=>[(b(!0),E(j,null,X(w.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",de,[s("div",ue,[s("span",null,O(u.name),1),s("span",pe,O(u.ocupation),1)])]),s("div",null,[t(v,{type:"text",onClick:q=>g("especialistas",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(N,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:q=>_("especialistas",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),a[5]||(a[5]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:A},{icon:c(()=>[t(C(Q))]),default:c(()=>[a[3]||(a[3]=V(" AGREGAR "))]),_:1})])]),_:1}),t(z,{span:8},{default:c(()=>[s("div",fe,[a[7]||(a[7]=s("h3",null,"📐 Dimensiones",-1)),t(U,{spinning:i.value},{default:c(()=>[(b(!0),E(j,null,X(h.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",me,[s("div",ve,[s("span",null,O(u.name),1)])]),s("div",null,[t(v,{type:"text",onClick:q=>g("dimension",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(N,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:q=>_("dimension",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),a[8]||(a[8]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:R},{icon:c(()=>[t(C(Q))]),default:c(()=>[a[6]||(a[6]=V(" AGREGAR "))]),_:1})])]),_:1}),t(z,{span:8},{default:c(()=>[s("div",ge,[a[14]||(a[14]=s("h3",null,"📊 Metas",-1)),t(U,{spinning:i.value},{default:c(()=>[(b(!0),E(j,null,X(I.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",_e,[s("div",he,[s("div",null,[a[9]||(a[9]=s("span",null,"Mes: ",-1)),s("span",Se,O(C($)(u.month).format("MMMM YYYY")),1)]),s("div",null,[a[10]||(a[10]=s("span",null,"Capacitaciones: ",-1)),s("span",ye,O(u.capacitaciones),1)]),s("div",null,[a[11]||(a[11]=s("span",null,"Participantes: ",-1)),s("span",Ce,O(u.participantes),1)]),s("div",null,[a[12]||(a[12]=s("span",null,"Empresas: ",-1)),s("span",be,O(u.empresas),1)])])]),s("div",null,[t(v,{type:"text",onClick:q=>g("metas",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(N,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:q=>_("dimension",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),a[15]||(a[15]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:M},{icon:c(()=>[t(C(Q))]),default:c(()=>[a[13]||(a[13]=V(" AGREGAR "))]),_:1})])]),_:1})]),_:1}),t(L,{title:"ESPECIALISTA",open:p.value,"onUpdate:open":a[0]||(a[0]=u=>p.value=u),placement:"right",width:"500px"},{default:c(()=>[t(oe,{onCloseDraw:y,info:m.value},null,8,["info"])]),_:1},8,["open"]),t(L,{title:"DIMENSIÓN",open:S.value,"onUpdate:open":a[1]||(a[1]=u=>S.value=u),placement:"right",width:"500px"},{default:c(()=>[t(ie,{onCloseDraw:e,info:T.value},null,8,["info"])]),_:1},8,["open"]),t(L,{title:"METAS",open:n.value,"onUpdate:open":a[2]||(a[2]=u=>n.value=u),placement:"right",width:"500px"},{default:c(()=>[t(le,{onCloseDraw:o,info:k.value},null,8,["info"])]),_:1},8,["open"])])}}},Ne=se(Ee,[["__scopeId","data-v-ed2fae40"]]);export{Ne as default};
