import{c as u,A as j,l as _,p as z,r as d,j as B,b as p,o as v,d as y,e as t,q as $,t as f,w as m,h as S,L as q,f as U,F as H,s as J,v as k,x as Q}from"./index-d686466f.js";import"./es-eac34791.js";var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const X=W;function F(l){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(s).filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable}))),r.forEach(function(c){Z(l,c,s[c])})}return l}function Z(l,n,s){return n in l?Object.defineProperty(l,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[n]=s,l}var E=function(n,s){var r=F({},n,s.attrs);return u(j,F({},r,{icon:X}),null)};E.displayName="FilterOutlined";E.inheritAttrs=!1;const K=E;const ee={class:"container-events"},te={class:"schedule"},ae={class:"schedule-header"},se={class:"schedule-date"},ne={class:"schedule-filter"},oe={key:0,class:"event-time"},le={key:1,class:"event-time"},re={class:"event-hour-2"},ie={class:"title"},de={class:"event-description"},pe={__name:"EventosGoogleCalendar",setup(l){_.locale("es");const n=z(q,{style:{fontSize:"24px"},spin:!0}),s=d(null),r=d(null),c=d(new Date),g=d([]),D=d(null),b=d([]),O=d(!1),M=["FERIAS","Ruta Digital","UGGER","UGSE","UGO"],h=d(["FERIAS","Ruta Digital","UGGER","UGSE","UGO"]),R=a=>{if(Array.isArray(a)&&a.length>0&&a[0].id){const e=a[0].id;s.value=e,D.value!==e&&(D.value=e,w(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},G=a=>({ferias:"#e57373",rd:"#f08f00",ugse:"#5f5fc0",uger:"#27a5a3",ugo:"#ffb74d"})[a],x=a=>({ferias:"FERIAS",rd:"RUTA DIGITAL",ugse:"UGSE",uger:"UGGER",ugo:"UGO"})[a],V=async()=>{s.value&&await w(s.value)},A=async(a={date:_().format("YYYY-MM-DD")})=>{const e=_(a.date).format("YYYY-MM-DD");r.value=_(a.date).format("dddd DD [de] MMMM [de] YYYY"),g.value.length>0&&g.value[0].dates&&(g.value[0].dates=a.date);try{O.value=!0;const i=await U({url:`public/events-day/${e}`,method:"GET",params:h.value});i.data&&Array.isArray(i.data)?b.value=i.data:console.warn("⚠️ Respuesta inesperada de la API:",i)}catch(i){console.error("❌ Error al obtener eventos:",i)}finally{O.value=!1}},w=async a=>{try{const e=await U({url:`public/dots/${a}`,method:"GET",params:h.value});e.data&&Array.isArray(e.data)?g.value=[{key:"today",highlight:"",dates:[new Date]},...e.data]:console.warn("⚠️ Respuesta de API inesperada:",e)}catch(e){console.error("❌ Error al obtener eventos:",e)}},Y=async()=>{await A()};return B(()=>{Y()}),(a,e)=>{const i=p("VCalendar"),C=p("a-checkbox-group"),I=p("a-menu"),L=p("a-dropdown"),N=p("a-empty"),P=p("a-spin");return v(),y("section",ee,[e[7]||(e[7]=t("h1",{class:"title-pc"},"CALENDARIO 2025",-1)),t("div",null,[u(i,{ref:"calendar",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),attributes:g.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":R,onDayclick:A},null,8,["modelValue","attributes"]),e[2]||(e[2]=$('<div class="wrapper-dot"><div><i class="dotend dot-ferias"></i> <span>Ferias</span></div><div><i class="dotend dot-rd"></i> <span>Ruta Digital</span></div><div><i class="dotend dot-ugo"></i> <span>UGO</span></div><div><i class="dotend dot-ugger"></i> <span>UGGER</span></div><div><i class="dotend dot-ugse"></i> <span>UGSE</span></div></div>',1))]),t("div",te,[t("div",ae,[e[3]||(e[3]=t("h4",null,"EVENTOS",-1)),t("span",se,f(r.value),1),u(L,{trigger:["click"]},{overlay:m(()=>[u(I,null,{default:m(()=>[t("div",ne,[u(C,{value:h.value,"onUpdate:value":e[1]||(e[1]=o=>h.value=o),name:"checkboxgroup",options:M,onChange:V},null,8,["value"])])]),_:1})]),default:m(()=>[t("span",null,[u(S(K))])]),_:1})]),u(P,{indicator:S(n),spinning:O.value},{default:m(()=>[b.value.length>0?(v(!0),y(H,{key:0},J(b.value,(o,T)=>(v(),y("div",{key:T,class:"event"},[o.allDay==1?(v(),y("div",oe,e[4]||(e[4]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))):(v(),y("div",le,[t("div",null,f(o.start),1),e[5]||(e[5]=t("br",null,null,-1)),t("div",re,f(o.end),1)])),t("div",{class:"schedule-details",style:k({"border-color":G(o.office)})},[t("small",{class:"schedule-tag",style:k({"background-color":G(o.office)})},f(x(o.office)),5),t("div",ie,f(o.title),1),t("div",de,f(o.description),1)],4)]))),128)):(v(),Q(N,{key:1,class:"no-events"},{description:m(()=>e[6]||(e[6]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])])])}}};export{pe as default};
