import{c as n,A as ne,p as v,a8 as N,r as w,G as oe,a3 as se,k as re,b as c,o,d as h,e as l,y as b,w as p,i as a,a4 as ie,t as _,j as x,z as m,s as I,aa as L,F as E,L as ce,O as de}from"./index-d115c7db.js";import{_ as ue}from"./icoexcel-1b303edf.js";import{u as pe}from"./selectes-2607e945.js";import"./es-c9a5e1ac.js";import{M as me}from"./MoreOutlined-85620ae1.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const ge=fe;function B(r){for(var d=1;d<arguments.length;d++){var i=arguments[d]!=null?Object(arguments[d]):{},e=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable}))),e.forEach(function(f){he(r,f,i[f])})}return r}function he(r,d,i){return d in r?Object.defineProperty(r,d,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[d]=i,r}var A=function(d,i){var e=B({},d,i.attrs);return n(ne,B({},e,{icon:ge}),null)};A.displayName="SyncOutlined";A.inheritAttrs=!1;const ve=A;const _e={class:"table-component"},be={class:"title-produce"},ye={key:1,class:"title-produce"},we={class:"table-custom-header"},Se={class:"table-filters"},ke={class:"table-filters"},Oe={key:0,class:"filter-year"},Ce={key:1,class:"filter-offices"},ze={key:2,class:"filter-range-date"},De={key:3,class:"filter-asesor"},Ne={key:4,class:"filter-asesor"},xe={class:"filter-search"},Le={key:1},Ee={class:"paginator"},Ae="DD/MM/YYYY",Te={__name:"TableComponent",props:["title","bread","routeBack","btnUpdate","btnImport","permisos","new","textNuevo","columns","search","dataSource","total","placeholderSearch","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator","handleCallFetchData"],setup(r,{emit:d}){v.locale("es");const i=pe(),e=r,f=d;JSON.parse(localStorage.getItem("role")),i.$patch({cities:i.cities}),e.cityList&&i.fetchCities();const u=N("search"),F=N("loading"),T=N("loadingFile"),S=w(window.innerHeight-100),k=w({page:1}),R=w(1200),j=w([{label:"Últimos 7 días",value:[v().add(-7,"d"),v()]},{label:"Últimos 14 días",value:[v().add(-14,"d"),v()]},{label:"Último mes",value:[v().add(-30,"d"),v()]}]),M=w([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),Y=oe(()=>g=>(k.value.page-1)*e.pageSize+g+1),$=()=>{f("handleCallFetchData")},G=()=>{f("handleNew")},H=async()=>{f("handleDownloadExcel")},V=()=>{k.value.page=1,f("handleSearch",!0)},J=g=>{k.value.page=g,f("handlePaginator",g)},O=()=>{if(e.heightTable)return S.value=window.innerHeight-e.heightTable;S.value=window.innerHeight-310},P=(g,t)=>{const C=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(C)};return se(()=>{window.removeEventListener("resize",O)}),re(()=>{window.addEventListener("resize",O),O()}),(g,t)=>{const C=c("router-link"),z=c("a-breadcrumb-item"),X=c("a-breadcrumb"),y=c("a-button"),q=c("a-date-picker"),D=c("a-select"),Q=c("a-range-picker"),W=c("a-input"),Z=c("a-menu"),K=c("a-dropdown"),ee=c("a-table"),te=c("a-tag"),ae=c("a-pagination");return o(),h(E,null,[l("div",_e,[r.bread?(o(),b(X,{key:0},{default:p(()=>[n(z,null,{default:p(()=>[n(C,{to:r.routeBack},{default:p(()=>[n(a(ie)),t[7]||(t[7]=l("span",{class:"fs-13"}," Atrás",-1))]),_:1},8,["to"])]),_:1}),n(z,null,{default:p(()=>[l("h3",be,_(e.title),1)]),_:1})]),_:1})):(o(),h("h3",ye,_(e.title),1)),l("div",we,[l("div",Se,[e.new?(o(),b(y,{key:0,type:"primary",onClick:G},{default:p(()=>[x(_(e.textNuevo),1)]),_:1})):m("",!0),r.downloadExcel?(o(),b(y,{key:1,class:"btn-excel",onClick:H,loading:a(T),type:"primary"},{default:p(()=>t[8]||(t[8]=[l("img",{width:"20",src:ue},null,-1)])),_:1},8,["loading"])):m("",!0),r.btnUpdate?(o(),b(y,{key:2,icon:I(a(ve)),onClick:$},null,8,["icon"])):m("",!0)]),l("div",ke,[L(g.$slots,"header"),e.searchYear?(o(),h("div",Oe,[t[9]||(t[9]=l("small",null,"AÑO",-1)),n(q,{allowClear:!1,value:a(u).year,"onUpdate:value":t[0]||(t[0]=s=>a(u).year=s),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):m("",!0),e.tipooficina?(o(),h("div",Ce,[t[10]||(t[10]=l("small",null,"OFICINA",-1)),n(D,{value:a(u).offices,"onUpdate:value":t[1]||(t[1]=s=>a(u).offices=s),options:M.value},null,8,["value","options"])])):m("",!0),e.rangeDate?(o(),h("div",ze,[t[11]||(t[11]=l("small",null,"POR RANGO DE FECHAS",-1)),n(Q,{value:a(u).range,"onUpdate:value":t[2]||(t[2]=s=>a(u).range=s),presets:j.value,format:Ae},null,8,["value","presets"])])):m("",!0),e.cityList?(o(),h("div",De,[t[12]||(t[12]=l("small",null,"POR REGIÓN",-1)),n(D,{allowClear:!0,value:a(u).city_id,"onUpdate:value":t[3]||(t[3]=s=>a(u).city_id=s),placeholder:"Selecciona región","show-search":"",options:a(i).cities,"filter-option":P},null,8,["value","options"])])):m("",!0),e.othersList?(o(),h("div",Ne,[t[13]||(t[13]=l("small",null,"ORDENAR POR",-1)),n(D,{allowClear:!0,value:a(u).orderby,"onUpdate:value":t[4]||(t[4]=s=>a(u).orderby=s),placeholder:"Filtrador por:","show-search":"",options:e.othersList,"filter-option":P},null,8,["value","options"])])):m("",!0),e.placeholderSearch?(o(),h(E,{key:5},[l("div",xe,[l("small",null,_(e.titleSearch),1),n(W,{value:a(u).name,"onUpdate:value":t[5]||(t[5]=s=>a(u).name=s),placeholder:e.placeholderSearch},null,8,["value","placeholder"])]),n(y,{class:"filter-search-btn",type:"primary",onClick:V},{default:p(()=>[a(F)?(o(),b(a(ce),{key:0})):(o(),h("span",Le,"BUSCAR"))]),_:1})],64)):m("",!0)])]),n(ee,{bordered:"",scroll:{x:R.value,y:S.value},class:"table-pnte",columns:e==null?void 0:e.columns,"data-source":e==null?void 0:e.dataSource,pagination:!1,loading:a(F),size:"small"},{bodyCell:p(({column:s,record:U,index:le})=>[s.dataIndex=="idx"?(o(),h(E,{key:0},[x(_(Y.value(le)),1)],64)):m("",!0),L(g.$slots,"data-cell",{column:s,record:U}),s.dataIndex=="actions"?(o(),b(K,{key:1,trigger:["click"]},{overlay:p(()=>[n(Z,null,{default:p(()=>[L(g.$slots,"custom-options",{record:U})]),_:2},1024)]),default:p(()=>[l("a",{class:"ant-dropdown-link",onClick:t[6]||(t[6]=de(()=>{},["prevent"]))},[n(y,{shape:"circle",icon:I(a(me)),size:"small"},null,8,["icon"])])]),_:2},1024)):m("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),l("div",Ee,[l("span",null,[n(te,{color:"blue"},{default:p(()=>[l("b",null,_(e==null?void 0:e.total),1)]),_:1}),x(_(e.nameTotal),1)]),n(ae,{size:"small",total:e==null?void 0:e.total,pageSize:e.pageSize,onChange:J,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Te as _};
