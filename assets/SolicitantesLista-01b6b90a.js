import{r as c,H as le,v as ie,k as se,b as s,o as l,d as u,e as _,c as i,h as k,w as r,F as p,y as E,i as m,t as o,s as d,q as V,Q as re,I as de,O as ce,W as ue,m as pe}from"./index-097ff9a2.js";import{S as me}from"./DrawerSolicitante.componente-919773f5.js";import{u as _e}from"./selectes-b6ada1fc.js";import{M as ge}from"./MoreOutlined-45b0f570.js";import"./es-91704f6e.js";import"./_plugin-vue_export-helper-c27b6911.js";const ve=_("h3",null,"SOLICITANTES",-1),fe={class:"filters-notary"},he=_("div",null,null,-1),we=["onClick"],xe=_("a",null,"Eliminar",-1),Ie={class:"paginator"},B=20,be={__name:"SolicitantesLista",setup(ye){JSON.parse(localStorage.getItem("profile"));const f=_e();f.$patch({cities:f.cities}),f.fetchCities();const S=c(window.innerHeight-100),U=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",align:"center",width:120},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"DEPARTAMENTO",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:260},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],O=c(0),g=c({page:0}),$=c(1200),x=c([]),v=c(!1),h=c(!1),D=c(null),I=c(null),F=e=>{g.value.page=e,w()},G=async()=>{try{v.value=!0;const e=await E({url:`notary/list/${I.value}`,method:"GET"});x.value=e.data}catch(e){console.error("Error de red:",e)}finally{v.value=!1}},H=(e,t)=>{const C=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(C)},y=()=>{S.value=window.innerHeight-280},q=e=>{console.log("open",e)},Q=()=>{w(),h.value=!1},J=async e=>{try{const t=await E({url:`person/delete/${e.id}`,method:"DELETE"});t.status==500?ue.warning({title:"Aviso",content:t.message}):(w(),pe.success(t.message))}catch(t){console.error("Error de red:",t)}},W=e=>{D.value=e,h.value=!0},X=le(()=>e=>((g.value.page==0?1:g.value.page)-1)*B+e+1),w=async()=>{try{v.value=!0;let e=g.value.page==0?"":g.value;const t=await E({url:"person/list",method:"GET",params:e});x.value=t.data,O.value=t.total}catch(e){console.error("Error de red:",e)}finally{v.value=!1}};return ie(()=>{window.removeEventListener("resize",y)}),se(()=>{window.addEventListener("resize",y),y(),w()}),(e,t)=>{const C=s("a-select"),b=s("a-tag"),Y=s("a-button"),N=s("a-menu-item"),j=s("a-popconfirm"),K=s("a-menu"),Z=s("a-dropdown"),ee=s("a-table"),te=s("a-pagination"),ae=s("a-drawer");return l(),u(p,null,[_("div",null,[ve,_("div",fe,[he,_("div",null,[i(C,{placeholder:"Buscar por Provincia",style:{width:"200px"},value:I.value,"onUpdate:value":t[0]||(t[0]=a=>I.value=a),"show-search":"",options:k(f).cities,"filter-option":H,onChange:G},null,8,["value","options"])])]),i(ee,{bordered:"",scroll:{x:$.value,y:S.value},class:"ant-table-striped",columns:U,"data-source":x.value,pagination:!1,loading:v.value,size:"small"},{bodyCell:r(({column:a,record:n,index:ne})=>{var L,z,A,T,M,R,P;return[a.dataIndex=="idx"?(l(),u(p,{key:0},[m(o(X.value(ne)),1)],64)):d("",!0),a.dataIndex=="tdocument"?(l(),u(p,{key:1},[m(o(n.typedocument.name),1)],64)):d("",!0),a.dataIndex=="apellidos"?(l(),u(p,{key:2},[m(o(n.lastname)+" "+o(n.middlename),1)],64)):d("",!0),a.dataIndex=="city"?(l(),u(p,{key:3},[m(o((L=n.city)==null?void 0:L.name),1)],64)):d("",!0),a.dataIndex=="province"?(l(),u(p,{key:4},[m(o((z=n.province)==null?void 0:z.name),1)],64)):d("",!0),a.dataIndex=="district"?(l(),u(p,{key:5},[m(o((A=n.district)==null?void 0:A.name),1)],64)):d("",!0),a.dataIndex=="gender"?(l(),u(p,{key:6},[m(o((T=n.gender)==null?void 0:T.name),1)],64)):d("",!0),a.dataIndex=="sickx"?(l(),V(b,{key:7,color:n.sick=="no"?"blue":"pink"},{default:r(()=>[m(o(n.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):d("",!0),a.dataIndex=="registerby"?(l(),u(p,{key:8},[m(o((M=n.user[0])==null?void 0:M.profile.name)+" "+o((R=n.user[0])==null?void 0:R.profile.lastname)+" "+o((P=n.user[0])==null?void 0:P.profile.middlename),1)],64)):d("",!0),a.dataIndex=="actions"?(l(),V(Z,{key:9,trigger:["click"]},{overlay:r(()=>[i(K,null,{default:r(()=>[i(N,null,{default:r(()=>[_("a",{onClick:oe=>W(n)},"Editar",8,we)]),_:2},1024),i(N,null,{default:r(()=>[i(j,{title:"¿Seguro de eliminar?",onConfirm:oe=>J(n)},{icon:r(()=>[i(k(re),{style:{color:"red"}})]),default:r(()=>[xe]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:r(()=>[_("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=de(()=>{},["prevent"]))},[i(Y,{shape:"circle",icon:ce(k(ge)),size:"small"},null,8,["icon"])])]),_:2},1024)):d("",!0)]}),_:1},8,["scroll","data-source","loading"])]),_("div",Ie,[i(te,{size:"small",total:O.value,pageSize:B,onChange:F,showSizeChanger:!1},null,8,["total"])]),i(ae,{open:h.value,"onUpdate:open":t[2]||(t[2]=a=>h.value=a),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:q},{default:r(()=>[i(me,{onCloseDraw:Q,updateValues:D.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}};export{be as default};
