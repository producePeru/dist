import{_ as H}from"./TableComponent-32216e6f.js";import{r as l,u as M,a as F,p as v,k as P,X as f,b as c,o as g,d as U,c as r,w as n,m as z,y as x,i as j,z as y,j as I,t as L,e as N}from"./index-53150821.js";import{_ as q}from"./DrawMP-7a27b565.js";import"./downloadExcel-ecb7bcb4.js";import"./es-03a6d968.js";import{g as C}from"./publicInscripcion-ebc9ecb9.js";import{G as J}from"./GlobalOutlined-afbd0b72.js";import"./icoexcel-1b303edf.js";import"./selectes-cdb60cdc.js";import"./SyncOutlined-ff6f5519.js";import"./MoreOutlined-b8f3f9c3.js";import"./FormComponent-d65be6f0.js";import"./quill.snow-01741efa.js";import"./UpImage-ee229c52.js";import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"layout-content"},X=["onClick"],Q=["onClick"],fe={__name:"mp-index",setup(W){JSON.parse(localStorage.getItem("role"));const h=l([]),E=l(0),w=l(150),i=l(!1);l(!1),M();const m=l(!1),u=l(null),k=l(!1),t=F({year:v("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:3}),S=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK",dataIndex:"link",width:70,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÃ“N",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],D=e=>{u.value=e,i.value=!0},T=()=>{s(),i.value=!1},O=()=>{u.value=null,i.value=!0},Y=async()=>{},R=async e=>{t.page=e,await s()},V=async e=>{e&&(t.page=1,await s())},b=e=>{const a=`${C()}/mujer-produce/${e}`;window.open(a,"_blank")},A=e=>{const a=`${C()}/mujer-produce-asistencia/${e}`;window.open(a,"_blank")},s=async()=>{try{m.value=!0;const e={page:t.page};t.year&&(e.year=v(t.year).format("YYYY")),t.range&&(e.startDate=t.range[0].format("YYYY/MM/DD"),e.endDate=t.range[1].format("YYYY/MM/DD")),t.name&&(e.name=t.name),t.orderby&&(e.orderby=t.orderby);const a=await z({url:"mp/index-events",method:"GET",params:e}),{data:d}=a;h.value=d.data,E.value=d.total,w.value=d.per_page}catch(e){console.error("Error de red:",e)}finally{m.value=!1}};return P(async()=>{await s()}),f("search",t),f("loading",m),f("loadingFile",k),(e,a)=>{const d=c("a-button"),$=c("a-tag"),_=c("a-menu-item"),G=c("router-link"),B=c("a-drawer");return g(),U("div",K,[r(H,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:S,titleSearch:"BUSCAR POR EVENTO",pageSize:w.value,nameTotal:"Capacitaciones",dataSource:h.value,total:E.value,btnUpdate:!0,onHandleNew:O,onHandleCallFetchData:s,onHandleDownloadExcel:Y,onHandleSearch:V,onHandlePaginator:R},{"data-cell":n(({column:o,record:p})=>[o.dataIndex=="link"?(g(),x(d,{key:0,onClick:Z=>b(p.slug),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:n(()=>[r(j(J))]),_:2},1032,["onClick"])):y("",!0),o.dataIndex=="registered"?(g(),x($,{key:1,color:"purple"},{default:n(()=>[I(L(p.registered),1)]),_:2},1024)):y("",!0)]),"custom-options":n(({record:o})=>[r(_,null,{default:n(()=>[N("span",{onClick:p=>A(o.slug)}," Asistencia ",8,X)]),_:2},1024),r(_,null,{default:n(()=>[r(G,{to:`/admin/mp/inscritos/${o.slug}`},{default:n(()=>a[1]||(a[1]=[I(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),r(_,null,{default:n(()=>[N("a",{onClick:p=>D(o)},"Editar",8,Q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),r(B,{open:i.value,"onUpdate:open":a[0]||(a[0]=o=>i.value=o),title:u.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:n(()=>[r(q,{onCloseDraw:T,info:u.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{fe as default};
