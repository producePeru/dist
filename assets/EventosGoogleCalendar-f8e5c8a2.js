import{l as y,a as I,p as q,r as c,j as J,b as _,o as r,d as i,e as t,c as l,t as o,w as h,h as v,L as K,f as U,F as Q,q as W,s as O,i as A,v as X,x as f,y as Z,z as ee}from"./index-8b66b835.js";import"./es-db8cee6f.js";import{F as te,C as ae}from"./FilterOutlined-ddaf20dc.js";import{H as se}from"./HomeOutlined-f1b22fa3.js";import{T as ne}from"./TeamOutlined-bb1a0c3b.js";import{E as oe}from"./EnvironmentOutlined-8fc3ebbb.js";import{U as le}from"./UserOutlined-687e11c4.js";const re={class:"container-events"},ie={class:"schedule"},de={class:"schedule-header"},ue={class:"schedule-date"},ce={class:"schedule-filter"},pe={key:0,class:"event-time"},me={key:1,class:"event-time"},ve={class:"event-hour-2"},_e={class:"title"},fe={class:"event-description"},ye=["onClick"],he={class:"modal-calendar-detail"},ge={style:{"line-height":"1.3","margin-bottom":".5rem"}},ke=["innerHTML"],Me={key:0},De={style:{"margin-left":".5rem"}},be={key:1},Ce={style:{"margin-left":".5rem"}},Ee={key:2},we={style:{"margin-left":".5rem"}},Oe={style:{"margin-left":".5rem"}},Ae={key:0},Te={style:{"margin-left":".5rem"}},Ye={key:3},xe={style:{"margin-left":".5rem"}},Ve={key:4},Se=["href"],Ue={key:5},Le=["innerHTML"],je={__name:"EventosGoogleCalendar",setup(Ne){y.locale("es");const k=I({value1:["ugo","ugse"]}),L=["ugo","ugse"],N=q(K,{style:{fontSize:"24px"},spin:!0});c(!1);const s=c(null),M=c(!1),D=c(null),T=c(null),Y=c(new Date),g=c([]),x=c(null),b=c([]),C=c(!1),F=a=>{s.value=a,M.value=!0},H=a=>{if(Array.isArray(a)&&a.length>0&&a[0].id){const e=a[0].id;D.value=e,x.value!==e&&(x.value=e,S(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},E=a=>({1:"#808080",2:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",6:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[a],V=a=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[a],G=a=>{if(!Array.isArray(a)||a.length===0)return"";const e=y(a[0]).locale("es").format("DD [de] MMMM"),d=a.length>1?y(a[a.length-1]).locale("es").format("DD [de] MMMM"):null;return d?`Desde: ${e} Hasta: ${d}`:`${e}`},R=async()=>{D.value&&(await w("nodata"),await S(D.value))},w=async(a={date:y().format("YYYY-MM-DD")},e)=>{C.value=!0;const d=y(a.date).format("YYYY-MM-DD");T.value=y(a.date).format("dddd DD [de] MMMM [de] YYYY"),e!="nodata"&&g.value.length>0&&g.value[0].dates&&(g.value[0].dates=a.date);const p={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let m=[];k.value1.forEach(u=>{p[u]&&m.push(...p[u])}),m=[...new Set(m)];try{const u=await U({url:`pnte/events-day/${d}`,method:"GET",params:m});u.data&&Array.isArray(u.data)?b.value=u.data:console.warn("⚠️ Respuesta inesperada de la API:",u)}catch(u){console.error("❌ Error al obtener eventos:",u)}finally{C.value=!1}},S=async a=>{try{const e={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let d=[];k.value1.forEach(m=>{e[m]&&d.push(...e[m])}),d=[...new Set(d)];const p=await U({url:`pnte/dots/${a}`,method:"GET",params:d});p.data&&Array.isArray(p.data)?g.value=[{key:"today",highlight:"",dates:[new Date]},...p.data]:console.warn("⚠️ Respuesta de API inesperada:",p)}catch(e){console.error("❌ Error al obtener eventos:",e)}},$=async()=>{await w()};return J(()=>{$()}),(a,e)=>{const d=_("VCalendar"),p=_("a-checkbox-group"),m=_("a-menu"),u=_("a-dropdown"),z=_("a-empty"),P=_("a-spin"),B=_("a-modal");return r(),i("section",re,[e[10]||(e[10]=t("h1",{class:"title-pc"},"CALENDARIO 2025",-1)),t("div",null,[l(d,{ref:"calendar",modelValue:Y.value,"onUpdate:modelValue":e[0]||(e[0]=n=>Y.value=n),attributes:g.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":H,onDayclick:w},null,8,["modelValue","attributes"])]),t("div",ie,[t("div",de,[e[3]||(e[3]=t("h4",null,"EVENTOS",-1)),t("span",ue,o(T.value),1),l(u,{trigger:["click"]},{overlay:h(()=>[l(m,null,{default:h(()=>[t("div",ce,[l(p,{value:k.value1,"onUpdate:value":e[1]||(e[1]=n=>k.value1=n),options:L,onChange:R},null,8,["value"])])]),_:1})]),default:h(()=>[t("span",null,[l(v(te))])]),_:1})]),l(P,{indicator:v(N),spinning:C.value},{default:h(()=>[b.value.length>0?(r(!0),i(Q,{key:0},W(b.value,(n,j)=>(r(),i("div",{key:j,class:"event"},[n.start?(r(),i("div",me,[t("div",null,o(n.start),1),e[5]||(e[5]=t("br",null,null,-1)),t("div",ve,o(n.end),1)])):(r(),i("div",pe,e[4]||(e[4]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:O({"border-color":E(n.id_pnte)})},[t("small",{class:"schedule-tag",style:O({"background-color":E(n.id_pnte)})},o(V(n.id_pnte)),5),t("div",_e,o(n.title),1),t("div",fe,[A(o(n.descriptionparse)+" ",1),t("span",{onClick:Fe=>F(n),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,ye)])],4)]))),128)):(r(),X(z,{key:1,class:"no-events"},{description:h(()=>e[6]||(e[6]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),l(B,{open:M.value,"onUpdate:open":e[2]||(e[2]=n=>M.value=n),title:"",footer:""},{default:h(()=>[t("div",he,[t("div",null,[t("h3",ge,o(s.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:O({"background-color":E(s.value.id_pnte)})},o(V(s.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:s.value.descripionAll},null,8,ke),s.value.organiza?(r(),i("div",Me,[l(v(se)),t("span",De,o(s.value.organiza),1)])):f("",!0),s.value.gps?(r(),i("div",be,[l(v(oe)),t("span",Ce,o(s.value.gps),1)])):f("",!0),s.value.numMypes?(r(),i("div",Ee,[t("span",null,[l(v(ne))]),t("span",we,o(s.value.numMypes),1)])):f("",!0),t("div",null,[t("div",null,[l(v(Z)),t("span",Oe,o(G(s.value.dates)),1)]),s.value.start?(r(),i("div",Ae,[l(v(ee)),t("span",Te,o(s.value.start),1),e[7]||(e[7]=A(" - ")),t("span",null,o(s.value.end),1)])):f("",!0)]),s.value.nameUser?(r(),i("div",Ye,[l(v(le)),t("span",xe,[A(o(s.value.nameUser)+" ",1),e[8]||(e[8]=t("small",null,"(Representante)",-1))])])):f("",!0),s.value.link?(r(),i("div",Ve,[l(v(ae)),t("a",{style:{"margin-left":".5rem"},href:s.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,Se)])):f("",!0),s.value.resultado?(r(),i("div",Ue,[e[9]||(e[9]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:s.value.resultado},null,8,Le)])):f("",!0)])]),_:1},8,["open"])])}}};export{je as default};
