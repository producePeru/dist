import{K as n,g as o,V as i}from"./index-6461f108.js";const l="https://apituempresa.soporte-pnte.com/api/",c="http://127.0.0.1:8000/api/",u=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?c:l;function d(){const t=(localStorage.getItem("token")||o.get("token")||"").replace(/"/g,"");return t?`Bearer ${t}`:""}const r=n.create({baseURL:u,timeout:2e4});r.interceptors.request.use(t=>{t.headers=t.headers||{};const a=d();return a&&(t.headers.Authorization=a),t.headers["Content-Type"]="application/json",t});const m=i("businessman",{state:()=>({loading:!1,loadingDocument:!1,loadingReniec:!1,error:null}),actions:{async create(t){var a,s;this.loading=!0,this.error=null;try{const{data:e}=await r.post("/businessman/register-new-businessman",t);return e}catch(e){throw this.error=((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"Error al crear empresario",e}finally{this.loading=!1}},async get(t){var a,s;this.loading=!0,this.error=null;try{const{data:e}=await r.get(`/businessman/get-businessman-data/${t.documentnumber}`);return e}catch(e){throw this.error=((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"Error al obtener información",e}finally{this.loading=!1}},async reniec(t){var a,s;this.loading=!0,this.error=null;try{const{data:e}=await r.post(`/api/consult-businessman-dni/${t.documentnumber}`);return e}catch(e){throw this.error=((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"Error al obtener información",e}finally{this.loading=!1}}}});export{m as u};
