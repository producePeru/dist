import{i as d,r as X,n as Y,a as o,o as n,b as w,g as f,c as a,w as e,F as x,q as z,m as U,d as E,N as H,e as s,j as u,s as i,l as J,I as K}from"./index-2e532d04.js";import{M as Q}from"./MoreOutlined-04b1ff0f.js";const W={id:"components-table-demo-size"},Z=f("h3",null,"Lista de usuarios",-1),ee={class:"wrapper-search"},ae=f("span",null,null,-1),te={class:"paginator"},re={__name:"ListaUsuarios",setup(oe){const y=d([]),g=d(!1),N=d(1e3),A=d("60vh"),k=d(""),v=d(!1),b=d(0),C=d(null),p=X({password:""}),I=d({page:1}),B=[{title:"Nombres",dataIndex:"nombres",fixed:"left",width:180},{title:"Apellidos",dataIndex:"apellidos",fixed:"left",width:180},{title:"N° documento",dataIndex:"nro_documento",align:"center"},{title:"Usuario",dataIndex:"usuario",align:"center"},{title:"Correo",dataIndex:"correo",width:180},{title:"Celular",dataIndex:"celular",align:"center"},{title:"Tipo de usuario",dataIndex:"tipo_usuario",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"",dataIndex:"actions",width:"55px"}],M=t=>{console.log(t)},O=t=>{I.value.page=t,S()},S=async()=>{try{g.value=!0;const t=await z({url:"/users",method:"GET",params:I.value});y.value=t.data,b.value=t.total}catch(t){console.error("Error de red:",t)}finally{g.value=!1}},T=t=>{v.value=!0,C.value=t},V=async()=>{if(!p.password)return U.error("El campo contraseña esta vacío");const t=C.value,l={new_password:p.password},m=await z({url:`/user/change-password/${t}`,method:"POST",data:l});m.message&&(p.password="",U.success(m.message)),v.value=!1};return Y(S),(t,l)=>{const m=o("a-button"),D=o("a-input-search"),c=o("a-tag"),h=o("a-menu-item"),L=o("a-menu"),P=o("a-dropdown"),j=o("a-table"),q=o("a-pagination"),F=o("a-input"),$=o("a-form-item"),G=o("a-form"),R=o("a-modal");return n(),w(x,null,[f("div",W,[Z,f("div",ee,[a(m,null,{icon:e(()=>[a(E(H))]),default:e(()=>[s(" Exportar en excel ")]),_:1}),ae,a(D,{value:k.value,"onUpdate:value":l[0]||(l[0]=r=>k.value=r),placeholder:"Buscar","enter-button":"",onSearch:M},null,8,["value"])]),a(j,{bordered:"",class:"ant-table-striped",scroll:{x:N.value,y:A.value},columns:B,"data-source":y.value,pagination:!1,loading:g.value,size:"small"},{bodyCell:e(({column:r,record:_})=>[r.dataIndex=="tipo_usuario"?(n(),w(x,{key:0},[_.tipo_usuario===1?(n(),u(c,{key:0,bordered:!1,color:"processing"},{default:e(()=>[s("Administrador")]),_:1})):i("",!0),_.tipo_usuario===2?(n(),u(c,{key:1,bordered:!1,color:"magenta"},{default:e(()=>[s("Común")]),_:1})):i("",!0),_.tipo_usuario===3?(n(),u(c,{key:2,bordered:!1,color:"purple"},{default:e(()=>[s("3")]),_:1})):i("",!0),_.tipo_usuario===4?(n(),u(c,{key:3,bordered:!1,color:"warning"},{default:e(()=>[s("4")]),_:1})):i("",!0),_.tipo_usuario===5?(n(),u(c,{key:4,bordered:!1,color:"cyan"},{default:e(()=>[s("5")]),_:1})):i("",!0)],64)):i("",!0),r.dataIndex=="estado"?(n(),w(x,{key:1},[_.estado===1?(n(),u(c,{key:0,color:"success"},{default:e(()=>[s("Activo")]),_:1})):(n(),u(c,{key:1,color:"error"},{default:e(()=>[s("Inactivo")]),_:1}))],64)):i("",!0),r.dataIndex=="actions"?(n(),u(P,{key:2,trigger:["click"]},{overlay:e(()=>[a(L,null,{default:e(()=>[a(h,{key:"1"},{default:e(()=>[s("Editar")]),_:1}),a(h,{key:"2"},{default:e(()=>[s("Dar de baja / Activar")]),_:1}),a(h,{key:"3",onClick:ne=>T(_.idUsuario)},{default:e(()=>[s(" Actualizar clave")]),_:2},1032,["onClick"])]),_:2},1024)]),default:e(()=>[a(m,{onClick:l[1]||(l[1]=J(()=>{},["prevent"])),shape:"circle",size:"small",icon:K(E(Q))},null,8,["icon"])]),_:2},1024)):i("",!0)]),_:1},8,["scroll","data-source","loading"])]),f("div",te,[a(q,{size:"small",total:b.value,pageSize:20,onChange:O,showSizeChanger:!1},null,8,["total"])]),a(R,{"ok-text":"Cambiar contraseña",open:v.value,"onUpdate:open":l[3]||(l[3]=r=>v.value=r),title:"Actualizar contraseña",onOk:V},{default:e(()=>[a(G,{layout:"vertical",model:p,name:"basic",autocomplete:"off"},{default:e(()=>[a($,{label:"Contraseña",name:"password"},{default:e(()=>[a(F,{value:p.password,"onUpdate:value":l[2]||(l[2]=r=>p.password=r)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}};export{re as default};
