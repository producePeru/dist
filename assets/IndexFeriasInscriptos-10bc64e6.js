import{l as N,E as ie,g as ve,r as m,a as le,G as xe,Z as Ce,j as ee,b as A,o as n,d as s,e as y,c as u,w as d,h as $,a7 as Se,i as F,t as h,F as x,y as i,x as b,a2 as de,O as ke,q as Re,R as j,m as ne,K as Ne,X as Oe,a6 as K,u as Be}from"./index-3424cf22.js";import{_ as De}from"./icoexcel-1b303edf.js";import"./es-781ffe03.js";import{M as Te}from"./MoreOutlined-0727969d.js";import{_ as Ye}from"./TableComponent-6f200c77.js";import{d as Ue}from"./downloadExcel-b2be83f5.js";import{_ as Le}from"./FormComponent-5eba6322.js";import{u as Pe}from"./selectes-8d4adf57.js";import"./quill.snow-a51d61e3.js";const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUfSURBVFiF5ZdLbBxVFoa/U1W3qrp6HNt5GSJaxCGJldiJBAI0BA8EJWEGDSxYzA6BkJCAgFjMII00sOCxYAUbHhnxmmjY8RCw4CESR0gkbEZKhGyHsXkkwiiQBEI7trvreQ+LJu6201ZwQlacVdW9p+7/65xzz/kLfu8mi/7i9dddlm7oB2c9YpejZCjfI0ywf2CEx8ReHAJ7hrcizj2CvV2RqJ2LI1StlbdRfYWbBw78NgT2jfaLtc+psnWZcfPLQt8rucLB0zGZNlyMwFUdIXWrfBun+Y9Z4Yk472lRPMyfN////AkMjd4tyr+7jSMD5cB0ei65wv7qDL4jBE7j89QqiVUGu8p4AtW8YGQmzqqZtYrcwfb+NxeCcBYE3zv6L1RfXR16/pYlken0XABGpmNyVa7pKOEgOAhXd5QoVBmeiQHo8lyuX1I2q0MToPYNhkYfXlwEhkbuAV4MRSS2Spfn0uN7GBFGZxKu6yyxzLgcmmoAXtkRcior+HSyTn/ZJ1M4nuZU84LQEWKrivI3dgy8dW4Ce4Y3iOMcWlsyQV8p4Ic857uk4GSaUbOKIIQOhK5QKxpFELlCXCixBUWJHGFlYLjE91juuYzVE76spYnibmb7hvFWOO8sRg67uj3H6Yt8BFhhPFYYj6/rwngt5cqOkFSVeqEcsxkAK42hFAq+CIemY3pLPmtK/uyZfZHPD1nhVLPiaYXbWvHm1sDe0T+pyo0by4GRluAoytdxxpqST4/vUQkM6yOfTs+l03NZH/lUAkOP77Em9PmqntLaDARhYzkwqnorQ8Nb2qZAjz7+1xcm1z55SsubK6FxW51mCstEkrG25ONJk9ixJAdgVdAMZK7Kl7WMSugRxV8gFLN7E3FWLNPjB+8PPnpMrvn8/VkCevSJncDz89NxoZacfIdAawvs6k65dmxXIwXKX35r8HOb3AJnakAwFxNKO28g3/Au+brdaHD5mWXTJNDqHK4l77kPNZegbjd5z05stAnEJV9xN8WSbYuEF/LKk2jQi5avwq76+5zdNp1Qf1nW5rsWzNar5osk0O78pp3dB+Kv8OIXmg7HdzWfT/7nvAC9bx6lWPUPyKs4x55pQ0DJzkMZ/GqT05/gnf5k/nIGsymQDy4e/AKm2uwDAHr08VuePb3uqUkbDVxwI6qnVALTthF12xOfPRB88IhcO/bhHAIADA1vQeXAYFdEt9fkoChDP9WoBB59UTC73joNz9hYLeGbOGf70ojWdn4qKzgwWQPLYKtamnsLtm36VBw+Hp1JUm2pVkG4IjQcqWccT3MmkozxWspkXjCZF4zXUiaSxt6ResYVJcP8WXK4FmeC7p0v1c66BWrde6s2HxmbSemL5o7jTJX/TdUJRQhdIdUGyRNZRpxAXCiKcqSeMl0olwYuyz2PsVpKNVerykPz8drX/p6RO3HYfZYgcYTR6YTrOkOWGa+9IPlDQGZ1riBRVdC72LbptflQ7SXZjoH/ovJoXFhWh4bBzoj1kU9vaLgsaACntpmi1CoHp+pUQo/esDGqB7tKXB6YhhoS/Wc78IUj0BIJEX25y7gMlEPTNUeUOgS/0E+skraI0p/ygpHpJJvMC6si97Gtf/dCEOduPx8dXidO8aIqW5f6XlYJjCk5wsGp9rJ8IsmyU2luRGSf4t4/X4ItnsBsNA7/EdEHBb1NYUnbw0SmVPVtVF5iR//+X3Ps+f2aLd84gHV6QVcCoLaKOCO4J8a56aYLnVa/M/sZAOBf8qum74sAAAAASUVORK5CYII=",Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAADsAAAA7AF5KHG9AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA59JREFUWIW9l01sG0UYhp9vdh3Hf2nSxjSkFYX0ByEoBSQENNBGRuIS9cKFSpW4kRMV4icNP6J1oUWkNQjBiXJGcIELqtReQAFVlLaRUEFFtJVqIEntJFZwYidOvLvDIY4VbCferZy8txm/872PvN/M7ggutTGeafEVzF7lSEwLe4B7gdbSz/8CSQ2/gnxv68LZyVPRGTd1pZ5hy1vTu2yHAZCDoIPucGVW0F9Zjh6cOL3hxh0BbH1VByzfzPsIrwCmu+AqFdF80hyMHE3GpeAaINqf3WmIfIvw0B0GV+qiZRjPT34Qul0XoPPNqUcdbZwHog0KX9KIY6ve8UT46ooA0f7sTkPJhTUIL0PYjnp84nQ4VQVQeuaXvP7tW1ol9fqz/j+f6jKbws34CwsUswWnOJbFOvz13GPZgm6pWHIxPBvpufmZzMOy5io1nKfw4weaf+zr9j0B7C9PhmArBg/eDW0hGakB8GQuOP02cAxAweJWK3W7ax3uabrQ1+3bB/i9rFuUvBbtz3WUARb3ufut5jNYGHjOv8N7cFlhQ9lHAcyN8UwLc3IQtOvVsfvNa4bikcp52yF1ddS+kclrByA7p/esXEVejMbHj5i+gtnr/oRb1NPbzela4btP5vxTef2MyzIhVQj0KuVIzEs4QHtYnMq5X5LW9am8bvNUyNExVXqxeJKhdNUBlslr98+wJBEeVsB9Xhc2UF0KqNyn66kN0jEwnQNCq7m+eSk4tHe7sX81T6UWbP7a9s7Mtjq2GQWkvRR2q0xOj7uwpRV6bQBuTjj5eh6tSSuUDK8FwPDfllHPo0SumGjnHMjLqxnPXSs2BZr4aWm8a7PRHmrigeWe/AJ/XE/bk0vjs7/bnfUANM552fxGKiRGaNzLaXjmUPPQgd2+/zXld78Vh/q+LHhp1LwK5O5S6URHXuALDwsbpc/H4p2zCkBpIwHMr2P4vGmaH0PpdTx6KjiiRSfWL18PjpwMjpYBANLNLXE0P69D+uXUVMuJpUEZgLhY2nEOAVWfzg3UmLadFzgjxWoAIJ1ovaVtpxtINjxa639sR/ekE623lk+rSl8JIgZcbmD8JZSzr9Y1rQpgCSIViOwFOQYUa3lcqijIu6lApDv1YVuylqEmAABxsVKDkfdsR92D6ON68QbsVjMi8qnC2nF7MHKCuFgrGet+CZduMfH2IxMfGeLvEeixbDYBXcCmki1j2SSBYe3wgy3zQ5OD7q7n/wHBtlLaxU+W2gAAAABJRU5ErkJggg==",Ve="data:image/png;base64,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";const He={class:"title-produce"},ze={style:{color:"var(--secondary)"}},Ge={style:{"font-size":"13px"}},qe=["href"],je=["href"],We=["href"],Qe={class:"inscriptos-p"},Ke=["href"],Je={key:1},Ze={class:"paginator"},Xe={__name:"EventFeria",props:["idConvenio"],setup(J){N.locale("es");const O=ie(),C=JSON.parse(localStorage.getItem("role"))||[],R=ve.get("token"),S="https://apituempresa.soporte-pnte.com/api/",k="http://127.0.0.1:8000/api/",e=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?k:S,B=C.some(c=>c.id===10||c.id===11||c.id===5),p=m(!1);m(null);const D=m(!1);m(null);const l=m(0),M=m(50),Y=m({page:0}),W=m(1200),U=m([]),V=m(!1);m(!1);const H=m(window.innerHeight-100),z=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"APROBACIÓN",dataIndex:"status",fixed:"left",width:100,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",fixed:"left",width:100,align:"center"},{title:"RUC",dataIndex:"ruc",width:100,fixed:"left",align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:180},{title:"RAZÓN SOCIAL",dataIndex:"socialReason",width:180},{title:"SECTOR EMPRESARIAL",dataIndex:"businessSector",width:150,align:"center"},{title:"REGIÓN",dataIndex:"mype_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"mype_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"mype_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"mype_address",width:170},{title:"WEB",dataIndex:"web",width:50,align:"center"},{title:"FACEBOOK",dataIndex:"facebook",width:90,align:"center"},{title:"INSTAGRAM",dataIndex:"instagram",width:100,align:"center"},{title:"DESCRIPCIÓN",dataIndex:"description",width:100,align:"center"},{title:"LOGO",dataIndex:"logo",width:80,align:"center"},{title:"ARCHIVO",dataIndex:"filePDF_name",width:100,align:"center"},{title:"PRODUCTOS",dataIndex:"productos",width:160,align:"center"},{title:"TIPO DOCUMENTO",dataIndex:"typedocument",width:140,align:"center"},{title:"# DOCUMENTO",dataIndex:"documentnumber",width:160,align:"center"},{title:"APELLIDOS",dataIndex:"lastname",width:160,align:"center"},{title:"NOMBRES",dataIndex:"name",width:160,align:"center"},{title:"CELULAR",dataIndex:"phone",width:120,align:"center"},{title:"EMAIL",dataIndex:"email",width:160,align:"center"},{title:"FECHA NAC.",dataIndex:"birthdate",width:120,align:"center"},{title:"PAIS / NACIONALIDAD",dataIndex:"user_country",width:140,align:"center"},{title:"REGIÓN",dataIndex:"user_city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"user_province",width:150,align:"center"},{title:"DISTRITO",dataIndex:"user_district",width:140,align:"center"},{title:"DIRECCIÓN",dataIndex:"address",width:160},{title:"GENERO",dataIndex:"gender",width:100,align:"center"},{title:"COMO SE ENTERÓ",dataIndex:"propagandamedia",width:140,align:"center"},...B?[{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}]:[]],G=async c=>{try{const t=await j({url:`fair/status-participant/${c}`,method:"PUT"});t.status==200&&(T(),ne.success(t.message))}catch(t){console.error("Error de red:",t)}},a=le({search:""}),E=c=>{const t=N();let v=N(c).diff(t,"days");return v===0?1:v},o=()=>{let c={search:a.search};T(c)},w=()=>{a.search||T()},L=c=>N(c).format("DD/MM/YYYY"),P=c=>{Y.value.page=c,T()},Q=()=>{H.value=window.innerHeight-320},f=async c=>{try{const t=await j({url:`fair/delete-participant/${c.id}`,method:"DELETE"});t.status==200&&(T(),ne.success(t.message))}catch(t){console.error("Error de red:",t)}},g=xe(()=>c=>Y.value.page*M.value+c+1),T=async c=>{try{V.value=!0;let t;t=Y.value.page==0?"":Y.value,t=c?{...t,...c}:t;const v=O.params.slug,{data:I}=await j({url:`fair/applicants/${v}`,method:"GET",params:t});U.value=I==null?void 0:I.data,l.value=I.total,M.value=I.per_page}catch(t){console.error("Error de red:",t)}finally{V.value=!1}},Z=async()=>{D.value=!0;try{const c=O.params.slug,t=await Ne({url:`${e}download/fair-participants/${c}`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${R}`}}),v=window.URL.createObjectURL(new Blob([t.data])),I=document.createElement("a"),q=`${U.value[0].fair_name}.xlsx`;I.href=v,I.setAttribute("download",q),document.body.appendChild(I),I.click(),window.URL.revokeObjectURL(v),document.body.removeChild(I)}catch(c){console.error("Error downloading file:",c)}finally{D.value=!1}};return Ce(()=>{window.removeEventListener("resize",Q)}),ee(()=>{window.addEventListener("resize",Q),Q(),T()}),(c,t)=>{const v=A("router-link"),I=A("a-breadcrumb-item"),q=A("a-breadcrumb"),te=A("a-button"),se=A("a-col"),re=A("a-input"),ce=A("a-input-group"),ue=A("a-row"),me=A("a-switch"),pe=A("a-tooltip"),ge=A("a-popover"),X=A("a-image"),Ae=A("a-image-preview-group"),oe=A("a-tag"),he=A("a-popconfirm"),fe=A("a-menu-item"),ye=A("a-menu"),_e=A("a-dropdown"),Ie=A("a-table"),we=A("a-pagination"),Ee=A("a-drawer");return n(),s(x,null,[y("div",null,[u(q,null,{default:d(()=>[u(I,null,{default:d(()=>[u(v,{to:"/admin/ferias/empresariales"},{default:d(()=>[u($(Se)),t[3]||(t[3]=y("span",{class:"fs-13"},"Atrás",-1))]),_:1})]),_:1}),u(I,null,{default:d(()=>{var _;return[y("h3",He,[t[4]||(t[4]=F("INSCRITOS EN FERIA - ")),y("span",ze,h((_=U.value[0])==null?void 0:_.fair_name),1)])]}),_:1})]),_:1}),u(ue,{style:{margin:"1rem 0"}},{default:d(()=>[u(se,{xs:24,md:12,lg:18},{default:d(()=>[t[6]||(t[6]=y("span",null,null,-1)),u(te,{class:"btn-excel",onClick:Z,loading:D.value,type:"primary"},{default:d(()=>t[5]||(t[5]=[y("img",{width:"20",style:{margin:"-2px 0 0 0"},src:De},null,-1)])),_:1},8,["loading"])]),_:1}),u(se,{xs:24,md:12,lg:6},{default:d(()=>[u(ce,{compact:""},{default:d(()=>[u(re,{onPressEnter:o,value:a.search,"onUpdate:value":t[0]||(t[0]=_=>a.search=_),style:{width:"calc(100% - 80px)"},onInput:w},null,8,["value"]),u(te,{type:"primary",disabled:a.search==="",onClick:o},{default:d(()=>t[7]||(t[7]=[F("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),u(Ie,{bordered:"",scroll:{x:W.value,y:H.value},class:"table-agreements-ugse",columns:z,"data-source":U.value,pagination:!1,loading:V.value,size:"small"},{bodyCell:d(({column:_,record:r,index:be})=>[_.dataIndex=="idx"?(n(),s(x,{key:0},[F(h(g.value(be)),1)],64)):i("",!0),_.dataIndex=="status"?(n(),b(pe,{key:1},{title:d(()=>[y("span",Ge,h(r.status==0?"Habilitar a: ":"Desabilitar a: ")+" "+h(r.comercialName),1)]),default:d(()=>[u(me,{checked:r.status,"onUpdate:checked":ae=>r.status=ae,"checked-children":"si","un-checked-children":"",checkedValue:1,unCheckedValue:0,onChange:ae=>G(r.id)},null,8,["checked","onUpdate:checked","onChange"])]),_:2},1024)):i("",!0),_.dataIndex=="created_at"?(n(),s(x,{key:2},[F(h(L(r==null?void 0:r.created_at)),1)],64)):i("",!0),_.dataIndex=="web"?(n(),s(x,{key:3},[r.web?(n(),s("a",{key:0,href:r.web,target:"_blank"},t[8]||(t[8]=[y("img",{src:Fe,alt:"",width:"22"},null,-1)]),8,qe)):i("",!0)],64)):i("",!0),_.dataIndex=="facebook"?(n(),s(x,{key:4},[r.facebook?(n(),s("a",{key:0,href:r.facebook,target:"_blank"},t[9]||(t[9]=[y("img",{src:Me,alt:"",width:"22"},null,-1)]),8,je)):i("",!0)],64)):i("",!0),_.dataIndex=="instagram"?(n(),s(x,{key:5},[r.instagram?(n(),s("a",{key:0,href:r.instagram,target:"_blank"},t[10]||(t[10]=[y("img",{src:Ve,alt:"",width:"22"},null,-1)]),8,We)):i("",!0)],64)):i("",!0),_.dataIndex=="description"?(n(),s(x,{key:6},[r.description?(n(),b(ge,{key:0,placement:"left"},{content:d(()=>[y("p",Qe,h(r.description),1)]),default:d(()=>[t[11]||(t[11]=y("span",{class:"inscriptos-a"},"Leer descripción",-1))]),_:2},1024)):i("",!0)],64)):i("",!0),_.dataIndex=="logo"?(n(),s(x,{key:7},[r.logo_url?(n(),b(X,{key:0,class:"fair-prod-img",src:r.logo_url,alt:"logo"},null,8,["src"])):i("",!0)],64)):i("",!0),_.dataIndex=="filePDF_name"?(n(),s(x,{key:8},[r.filePDF_name?(n(),s("a",{key:0,href:r.filePDF_url,target:"_blank"}," Descargar ",8,Ke)):i("",!0)],64)):i("",!0),_.dataIndex=="productos"?(n(),b(Ae,{key:9},{default:d(()=>[r.img1_url?(n(),b(X,{key:0,class:"fair-prod-img",src:r.img1_url,alt:"Imagen 1"},null,8,["src"])):i("",!0),r.img2_url?(n(),b(X,{key:1,class:"fair-prod-img",src:r.img2_url,alt:"Imagen 2"},null,8,["src"])):i("",!0),r.img3_url?(n(),b(X,{key:2,class:"fair-prod-img",src:r.img3_url,alt:"Imagen 3"},null,8,["src"])):i("",!0)]),_:2},1024)):i("",!0),_.dataIndex=="dateDiff"?(n(),s(x,{key:10},[E(r.endDate2)<0?(n(),b(oe,{key:0,color:"red"},{default:d(()=>t[12]||(t[12]=[F(" FINALIZADO ")])),_:1})):(n(),s("span",Je,h(E(r.endDate2)),1))],64)):i("",!0),_.dataIndex=="actions"?(n(),b(_e,{key:11,trigger:["click"]},{overlay:d(()=>[u(ye,null,{default:d(()=>[u(fe,null,{default:d(()=>[u(he,{placement:"rightBottom",title:`¿Quieres eliminar ${r.ruc} ?`,onConfirm:ae=>f(r)},{icon:d(()=>[u($(de),{style:{color:"red"}})]),default:d(()=>[t[13]||(t[13]=y("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1024)]),default:d(()=>[y("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=ke(()=>{},["prevent"]))},[u(te,{shape:"circle",icon:Re($(Te)),size:"small"},null,8,["icon"])])]),_:2},1024)):i("",!0)]),_:1},8,["scroll","data-source","loading"])]),y("div",Ze,[y("span",null,[u(oe,{color:"blue"},{default:d(()=>[y("b",null,h(l.value),1)]),_:1}),t[14]||(t[14]=F("Inscritos"))]),u(we,{size:"small",total:l.value,pageSize:M.value,onChange:P,showSizeChanger:!1},null,8,["total","pageSize"])]),u(Ee,{open:p.value,"onUpdate:open":t[2]||(t[2]=_=>p.value=_),title:"Nueva Feria",placement:"right",width:"650"},null,8,["open"])],64)}}};const $e={class:"f-20"},et={__name:"ParticipanteSed",props:["info"],emits:["closeDraw"],setup(J,{emit:O}){N.locale("es");const C=m({ruc:{type:"iText",label:"RUC",name:"ruc",required:!0,message:"Ingrese el RUC",disabled:!1},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Ingrese el nombre comercial",disabled:!1},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Ingrese la razón social",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccione el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccione la actividad comercial",disabled:!1},city_id:{type:"iSelect",label:"CIUDAD",name:"city_id",required:!0,message:"Seleccione la ciudad",disabled:!1},typedocument_id:{type:"iSelect",label:"TIPO DOCUMENTO",name:"typedocument_id",required:!0,message:"Seleccione el tipo de documento",disabled:!1},documentnumber:{type:"iText",label:"N° DOCUMENTO",name:"documentnumber",required:!0,message:"Ingrese el número de documento",disabled:!1},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Ingrese el apellido paterno",disabled:!1},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Ingrese el apellido materno",disabled:!1},name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccione el género",disabled:!1},phone:{type:"iText",label:"TELÉFONO",name:"phone",required:!0,message:"Ingrese el teléfono",disabled:!1},email:{type:"iText",label:"EMAIL",name:"email",required:!0,message:"Ingrese el correo electrónico",disabled:!1},birthday:{type:"iDate",label:"FECHA DE NACIMIENTO",name:"birthday",required:!0,message:"Seleccione la fecha de nacimiento",disabled:!1},positionCompany:{type:"iText",label:"CARGO EN EMPRESA",name:"positionCompany",required:!0,message:"Ingrese el cargo en la empresa",disabled:!1},instagram:{type:"iText",label:"INSTAGRAM",name:"instagram",required:!1,message:"",disabled:!1},facebook:{type:"iText",label:"FACEBOOK",name:"facebook",required:!1,message:"",disabled:!1},web:{type:"iText",label:"WEB",name:"web",required:!1,message:"",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const R=O,S=J,k=m("GUARDAR"),e=le({}),B=m(!1),p=Pe(),D=m(null),l=m({city_id:[],province_id:[],district_id:[],modality_id:[]}),M=a=>{console.log("handleInputEvent",a)},Y=async a=>{a=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),C.value.dateTramite.disabled=!1)},W=async a=>{a=="city_id"&&(await p.fetchProvinces(e.city_id),l.value.province_id=p.provinces,C.value.province_id.disabled=!1),a=="province_id"&&(await p.fetchDistricts(e.province_id),l.value.district_id=p.districts,C.value.district_id.disabled=!1)},U=async a=>{console.log("handleFocusSelect",a),a=="city_id"&&(await p.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,l.value.province_id=[],l.value.city_id=p.cities)},V=a=>{},H=async()=>{B.value=!0;const a={ruc:e.ruc,comercialName:e.comercialName,socialReason:e.socialReason,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,gender_id:e.gender_id,phone:e.phone,email:e.email,birthday:N(e.birthday).format("YYYY-MM-DD HH:mm"),positionCompany:e.positionCompany,instagram:e.instagram,facebook:e.facebook,web:e.web};try{const E=await j({url:`fair/sed-update-data-user/${S.info.id}`,method:"PUT",data:a});E.status===200&&(ne.success(E.message),z(),R("closeDraw",!0))}catch(E){console.error("Error:",E);const o=document.getElementsByClassName("ant-drawer-body")[0];o&&(o.scrollTop=0)}finally{B.value=!1}},z=()=>{e.nameEvent=null,e.city_id=null,e.place=null,e.modality_id=null,e.dates=null,e.hours=null,e.description=null},G=async a=>{a&&(e.ruc=a.ruc,e.comercialName=a.comercialName,e.socialReason=a.socialReason,await p.fetchEconomicSectors(),l.value.economicsector_id=p.economicSectors,e.economicsector_id=a.economicsector.id,await p.fetchComercialActivities(),l.value.comercialactivity_id=p.comercialActivities,e.comercialactivity_id=a.comercialactivity.id,await p.fetchCities(),l.value.city_id=p.cities,e.city_id=a.city.id,await p.fetchTypeDocuments(),l.value.typedocument_id=p.typeDocuments,e.typedocument_id=a.typedocument.id,e.documentnumber=a.documentnumber,e.lastname=a.lastname,e.middlename=a.middlename,e.name=a.name,await p.fetchGenders(),l.value.gender_id=p.genders,e.gender_id=a.gender.id,e.sick=a.sick,e.phone=a.phone,e.email=a.email,a.birthday&&(e.birthday=N(a.birthday,"YYYY-MM-DD")),e.positionCompany=a.positionCompany,e.facebook=a.facebook,e.instagram=a.instagram,e.web=a.web)};return ee(()=>{S.info&&G(S.info)}),Oe(()=>S.info,a=>{a?G(a):z()}),K("formState",e),K("loadingState",B),(a,E)=>(n(),s("div",$e,[u(Le,{fields:C.value,options:l.value,btnSaveName:k.value,onHandleInputEvent:M,resetSelect:D.value,onHandleChangeSelect:W,onHandleFocusSelect:U,onHandleBlurSelect:V,onHandleChangeClock:Y,onOnSubmit:H},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const tt={class:"advisory-table"},at={key:0},nt={key:1},it={key:2},lt={key:3},st={key:4},ot={key:5},dt={key:6},rt={key:7},ct={key:8},ut=["href"],mt=["href"],pt=["href"],gt={key:0,style:{"line-height":"1.5"}},At={key:1},ht=["onClick"],ft={__name:"EventSed",setup(J){const O=ie(),C=JSON.parse(localStorage.getItem("role"))||[],R=m([]),S=m(0),k=m(150),e=m(!1);Be();const B=m(!1),p=m(null),D=m(!1),l=le({year:N("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),M=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"RUC",dataIndex:"ruc",fixed:"left",width:100,align:"center"},{title:"NOMBRE COMERCIAL",dataIndex:"comercialName",width:200},{title:"RAZÓN SOCIAL",dataIndex:"socialReason",width:200},{title:"SECTOR ECONÓMICO",dataIndex:"economicsector_id",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"comercialactivity_id",width:180},{title:"CATEGORÍA",dataIndex:"category_id",width:150},{title:"CIUDAD",dataIndex:"city_id",width:150,align:"center"},{title:"TIPO ASISTENTE",dataIndex:"typeAsistente",width:150,align:"center"},{title:"TIPO DOCUMENTO",dataIndex:"typedocument_id",width:150,align:"center"},{title:"N° DOCUMENTO",dataIndex:"documentnumber",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"GÉNERO",dataIndex:"gender_id",width:120,align:"center"},{title:"¿TIENE LESIÓN?",dataIndex:"sick",width:120,align:"center"},{title:"TELÉFONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"CARGO EN EMPRESA",dataIndex:"positionCompany",width:180,align:"center"},{title:"CÓMO CONOCIÓ EL EVENTO",dataIndex:"howKnowEvent_id",width:200,align:"center"},{title:"INSTAGRAM",dataIndex:"instagram",width:180,align:"center"},{title:"FACEBOOK",dataIndex:"facebook",width:180,align:"center"},{title:"WEB",dataIndex:"web",width:180,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",fixed:"right",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],Y=o=>{p.value=o,e.value=!0},W=()=>{E(),e.value=!1},U=()=>{p.value=null,e.value=!0},V=async o=>{},H=async()=>{D.value=!0;try{const o={},w=O.params.slug;l.year&&(o.year=N(l.year).format("YYYY")),l.range&&(o.dateStart=l.range[0].format("YYYY/MM/DD"),o.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(o.name=l.name);let L=`download/sed-asistentes/${w}`;await Ue(L,"sed",o)}catch(o){console.error("Error de red:",o)}finally{D.value=!1}},z=async o=>{l.page=o,await E()},G=async o=>{o&&(l.page=1,await E())},a=o=>C.some(w=>o.includes(w.id)),E=async()=>{try{B.value=!0;const o={page:l.page},w=O.params.slug;l.year&&(o.year=N(l.year).format("YYYY")),l.range&&(o.dateStart=l.range[0].format("YYYY/MM/DD"),o.dateEnd=l.range[1].format("YYYY/MM/DD")),l.name&&(o.name=l.name),l.orderby&&(o.orderby=l.orderby);let L=`fair/list-event-sed/${w}`;const P=await j({url:L,method:"GET",params:o});R.value=P.data.data,S.value=P.data.total,k.value=P.data.per_page}catch(o){console.error("Error de red:",o)}finally{B.value=!1}};return ee(async()=>{await E()}),K("search",l),K("loading",B),K("loadingFile",D),(o,w)=>{const L=A("a-menu-item"),P=A("a-popconfirm"),Q=A("a-drawer");return n(),s("div",tt,[u(Ye,{title:"INSCRITOS EN EL EVENTO SED",new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ferias/empresariales",searchYear:!0,rangeDate:!0,columns:M,titleSearch:"FILTRAR POR RUC O DNI",pageSize:k.value,nameTotal:"Inscritos SED",dataSource:R.value,total:S.value,onHandleNew:U,onHandleDownloadExcel:H,onHandleSearch:G,onHandlePaginator:z},{"data-cell":d(({column:f,record:g})=>{var T,Z,c,t,v,I,q;return[f.dataIndex=="economicsector_id"?(n(),s("span",at,h((T=g.economicsector)==null?void 0:T.name),1)):i("",!0),f.dataIndex=="comercialactivity_id"?(n(),s("span",nt,h((Z=g.comercialactivity)==null?void 0:Z.name),1)):i("",!0),f.dataIndex=="category_id"?(n(),s("span",it,h((c=g.category)==null?void 0:c.name),1)):i("",!0),f.dataIndex=="city_id"?(n(),s("span",lt,h((t=g.city)==null?void 0:t.name),1)):i("",!0),f.dataIndex=="typeAsistente"?(n(),s("span",st,h(g.typeAsistente==1?"Representante":"Invitado"),1)):i("",!0),f.dataIndex=="typedocument_id"?(n(),s("span",ot,h((v=g.typedocument)==null?void 0:v.name),1)):i("",!0),f.dataIndex=="gender_id"?(n(),s("span",dt,h((I=g.gender)==null?void 0:I.name),1)):i("",!0),f.dataIndex=="sick"?(n(),s("span",rt,h(g.typeAsistente=="yes"?"SI":"NO"),1)):i("",!0),f.dataIndex=="howKnowEvent_id"?(n(),s("span",ct,h((q=g.howKnowEvent)==null?void 0:q.name),1)):i("",!0),f.dataIndex=="instagram"?(n(),s("a",{key:9,href:g.instagram,target:"_blank"},h(g.instagram),9,ut)):i("",!0),f.dataIndex=="facebook"?(n(),s("a",{key:10,href:g.facebook,target:"_blank"},h(g.facebook),9,mt)):i("",!0),f.dataIndex=="web"?(n(),s("a",{key:11,href:g.web,target:"_blank"},h(g.web),9,pt)):i("",!0),f.dataIndex=="date"?(n(),s(x,{key:12},[g.dateStart!=g.dateEnd?(n(),s("span",gt,[w[1]||(w[1]=y("b",null,"Desde:",-1)),F(" "+h(g.dateStartFormat)+" ",1),w[2]||(w[2]=y("b",null,"Hasta:",-1)),F(" "+h(g.dateEndFormat),1)])):(n(),s("span",At,h(g.dateStartFormat),1))],64)):i("",!0)]}),"custom-options":d(({record:f})=>[a([1,5])?(n(),b(L,{key:0},{default:d(()=>[y("a",{onClick:g=>Y(f)},"Editar",8,ht)]),_:2},1024)):i("",!0),a([1,5])?(n(),b(L,{key:1},{default:d(()=>[u(P,{placement:"rightBottom",title:`¿Quieres eliminar ${f.title} ?`,onConfirm:g=>V(f)},{icon:d(()=>[u($(de),{style:{color:"red"}})]),default:d(()=>[w[3]||(w[3]=y("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):i("",!0)]),_:1},8,["pageSize","dataSource","total"]),u(Q,{open:e.value,"onUpdate:open":w[0]||(w[0]=f=>e.value=f),title:p.value?"EDITAR REGISTRO":"NUEVO REGISTRO",placement:"right",width:"650"},{default:d(()=>[u(et,{onCloseDraw:W,info:p.value},null,8,["info"])]),_:1},8,["open","title"])])}}},St={__name:"IndexFeriasInscriptos",setup(J){const O=ie(),C=m(!0),R=m(null),S=async()=>{try{C.value=!0;const k=O.params.slug,e=await j({url:`fair/type-fair/${k}`,method:"GET"});R.value=+e.data.fairtype_id}catch(k){console.error("Error de red:",k)}finally{C.value=!1}};return ee(()=>{S()}),(k,e)=>(n(),s(x,null,[R.value==1?(n(),b(ft,{key:0})):i("",!0),R.value==2?(n(),b(Xe,{key:1})):i("",!0)],64))}};export{St as default};
