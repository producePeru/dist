import{c as r,A as P,r as x,u as E,a as v,b as N,d as m,o as V,e as z,f as l,w as i,g as j,m as h,h as b,C as T,i as S,j as C,p as D,k as F}from"./index-dce8e8df.js";import{u as q}from"./someEvents-2d24196d.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{U as B}from"./UserOutlined-d57eb143.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const U=J;function w(t){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?Object(arguments[o]):{},c=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),c.forEach(function(s){$(t,s,a[s])})}return t}function $(t,o,a){return o in t?Object.defineProperty(t,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[o]=a,t}var g=function(o,a){var c=w({},o,a.attrs);return r(P,w({},c,{icon:U}),null)};g.displayName="LockOutlined";g.inheritAttrs=!1;const H=g;const f=t=>(D("data-v-cc4978b2"),t=t(),F(),t),M={class:"container-login"},G=f(()=>l("img",{class:"hero",src:"https://soporte-pnte.com/tuempresa/assets/images/fondo.jpeg",alt:""},null,-1)),R={class:"wrapper-login"},Q=f(()=>l("div",{class:"title"},[l("img",{class:"logo",src:"https://www.tuempresa.gob.pe/wp-content/uploads/2021/10/Produce-TuEmpresa.png",alt:""}),l("h1",null,"Iniciar Sesión"),l("span",null,"Ingrese su usuario y contraseña para ingresar a la plataforma.")],-1)),W=f(()=>l("br",null,null,-1)),X={__name:"LoginPage",setup(t){const o=q(),a=x(!1),c=E();v.get("token");const s=N({email:"",password:""}),y=async()=>{a.value=!0;try{const u=s,{data:e}=await j({url:"/login",method:"POST",data:u});v.set("token",e.access_token);const d={access_token:e.access_token,id:e.id,document_number:e.document_number,role:e.role};localStorage.setItem("user",JSON.stringify(d));const n=await h({url:`/personal-data/${e.document_number}`,method:"GET"}),p={id:n.data.id,name:n.data.name,last_name:n.data.last_name,middle_name:n.data.middle_name,email:n.data.email,dni:n.data.number_document};localStorage.setItem("info",JSON.stringify(p)),o.imgProfile(),e&&O(e.id)}catch(u){b.error("Las credenciales son incorrectas"),console.log("Error: "+u),a.value=!1}},O=async u=>{const{data:e}=await h({url:`/views/${u}`,method:"GET"}),d=T.AES.encrypt(JSON.stringify(e),"appvistas").toString();try{localStorage.setItem("views",d)}catch(n){console.error("Error al guardar en localStorage:",n);return}finally{a.value=!1}c.push("/admin/inicio")},k=()=>{b.error("Sin acceso")};return(u,e)=>{const d=m("a-input"),n=m("a-form-item"),p=m("a-input-password"),I=m("a-button"),L=m("a-form");return V(),z("div",M,[G,l("div",R,[Q,r(L,{class:"form-wrapper",model:s,name:"basic",autocomplete:"off",onFinish:y,onFinishFailed:k},{default:i(()=>[r(n,{name:"email",rules:[{required:!0,message:"Ingresa tu cuenta de email"}]},{default:i(()=>[r(d,{value:s.email,"onUpdate:value":e[0]||(e[0]=_=>s.email=_),size:"large"},{prefix:i(()=>[r(S(B),{class:"input-ico"})]),_:1},8,["value"])]),_:1}),r(n,{name:"password",rules:[{required:!0,message:"La contraseña es incorrecta"}]},{default:i(()=>[r(p,{value:s.password,"onUpdate:value":e[1]||(e[1]=_=>s.password=_),size:"large"},{prefix:i(()=>[r(S(H),{class:"input-ico"})]),_:1},8,["value"])]),_:1}),W,r(n,null,{default:i(()=>[r(I,{size:"large",block:"",type:"primary","html-type":"submit",class:"btn-login",loading:a.value},{default:i(()=>[C("Ingresar")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},ae=A(X,[["__scopeId","data-v-cc4978b2"]]);export{ae as default};
