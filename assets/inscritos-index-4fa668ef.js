import{_ as J}from"./TableComponent-6cd2d535.js";import{E as Q,r as u,u as Z,a as X,p as b,k as K,X as D,b as y,o as t,d as i,c as _,w as m,m as R,y as k,z as r,F as w,j as V,e as g,t as c,v as ee,i as ae,a2 as te,h as ne}from"./index-d077676d.js";import{d as oe}from"./downloadExcel-b177ecc7.js";import"./es-a5becd29.js";import{_ as se}from"./ParticipanteSed-3d89cc60.js";import"./icoexcel-1b303edf.js";import"./selectes-f0218239.js";import"./MoreOutlined-b06e4611.js";import"./FormComponent-88310311.js";import"./quill.snow-4eeb4d0c.js";const re={class:"layout-content cyber-wow"},ie={key:2,class:"cyber-wow-empresario"},le={key:3,class:"cyber-wow-empresario"},ce={key:4,class:"cyber-wow-empresario-ubigeo"},de={key:5,class:"wow-redes-sociales"},me=["href"],ue={key:0,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBF73o0P4eNj_YuVFZtaVHAxum9_p4ARUOAg&s"},pe={key:0,src:"https://a.thumbs.redditmedia.com/JDkvH4BSYJQOZ93RZGUIVUjtEqi1T5WnhTyqeCtgUJ0.png"},ge={key:0,src:"https://cdn-icons-png.flaticon.com/256/4138/4138151.png"},fe={key:0,src:"https://images.freeimages.com/fic/images/icons/2781/google_jfk_icons/256/chrome_ico.png"},he=["onClick"],Ye={__name:"inscritos-index",setup(we){const v=Q(),$=JSON.parse(localStorage.getItem("role"))||[],T=u([]),O=u(0),A=u(150),E=u(!1);Z();const x=u(!1),S=u(null),C=u(!1),N=u({name:"Cargando..."}),M={Facebook:"https://www.facebook.com/",Instagram:"https://www.instagram.com/",TikTok:"https://www.tiktok.com/@",Web:"https://www."},B=e=>M[e.name]?`${M[e.name]}${e.link}`:e.link,n=X({year:b("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),P=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"EMPRESARIO",dataIndex:"empresario",width:350},{title:"EMPRESA",dataIndex:"empresa",width:350},{title:"SECTOR ECONÃ“MICO",dataIndex:"sectorEconomico",width:160,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"actividadComercial",width:180},{title:"REDES SOCIALES",dataIndex:"redesSociales",width:140,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"}],H=e=>{S.value=e,E.value=!0},L=()=>{f(),E.value=!1},W=async(e,a)=>{const p=v.params.slug,I=b().format("DD/MM/YYYY HH:mm"),Y={slug:p,documentnumber:a.documentnumber,check:e.target.checked,date:I};try{const h=await R({url:"fair/update-attended-status",method:"PUT",data:Y});h.status==200&&console.log("status",h.message)}catch(h){console.error("Error de red:",h)}},j=async e=>{try{const a=await R({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});a.status==200&&(f(),ne.success(a.message))}catch(a){console.error("Error de red:",a)}},z=async()=>{C.value=!0;try{const e={},a=v.params.slug;n.year&&(e.year=b(n.year).format("YYYY")),n.range&&(e.dateStart=n.range[0].format("YYYY/MM/DD"),e.dateEnd=n.range[1].format("YYYY/MM/DD")),n.name&&(e.name=n.name);let p=`download/cyber-wow-participants/${a}`;await oe(p,"cyber-wow",e)}catch(e){console.error("Error de red:",e)}finally{C.value=!1}},G=async e=>{n.page=e,await f()},q=async e=>{e&&(n.page=1,await f())},U=e=>$.some(a=>e.includes(a.id)),f=async()=>{try{x.value=!0;const e={page:n.page},a=v.params.slug;n.year&&(e.year=b(n.year).format("YYYY")),n.range&&(e.dateStart=n.range[0].format("YYYY/MM/DD"),e.dateEnd=n.range[1].format("YYYY/MM/DD")),n.name&&(e.name=n.name),n.orderby&&(e.orderby=n.orderby);let p=`events-ugse/cyber-wow-list-assistants/${a}`;const d=await R({url:p,method:"GET",params:e});N.value=d.event,T.value=d.data.data,O.value=d.data.total,A.value=d.data.per_page}catch(e){console.error("Error de red:",e)}finally{x.value=!1}};return K(async()=>{await f()}),D("search",n),D("loading",x),D("loadingFile",C),(e,a)=>{var F;const p=y("a-checkbox"),d=y("a-tag"),I=y("a-menu-item"),Y=y("a-popconfirm"),h=y("a-drawer");return t(),i("div",re,[_(J,{title:`INSCRITOS CYBER WOW ðŸ“ˆ ${(F=N.value)==null?void 0:F.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/cyber-wow",columns:P,titleSearch:"FILTRAR POR RUC O DNI",pageSize:A.value,nameTotal:"Inscritos Cyber Wow",dataSource:T.value,total:O.value,btnUpdate:!0,onHandleCallFetchData:f,onHandleDownloadExcel:z,onHandleSearch:q,onHandlePaginator:G},{"data-cell":m(({column:l,record:o})=>[l.dataIndex=="asistio"?(t(),k(p,{key:0,checked:o.asistio,"onUpdate:checked":s=>o.asistio=s,onChange:s=>W(s,o)},null,8,["checked","onUpdate:checked","onChange"])):r("",!0),l.dataIndex=="sick"?(t(),i(w,{key:1},[o.sick=="SI"?(t(),k(d,{key:0,color:"red"},{default:m(()=>a[1]||(a[1]=[V("SI")])),_:1})):r("",!0),o.sick=="NO"?(t(),k(d,{key:1,color:"green"},{default:m(()=>a[2]||(a[2]=[V("NO")])),_:1})):r("",!0)],64)):r("",!0),l.dataIndex=="empresario"?(t(),i("div",ie,[g("b",null,c(o.name)+" "+c(o.lastname)+" "+c(o.middlename),1),g("span",null,c(o.documentnumber)+" / "+c(o.phone)+" / "+c(o.email),1)])):r("",!0),l.dataIndex=="empresa"?(t(),i("div",le,[g("b",null,c(o.nombreComercial),1),g("span",null,c(o.razonSocial)+" / "+c(o.ruc),1),g("span",null,c(o.city)+" - "+c(o.province)+" - "+c(o.district),1)])):r("",!0),l.dataIndex=="city"?(t(),i("div",ce)):r("",!0),l.dataIndex=="redesSociales"?(t(),i("div",de,[(t(!0),i(w,null,ee(o.socials,s=>(t(),i("a",{key:s.name,href:B(s),target:"_blank"},[s.name==="Facebook"&&s.link?(t(),i(w,{key:0},[s.name==="Facebook"?(t(),i("img",ue)):r("",!0)],64)):r("",!0),s.name==="Instagram"&&s.link?(t(),i(w,{key:1},[s.name==="Instagram"?(t(),i("img",pe)):r("",!0)],64)):r("",!0),s.name==="TikTok"&&s.link?(t(),i(w,{key:2},[s.name==="TikTok"?(t(),i("img",ge)):r("",!0)],64)):r("",!0),s.name==="Web"&&s.link?(t(),i(w,{key:3},[s.name==="Web"?(t(),i("img",fe)):r("",!0)],64)):r("",!0)],8,me))),128))])):r("",!0)]),"custom-options":m(({record:l})=>[U([1,5])?(t(),k(I,{key:0},{default:m(()=>[g("a",{onClick:o=>H(l)},"Editar",8,he)]),_:2},1024)):r("",!0),U([1,5])?(t(),k(I,{key:1},{default:m(()=>[_(Y,{placement:"rightBottom",title:`Â¿Quieres eliminar ${l.documentnumber} ?`,onConfirm:o=>j(l)},{icon:m(()=>[_(ae(te),{style:{color:"red"}})]),default:m(()=>[a[3]||(a[3]=g("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):r("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),_(h,{open:E.value,"onUpdate:open":a[0]||(a[0]=l=>E.value=l),title:S.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:m(()=>[_(se,{onCloseDraw:L,info:S.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ye as default};
