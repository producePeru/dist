import{_ as q}from"./icoexcel-1b303edf.js";import{l as p,r as t,u as J,a as K,G as Q,Z as W,j as $,b as s,o as m,d as v,e as c,c as n,w as r,i as A,F as T,R as L,t as g,y as O}from"./index-e7c49f04.js";import{d as ee}from"./downloadExcel-ab76dfbb.js";import"./es-6119d95e.js";const ae={key:1},te={key:2},ne={class:"paginator"},de={__name:"VotacionesNotarias",setup(oe){p.locale("es");const o=t(p("2025","YYYY"));J(),JSON.parse(localStorage.getItem("role")),t(!1),t(null);const _=t(!1);t(null);const E=t(0),f=t(50),i=t({page:1}),D=t(1200),N=t([]),h=t(!1);t(!1);const R=t(window.innerHeight-100),C=t(""),b=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"TIPO DE DOCUMENTO",dataIndex:"typedocument_name",width:100,align:"center"},{title:"NÚMERO DE DOCUMENTO",dataIndex:"documentnumber",width:140,align:"center"},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:140},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150},{title:"NACIONALIDAD",dataIndex:"nationality",width:140},{title:"NÚMERO DE CELULAR",dataIndex:"phone",align:"center",width:140},{title:"CORREO ELECTRÓNICO",dataIndex:"email",width:180},{title:"SECTOR ECONÓMICO",dataIndex:"economicsector_name",width:120,align:"center"},{title:"EL MOTIVO DE SU VISITA ES PARA REALIZAR EL TRÁMITE",dataIndex:"motivo",width:220,align:"center"},{title:"¿CUÁL ES EL NOMBRE DE LA NOTARIA?",dataIndex:"notary",width:180,align:"center"},{title:"¿CÓMO CALIFICARÍA LA ATENCIÓN?",dataIndex:"califica",width:170,align:"center"},{title:"FECHA REGISTRO",dataIndex:"created_at",width:140,align:"center"}],M=e=>({reserva:"RESERVA DE NOMBRE",acto:"ACTO CONSTITUTIVO"})[e]||"N/A",Y=e=>({4:"EXCELENTE",3:"BUENO",2:"REGULAR",1:"MALO"})[e]||"N/A",l=K({search:""}),U=()=>{i.value.page=1,l.search,u()},k=()=>{l.search||u()},V=e=>{i.value.page=e,u()},I=()=>{R.value=window.innerHeight-320},B=Q(()=>e=>(i.value.page-1)*f.value+e+1),u=async()=>{try{h.value=!0;const e={};o!=null&&o.value&&(e.year=p(o.value).format("YYYY")),l.search&&(e.search=l.search),i.value.page&&(e.page=i.value.page);const{data:a}=await L({url:"attendance/list-vote",method:"GET",params:e});N.value=a==null?void 0:a.data,E.value=a.total,f.value=a.per_page}catch(e){console.error("Error de red:",e)}finally{h.value=!1}},z=async()=>{try{_.value=!0;const e={};o!=null&&o.value&&(e.year=p(o.value).format("YYYY")),l.search&&(e.search=l.search),i.value.page&&(e.page=i.value.page),C.value&&(e.order_by=C.value);const{data:a}=await L({url:"attendance/list-vote-all",method:"GET",params:e});await ee("download/attendance-ugo","eventos-ugo",a)}catch(e){console.error("Error de red:",e)}finally{_.value=!1}};return W(()=>{window.removeEventListener("resize",I)}),$(()=>{window.addEventListener("resize",I),I(),u()}),(e,a)=>{const w=s("a-button"),y=s("a-date-picker"),x=s("a-col"),P=s("a-input"),F=s("a-input-group"),G=s("a-row"),H=s("a-table"),j=s("a-tag"),X=s("a-pagination");return m(),v(T,null,[c("div",null,[a[4]||(a[4]=c("h3",{class:"title-produce"},"VOTACIONES A LAS NOTARÍAS",-1)),n(G,{style:{margin:"1rem 0"}},{default:r(()=>[n(x,{xs:24,md:12,lg:18},{default:r(()=>[n(w,{class:"btn-excel",onClick:z,loading:_.value,type:"primary"},{default:r(()=>a[2]||(a[2]=[c("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:q},null,-1)])),_:1},8,["loading"]),n(y,{allowClear:!1,value:o.value,"onUpdate:value":a[0]||(a[0]=d=>o.value=d),picker:"year",placeholder:"Seleccionar año",onChange:u,style:{width:"80px","margin-left":"8px"}},null,8,["value"])]),_:1}),n(x,{xs:24,md:12,lg:6},{default:r(()=>[n(F,{compact:""},{default:r(()=>[n(P,{value:l.search,"onUpdate:value":a[1]||(a[1]=d=>l.search=d),style:{width:"calc(100% - 80px)"},onInput:k,placeholder:"Buscar por DNI o nombre del participante"},null,8,["value"]),n(w,{type:"primary",disabled:l.search==="",onClick:U},{default:r(()=>a[3]||(a[3]=[A("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),n(H,{bordered:"",scroll:{x:D.value,y:R.value},class:"table-fairs",columns:b,"data-source":N.value,pagination:!1,loading:h.value,size:"small"},{bodyCell:r(({column:d,record:S,index:Z})=>[d.dataIndex=="idx"?(m(),v(T,{key:0},[A(g(B.value(Z)),1)],64)):O("",!0),d.dataIndex=="motivo"?(m(),v("span",ae,g(M(S.motivo)),1)):O("",!0),d.dataIndex=="califica"?(m(),v("span",te,g(Y(S.califica)),1)):O("",!0)]),_:1},8,["scroll","data-source","loading"])]),c("div",ne,[c("span",null,[n(j,{color:"blue"},{default:r(()=>[c("b",null,g(E.value),1)]),_:1}),a[5]||(a[5]=A("Registros"))]),n(X,{size:"small",total:E.value,pageSize:f.value,onChange:V,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{de as default};
