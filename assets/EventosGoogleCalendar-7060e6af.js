import{l as X,p as ee,q as _,s as te,a as ae,r as i,v as oe,j as le,b as g,o as u,d as c,e as t,c as s,h as m,w as k,t as r,L as se,f as $,i as S,F as ne,x as re,y as z,z as ie,B as M,D as de,E as ue}from"./index-217c4798.js";import"./es-c0fe06ca.js";import{u as ce}from"./selectes-90301516.js";import{H as pe}from"./HomeOutlined-7c245203.js";import{T as ve}from"./TeamOutlined-35a6ab31.js";import{C as me}from"./ChromeOutlined-c5ebe18d.js";import{E as fe}from"./EnvironmentOutlined-669d2188.js";import{U as ye}from"./UserOutlined-7764c8bd.js";var j={exports:{}};(function(F,b){(function(d,p){F.exports=p()})(X,function(){var d={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(p,T,D){var y=T.prototype,o=y.format;D.en.formats=d,y.format=function(h){h===void 0&&(h="YYYY-MM-DDTHH:mm:ssZ");var C=this.$locale().formats,E=function(x,Y){return x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(U,A,f){var L=f&&f.toUpperCase();return A||Y[f]||d[f]||Y[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,w,O){return w||O.slice(1)})})}(h,C===void 0?{}:C);return o.call(this,E)}}})})(j);var _e=j.exports;const he=ee(_e);const ge={class:"container-events"},Me={class:"filter-calendar-25"},be={class:"filter-calendar-25-opts"},ke={class:"filter-calendar-check"},De={class:"schedule"},Ce={class:"schedule-header"},Ye={class:"schedule-date"},Le={key:0,class:"event-time"},Ee={key:1,class:"event-time"},xe={class:"event-hour-2"},Ue={class:"title"},Ae={class:"event-description"},we=["onClick"],Oe={class:"modal-calendar-detail"},Se={style:{"line-height":"1.3","margin-bottom":".5rem","margin-top":"0"}},Te=["innerHTML"],Re={key:0},Ge={style:{"margin-left":".5rem"}},ze={key:1},Fe={style:{"margin-left":".5rem"}},Ne={key:2},Ve={style:{"margin-left":".5rem"}},He={style:{"margin-left":".5rem"}},Ie={key:0},Pe={style:{"margin-left":".5rem"}},Be={key:3},$e={style:{"margin-left":".5rem"}},je={key:4},qe=["href"],Ze={key:5},Je=["innerHTML"],Ke={class:"filter-modal"},Qe={style:{display:"flex","flex-direction":"column"}},rt={__name:"EventosGoogleCalendar",setup(F){_.locale("es"),_.extend(te),_.extend(he);const b=ce();b.$patch({cities:b.cities}),b.fetchCities();const d=ae({value1:["UGO","UGSE"]}),p=i(null),T=oe(se,{style:{fontSize:"24px"},spin:!0}),D=i(!1),y=i(null);i(!1);const o=i(null),h=i(!1),C=i(!1),E=i(null),x=i(null),Y=i(new Date),U=i([]),A=i(null),f=i([]),L=i(!1),N=a=>{o.value=a,h.value=!0},w=[{label:"UGO",value:"UGO"},{label:"UGSE",value:"UGSE"}],O=(a,e)=>{const n=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(n)},q=a=>{if(Array.isArray(a)&&a.length>0&&a[0].id){const e=a[0].id;E.value=e,A.value!==e&&(A.value=e,console.log("onPageChange",a),H(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},R=a=>({1:"#808080",red:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",blue:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[a],Z=a=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[a],J=a=>{if(!Array.isArray(a)||a.length===0)return"";const e=_(a[0]).locale("es").format("DD [de] MMMM"),n=a.length>1?_(a[a.length-1]).locale("es").format("DD [de] MMMM"):null;return n?`Desde: ${e} Hasta: ${n}`:`${e}`},V=async()=>{D.value=!0,await H(E.value),await G()},G=async a=>{a&&(y.value=a.id),L.value=!0;const e={},n=_().format("YYYY-MM-DD");d.value1&&(e.office=d.value1),p.value&&(e.city_id=p.value),y.value?e.dateSelected=y.value:e.dateSelected=a?a.id:n,x.value=y.value?_(y.value).format("dddd D [de] MMMM [de] YYYY"):_(n).format("dddd D [de] MMMM [de] YYYY");try{f.value=[];const v=await $({url:"pnte/events-day",method:"GET",params:e});v.data&&Array.isArray(v.data)?f.value=v.data:console.warn("⚠️ Respuesta inesperada de la API:",v)}catch(v){console.error("❌ Error al obtener eventos:",v)}finally{L.value=!1,D.value=!1}},H=async a=>{const e={};p.value&&(e.city_id=p.value),d.value1&&(e.office=d.value1),a&&(e.year_month=a);try{const n=await $({url:"pnte/dots",method:"GET",params:e});U.value=[],n&&Array.isArray(n)?U.value=[{key:"today",highlight:"",dates:[new Date]},...n]:console.warn("⚠️ Respuesta de API inesperada:",n)}catch(n){console.error("❌ Error al obtener eventos:",n)}};return le(async()=>{await G()}),(a,e)=>{const n=g("VCalendar"),v=g("a-checkbox-group"),I=g("a-select"),P=g("a-button"),K=g("a-empty"),Q=g("a-spin"),B=g("a-modal");return u(),c("section",ge,[e[19]||(e[19]=t("h1",{class:"title-pc"},"CALENDARIO 2025",-1)),t("div",null,[s(n,{ref:"calendar",modelValue:Y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>Y.value=l),attributes:U.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":q,onDayclick:G},null,8,["modelValue","attributes"]),t("div",Me,[t("div",null,[e[8]||(e[8]=t("h4",{style:{display:"block"}},"FILTRAR POR",-1)),t("div",be,[t("div",ke,[s(v,{value:d.value1,"onUpdate:value":e[1]||(e[1]=l=>d.value1=l),name:"checkboxgroup",options:w},null,8,["value"])]),s(I,{style:{width:"100%"},value:p.value,"onUpdate:value":e[2]||(e[2]=l=>p.value=l),options:m(b).cities,"show-search":"","filter-option":O,placeholder:"SELECCIONAR REGIÓN"},null,8,["value","options"]),s(P,{class:"btn-modal-filter",type:"primary",onClick:V,loading:D.value},{default:k(()=>e[7]||(e[7]=[S("BUSCAR")])),_:1},8,["loading"])])])])]),t("div",De,[t("div",Ce,[e[9]||(e[9]=t("h4",null,"EVENTOS",-1)),t("span",Ye,r(x.value),1)]),s(Q,{indicator:m(T),spinning:L.value},{default:k(()=>[f.value.length>0?(u(!0),c(ne,{key:0},re(f.value,(l,W)=>(u(),c("div",{key:W,class:"event"},[l.start?(u(),c("div",Ee,[t("div",null,r(l.start),1),e[11]||(e[11]=t("br",null,null,-1)),t("div",xe,r(l.end),1)])):(u(),c("div",Le,e[10]||(e[10]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:z({"border-color":R(l.dot)})},[t("small",{class:"schedule-tag",style:z({"background-color":R(l.dot)})},r(l.id_pnte),5),t("div",Ue,r(l.title),1),t("div",Ae,[S(r(l.descriptionparse)+" ",1),t("span",{onClick:We=>N(l),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,we)])],4)]))),128)):(u(),ie(K,{key:1,class:"no-events"},{description:k(()=>e[12]||(e[12]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),s(B,{open:h.value,"onUpdate:open":e[3]||(e[3]=l=>h.value=l),title:"",footer:""},{default:k(()=>[t("div",Oe,[t("div",null,[t("h3",Se,r(o.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:z({"background-color":R(o.value.id_pnte)})},r(Z(o.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:o.value.descripionAll},null,8,Te),o.value.organiza?(u(),c("div",Re,[s(m(pe)),t("span",Ge,r(o.value.organiza),1)])):M("",!0),o.value.region?(u(),c("div",ze,[s(m(fe)),t("span",Fe,r(o.value.region),1)])):M("",!0),o.value.numMypes?(u(),c("div",Ne,[t("span",null,[s(m(ve))]),t("span",Ve,r(o.value.numMypes),1)])):M("",!0),t("div",null,[t("div",null,[s(m(de)),t("span",He,r(J(o.value.dates)),1)]),o.value.start?(u(),c("div",Ie,[s(m(ue)),t("span",Pe,r(o.value.start),1),e[13]||(e[13]=S(" - ")),t("span",null,r(o.value.end),1)])):M("",!0)]),o.value.nameUser?(u(),c("div",Be,[s(m(ye)),t("span",$e,[S(r(o.value.nameUser)+" ",1),e[14]||(e[14]=t("small",null,"(Representante)",-1))])])):M("",!0),o.value.link?(u(),c("div",je,[s(m(me)),t("a",{style:{"margin-left":".5rem"},href:o.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,qe)])):M("",!0),o.value.resultado?(u(),c("div",Ze,[e[15]||(e[15]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:o.value.resultado},null,8,Je)])):M("",!0)])]),_:1},8,["open"]),s(B,{open:C.value,"onUpdate:open":e[6]||(e[6]=l=>C.value=l),title:"",footer:"",width:"350px"},{default:k(()=>[t("div",Ke,[e[18]||(e[18]=t("h3",null,"FILTRAR POR:",-1)),s(v,{value:d.value1,"onUpdate:value":e[4]||(e[4]=l=>d.value1=l),name:"checkboxgroup",options:w},null,8,["value"]),t("div",Qe,[e[16]||(e[16]=t("label",{style:{margin:"10px 0 6px 0","font-size":"13px"}},"REGIÓN",-1)),s(I,{allowClear:!0,value:p.value,"onUpdate:value":e[5]||(e[5]=l=>p.value=l),options:m(b).cities,"show-search":"","filter-option":O},null,8,["value","options"])]),t("pre",null,r(d.value1),1),s(P,{class:"btn-modal-filter",type:"primary",onClick:V},{default:k(()=>e[17]||(e[17]=[t("b",{style:{"font-weight":"500"}},"BUSCAR",-1)])),_:1})])]),_:1},8,["open"])])}}};export{rt as default};
