import{_ as f}from"./TableComponent-7868579a.js";import{r as n,E as D,u as _,a as T,k as C,X as m,b as h,o as y,d as v,c as r,w as l,p as M,m as P,j as Y}from"./index-5df45652.js";import{_ as U}from"./DrawMP-75ad11a9.js";import{d as L}from"./downloadExcel-ee05a1a2.js";import"./es-b49b6a64.js";import"./icoexcel-1b303edf.js";import"./selectes-d99873b2.js";import"./SyncOutlined-5aba341a.js";import"./MoreOutlined-707461a2.js";import"./FormComponent-33b171d3.js";import"./quill.snow-1c63796f.js";import"./UpImage-1825362a.js";import"./_plugin-vue_export-helper-c27b6911.js";const V={class:"layout-content"},K={__name:"reportes-lista",setup(b){JSON.parse(localStorage.getItem("role"));const u=n([]),E=n(0),w=n(150);D();const i=n(!1);n(!1),_();const s=n(!1),c=n(null),I=n(!1),t=T({page:1}),x=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"RUC",dataIndex:"ruc",width:100,align:"center"},{title:"RAZON SOCIAL",dataIndex:"razonSocial",width:180},{title:"SECTOR MYPE",dataIndex:"sector_priorizado",width:180},{title:"REGIÓN ASESOR",dataIndex:"region_asesor",width:140},{title:"PROVINCIA ASESOR",dataIndex:"province_asesor",width:140},{title:"DISTRITO ASESOR",dataIndex:"district_asesor",width:140},{title:"ASESOR",dataIndex:"asesor",width:180},{title:"TIPO DE DOCUMENTO",dataIndex:"tipo_documento",align:"center",width:100},{title:"NÚMERO DE DOCUMENTO",dataIndex:"documentnumber",width:140},{title:"PAÍS NACIMIENTO",dataIndex:"country",width:140},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",align:"center",width:140},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:180},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:180},{title:"NOMBRES",dataIndex:"name",width:180},{title:"VINCULACIÓN CON LA MYPE",dataIndex:"title",width:180},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sick",align:"center",width:120},{title:"NIVEL EDUCATIVO",dataIndex:"title",width:180},{title:"TELÉFONO",dataIndex:"phone",width:180},{title:"EMAIL",dataIndex:"email",width:200},{title:"PERIODO PRODUCTOR",dataIndex:"periodo",width:180},{title:"CANTIDAD MAQUINARIA",dataIndex:"cantidad",width:180},{title:"REGIÓN MYPE",dataIndex:"mype_region",width:140},{title:"PROVINCIA MYPE",dataIndex:"mype_province",width:140},{title:"DISTRITO MYPE",dataIndex:"mype_district",width:140},{title:"UBICACIÓN",dataIndex:"mype_ubicacion",width:180},{title:"FECHA ASESORÍA",dataIndex:"created_at",align:"center",width:160},{title:"COMPONENTE ASESORÍA",dataIndex:"componente",width:180},{title:"TEMA ASESORÍA",dataIndex:"tema",width:180},{title:"MODALIDAD",dataIndex:"modalidad",width:180},{title:"MES",dataIndex:"mes",width:100},{title:"MES NÚMERO",dataIndex:"mes_numero",align:"center",width:80},{title:"ACTIVIDAD",dataIndex:"comercialactivity",width:180},{title:"AÑO",dataIndex:"year",align:"center",width:140}],O=()=>{o(),i.value=!1},A=()=>{c.value=null,i.value=!0},S=async()=>{I.value=!0;try{await L("download/cp-registros/export","compras mi Perú",{})}catch(e){console.error("Error de red:",e)}finally{I.value=!1}},R=async e=>{t.page=e,await o()},g=async e=>{e&&(t.page=1,await o())},o=async()=>{try{s.value=!0;const e={page:t.page};t.year&&(e.year=M(t.year).format("YYYY")),t.range&&(e.startDate=t.range[0].format("YYYY/MM/DD"),e.endDate=t.range[1].format("YYYY/MM/DD")),t.name&&(e.name=t.name),t.orderby&&(e.orderby=t.orderby);const a=await P({url:"purchases-my-peru/list",method:"GET",params:e}),{data:d}=a;u.value=d.data,E.value=d.total,w.value=d.per_page}catch(e){console.error("Error de red:",e)}finally{s.value=!1}};return C(async()=>{await o()}),m("search",t),m("loading",s),m("loadingFile",I),(e,a)=>{const d=h("a-button"),N=h("a-drawer");return y(),v("div",V,[r(f,{title:"REPORTES COMPRAS MI PERÚ",new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:x,titleSearch:"BUSCAR",pageSize:w.value,nameTotal:"Registros",dataSource:u.value,total:E.value,btnUpdate:!0,onHandleNew:A,onHandleCallFetchData:o,onHandleDownloadExcel:S,onHandleSearch:g,onHandlePaginator:R,downloadExcel:!0},{left:l(()=>[r(d,{type:"primary",onClick:a[0]||(a[0]=p=>e.$router.push("/admin/compras-peru/registrar"))},{default:l(()=>a[2]||(a[2]=[Y(" REGISTRAR ")])),_:1})]),"custom-options":l(({record:p})=>a[3]||(a[3]=[])),_:1},8,["pageSize","dataSource","total"]),r(N,{open:i.value,"onUpdate:open":a[1]||(a[1]=p=>i.value=p),title:c.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:l(()=>[r(U,{onCloseDraw:O,info:c.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{K as default};
