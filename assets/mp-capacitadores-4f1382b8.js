import{_ as x}from"./TableComponent-b0b468da.js";import{p as O,r as o,a as E,k as R,U as P,X as u,o as T,d as b,c as m,m as I,h as B,b as y,w,e as U}from"./index-912f664d.js";import{_ as k}from"./FormComponent-9d012775.js";import"./es-ba3a9c9c.js";import"./icoexcel-1b303edf.js";import"./selectes-3c0733ea.js";import"./SyncOutlined-996f3c2d.js";import"./MoreOutlined-52e64837.js";import"./quill.snow-c76e5b87.js";const $={class:"draw-mp-capacitador"},H={__name:"MujerProduceCapacitador",props:["info"],emits:["closeDraw"],setup(D,{emit:p}){O.locale("es");const f=o({dni:{type:"iText",label:"DNI DEL CAPACITADOR",name:"dni",required:!0,message:"Escribir DNI del capacitador",disabled:!1,max:8},name:{type:"iText",label:"NOMBRE DEL CAPACITADOR",name:"name",required:!0,message:"Escribir nombre del capacitador",disabled:!1,max:255}}),_=p,a=D,r=o("GUARDAR"),n=E({}),i=o(!1),s=async()=>{i.value=!0;try{const e={dni:n.dni,name:n.name},l=a.info?`fair/update/${a.info.id}`:"mp/register-capacitador",A=a.info?"PUT":"POST",C=await I({url:l,method:A,data:e});C.status===200&&(B.success(C.message),v(),_("closeDraw",!0))}catch(e){console.error("Error:",e);const l=document.getElementsByClassName("ant-drawer-body")[0];l&&(l.scrollTop=0)}finally{i.value=!1}},v=()=>{n.dni=null,n.name=null},h=async e=>{e&&console.log("iaiaiiaiaia",e)};return R(()=>{a.info&&h(a.info)}),P(()=>a.info,e=>{e?h(e):v()}),u("formState",n),u("loadingState",i),(e,l)=>(T(),b("div",$,[m(k,{fields:f.value,btnSaveName:r.value,onOnSubmit:s,mayus:!0},null,8,["fields","btnSaveName"])]))}},M={class:"layout-content"},q=["onClick"],W={__name:"mp-capacitadores",setup(D){const p=o([]),f=o(0),_=o(150),a=o(!1),r=o(!1),n=o(null),i=o(!1),s=E({name:null,page:1}),v=[{title:"#",dataIndex:"idx",align:"center",width:10},{title:"NOMBRE DEL CAPACITADOR",dataIndex:"name",width:180}],h=t=>{n.value=t,a.value=!0},e=()=>{c(),a.value=!1},l=()=>{n.value=null,a.value=!0},A=async t=>{s.page=t,await c()},C=async t=>{t&&(s.page=1,await c())},c=async()=>{r.value=!0;try{const t={page:s.page};s.name&&(t.name=s.name);const g=await I({url:"mp/all-capacitadores",method:"GET",params:t}),{data:d}=g;p.value=d.data,f.value=d.total,_.value=d.per_page}catch(t){console.error("Error de red:",t)}finally{r.value=!1}};return R(async()=>{await c()}),u("search",s),u("loading",r),u("loadingFile",i),(t,g)=>{const d=y("a-menu-item"),N=y("a-drawer");return T(),b("div",M,[m(x,{title:"CAPACITADORES",new:!0,textNuevo:"NUEVO CAPACITADOR",placeholderSearch:"Buscar",columns:v,titleSearch:"BUSCAR",pageSize:_.value,nameTotal:"Capacitadores",dataSource:p.value,total:f.value,btnUpdate:!0,onHandleNew:l,onHandleCallFetchData:c,onHandleSearch:C,onHandlePaginator:A},{"custom-options":w(({record:S})=>[m(d,null,{default:w(()=>[U("a",{onClick:z=>h(S)},"Editar",8,q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),m(N,{open:a.value,"onUpdate:open":g[0]||(g[0]=S=>a.value=S),title:n.value?"EDITAR CAPACITADOR":"REGISTRAR CAPACITADOR",placement:"right",width:"550"},{default:w(()=>[m(H,{onCloseDraw:e,info:n.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{W as default};
