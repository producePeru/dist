import{_ as Ie}from"./calendar-e0a6119a.js";import{g as ke,r as b,a as ge,b as h,o as s,x as v,w as u,e as d,d as I,F as Z,s as be,c as g,y as c,v as pe,h as N,H as Ae,I as Le,J as Fe,P as he,i as z,f as Q,K as Ce,m as K,l as _e,M as qe,u as ye,E as fe,t as ve,q as Oe,j as Te,k as Ne,L as Ue}from"./index-153e5230.js";import{F as Me}from"./FormalizacionFooter-45d901b0.js";import{u as Ee}from"./selectes-8c8b7c6b.js";import"./es-65e5a49a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./EnvironmentOutlined-7925843b.js";const $e={class:"fair-form"},Ge={key:7,class:"ellipsis"},ze={key:0},Be={style:{"text-align":"center"}},je=["src"],Ve={key:0},Ye=["src"],We={key:9},He={key:0,class:"mt-2"},Ke=["src"],Je=3,Xe={__name:"RegistroPaso1",props:["typeFair"],emits:["nextStep"],setup(re,{emit:T}){const $=T,o=Ee();o.$patch({cities:o.cities}),o.$patch({provinces:o.provinces}),o.$patch({districts:o.districts}),o.fetchCities();const q=ke.get("token"),l="https://apituempresa.soporte-pnte.com/api/",t="http://127.0.0.1:8000/api/",H=window.location.hostname=="localhost"||window.location.hostname=="127.0.0.1"?t:l,B=b(null),L=b(!1),U=b(!1),a=ge({}),P=[{label:"COMERCIO",value:"comercio"},{label:"SERVICIOS",value:"servicios"},{label:"INDUSTRIA",value:"industria"}],_=[{label:"SI",value:"si"},{label:"NO",value:"no"}],w=[{label:"ALIMENTOS Y BEBIDAS",value:1},{label:"ARTESANÍA",value:2},{label:"COSMÉTICA ORGÁNICA",value:3},{label:"CUERO CALZADO",value:4},{label:"DECORACIÓN",value:5},{label:"GASTRONOMÍA",value:6},{label:"JOYERÍA",value:7},{label:"MADERA",value:8},{label:"METALMECÁNICA",value:9},{label:"SERVICIOS",value:11},{label:"TEXTIL CONFECCIONES",value:10}],F=r=>{if(r==="economicSector")return P;if(r==="isGremio"||r==="pointSale")return _},S=b({ruc:{type:"iSearch",label:"NÚMERO DE RUC",name:"ruc",required:!0,message:"Escribir RUC",disabled:!0,max:11},space1:{type:"space1"},space2:{type:"space2"},socialReason:{type:"iText",label:"RAZÓN SOCIAL",name:"socialReason",required:!0,message:"Escribir la razón social",disabled:!0,max:100},comercialName:{type:"iText",label:"NOMBRE COMERCIAL",name:"comercialName",required:!0,message:"Escribir el nombre comercial",disabled:!0,max:100},city_id:{type:"iSelectWrite",label:"REGIÓN DE LA EMPRESA",name:"city_id",required:!0,message:"Seleccionar región",disabled:!0},province_id:{type:"iSelectWrite",label:"PROVINCIA DE LA EMPRESA",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelectWrite",label:"DISTRITO DE LA EMPRESA",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"DIRECCIÓN DE LA EMPRESA",name:"address",required:!0,message:"Escribir la dirección",disabled:!0,max:100},businessSector:{type:"iSelectWrite",label:"RUBRO DEL NEGOCIO",name:"businessSector",required:!0,message:"Seleccionar rubro del negocio",disabled:!0,max:11},space4:{type:"space4"},space8:{type:"space8"},web:{type:"iLink",label:"LINK DE PÁGINA WEB",name:"web",required:!1,message:"Link de Página web",disabled:!0,isLink:!0,placeholder:"Ejemplo: https://www.abc.com/"},facebook:{type:"iLink",label:"LINK DE PÁGINA DE FACEBOOK",name:"facebook",required:!1,message:"Link de Página de Facebook",disabled:!0,isLink:!0,placeholder:"Ejemplo: https://www.facebook.com/ejemplo"},instagram:{type:"iLink",label:"LINK DE INSTAGRAM",name:"instagram",required:!1,message:"Link de Página de Instagram",disabled:!0,isLink:!0,placeholder:"Ejemplo: https://www.instagram.com/ejemplo"},description:{type:"iTextarea",label:"BREVE EXPLICACIÓN DEL NEGOCIO (aspectos resaltantes, productos, valor diferencial)",name:"description",required:!1,message:"Escribir la descripción",max:120,disabled:!0},files:{logo:{type:"iFile",label:"LOGO DE LA EMPRESA (230x142px)",name:"logo",required:!0,message:"Logo",disabled:!0,span:"Logo de la Empresa"},filePDF:{type:"iFile",label:"Adjuntar reporte tributario",name:"filePDF",required:!0,message:"Adjuntar Reporte",disabled:!0,span:"Reporte Tributario PDF"}},space7:{type:"space7"},fileImgs:{type:"iFileImg",label:"CARGAR IMAGENES DE TUS PRODUCTOS (Max. 3)",name:"fileImgs",required:!1,message:"Adjuntar Reporte",disabled:!0}}),j=(r,m)=>new Promise((k,R)=>{m?/^(https?:\/\/)?([\w.-]+\.[a-z]{2,})(\/[^\s]*)?(\?[^\s]*)?$/i.test(m)?k():R(new Error("Por favor, introduce una URL válida.")):k()}),V=async()=>{const r=a.ruc,m=/^\d{11}$/.test(r)&&/^(10|15|20)/.test(r),k=["comercialName","socialReason","city_id","address","businessSector","web","facebook","instagram","description"],R=A=>{k.forEach(C=>{S.value[C].disabled=A})};if(!m)console.error("El RUC debe tener 11 caracteres, comenzar con 11, 15 o 20, y contener solo números."),R(!0);else{L.value=!0;try{const A=await Q({url:`public/search-api-ruc/${a.ruc}`,method:"GET"});A.status==200&&(a.address=A.data.address,a.description=A.data.description,a.facebook=A.data.facebook,a.instagram=A.data.instagram,a.web=A.data.web,a.socialReason=A.data.socialReason,R(!1))}catch(A){console.error("Error de red:",A)}finally{L.value=!1}}},G=r=>{const m=a[r]?a[r].trim():"";a[r]=m},p=r=>{r=="isGremio"&&(a.isGremio=="si"?(S.value.nameGremio.display="block",S.value.nameGremio.required=!0):(S.value.nameGremio.display="none",S.value.nameGremio.required=!1)),r=="pointSale"&&(a.pointSale=="si"?(S.value.numberPointSale.display="block",S.value.numberPointSale.required=!0):(S.value.numberPointSale.display="none",S.value.numberPointSale.required=!1))},i=(r,m)=>{const k=r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return m.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(k)},f=r=>{a.province_id=null,a.district_id=null,o.fetchProvinces(r)},y=r=>{a.district_id=null,o.fetchDistricts(r)},x=()=>{window.scrollTo({top:document.documentElement.scrollHeight/4,behavior:"smooth"})},Y=async()=>{const r={ruc:a.ruc,comercialName:a.comercialName,socialReason:a.socialReason,city_id:a.city_id,province_id:a.province_id,district_id:a.district_id,address:a.address,category_id:a.businessSector,percentageOwnPlan:a.percentageOwnPlan,percentageMaquila:a.percentageMaquila,capacityProdMounth:a.capacityProdMounth,isGremio:a.isGremio,nameGremio:a.isGremio=="si"?a.nameGremio:null,pointSale:a.pointSale,numberPointSale:a.pointSale=="si"?a.numberPointSale:null,web:a.web,facebook:a.facebook,instagram:a.instagram,description:a.description,filePDF:a.filePDF,logo:a.logo,img1:a.img1,img2:a.img2,img3:a.img3};U.value=!0;try{const m=await Ce.post(`${H}public/first-or-new`,r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${q}`}});if(m.data.status==200){const k={id_mype:m.data.id_mype,ruc:a.ruc,step:1};$("nextStep",k)}}catch{K.error("Error al subir")}finally{U.value=!1}};b([]),b([]);const O=b([]),ee=b(!1),J=b(""),W=b(""),n=()=>{ee.value=!1,W.value=""},ue=async r=>{if(console.log("Preview",r),r.url)J.value=r.url;else if(r.originFileObj){const m=new FileReader;m.onload=k=>{J.value=k.target.result},m.readAsDataURL(r.originFileObj)}else if(r.thumbUrl)J.value=r.thumbUrl;else{console.error("No se pudo obtener una imagen válida para la vista previa.");return}ee.value=!0,W.value=r.name||r.url.substring(r.url.lastIndexOf("/")+1)},D=r=>{const m=O.value.findIndex(k=>k.uid===r.uid);m===0?a.img1=null:m===1?a.img2=null:m===2&&(a.img3=null),O.value.splice(m,1)},ce=b([]),me=b(!1),se=b(""),ae=b(!1),Se=r=>new Promise((m,k)=>{ae.value=!0;const R=new FileReader;R.onload=A=>{const C=new Image;C.src=A.target.result,C.onload=()=>{const M=document.createElement("canvas");M.width=230,M.height=142;const te=M.getContext("2d"),X=Math.max(230/C.width,142/C.height),oe=(230-C.width*X)/2,le=(142-C.height*X)/2;te.fillStyle="#fff",te.fillRect(0,0,230,142),te.drawImage(C,oe,le,C.width*X,C.height*X),M.toBlob(ie=>{if(!ie)return K.error("No se pudo procesar la imagen."),ae.value=!1,k();const de=URL.createObjectURL(ie),ne=new File([ie],r.name,{type:r.type});a.logo=ne,ce.value=[{uid:String(Date.now()),name:ne.name,status:"done",url:de,originFileObj:ne}],se.value=de,W.value=r.name,ae.value=!1,m(!1)},r.type||"image/jpeg")},C.onerror=()=>{ae.value=!1,K.error("Error al cargar la imagen."),k()}},R.readAsDataURL(r)}),xe=r=>{se.value=r.url||r.thumbUrl,W.value=r.name,me.value=!0},Pe=()=>{me.value=!1},we=()=>{O.value=[],se.value=""},De=r=>O.value.length>=Je?(K.error("Solo puedes cargar un máximo de 3 imágenes"),!1):(a.img1?a.img2?a.img3||(a.img3=r):a.img2=r:a.img1=r,O.value.push({uid:r.uid,name:r.name,status:"done"}),!1);return(r,m)=>{const k=h("a-input-search"),R=h("a-form-item"),A=h("a-input"),C=h("a-tooltip"),M=h("a-select"),te=h("a-textarea"),X=h("a-input-number"),oe=h("a-upload"),le=h("a-modal"),ie=h("a-spin"),de=h("a-button"),ne=h("a-form");return s(),v(ne,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:Y,onFinishFailed:x},{default:u(()=>[m[5]||(m[5]=d("h2",null,"DATOS DE LA EMPRESA",-1)),d("div",$e,[(s(!0),I(Z,null,be(S.value,(e,Re)=>(s(),I(Z,{key:Re},[e.type==="iSearch"?(s(),v(R,{key:0,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max},{pattern:/^(10|15|20)\d{9,}$/,message:"El número debe comenzar con 10, 15 o 20, tener solo números, y al menos 11 caracteres"}]},{default:u(()=>[g(k,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,placeholder:"Ingresar RUC","enter-button":"BUSCAR",loading:L.value,maxlength:e.max,onSearch:V},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iText"?(s(),v(R,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max}],style:pe({display:e.display})},{default:u(()=>[g(A,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,maxlength:e.max,onBlur:E=>G(e.name),placeholder:e.placeholder,disabled:e.disabled},null,8,["value","onUpdate:value","maxlength","onBlur","placeholder","disabled"])]),_:2},1032,["name","label","rules","style"])):c("",!0),e.type==="iLink"?(s(),v(R,{key:2,name:e.name,label:e.label,style:{position:"relative"},rules:[{required:e.required,message:e.message},{validator:j,message:"Por favor, introduce una URL válida."}]},{default:u(()=>[g(A,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,onBlur:E=>G(e.name),disabled:e.disabled,placeholder:e.placeholder},null,8,["value","onUpdate:value","onBlur","disabled","placeholder"]),g(C,{placement:"topLeft",title:e.placeholder},{default:u(()=>[g(N(Ae),{style:{position:"absolute",top:"0",right:"0"}})]),_:2},1032,["title"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iSelect"?(s(),v(R,{key:3,class:"item-max",name:e.name,label:e.label,style:pe({display:e.display}),rules:[{required:e.required,message:e.message}]},{default:u(()=>[g(M,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,options:F(e.name),disabled:e.disabled,onChange:E=>p(e.name)},null,8,["value","onUpdate:value","options","disabled","onChange"])]),_:2},1032,["name","label","style","rules"])):c("",!0),e.type==="iTextarea"?(s(),v(R,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[g(te,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,rows:4,maxlength:e.max,disabled:e.disabled,"show-count":""},null,8,["value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iNumber"?Le((s(),v(R,{key:5,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[g(X,{value:a[e.name],"onUpdate:value":E=>a[e.name]=E,min:1,max:e.max,style:{width:"180px"},disabled:e.disabled},null,8,["value","onUpdate:value","max","disabled"])]),_:2},1032,["name","label","rules"])),[[Fe,e.display]]):c("",!0),e.type==="iSelectWrite"?(s(),v(R,{key:6,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[e.name=="city_id"?(s(),v(M,{key:0,value:a[e.name],"onUpdate:value":E=>a[e.name]=E,options:N(o).cities,"show-search":"","filter-option":i,onChange:f,disabled:e.disabled},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),e.name=="province_id"?(s(),v(M,{key:1,value:a[e.name],"onUpdate:value":E=>a[e.name]=E,options:N(o).provinces,"show-search":"","filter-option":i,onChange:y,disabled:!a.city_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),e.name=="district_id"?(s(),v(M,{key:2,value:a[e.name],"onUpdate:value":E=>a[e.name]=E,options:N(o).districts,"show-search":"","filter-option":i,disabled:!a.province_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),e.name=="businessSector"?(s(),v(M,{key:3,value:a[e.name],"onUpdate:value":E=>a[e.name]=E,options:w,"show-search":"","filter-option":i,disabled:e.disabled},null,8,["value","onUpdate:value","disabled"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),e.filePDF?(s(),I("div",Ge,[e.logo.name==="logo"?(s(),v(R,{key:0,name:e.logo.name,label:e.logo.label,rules:[{required:e.logo.required,message:e.logo.message}]},{default:u(()=>[g(oe,{"file-list":ce.value,"before-upload":Se,"list-type":"picture-card","on-remove":we,onPreview:xe,"show-upload-list":!0},{default:u(()=>[ce.value.length<1?(s(),I("div",ze,[g(N(he)),m[1]||(m[1]=d("div",{style:{"margin-top":"8px","font-size":"13px"}},"Cargar Logo",-1))])):c("",!0)]),_:1},8,["file-list"]),g(le,{open:me.value,title:W.value,footer:null,onCancel:Pe},{default:u(()=>[d("div",Be,[d("img",{alt:"Vista previa",style:{width:"230px",height:"142px",border:"1px solid #e7e7e7"},src:se.value},null,8,je)])]),_:1},8,["open","title"])]),_:2},1032,["name","label","rules"])):c("",!0),ae.value?(s(),v(ie,{key:1,style:{"margin-top":"8px"}})):c("",!0)])):c("",!0),e.type==="iFileImg"?(s(),v(R,{key:8,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:u(()=>[g(oe,{"file-list":O.value,"onUpdate:fileList":m[0]||(m[0]=E=>O.value=E),"before-upload":De,"list-type":"picture-card","on-remove":D,onPreview:ue},{default:u(()=>[O.value.length<3?(s(),I("div",Ve,[g(N(he)),m[2]||(m[2]=d("div",{style:{"margin-top":"8px","font-size":"13px"}},"Cargar Imagen",-1))])):c("",!0)]),_:1},8,["file-list"]),g(le,{open:ee.value,title:W.value,footer:null,onCancel:n},{default:u(()=>[d("img",{alt:"example",style:{width:"100%"},src:J.value},null,8,Ye)]),_:1},8,["open","title"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="space1"||e.type==="space2"||e.type==="space3"||e.type==="space4"||e.type==="space5"||e.type==="space6"||e.type==="space7"||e.type==="space8"?(s(),I("div",We)):c("",!0)],64))),128)),B.value?(s(),I("div",He,[m[3]||(m[3]=d("p",null,"Vista previa del logo (230x142):",-1)),d("img",{src:B.value,alt:"Vista previa del logo",width:"230",height:"142",style:{border:"1px solid #ccc"}},null,8,Ke)])):c("",!0)]),g(R,null,{default:u(()=>[g(de,{type:"primary","html-type":"submit",loading:U.value,class:"fair-btn"},{default:u(()=>m[4]||(m[4]=[z("SIGUIENTE")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}};const Ze={class:"fair-form"},Qe={key:6},ea="DD/MM/YYYY",aa={__name:"RegistroPaso2",emits:["nextStep2"],setup(re,{emit:T}){_e.locale("es");const $=T,o=Ee();o.$patch({typeDocuments:o.typeDocuments}),o.$patch({cities:o.countries}),o.$patch({cities:o.cities}),o.$patch({provinces:o.provinces}),o.$patch({districts:o.districts}),o.$patch({genders:o.genders}),o.fetchTypeDocuments(),o.fetchCountries(),o.fetchCities(),o.fetchGenders();const q=b(!1),l=b(!1);b(null),b(null);const t=ge({}),H=[{value:"yes",label:"SI"},{value:"no",label:"NO"}],B=p=>{if(p==="country_id")return o.countries;if(p==="gender_id")return o.genders;if(p==="sick")return H;if(p==="typedocument_id")return o.typeDocuments},L=b({typedocument_id:{type:"iSelect",label:"TIPO DE DOCUMENTO DE IDENTIDAD",name:"typedocument_id",required:!0,message:"Seleccionar tipo",disabled:!1},documentnumber:{type:"iSearch",label:"INGRESE NÚMERO DE IDENTIDAD",name:"documentnumber",required:!0,message:"Escribir tu número de documento",disabled:!0,max:11},space1:{type:"space1"},name:{type:"iText",label:"NOMBRES DEL REPRESENTANTE",name:"name",required:!0,message:"Escribir nombre",disabled:!0,max:50},lastname:{type:"iText",label:"APELLIDO PATERNO DEL REPRESENTANTE",name:"lastname",required:!0,message:"Escribir nombre",disabled:!0,max:50},middlename:{type:"iText",label:"APELLIDO MATERNO DEL REPRESENTANTE",name:"middlename",required:!0,message:"Escribir nombre",disabled:!0,max:50},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!0,message:"Seleccionar fecha de nacimiento",disabled:!0},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},sick:{type:"iSelect",label:"¿TIENE ALGUNA DISCAPACIDAD?",name:"sick",required:!0,message:"¿Tiene discapacidad?",disabled:!0},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!0,message:"Ingresar email",email:"email",disabled:!0,max:255},phone:{type:"iText",label:"NÚMERO DE CELULAR",name:"phone",required:!0,message:"Escribe tu num. de celular",disabled:!0,max:9}}),U=(p,i)=>{if(!i)return Promise.reject("La fecha es requerida");const f=new Date,y=new Date(i);let x=f.getFullYear()-y.getFullYear();const Y=f.getMonth()-y.getMonth();return(Y<0||Y===0&&f.getDate()<y.getDate())&&x--,x<18||x>99?Promise.reject("La edad debe estar entre 18 y 99 años"):Promise.resolve()},a=(p,i)=>{if(p.field==="phone"){const f=/^9\d{8}$/;if(i){if(!f.test(i))return Promise.reject("El número debe empezar con 9 y tener exactamente 9 dígitos")}else return Promise.reject("El número de teléfono es obligatorio")}if(p.field==="email"){const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(i){if(!f.test(i))return Promise.reject("Ingrese un correo electrónico válido")}else return Promise.reject("El correo electrónico es obligatorio")}return Promise.resolve()},P=p=>{const i=t[p]?t[p].trim():"";t[p]=i},_=p=>{p=="typedocument_id"&&(t.documentnumber=null,t.name=null,t.lastname=null,t.middlename=null,t.birthday=null,t.gender_id=null,t.sick=null,t.email=null,t.phone=null)},w=(p,i)=>{const f=t.typedocument_id;return/^\d+$/.test(i)?f===1&&i.length!==8?Promise.reject("Debe tener exactamente 8 caracteres."):f!==1&&i.length>12?Promise.reject("Debe tener exactamente 12 caracteres."):(f===1&&i.startsWith("0")&&i.length===8,Promise.resolve()):Promise.reject("Solo se permiten números.")},F=async()=>{const{typedocument_id:p,documentnumber:i}=t;if(!p||!i){K.error("El tipo de documento y el número de documento no pueden estar vacíos.");return}if(!/^\d+$/.test(i)){K.error("El número de documento solo debe contener caracteres numéricos.");return}if(p===1&&i.length!==8){K.error("El número de documento debe tener exactamente 8 caracteres para el tipo de documento DNI.");return}const f=["name","lastname","middlename","birthday","sick","email","phone","gender_id"],y=x=>{f.forEach(Y=>{L.value[Y].disabled=x})};try{if(q.value=!0,t.typedocument_id==1){const x=await Q({url:`public/search-api-dni/${t.documentnumber}`,method:"GET"});x.status==200&&(t.name=x.data.name,t.lastname=x.data.lastname,t.middlename=x.data.middlename,t.gender_id=x.data.gender_id,t.sick=x.data.sick)}}catch(x){console.error("Error de red:",x)}finally{y(!1),q.value=!1}},S=(p,i)=>{const f=p.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(f)},j=p=>{t.province_id=null,t.district_id=null,o.fetchProvinces(p)},V=p=>{t.district_id=null,o.fetchDistricts(p)},G=async()=>{l.value=!0;const p={typedocument_id:t.typedocument_id,documentnumber:t.documentnumber,name:t.name,lastname:t.lastname,middlename:t.middlename,country_id:155,city_id:15,province_id:127,district_id:1251,address:null,birthday:_e(t.birthday).format("YYYY-MM-DD"),gender_id:t.gender_id,sick:t.sick,email:t.email,phone:t.phone};try{const i=await Q({url:"public/create-up",method:"POST",data:p});if(console.log("response: ",i),i.status==200){const f={id_person:i.id_person,dni:t.documentnumber,email:t.email,step:2};$("nextStep2",f)}}catch(i){console.error("Error de red:",i)}finally{l.value=!1}};return(p,i)=>{const f=h("a-input-search"),y=h("a-form-item"),x=h("a-input"),Y=h("a-date-picker"),O=h("a-select"),ee=h("a-textarea"),J=h("a-button"),W=h("a-form");return s(),v(W,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:G},{default:u(()=>[i[1]||(i[1]=d("h2",null,"REPRESENTANTE DE LA EMPRESA",-1)),d("div",Ze,[(s(!0),I(Z,null,be(L.value,(n,ue)=>(s(),I(Z,{key:ue},[n.type==="iSearch"?(s(),v(y,{key:0,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,validator:w}]},{default:u(()=>[g(f,{value:t[n.name],"onUpdate:value":D=>t[n.name]=D,placeholder:"","enter-button":"BUSCAR",loading:q.value,maxlength:t.typedocument_id===1?8:12,onSearch:F},null,8,["value","onUpdate:value","loading","maxlength"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iText"?(s(),v(y,{key:1,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,max:n.max},{validator:a}]},{default:u(()=>[g(x,{value:t[n.name],"onUpdate:value":D=>t[n.name]=D,maxlength:n.max,onBlur:D=>P(n.name),disabled:n.disabled},null,8,["value","onUpdate:value","maxlength","onBlur","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iDate"?(s(),v(y,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message},{validator:U,message:"La edad debe estar entre 18 y 99 años"}]},{default:u(()=>[g(Y,{locale:N(qe),value:t[n.name],"onUpdate:value":D=>t[n.name]=D,style:{width:"100%"},format:ea,placeholder:"día/mes/año",disabled:n.disabled},null,8,["locale","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iSelect"?(s(),v(y,{key:3,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:u(()=>[g(O,{value:t[n.name],"onUpdate:value":D=>t[n.name]=D,options:B(n.name),"show-search":"","filter-option":S,onChange:D=>_(n.name),disabled:n.disabled},null,8,["value","onUpdate:value","options","onChange","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iTextarea"?(s(),v(y,{key:4,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:u(()=>[g(ee,{value:t[n.name],"onUpdate:value":D=>t[n.name]=D,rows:4,maxlength:n.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iSelectWrite"?(s(),v(y,{key:5,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:u(()=>[n.name=="city_id"?(s(),v(O,{key:0,value:t[n.name],"onUpdate:value":D=>t[n.name]=D,options:N(o).cities,"show-search":"","filter-option":S,onChange:j,disabled:n.disabled},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),n.name=="province_id"?(s(),v(O,{key:1,value:t[n.name],"onUpdate:value":D=>t[n.name]=D,options:N(o).provinces,"show-search":"","filter-option":S,onChange:V,disabled:!t.city_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0),n.name=="district_id"?(s(),v(O,{key:2,value:t[n.name],"onUpdate:value":D=>t[n.name]=D,options:N(o).districts,"show-search":"","filter-option":S,disabled:!t.province_id},null,8,["value","onUpdate:value","options","disabled"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="space1"?(s(),I("div",Qe)):c("",!0)],64))),128))]),g(y,null,{default:u(()=>[g(J,{type:"primary","html-type":"submit",loading:l.value,class:"fair-btn"},{default:u(()=>i[0]||(i[0]=[z("SIGUIENTE")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}};const ta={class:"fair-form-3"},ia={class:"acceptable-wrapper"},na={__name:"RegistroPaso3",props:["newFairData"],setup(re){const T=re,$=ye(),o=fe(),q=b(!1),l=ge({}),t=b({hasPos:{type:"iRadio",label:"Cuenta con el servicio de pagos electrónicos mediante POS (Tarjeta de crédito y/o Débito)",name:"hasPos",required:!0,message:"Escoger opción",disabled:!0,other:!1},hasYape:{type:"iRadio",label:"Su negocio cuenta con el servicio de pagos por medio de monederos electrónicos (Yape, PLIM, etc.)",name:"hasYape",required:!0,message:"Escoger opción",disabled:!0,other:!1},hasVistualStore:{type:"iRadio",label:"Su negocio realiza ventas a través de tiendas virtuales, ya sea por medio de página web (Mercado Libre, Amazon, Redes Sociales, Whatsapp, etc)",name:"hasVistualStore",required:!0,message:"Escoger opción",disabled:!0,other:!1},hasDelivery:{type:"iRadio",label:"Su negocio realiza entregas a domicilio (delivery)",name:"hasDelivery",required:!0,message:"Escoger opción",disabled:!0,other:!1},hasElectronicInvoice:{type:"iRadio",label:"Su negocio emite comprobantes de pago",name:"hasElectronicInvoice",required:!0,message:"Escoger opción",disabled:!0,other:!1},isFormalizedPnte:{type:"iRadio",label:"Se ha formalizado a través del Programa Nacional Tu Empresa",name:"isFormalizedPnte",required:!0,message:"Escoger opción",disabled:!0},isIndecopi:{type:"iRadio",label:"¿Su marca se encuentra registrada en INDECOPI?",name:"isIndecopi",required:!0,message:"Escoger opción",disabled:!0},accept:{type:"iCheckbox",label:"",name:"accept",required:!0,message:"Acepta los términos y condiciones",disabled:!0}}),H=P=>{P.target.checked||delete l.accept},B=P=>{console.log("nameService",P),P=="hasParticipatedFair"&&(l.hasParticipatedFair=="otro"?(t.value.nameFair.display="block",t.value.nameFair.required=!0):(t.value.nameFair.display="none",t.value.nameFair.required=!1)),P=="hasParticipatedProduce"&&(l.hasParticipatedProduce=="otro"?(t.value.nameService.display="block",t.value.nameService.required=!0):(t.value.nameService.display="none",t.value.nameService.required=!1))},L=P=>{const _=l[P]?l[P].trim():"";l[P]=_},U=()=>{window.scrollTo({top:document.documentElement.scrollHeight/4,behavior:"smooth"})},a=async()=>{try{q.value=!0;const P={hasPos:l.hasPos,hasDelivery:l.hasDelivery,hasElectronicInvoice:l.hasElectronicInvoice,hasYape:l.hasYape,hasVistualStore:l.hasVistualStore,isFormalizedPnte:l.isFormalizedPnte,hasParticipatedFair:l.hasParticipatedFair,nameFair:l.hasParticipatedFair=="otro"?l.nameFair:null,hasParticipatedProduce:l.hasParticipatedProduce,nameService:l.hasParticipatedProduce=="otro"?l.nameService:null,isIndecopi:l.isIndecopi},_={slug:o.params.slug,mype_id:T.newFairData.id_mype,ruc:T.newFairData.ruc,person_id:T.newFairData.id_person,dni:T.newFairData.dni,email:T.newFairData.email,hasParticipatedProduce:l.hasParticipatedProduce,nameService:l.hasParticipatedProduce=="otro"?l.nameService:null,hasParticipatedFair:l.hasParticipatedFair,nameFair:l.hasParticipatedFair=="otro"?l.nameFair:null};await Q({url:`public/mype/${T.newFairData.ruc}`,method:"POST",data:P}),(await Q({url:"public/postulate",method:"POST",data:_})).status==200&&$.push("/feria/registrado")}catch(P){console.error("Error de red:",P)}finally{q.value=!1}};return(P,_)=>{const w=h("a-radio"),F=h("a-radio-group"),S=h("a-form-item"),j=h("a-input"),V=h("a-checkbox"),G=h("a-button"),p=h("a-form");return s(),v(p,{layout:"vertical",model:l,name:"basic",autocomplete:"off",onFinish:a,onFinishFailed:U},{default:u(()=>[_[7]||(_[7]=d("h2",null,"PREGUNTAS COMPLEMENTARIAS DE SU NEGOCIO",-1)),d("div",ta,[(s(!0),I(Z,null,be(t.value,(i,f)=>(s(),I(Z,{key:f},[i.type==="iRadio"?(s(),v(S,{key:0,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,max:i.max}]},{default:u(()=>[g(F,{value:l[i.name],"onUpdate:value":y=>l[i.name]=y,name:i.name,onChange:y=>B(i.name)},{default:u(()=>[g(w,{value:"si"},{default:u(()=>_[0]||(_[0]=[z("SI")])),_:1}),g(w,{value:"no"},{default:u(()=>_[1]||(_[1]=[z("NO")])),_:1}),i.other?(s(),v(w,{key:0,value:"otro"},{default:u(()=>_[2]||(_[2]=[z("OTRO")])),_:1})):c("",!0)]),_:2},1032,["value","onUpdate:value","name","onChange"])]),_:2},1032,["name","label","rules"])):c("",!0),i.type==="iText"?(s(),v(S,{key:1,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,max:i.max}],style:pe({display:i.display})},{default:u(()=>[g(j,{value:l[i.name],"onUpdate:value":y=>l[i.name]=y,maxlength:i.max,onBlur:y=>L(i.name)},null,8,["value","onUpdate:value","maxlength","onBlur"])]),_:2},1032,["name","label","rules","style"])):c("",!0),i.type==="iCheckbox"?(s(),v(S,{key:2,name:i.name,label:i.label,rules:[{required:i.required,message:i.message}],class:"acceptable"},{default:u(()=>[d("div",ia,[_[4]||(_[4]=d("h2",{class:"acc-h2",style:{color:"var(--primary)"}},"Términos y Condiciones",-1)),_[5]||(_[5]=d("span",{class:"acc-span"},"Para recibir constancias por parte de ferias:",-1)),_[6]||(_[6]=d("ul",null,[d("li",null,"Cumplir con los lineamientos de participación en las ferias."),d("li",null,"Cumplir con el plan de acción, que entre otros, implica la participación en las capacitaciones en el marco de las ferias comerciales.")],-1)),g(V,{checked:l[i.name],"onUpdate:checked":y=>l[i.name]=y,onChange:H},{default:u(()=>_[3]||(_[3]=[d("span",null,"Acepto los Términos y Condiciones",-1)])),_:2},1032,["checked","onUpdate:checked"])])]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),g(S,{style:{margin:"0"}},{default:u(()=>[g(G,{type:"primary","html-type":"submit",loading:q.value,class:"fair-btn"},{default:u(()=>[z(ve(q.value?"ENVIANDO DATOS":"POSTULAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}};const ra={class:"fair-wrapper"},sa={key:0,class:"fair-caducated"},oa={key:1},la={class:"fair",style:{"padding-top":"2rem"}},da={class:"container containerx",style:{"border-radius":"8px 8px 0 0"}},ua={style:{"padding-top":"3rem"}},ca={class:"fair-title"},ma={class:"fair-header"},pa={key:0,class:"fair-header-img",src:"https://apituempresa.soporte-pnte.com/images/wow.png",alt:"ferias-pnte"},va={key:1,class:"fair-header-img",src:"https://apituempresa.soporte-pnte.com/images/bannerferia.png",alt:"ferias-pnte"},ga={key:2,style:{margin:"auto"},src:"https://apituempresa.soporte-pnte.com/images/loading_img.gif",alt:"ferias-pnte"},ba={class:"tag-html"},ha=["innerHTML"],_a={class:"form-x fair"},ya={class:"container containerx",style:{"margin-bottom":"2rem","border-radius":"0 0 8px 8px"}},fa={class:"form-x-wrapper",style:{padding:"2rem 1.5rem"}},Ea={style:{"margin-top":"2rem"}},ka={__name:"IndexPostularFeria",setup(re){const T=Oe(Ue,{style:{fontSize:"24px"},spin:!0}),$=b(!0),o=b(null),q=b(!1),l=b(0);b(null);const t=b(!1),H=ye(),B=fe(),L=b({id_mype:null,ruc:null,id_person:null,dni:null,email:null}),U=()=>{window.pageYOffset>10?t.value=!0:t.value=!1},a=w=>{L.value.id_mype=w.id_mype,L.value.ruc=w.ruc,l.value=1,window.scrollTo({top:document.documentElement.scrollHeight/4,behavior:"smooth"})},P=w=>{L.value.id_person=w.id_person,L.value.dni=w.dni,L.value.email=w.email,l.value=2,window.scrollTo({top:document.documentElement.scrollHeight/4,behavior:"smooth"})},_=async()=>{try{const w=B.params.slug,F=await Q({url:`public/data/${w}`,method:"GET"});F.status==200&&(o.value=F.data,$.value=!1),F.status==400&&H.push("/404"),F.status==500&&(q.value=!0,$.value=!1)}catch(w){console.error("Error de red:",w)}finally{}};return Te(()=>{window.addEventListener("scroll",U),_()}),Ne(()=>{window.removeEventListener("scroll",U)}),(w,F)=>{const S=h("a-spin");return s(),I("div",ra,[g(S,{spinning:$.value,indicator:N(T)},{default:u(()=>{var j,V,G,p,i,f,y,x;return[q.value?(s(),I("section",sa,F[0]||(F[0]=[d("div",{class:"container"},[d("div",{class:"fair-caducated-info"},[d("img",{src:Ie,alt:""}),d("h4",null,"LA FERIA YA HA FINALIZADO"),d("p",null,[z("El formulario de inscripción ya no está disponible. "),d("br"),z(" Agradecemos su interés y lo invitamos a estar atento a nuestros próximos eventos.")])])],-1)]))):(s(),I("section",oa,[d("section",la,[d("div",da,[d("div",ua,[d("div",ca,[d("h1",null,ve((j=o.value)==null?void 0:j.title),1),d("h4",null,ve((V=o.value)==null?void 0:V.subTitle),1)]),d("div",ma,[((G=o.value)==null?void 0:G.typeFair)==2?(s(),I("img",pa)):((p=o.value)==null?void 0:p.typeFair)==1||((i=o.value)==null?void 0:i.typeFair)==3||((f=o.value)==null?void 0:f.typeFair)==4?(s(),I("img",va)):(s(),I("img",ga)),d("div",ba,[d("div",{innerHTML:(y=o.value)==null?void 0:y.description,style:{"margin-top":"1.5rem"}},null,8,ha)])])])]),F[1]||(F[1]=d("div",{class:"fair-section"},[d("div",{class:"container",style:{"background-color":"#def1f8"}},[d("p",null,[d("b",null,"Importante:"),z(" La información proporcionada tiene carácter de Declaración Jurada, la misma que se formula en el marco de lo establecido en el artículo 49 del TUO de la Ley 27444 Ley del Procedimiento Administrativo General, manifestando someterme a la normatividad vigente respecto a la materia y a las responsabilidades administrativas, civiles y/o penales que se pudieran derivar en caso que alguno DE LOS DATOS CONSIGNADOS SEAN FALSOS, INEXACTOS, siendo pasible de cualquier fiscalización posterior que el Ministerio de la Producción considere pertinente. ")])])],-1))]),d("section",_a,[d("div",ya,[d("div",fa,[d("section",null,[d("div",Ea,[l.value==0?(s(),v(Xe,{key:0,onNextStep:a,typeFair:(x=o.value)==null?void 0:x.typeFair},null,8,["typeFair"])):c("",!0),l.value==1?(s(),v(aa,{key:1,onNextStep2:P})):c("",!0),l.value==2?(s(),v(na,{key:2,newFairData:L.value},null,8,["newFairData"])):c("",!0)])])])])])]))]}),_:1},8,["spinning","indicator"]),g(Me)])}}};export{ka as default};
