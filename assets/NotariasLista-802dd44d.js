import{r as v,a as ae,b as c,o as n,q as y,w as r,e as d,d as p,F as C,B as ne,h as b,s as i,c as s,t as x,i as I,y as V,m as B,v as ie,k as oe,f as se,Q as re,J as le,I as ce}from"./index-6613f228.js";import{u as J}from"./selectes-ef044ac1.js";import{Q as de}from"./quill.snow-817415c5.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";import{L as me}from"./LinkOutlined-77e6e99f.js";import{M as pe}from"./MoreOutlined-65a58931.js";const _e={city_id:{type:"iSelect",label:"Departamento",name:"city_id",required:!0,message:"Seleccionar un tipo"},province_id:{type:"iSelect",label:"Provincia",name:"province_id",required:!1,message:"Seleccionar un tipo"},district_id:{type:"iSelect",label:"Distrito",name:"district_id",required:!1,message:"Seleccionar un tipo"},address:{type:"iText",label:"Dirección",name:"address",required:!1,message:"Escribe la dirección"},name:{type:"iText",label:"Nombre de la notaría",name:"name",required:!0,message:"Ingresa el nombre de la notaría"},istestimonio:{type:"checked",label:"Incluye testimonio",name:"istestimonio",required:!0,message:"Escribe un monto"},price:{type:"iQuillEditor",label:"Gastos notariales",name:"price",required:!0,message:"Escribe la tarifa"},conditions:{type:"iQuillEditor",label:"Condiciones",name:"conditions",required:!0,message:"Escribe la tarifa"},sociointerveniente:{type:"iQuillEditor",label:"Socio o interviniente",name:"sociointerveniente",required:!0,message:"Escribe la tarifa"},biometrico:{type:"iQuillEditor",label:"Biométrico",name:"biometrico",required:!0,message:"Escribir datos del biometrico"},infocontacto:{type:"iQuillEditor",label:"Datos del contacto",name:"infocontacto",required:!0,message:"Escribe la tarifa"}};const fe={class:"grid-notary"},ye={class:"wrapper-form_btn"},ve={__name:"DrawerNotaria.componente",props:["updateNotary"],emits:["closeDraw"],setup(Q,{emit:S}){const E=JSON.parse(localStorage.getItem("profile")),f=J(),R=S,q=Q;f.$patch({cities:f.cities}),f.fetchCities();const L={theme:"snow",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["clean"]]},contentType:"html"},k=v(!1),t=ae({city_id:null,province_id:null,district_id:null,address:null,name:null,istestimonio:!1,price:null,conditions:null,sociointerveniente:null,biometrico:null,infocontacto:null,user_id:E.id}),T=a=>{t.province_id=null,t.district_id=null,f.fetchProvinces(a)},A=a=>{t.district_id=null,f.fetchDistricts(a)},w=()=>{t.city_id=null,t.province_id=null,t.district_id=null,t.address=null,t.name=null,t.istestimonio=!1,t.price="</p>",t.conditions="</p>",t.sociointerveniente="</p>",t.biometrico="</p>",t.infocontacto="</p>"},D=a=>{a?(t.city_id=a.city.id,T(a.city.id),t.province_id=a.province.id,A(a.province.id),t.district_id=a.district.id,t.address=a.address,t.name=a.name,t.istestimonio=a.istestimonio!=0,t.price=a.price,t.conditions=a.conditions,t.sociointerveniente=a.sociointerveniente,t.biometrico=a.biometrico,t.infocontacto=a.infocontacto):w()},M=async()=>{let a=t;k.value=!0;try{let N=null,h=null;q.updateNotary?(N=`notary/update/${q.updateNotary.id}`,h="PATCH"):(N="notary/create",h="POST");const g=await V({url:N,method:h,data:a});w(),R("closeDraw",!0),B.success(g.message)}catch{B.error("No se pudo registrar este usuario")}finally{k.value=!1}};return(a,N)=>{const h=c("a-select"),g=c("a-form-item"),H=c("a-checkbox"),z=c("a-input"),O=c("a-input-number"),m=c("a-button"),o=c("a-form");return n(),y(o,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:M},{default:r(()=>[d("div",fe,[(n(!0),p(C,null,ne(b(_e),(e,U)=>(n(),p(C,{key:U},[e.type==="iSelect"?(n(),y(g,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[e.name=="city_id"?(n(),y(h,{key:0,value:t[e.name],"onUpdate:value":u=>t[e.name]=u,options:b(f).cities,onChange:T},null,8,["value","onUpdate:value","options"])):i("",!0),e.name=="province_id"?(n(),y(h,{key:1,value:t[e.name],"onUpdate:value":u=>t[e.name]=u,options:b(f).provinces,onChange:A},null,8,["value","onUpdate:value","options"])):i("",!0),e.name=="district_id"?(n(),y(h,{key:2,value:t[e.name],"onUpdate:value":u=>t[e.name]=u,options:b(f).districts},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),e.type==="checked"?(n(),y(g,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[s(H,{checked:t[e.name],"onUpdate:checked":u=>t[e.name]=u},null,8,["checked","onUpdate:checked"])]),_:2},1032,["name","label","rules"])):i("",!0),e.type==="iText"?(n(),y(g,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[s(z,{value:t[e.name],"onUpdate:value":u=>t[e.name]=u},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):i("",!0),e.type==="iNumber"?(n(),y(g,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[s(O,{value:t[e.name],"onUpdate:value":u=>t[e.name]=u},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):i("",!0),e.type==="iQuillEditor"?(n(),y(g,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:r(()=>[s(b(de),{class:"quill-editor",content:t[e.name],"onUpdate:content":u=>t[e.name]=u,options:L,contentType:"html"},null,8,["content","onUpdate:content"])]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),d("div",null,x(D(q.updateNotary)),1),d("div",ye,[s(m,{class:"btn-produce",type:"primary","html-type":"submit",loading:k.value},{default:r(()=>[I("GUARDAR")]),_:1},8,["loading"])])]),_:1},8,["model"])}}},be=ue(ve,[["__scopeId","data-v-07455822"]]);const he={class:"all-notary"},ge=d("h3",null,"NOTARÍAS",-1),xe={class:"filters-notary"},Ie={class:"filters-center-produce"},ke={class:"filters-produce"},we=d("label",null,"Buscar por nombre de notaria",-1),Ne=d("label",null,"Por provincia",-1),Ce={key:5,style:{"font-size":"14px","font-weight":"700"}},Ee={key:6,ref:"divRef",class:"gastos"},Te=["innerHTML"],De={key:7},Oe=["innerHTML"],Se=["innerHTML"],qe=["innerHTML"],Le=["innerHTML"],Ae=["onClick"],Ue=d("a",null,"Eliminar",-1),$e={__name:"NotariasLista",setup(Q){const S=JSON.parse(localStorage.getItem("role")),E=J();E.$patch({cities:E.cities}),E.fetchCities();const f=v(window.innerHeight-100),R=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOTARIA",fixed:"left",dataIndex:"namenotary",align:"center",width:180},{title:"REGIÓN",fixed:"left",dataIndex:"departamento",align:"center",width:120},{title:"PROVINCIA",fixed:"left",dataIndex:"province",align:"center",width:120},{title:"DISTRITO",fixed:"left",dataIndex:"distrite",width:120},{title:"DIRECCION",dataIndex:"address",align:"center",width:160},{title:"GASTOS NOTARIALES",dataIndex:"pricex",align:"center",width:320},{title:"CONDICIONES",dataIndex:"pricedescriptionx",align:"center",width:260},{title:"SOCIO O INTERVINIENTE ADICIONAL",dataIndex:"socio",align:"center",width:200},{title:"BIOMETRICO",dataIndex:"bio",align:"center",width:220},{title:"DATOS DE CONTACTO",dataIndex:"contact",align:"center",width:260},...S[0].id===3||S[0].id===1?[{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}]:[]],q=v(1200),L=v([]),k=v(!1),t=v(!1),T=v(null),A=v(null),w=v(null),D=v(null),M=(m,o)=>{const e=m.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return o.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(e)},a=()=>{f.value=window.innerHeight-270},N=m=>{console.log("open",m)},h=()=>{T.value=null,t.value=!0},g=()=>{O(),t.value=!1,A.value=null},H=async m=>{try{const o=await V({url:`notary/delete/${m.id}`,method:"DELETE"});o&&(O(),B.success(o.message))}catch(o){console.error("Error de red:",o)}},z=m=>{T.value=m,t.value=!0},O=async()=>{try{k.value=!0;const m={...w.value&&{name:w.value},...D.value&&{city_id:D.value}},o=await se({url:"public/notaries-filters",method:"GET",params:m});L.value=o.data}catch(m){console.error("Error de red:",m)}finally{k.value=!1}};return ie(()=>{window.removeEventListener("resize",a)}),oe(()=>{window.addEventListener("resize",a),a(),O()}),(m,o)=>{const e=c("a-button"),U=c("router-link"),u=c("a-input"),X=c("a-select"),$=c("a-menu-item"),Y=c("a-popconfirm"),j=c("a-menu"),K=c("a-dropdown"),W=c("a-table"),Z=c("a-drawer");return n(),p("div",he,[ge,d("div",xe,[d("div",Ie,[b(S)[0].id!=2?(n(),y(e,{key:0,style:{"margin-right":"1rem"},class:"btn-produce",type:"primary",onClick:h},{default:r(()=>[I("AGREGAR")]),_:1})):i("",!0),s(U,{to:"/notarias",target:"_blank"},{default:r(()=>[s(b(me))]),_:1})]),d("div",ke,[d("div",null,[we,s(u,{value:w.value,"onUpdate:value":o[0]||(o[0]=l=>w.value=l)},null,8,["value"])]),d("div",null,[Ne,s(X,{placeholder:"Buscar por Provincia",value:D.value,"onUpdate:value":o[1]||(o[1]=l=>D.value=l),"show-search":"",options:b(E).cities,"filter-option":M},null,8,["value","options"])]),s(e,{type:"primary",class:"btn-produce",onClick:O},{default:r(()=>[I("BUSCAR")]),_:1})])]),s(W,{bordered:"",scroll:{x:q.value,y:f.value},class:"ant-table-striped",columns:R,"data-source":L.value,pagination:!1,loading:k.value,size:"small"},{bodyCell:r(({column:l,record:_,index:ee})=>{var P,G,F;return[l.dataIndex=="idx"?(n(),p(C,{key:0},[I(x(ee+1),1)],64)):i("",!0),l.dataIndex=="lastName"?(n(),p(C,{key:1},[I(x(_.last_name)+" "+x(_.middle_name),1)],64)):i("",!0),l.dataIndex=="departamento"?(n(),p(C,{key:2},[I(x((P=_.city)==null?void 0:P.name),1)],64)):i("",!0),l.dataIndex=="province"?(n(),p(C,{key:3},[I(x((G=_.province)==null?void 0:G.name),1)],64)):i("",!0),l.dataIndex=="distrite"?(n(),p(C,{key:4},[I(x((F=_.district)==null?void 0:F.name),1)],64)):i("",!0),l.dataIndex=="namenotary"?(n(),p("h4",Ce,x(_.name),1)):i("",!0),l.dataIndex=="pricex"?(n(),p("div",Ee,[d("div",{innerHTML:_.price,class:"style-price"},null,8,Te)],512)):i("",!0),l.dataIndex=="pricedescriptionx"?(n(),p("div",De,[d("div",{innerHTML:_.conditions,class:"style-conditions"},null,8,Oe)])):i("",!0),l.dataIndex=="socio"?(n(),p("div",{key:8,innerHTML:_.sociointerveniente,class:"style-contact"},null,8,Se)):i("",!0),l.dataIndex=="bio"?(n(),p("div",{key:9,innerHTML:_.biometrico,class:"style-contact"},null,8,qe)):i("",!0),l.dataIndex=="contact"?(n(),p("div",{key:10,innerHTML:_.infocontacto,class:"style-contact"},null,8,Le)):i("",!0),l.dataIndex=="actions"?(n(),y(K,{key:11,trigger:["click"]},{overlay:r(()=>[s(j,null,{default:r(()=>[s($,null,{default:r(()=>[d("a",{onClick:te=>z(_)},"Editar",8,Ae)]),_:2},1024),s($,null,{default:r(()=>[s(Y,{title:"¿Seguro de eliminar?",onConfirm:te=>H(_)},{icon:r(()=>[s(b(re),{style:{color:"red"}})]),default:r(()=>[Ue]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:r(()=>[d("a",{class:"ant-dropdown-link",onClick:o[2]||(o[2]=ce(()=>{},["prevent"]))},[s(e,{shape:"circle",icon:le(b(pe)),size:"small"},null,8,["icon"])])]),_:2},1024)):i("",!0)]}),_:1},8,["scroll","data-source","loading"]),s(Z,{open:t.value,"onUpdate:open":o[3]||(o[3]=l=>t.value=l),class:"draw-notary","root-class-name":"root-class-name",title:"Datos de la notaría",placement:"right",onAfterOpenChange:N},{default:r(()=>[s(be,{onCloseDraw:g,updateNotary:T.value},null,8,["updateNotary"])]),_:1},8,["open"])])}}};export{$e as default};
