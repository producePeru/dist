import{l as J,r as _,a as Q,b as m,o,x as u,w as s,c as i,e as T,d as $,F as M,s as ee,h as E,y as c,M as ae,t as K,i as R,R as X,m as B,Q as re,q as V,G as ge,j as be,N as ye,O as he}from"./index-e7c49f04.js";import{u as te}from"./selectes-4ae468ee.js";import"./es-6119d95e.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{f as we}from"./nuevoUsuario-39eedf3b.js";import{M as xe}from"./MoreOutlined-709f38fe.js";const Se={email:{type:"iText",label:"Correo",name:"email",required:!1,email:"email",message:"Escribe el correo del usuario",disabled:!0},documentnumber:{type:"iText",label:"Número de DNI",name:"documentnumber",required:!0,message:"Número de DNI",max:8,disabled:!1},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el apellido paterno"},lastname:{type:"iText",label:"Apellido paterno",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"Apellido materno",name:"middlename",required:!0,message:"Escribe el apellido paterno"},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!1,message:"año-mes-día",placeholder:"año-mes-día"},phone:{type:"iText",label:"Ingresar número celular",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"Género",name:"gender_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},cde_id:{type:"iSelect",label:"CDE",name:"cde_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},office_id:{type:"iSelect",label:"Oficina",name:"office_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0}};const De={class:"grid-profile"},Ue="DD/MM/YYYY",ke={__name:"DrawerEditarDatosAsesor",props:["record"],emits:["closeDraw"],setup(W,{emit:P}){J.locale("es");const r=te(),d=JSON.parse(localStorage.getItem("profile")),b=P;r.$patch({genders:r.genders}),r.$patch({cdes:r.cdes}),r.$patch({Offices:r.Offices}),r.$patch({roles:r.roles}),r.$patch({supervisores:r.supervisores}),r.fetchGenders(),r.fetchCdes(),r.fetchOffices(),r.fetchRoles();const U=W,F=_(!0),z=_(!1),O=_(Se),a=Q({name:null,lastname:null,middlename:null,birthday:null,sick:null,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:d.id}),L=y=>{var k;y&&(a.name=y.profile_name,a.lastname=y.profile_lastname,a.middlename=y.profile_middlename,a.documentnumber=y.profile_documentnumber,a.phone=y.profile_phone,a.gender_id=y.gender_id,a.cde_id=y.cde_id,a.office_id=y.office_id,a.email=y.email,y.profile_birthday&&(a.birthday=J(y.profile_birthday,"YYYY-MM-DD"))),(k=r.genders)!=null&&k.length&&(F.value=!1)},t=y=>{const k={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0};if(y===2)r.fetchSupervisores(),O.value={...O.value,supervisor_id:k};else{const{supervisor_id:q,...I}=O.value;O.value=I}},Y=async()=>{z.value=!0;const y={name:a.name,lastname:a.lastname,middlename:a.middlename,birthday:a.birthday?J(a.birthday).format("YYYY-MM-DD"):null,sick:a.sick,phone:a.phone,gender_id:a.gender_id,cde_id:a.cde_id,office_id:a.office_id,user_id:d.id};try{const k=await X({url:`user/update/${U.record._id}`,method:"PUT",data:y});B.success(k.message),b("closeDraw")}catch(k){console.log("NOOo",k)}finally{z.value=!1}},G=()=>{B.error("Debes de completar todos los espacios requeridos")};return(y,k)=>{const q=m("a-select"),I=m("a-form-item"),x=m("a-input"),S=m("a-date-picker"),p=m("a-button"),v=m("a-form"),D=m("a-spin");return o(),u(D,{spinning:F.value},{default:s(()=>[i(v,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:Y,onFinishFailed:G},{default:s(()=>[T("div",De,[(o(!0),$(M,null,ee(O.value,(l,C)=>(o(),$(M,{key:C},[l.type==="iSelect"?(o(),u(I,{key:0,class:"item-max",name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:s(()=>[l.name=="gender_id"?(o(),u(q,{key:0,value:a[l.name],"onUpdate:value":g=>a[l.name]=g,options:E(r).genders},null,8,["value","onUpdate:value","options"])):c("",!0),l.name=="cde_id"?(o(),u(q,{key:1,value:a[l.name],"onUpdate:value":g=>a[l.name]=g,options:E(r).cdes},null,8,["value","onUpdate:value","options"])):c("",!0),l.name=="office_id"?(o(),u(q,{key:2,value:a[l.name],"onUpdate:value":g=>a[l.name]=g,options:E(r).Offices},null,8,["value","onUpdate:value","options"])):c("",!0),l.name=="role_id"?(o(),u(q,{key:3,value:a[l.name],"onUpdate:value":g=>a[l.name]=g,options:E(r).roles,onChange:t},null,8,["value","onUpdate:value","options"])):c("",!0),l.name=="supervisor_id"?(o(),u(q,{key:4,value:a[l.name],"onUpdate:value":g=>a[l.name]=g,options:E(r).supervisores},null,8,["value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),l.type==="iText"?(o(),u(I,{key:1,name:l.name,label:l.label,rules:[{required:l.required,message:l.message,type:l.email}]},{default:s(()=>[i(x,{value:a[l.name],"onUpdate:value":g=>a[l.name]=g,maxlength:l.max,disabled:l.disabled},null,8,["value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),l.type==="iDate"?(o(),u(I,{key:2,name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:s(()=>[i(S,{locale:E(ae),value:a[l.name],"onUpdate:value":g=>a[l.name]=g,style:{width:"100%"},format:Ue,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),T("div",null,K(L(U.record)),1),i(I,null,{default:s(()=>[i(p,{class:"btn-produce",type:"primary","html-type":"submit",loading:z.value},{default:s(()=>k[0]||(k[0]=[R("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},Ee=ne(ke,[["__scopeId","data-v-f5cfd002"]]);const Ae={class:"grid-item"},Re="DD/MM/YYYY",qe={__name:"DrawerRegistrarAsesor",setup(W){J.locale("es");const P=JSON.parse(localStorage.getItem("profile")),r=te();r.$patch({genders:r.genders}),r.$patch({cdes:r.cdes}),r.$patch({Offices:r.Offices}),r.$patch({roles:r.roles}),r.$patch({supervisores:r.supervisores}),r.fetchGenders(),r.fetchCdes(),r.fetchOffices(),r.fetchRoles();const d=_(we),b=_(null),U=_(!1),F=_(!1),z=_(!1);_(!1),_(null);const O=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],a=Q({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:P.user_id,email:null,password:null}),L=()=>{a.name=null,a.lastname=null,a.middlename=null,a.documentnumber=null,b.value=null,a.phone=null,a.gender_id=null,a.cde_id=null,a.office_id=null,a.email=null,a.password=null,a.role_id=null},t=x=>{a[x]=a[x].replace(/\D/g,"")},Y=(x,S)=>{const p=x.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(p)},G=x=>{const S={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},p={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},v={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},D={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},l={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(x===2){r.fetchSupervisores(),d.value={...d.value,supervisor_id:S};const{city:C,province:g,district:A,address:n,...h}=d.value;d.value=h}else if(x===7){d.value={...d.value,city:p,province:v,district:D,address:l};const{supervisor_id:C,...g}=d.value;d.value=g,d.value.cde_id.required=!1}else{let{city:C,province:g,district:A,address:n,supervisor_id:h,...e}=d.value;d.value=e}},y=async()=>{U.value=!0,a.email=a.name.replace(/\s/g,"").toLowerCase()+a.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",a.password=a.documentnumber,a.birthday=b.value?J(b.value).format("YYYY-MM-DD"):null;try{const x=await X({url:"user/create",method:"POST",data:a});re.success({title:"La cuenta ha sido registrada",content:V("div",{},[V("br"),V("p",`Correo: ${a.email}`),V("p","Contraseña es el número de DNI ingresado")]),onOk(){L(),B.success(x.message);const{supervisor_id:S,...p}=d.value;d.value=p}})}catch{B.error("No se pudo registrar este usuario")}finally{U.value=!1}},k=()=>{B.error("Debes de completar todos los espacios requeridos")},q=async x=>{console.log("Hello",x)},I=()=>{a.document_number=a.document_number.replace(/\D/g,"")};return(x,S)=>{const p=m("a-select"),v=m("a-form-item"),D=m("a-input-search"),l=m("a-input"),C=m("a-date-picker"),g=m("a-button"),A=m("a-form");return o(),$("div",null,[i(A,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:y,onFinishFailed:k},{default:s(()=>[T("div",Ae,[(o(!0),$(M,null,ee(d.value,(n,h)=>(o(),$(M,{key:h},[n.type==="iSelect"?(o(),u(v,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:s(()=>[n.name=="gender_id"?(o(),u(p,{key:0,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,options:E(r).genders},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="cde_id"?(o(),u(p,{key:1,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,options:E(r).cdes},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="role_id"?(o(),u(p,{key:2,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,options:O,onChange:G},null,8,["value","onUpdate:value"])):c("",!0),n.name=="supervisor_id"?(o(),u(p,{key:3,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,options:E(r).supervisores},null,8,["value","onUpdate:value","options"])):c("",!0),n.name=="office_id"?(o(),u(p,{key:4,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,"show-search":"",options:E(r).Offices,"filter-option":Y},null,8,["value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iSearch"?(o(),u(v,{key:1,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message,max:n.max}]},{default:s(()=>[i(D,{maxlength:15,loading:F.value,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,onSearch:q,onInput:I,disabled:z.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iText"?(o(),u(v,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email}]},{default:s(()=>[n.name=="documentnumber"?(o(),u(l,{key:0,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,maxlength:n.max,onInput:S[0]||(S[0]=e=>t("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):n.name=="phone"?(o(),u(l,{key:1,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,maxlength:n.max,onInput:S[1]||(S[1]=e=>t("phone"))},null,8,["value","onUpdate:value","maxlength"])):(o(),u(l,{key:2,value:a[n.name],"onUpdate:value":e=>a[n.name]=e,maxlength:n.max,disabled:n.disabled},null,8,["value","onUpdate:value","maxlength","disabled"]))]),_:2},1032,["name","label","rules"])):c("",!0),n.type==="iDate"?(o(),u(v,{key:3,name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:s(()=>[i(C,{locale:E(ae),value:b.value,"onUpdate:value":S[2]||(S[2]=e=>b.value=e),style:{width:"100%"},format:Re},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):c("",!0)],64))),128))]),i(v,null,{default:s(()=>[i(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:U.value},{default:s(()=>S[3]||(S[3]=[R("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Oe=ne(qe,[["__scopeId","data-v-1f072082"]]),Ie={agente:{type:"iText",label:"ENTIDAD AGENTE ALIADO",name:"agente",required:!0,message:"Ingresar los nombres"},name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingresar los nombres"},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribe el apellido paterno"},documentnumber:{type:"iText",label:"NÚMERO DE DNI",name:"documentnumber",required:!0,message:"Ingresa el número de DNI",max:8},phone:{type:"iText",label:"NÚMERO CELULAR",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},cde_id:{type:"iSelect",label:"CDE ASESOR",name:"cde_id",required:!0,message:"Seleccionar la sede",disabled:!0},none:{type:"iNone",label:""}};const Ce={class:"grid-item"},Ne="DD/MM/YYYY",Te={__name:"DrawerRegistrarAsesorAgente",emits:["closeDraw"],setup(W,{emit:P}){J.locale("es");const r=JSON.parse(localStorage.getItem("profile")),d=te();d.$patch({genders:d.genders}),d.$patch({cdes:d.cdes}),d.$patch({Offices:d.Offices}),d.$patch({roles:d.roles}),d.$patch({supervisores:d.supervisores}),d.fetchGenders(),d.fetchCdes(),d.fetchOffices(),d.fetchRoles();const b=_(Ie),U=_(null),F=_(!1),z=_(!1),O=_(!1);_(!1),_(null);const a=P,L=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],t=Q({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:r.user_id,email:null,password:null}),Y=()=>{t.name=null,t.lastname=null,t.middlename=null,t.documentnumber=null,U.value=null,t.phone=null,t.gender_id=null,t.cde_id=null,t.office_id=null,t.email=null,t.password=null,t.role_id=null},G=p=>{t[p]=t[p].replace(/\D/g,"")},y=(p,v)=>{const D=p.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return v.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(D)},k=p=>{const v={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},D={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},l={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},C={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},g={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(p===2){d.fetchSupervisores(),b.value={...b.value,supervisor_id:v};const{city:A,province:n,district:h,address:e,...N}=b.value;b.value=N}else if(p===7){b.value={...b.value,city:D,province:l,district:C,address:g};const{supervisor_id:A,...n}=b.value;b.value=n,b.value.cde_id.required=!1}else{let{city:A,province:n,district:h,address:e,supervisor_id:N,...f}=b.value;b.value=f}},q=async()=>{F.value=!0,t.email=t.name.replace(/\s/g,"").toLowerCase()+t.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",t.password=t.documentnumber,t.birthday=U.value?J(U.value).format("YYYY-MM-DD"):null,t.cdename,t.cdecity,t.cdeprovince,t.cdedistrict,t.cdeaddress;const p={email:t.email,password:t.password,name:t.name,lastname:t.lastname,middlename:t.middlename,documentnumber:t.documentnumber,sick:"no",phone:t.phone,gender_id:t.gender_id,cde_id:t.cde_id,office_id:1,role_id:2};try{const v=await X({url:"user/create",method:"POST",data:p});re.success({title:"La cuenta ha sido registrada",content:V("div",{},[V("br"),V("p",`Correo: ${t.email}`),V("p","Contraseña es el número de DNI ingresado")]),onOk(){Y(),B.success(v.message);const{supervisor_id:D,...l}=b.value;a("closeDraw"),b.value=l}})}catch{B.error("No se pudo registrar este usuario")}finally{F.value=!1}},I=()=>{B.error("Debes de completar todos los espacios requeridos")},x=async p=>{console.log("Hello",p)},S=()=>{t.document_number=t.document_number.replace(/\D/g,"")};return(p,v)=>{const D=m("a-select"),l=m("a-form-item"),C=m("a-input-search"),g=m("a-input"),A=m("a-date-picker"),n=m("a-button"),h=m("a-form");return o(),$("div",null,[i(h,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:q,onFinishFailed:I},{default:s(()=>[T("div",Ce,[(o(!0),$(M,null,ee(b.value,(e,N)=>(o(),$(M,{key:N},[e.type==="iSelect"?(o(),u(l,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:s(()=>[e.name=="gender_id"?(o(),u(D,{key:0,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,options:E(d).genders},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="cde_id"?(o(),u(D,{key:1,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,options:E(d).cdes,"show-search":"","filter-option":y},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="role_id"?(o(),u(D,{key:2,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,options:L,onChange:k},null,8,["value","onUpdate:value"])):c("",!0),e.name=="supervisor_id"?(o(),u(D,{key:3,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,options:E(d).supervisores},null,8,["value","onUpdate:value","options"])):c("",!0),e.name=="office_id"?(o(),u(D,{key:4,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,"show-search":"",options:E(d).Offices,"filter-option":y},null,8,["value","onUpdate:value","options"])):c("",!0)]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iSearch"?(o(),u(l,{key:1,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message,max:e.max}]},{default:s(()=>[i(C,{maxlength:15,loading:z.value,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,onSearch:x,onInput:S,disabled:O.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iText"?(o(),u(l,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:s(()=>[e.name=="documentnumber"?(o(),u(g,{key:0,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,maxlength:e.max,onInput:v[0]||(v[0]=f=>G("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):e.name=="phone"?(o(),u(g,{key:1,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,maxlength:e.max,onInput:v[1]||(v[1]=f=>G("phone"))},null,8,["value","onUpdate:value","maxlength"])):(o(),u(g,{key:2,value:t[e.name],"onUpdate:value":f=>t[e.name]=f,maxlength:e.max,disabled:e.disabled,placeholder:e.placeholder},null,8,["value","onUpdate:value","maxlength","disabled","placeholder"]))]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iDate"?(o(),u(l,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:s(()=>[i(A,{locale:E(ae),value:U.value,"onUpdate:value":v[2]||(v[2]=f=>U.value=f),style:{width:"100%"},format:Ne},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):c("",!0),e.type==="iNone"?(o(),u(l,{key:4,class:"item-max",name:e.name,label:e.label},null,8,["name","label"])):c("",!0)],64))),128))]),i(l,null,{default:s(()=>[i(n,{class:"btn-produce",type:"primary","html-type":"submit",loading:F.value},{default:s(()=>v[3]||(v[3]=[R("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},$e=ne(Te,[["__scopeId","data-v-56c0b6b8"]]);const Fe=["onClick"],Le=["onClick"],Ye={class:"paginator"},He={__name:"AsesoresLista",setup(W){const P=_(50),r=_([]),d=_(!1),b=_(0),U=_({page:1}),F=_("user/list-asesories"),z=_(1200),O=_(window.innerHeight-100),a=_(!1),L=_(!1),t=_(!1),Y=_(!1),G=_(null),y=_(null),k=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOMBRES",dataIndex:"profile_name",width:160},{title:"APELLIDOS",dataIndex:"lastname",width:160},{title:"DNI",dataIndex:"profile_documentnumber",width:100,align:"center"},{title:"CELULAR",dataIndex:"profile_phone",width:100,align:"center"},{title:"CDE",dataIndex:"cde_name",width:160},{title:"FECHA NAC.",dataIndex:"profile_birthday",width:100,align:"center"},{title:"GÉNERO",dataIndex:"gender",width:120,align:"center"},{title:"ROL",dataIndex:"role",width:140,align:"center"},{title:"CUENTA",dataIndex:"email",width:180},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],q=()=>{O.value=window.innerHeight-300},I=h=>{a.value=!0,G.value=h},x=h=>{L.value=!0,y.value=h},S=()=>{a.value=!1,A()},p=Q({search:""}),v=Q({password:""}),D=async()=>{const h={id:y.value.user_id,password:v.password};try{const e=await X({url:"user/update-password",method:"POST",data:h});e.status===200&&(B.success(e.message),v.password=null,L.value=!1)}catch(e){console.error("Failed to update record",e)}},l=()=>{A({search:p.search})},C=()=>{p.search||A()},g=h=>{U.value.page=h,A()},A=async h=>{try{d.value=!0;const e=U.value.page===1?"":U.value,N=h?{...e,...h}:e,f=await X({url:F.value,method:"GET",params:N});r.value=f.data,b.value=f.total,P.value=f.per_page}catch(e){console.error("Error de red:",e)}finally{d.value=!1}},n=ge(()=>h=>(U.value.page-1)*P.value+h+1);return be(()=>{A(),window.addEventListener("resize",q),q()}),(h,e)=>{const N=m("a-button"),f=m("a-col"),le=m("a-input"),ie=m("a-input-group"),de=m("a-row"),j=m("a-tag"),oe=m("a-menu-item"),ue=m("a-menu"),me=m("a-dropdown"),ce=m("a-table"),pe=m("a-pagination"),Z=m("a-drawer"),se=m("a-form-item"),ve=m("a-form");return o(),$(M,null,[T("div",null,[e[18]||(e[18]=T("h3",{class:"title-produce"},"LISTA DE USUARIOS - UGO",-1)),i(de,{style:{margin:"1rem 0"}},{default:s(()=>[i(f,{xs:24,md:12,lg:18},{default:s(()=>[i(N,{type:"primary",onClick:e[0]||(e[0]=w=>t.value=!0),style:{"background-color":"#e20613"}},{default:s(()=>e[11]||(e[11]=[R("ASESOR PNTE")])),_:1}),i(N,{type:"primary",onClick:e[1]||(e[1]=w=>Y.value=!0),style:{"background-color":"#00952f","margin-left":".8rem"}},{default:s(()=>e[12]||(e[12]=[R("ASESOR AGENTE")])),_:1})]),_:1}),i(f,{xs:24,md:12,lg:6},{default:s(()=>[i(ie,{compact:""},{default:s(()=>[i(le,{value:p.search,"onUpdate:value":e[2]||(e[2]=w=>p.search=w),style:{width:"calc(100% - 80px)"},onInput:C,onKeyup:ye(l,["enter"])},null,8,["value"]),i(N,{type:"primary",disabled:p.search==="",onClick:l},{default:s(()=>e[13]||(e[13]=[R("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),i(ce,{bordered:"",scroll:{x:z.value,y:O.value},class:"table-users",columns:k,"data-source":r.value,pagination:!1,loading:d.value,size:"small"},{bodyCell:s(({column:w,record:H,index:_e})=>[w.dataIndex==="idx"?(o(),$(M,{key:0},[R(K(n.value(_e)),1)],64)):c("",!0),w.dataIndex==="lastname"?(o(),$(M,{key:1},[R(K(H.profile_lastname)+" "+K(H.profile_middlename),1)],64)):c("",!0),w.dataIndex==="role"?(o(),$(M,{key:2},[H.role_user==1?(o(),u(j,{key:0,color:"blue"},{default:s(()=>e[14]||(e[14]=[R("SUPERVISOR")])),_:1})):c("",!0),H.role_user==2?(o(),u(j,{key:1,color:"red"},{default:s(()=>e[15]||(e[15]=[R("ASESOR PNTE")])),_:1})):c("",!0),H.role_user==7?(o(),u(j,{key:2,color:"purple"},{default:s(()=>e[16]||(e[16]=[R("ASESOR - NOTARÍA")])),_:1})):c("",!0),H.role_user==13?(o(),u(j,{key:3,color:"green"},{default:s(()=>e[17]||(e[17]=[R("ASESOR - AGENTE")])),_:1})):c("",!0)],64)):c("",!0),w.dataIndex=="actions"?(o(),u(me,{key:3,trigger:["click"]},{overlay:s(()=>[i(ue,null,{default:s(()=>[i(oe,null,{default:s(()=>[T("a",{onClick:fe=>I(H)},"Editar datos",8,Fe)]),_:2},1024),i(oe,null,{default:s(()=>[T("a",{onClick:fe=>x(H)},"Resetear contraseña",8,Le)]),_:2},1024)]),_:2},1024)]),default:s(()=>[T("a",{class:"ant-dropdown-link",onClick:e[3]||(e[3]=he(()=>{},["prevent"]))},[i(N,{shape:"circle",icon:V(E(xe)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]),_:1},8,["scroll","data-source","loading"])]),T("div",Ye,[T("span",null,[i(j,{color:"blue"},{default:s(()=>[T("b",null,K(b.value),1)]),_:1}),e[19]||(e[19]=R("Usuarios"))]),i(pe,{size:"small",total:b.value,pageSize:P.value,onChange:g,showSizeChanger:!1},null,8,["total","pageSize"])]),i(Z,{width:"550",open:a.value,"onUpdate:open":e[4]||(e[4]=w=>a.value=w),class:"draw",title:"Editar datos del asesor",placement:"right"},{default:s(()=>[i(Ee,{onCloseDraw:S,record:G.value},null,8,["record"])]),_:1},8,["open"]),i(Z,{width:"550",open:t.value,"onUpdate:open":e[6]||(e[6]=w=>t.value=w),class:"draw",title:"REGISTRAR UN ASESOR",placement:"right"},{default:s(()=>[i(Oe,{onCloseDraw:e[5]||(e[5]=w=>t.value=!1)})]),_:1},8,["open"]),i(Z,{width:"550",open:Y.value,"onUpdate:open":e[8]||(e[8]=w=>Y.value=w),class:"draw",title:"REGISTRAR UN ASESOR AGENTE",placement:"right"},{default:s(()=>[i($e,{onCloseDraw:e[7]||(e[7]=w=>{Y.value=!1,A()})})]),_:1},8,["open"]),i(Z,{width:"350",open:L.value,"onUpdate:open":e[10]||(e[10]=w=>L.value=w),class:"draw",title:"Cambiar contraseña",placement:"right"},{default:s(()=>[i(ve,{layout:"vertical",model:v,name:"basic",autocomplete:"off",onFinish:D,onFinishFailed:h.onFinishFailed},{default:s(()=>[i(se,{label:"Contraseña",name:"password",rules:[{required:!0,message:"Escribir contraseña"}]},{default:s(()=>[i(le,{value:v.password,"onUpdate:value":e[9]||(e[9]=w=>v.password=w)},null,8,["value"])]),_:1}),i(se,null,{default:s(()=>[i(N,{type:"primary","html-type":"submit"},{default:s(()=>e[20]||(e[20]=[R("CAMBIAR")])),_:1})]),_:1})]),_:1},8,["model","onFinishFailed"])]),_:1},8,["open"])],64)}}};export{He as default};
