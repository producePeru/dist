import{_ as R}from"./TableComponent-e2f639d4.js";import{r as t,u as D,a as T,l as g,j as A,a6 as c,b as h,o as I,d as b,c as u,w as v,R as C,e as P}from"./index-c506ef20.js";import"./es-43783165.js";import"./quill.snow-b2ff78a1.js";/* empty css                                                      *//* empty css                                                                *//* empty css                                                */import{d as U}from"./downloadExcel-906ca397.js";import"./icoexcel-1b303edf.js";import"./selectes-886600c6.js";import"./MoreOutlined-614423dd.js";const k={class:"advisory-table"},q=["onClick"],L={__name:"list-index",setup(z){const m=t([]),p=t(0),f=t(150),l=t(!1);t(!1),D();const s=t(!1),_=t(null),i=t(!1),a=T({year:g("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:3}),w=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"PREGUNTA",dataIndex:"question",width:200},{title:"RESPUESTA",dataIndex:"answer",width:200},{title:"ASESOR",dataIndex:"asesor",width:200},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],y=e=>{_.value=e,l.value=!0},E=async()=>{i.value=!0;try{await U("download/questions-answers-advisors-formalizations","eventos-ugo",{})}catch(e){console.error("Error de red:",e)}finally{i.value=!1}},S=async e=>{a.page=e,await n()},x=async e=>{e&&(a.page=1,await n())},n=async()=>{try{s.value=!0;const e={page:a.page};a.year&&(e.year=g(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const o=await C({url:"/questionnaire/list-questions-answers-formalizations",method:"GET",params:e});m.value=o.data.data,p.value=o.data.total,f.value=o.data.per_page}catch(e){console.error("Error de red:",e)}finally{s.value=!1}};return A(async()=>{await n()}),c("search",a),c("loading",s),c("loadingFile",i),(e,r)=>{const o=h("a-menu-item"),Y=h("a-drawer");return I(),b("div",k,[u(R,{title:"PREGUNTAS RESPUESTAS ðŸ¤– Asitente Virtual",placeholderSearch:"Buscar",columns:w,pageSize:f.value,nameTotal:"Items",dataSource:m.value,total:p.value,btnUpdate:!0,onHandleCallFetchData:n,onHandleDownloadExcel:E,onHandleSearch:x,onHandlePaginator:S},{"custom-options":v(({record:d})=>[u(o,null,{default:v(()=>[P("a",{onClick:M=>y(d)},"Editar",8,q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),u(Y,{open:l.value,"onUpdate:open":r[0]||(r[0]=d=>l.value=d),title:_.value?"EDITAR":"CREAR",placement:"right",width:"550"},null,8,["open","title"])])}}};export{L as default};
