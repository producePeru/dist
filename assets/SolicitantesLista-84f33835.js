import{r,I as ne,y as oe,k as le,b as l,o as i,d as p,e as u,c as o,h as k,w as s,F as m,B as E,i as _,t as d,s as c,q as B,R as ie,J as se,S as re,m as de}from"./index-019d7a13.js";import{S as ce}from"./DrawerSolicitante.componente-56ce4f1f.js";import{u as ue}from"./selectes-7ffe1d2d.js";import{M as pe}from"./MoreOutlined-51e67fff.js";import"./es-f7d6c8c5.js";import"./_plugin-vue_export-helper-c27b6911.js";const me=u("h3",null,"SOLICITANTES",-1),_e={class:"filters-notary"},ge=u("div",null,null,-1),ve=["onClick"],he=u("a",null,"Eliminar",-1),fe={class:"paginator"},R=20,Se={__name:"SolicitantesLista",setup(we){const S=JSON.parse(localStorage.getItem("profile")),h=ue();h.$patch({cities:h.cities}),h.fetchCities();const D=r(window.innerHeight-100),V=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",align:"center",width:120},{title:"NOMBRES",dataIndex:"name",width:140},{title:"APELLIDOS",dataIndex:"apellidos",width:140},{title:"DEPARTAMENTO",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:240},{title:"GÉNERO",dataIndex:"gender",align:"center",width:120},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],O=r(0),g=r({page:0}),P=r(1200),x=r([]),v=r(!1),f=r(!1),b=r(null),I=r(null),$=e=>{g.value.page=e,w()},U=async()=>{try{v.value=!0;const e=await E({url:`notary/list/${I.value}`,method:"GET"});x.value=e.data}catch(e){console.error("Error de red:",e)}finally{v.value=!1}},F=(e,t)=>{const C=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(C)},y=()=>{D.value=window.innerHeight-280},G=e=>{console.log("open",e)},q=()=>{w(),f.value=!1},H=async e=>{try{const t=await E({url:`notary/delete/${e.id}`,method:"DELETE"});t&&(w(),de.success(t.message))}catch(t){console.error("Error de red:",t)}},J=e=>{b.value=e,f.value=!0},Q=ne(()=>e=>((g.value.page==0?1:g.value.page)-1)*R+e+1),w=async()=>{try{v.value=!0;let e=g.value.page==0?"":g.value;const t=await E({url:`person/list/${S.user_id}/${S.documentnumber}`,method:"GET",params:e});x.value=t.data,O.value=t.total}catch(e){console.error("Error de red:",e)}finally{v.value=!1}};return oe(()=>{window.removeEventListener("resize",y)}),le(()=>{window.addEventListener("resize",y),y(),w()}),(e,t)=>{const C=l("a-select"),N=l("a-tag"),X=l("a-button"),L=l("a-menu-item"),Y=l("a-popconfirm"),j=l("a-menu"),K=l("a-dropdown"),W=l("a-table"),Z=l("a-pagination"),ee=l("a-drawer");return i(),p(m,null,[u("div",null,[me,u("div",_e,[ge,u("div",null,[o(C,{placeholder:"Buscar por Provincia",style:{width:"200px"},value:I.value,"onUpdate:value":t[0]||(t[0]=a=>I.value=a),"show-search":"",options:k(h).cities,"filter-option":F,onChange:U},null,8,["value","options"])])]),o(W,{bordered:"",scroll:{x:P.value,y:D.value},class:"ant-table-striped",columns:V,"data-source":x.value,pagination:!1,loading:v.value,size:"small"},{bodyCell:s(({column:a,record:n,index:te})=>{var z,A,T,M;return[a.dataIndex=="idx"?(i(),p(m,{key:0},[_(d(Q.value(te)),1)],64)):c("",!0),a.dataIndex=="tdocument"?(i(),p(m,{key:1},[_(d(n.typedocument.name),1)],64)):c("",!0),a.dataIndex=="apellidos"?(i(),p(m,{key:2},[_(d(n.lastname)+" "+d(n.middlename),1)],64)):c("",!0),a.dataIndex=="city"?(i(),p(m,{key:3},[_(d((z=n.city)==null?void 0:z.name),1)],64)):c("",!0),a.dataIndex=="province"?(i(),p(m,{key:4},[_(d((A=n.province)==null?void 0:A.name),1)],64)):c("",!0),a.dataIndex=="district"?(i(),p(m,{key:5},[_(d((T=n.district)==null?void 0:T.name),1)],64)):c("",!0),a.dataIndex=="gender"?(i(),p(m,{key:6},[_(d((M=n.gender)==null?void 0:M.name),1)],64)):c("",!0),a.dataIndex=="sickx"?(i(),B(N,{key:7,color:n.sick=="no"?"blue":"pink"},{default:s(()=>[_(d(n.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):c("",!0),a.dataIndex=="actions"?(i(),B(K,{key:8,trigger:["click"]},{overlay:s(()=>[o(j,null,{default:s(()=>[o(L,null,{default:s(()=>[u("a",{onClick:ae=>J(n)},"Editar",8,ve)]),_:2},1024),o(L,null,{default:s(()=>[o(Y,{title:"¿Seguro de eliminar?",onConfirm:ae=>H(n)},{icon:s(()=>[o(k(ie),{style:{color:"red"}})]),default:s(()=>[he]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[u("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=se(()=>{},["prevent"]))},[o(X,{shape:"circle",icon:re(k(pe)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]}),_:1},8,["scroll","data-source","loading"])]),u("div",fe,[o(Z,{size:"small",total:O.value,pageSize:R,onChange:$,showSizeChanger:!1},null,8,["total"])]),o(ee,{open:f.value,"onUpdate:open":t[2]||(t[2]=a=>f.value=a),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right",onAfterOpenChange:G},{default:s(()=>[o(ce,{onCloseDraw:q,updateValues:b.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}};export{Se as default};
