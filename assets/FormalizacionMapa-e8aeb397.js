import{_ as S,a as f,b as I}from"./ico-fb-52730242.js";import{u as P,r as s,l as L,b as h,o as q,d as T,e as o,q as G,c as w,w as y,F as O,s as V,f as b,t as D,j as v,p as R,k as j,g as k,m as z}from"./index-5a256a9a.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const J="/assets/gps-ico-4fa94334.png";const i=r=>(R("data-v-320dc2fa"),r=r(),j(),r),Q=i(()=>o("div",{class:"container header-wrapper"},[o("img",{src:I,alt:"logo-produce"}),o("img",{src:S,alt:"logo-tu-empresa"})],-1)),U=[Q],Y={class:"form-map"},Z={class:"container"},H={class:"background-map"},K=i(()=>o("h2",{class:"title2 ff"},"Paso 2: Selección de puntos de atención",-1)),W=i(()=>o("div",{class:"info-gps"},[o("span",null,[v("Este ícono "),o("img",{src:J,alt:"formalizate ubicación"}),v(" represeta la ubicación geográfica de nuestros centros de desarrollo empresarial, pulse en el mapa a continuación para elegir el de su preferencia.")])],-1)),X={class:"modal-info ff"},$=i(()=>o("span",null,"Quiero atenderme aquí",-1)),aa=V('<footer data-v-320dc2fa><div class="container" data-v-320dc2fa><div class="footer-wrapper" data-v-320dc2fa><div class="footer-tuempresa-info" data-v-320dc2fa><img src="'+S+'" alt="footer logo tu empresa" data-v-320dc2fa><p class="ff" data-v-320dc2fa>Programa Nacional &quot;Tu Empresa&quot; Brindamos a los emprendedores acompañamiento en formalización y constitución de empresas.</p></div><div data-v-320dc2fa></div><div data-v-320dc2fa><b data-v-320dc2fa>Contáctanos</b><p data-v-320dc2fa>Lima - Guardia Civil : Av. Guardia Civil N° 834 - Primer Piso, San Isidro - Lima - Lima - San Isidro - Perú </p><p data-v-320dc2fa>016162291</p></div><div class="footer-redes" data-v-320dc2fa><a href="" data-v-320dc2fa><img src="'+f+'" alt="tu empresa facebook" data-v-320dc2fa></a><a href="" data-v-320dc2fa><img src="'+f+'" alt="tu empresa facebook" data-v-320dc2fa></a><a href="" data-v-320dc2fa><img src="'+f+'" alt="tu empresa facebook" data-v-320dc2fa></a></div></div></div></footer>',1),ea={__name:"FormalizacionMapa",setup(r){const _=P();let n;const g=s(null);let l;const c=s(!1),d=s(!1),C=s(null),p=s(!1),m=s([]),u=s(null),x=a=>{u.value=a,d.value=!0},E=async()=>{let a=k.get("formalization-data");a||_.push({name:"formalizacion"}),a=JSON.parse(a),a.id_gps_cdes=u.value.title,c.value=!0;try{const e=await b({url:"/public/formalization",method:"POST",data:a});e.status==200&&(_.push({name:"formalizacion"}),z.success(e.message),k.remove("formalization-data"))}catch{z.error("Error al registrar xd")}finally{c.value=!1}},F=()=>{window.pageYOffset>10?p.value=!0:p.value=!1},M=async()=>{try{const{data:a}=await b({url:"/public/location-cdes",method:"GET"}),e=a.map(t=>({position:{lat:parseFloat(t.position.lat),lng:parseFloat(t.position.lng)},title:t.title}));m.value=[...m.value,e]}catch(a){console.log(a)}};return L(async()=>{window.addEventListener("scroll",F),await M(),navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{n=new window.google.maps.Map(g.value,{center:{lat:a.coords.latitude,lng:a.coords.longitude},zoom:11}),m.value[0].forEach(e=>{new window.google.maps.Marker({position:e.position,map:n,title:e.title}).addListener("click",()=>{x(e)})}),l=new window.google.maps.places.SearchBox(document.getElementById("searchInput")),l.addListener("places_changed",()=>{const e=l.getPlaces();if(e.length===0)return;const t=e[0];n.setCenter(t.geometry.location),n.setZoom(15),new window.google.maps.Marker({position:t.geometry.location,map:n,title:t.name})})},()=>{console.error("Error al obtener la ubicación del usuario.")}):console.error("La geolocalización no está disponible en este navegador.")}),(a,e)=>{const t=h("a-button"),N=h("a-modal");return q(),T(O,null,[o("header",{class:G(["header",{floatingNav:p.value}]),ref_key:"navBar",ref:C},U,2),o("section",Y,[o("div",Z,[o("div",H,[K,W,o("div",{ref_key:"mapContainer",ref:g,style:{height:"500px"}},null,512)])])]),w(N,{open:d.value,"onUpdate:open":e[0]||(e[0]=B=>d.value=B),title:"",width:"350px",footer:!1},{default:y(()=>[o("div",X,[$,o("h3",null,D(u.value.title),1)]),w(t,{onClick:E,loading:c.value,class:"form-button",type:"primary","html-type":"submit"},{default:y(()=>[v("ESCOGER")]),_:1},8,["loading"])]),_:1},8,["open"]),aa],64)}}},na=A(ea,[["__scopeId","data-v-320dc2fa"]]);export{na as default};
