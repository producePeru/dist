import{p as S,r as b,E as K,a as Q,T as y,k as X,b as c,o as n,y as d,i as I,L as ee,d as N,c as m,w as u,e as ae,F as g,v as te,z as o,M as ie,j as le,t as se,m as q,h as C}from"./index-055d941e.js";import{u as re}from"./selectes-6cb3765f.js";import"./es-13a88f4f.js";const ne={key:1},de={class:"form-activity-ugo"},oe="DD/MM/YYYY",Ee={__name:"EventosUgo",props:["dataRow"],emits:["closeDraw"],setup(P,{emit:x}){S.locale("es");const r=re();r.$patch({cities:r.cities}),r.$patch({provinces:r.provinces}),r.$patch({districts:r.districts}),r.fetchCities(),r.fetchAsesores();const O=b(!1),A=P,w=x;K();const _=b(!0),e=Q({}),E=b({startDate:{type:"iDate",label:"FECHA INICIO DE LA ACTIVIDAD",name:"startDate",required:!0,message:"Seleccionar fecha de Inicio",disabled:!1},endDate:{type:"iDate",label:"FECHA CIERRE DE LA ACTIVIDAD",name:"endDate",required:!0,message:"Seleccionar fecha de Fin",disabled:!1,placeholder:"Ejemplo: Lunes 20 de enero"},eventsoffice_id:{type:"iSelect",label:"TIPO DE ACTIVIDAD",name:"eventsoffice_id",required:!0,message:"Seleccionar un tipo de actividad",disabled:!0},title:{type:"iSelect",label:"NOMBRE DE ACTIVIDAD",name:"title",required:!0,message:"Escribir el nombre de la actividad",disabled:!0,max:100},theme:{type:"iText",label:"TEMA DE LA ACTIVIDAD",name:"theme",required:!0,message:"Seleccionar tema de actividad",disabled:!1},entidad:{type:"iText",label:"NOMBRE DE ENTIDAD ORGANIZADORA",name:"entidad",required:!0,message:"Escribir nombre de la entidad",disabled:!1},entidad_aliada:{type:"iText",label:"NOMBRE DE ENTIDAD O INSTITUCION ALIADA / PARTICIPANTE",name:"entidad_aliada",required:!0,message:"Escribir nombre de la entidad aliada",disabled:!1},people_id:{type:"iSelectWrite",label:"REPRESENTANTE DE PRODUCE QUE PARTICIPA (APELLIDOS Y NOMBRES)",name:"people_id",required:!0,message:"Seleccionar al asesor",disabled:!0},beneficiarios:{type:"iNumber",label:"MYPE Y/O EMPRENDEDORES BENEFICIADOS ESPERADOS",name:"beneficiarios",required:!0,message:"Escribir número de beneficiarios",disabled:!0},modality:{type:"iSelect",label:"MODALIDAD",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!0},city_id:{type:"iSelectWrite",label:"REGIÓN DE LA ACTIVIDAD",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelectWrite",label:"PROVINCIA DE LA ACTIVIDAD",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"DISTRITO DE LA ACTIVIDAD",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"LUGAR DE LA ACTIVIDAD",name:"address",required:!0,message:"Escribir lugar de la actividad",disabled:!1,max:100,placeholder:"Ejemplo: Av. Los Incas 1234 - San Miguel"},pasaje:{type:"iSelect",label:"¿REQUERIRÁ PASAJES?",name:"pasaje",required:!0,message:"Seleccionar si requiere pasajes",disabled:!0},monto:{type:"iNumber",label:"COLOCAR SOLO EL MONTO DE GASTOS EN PASAJES EN SOLES IDA + VUELTA (INTERPROVINCIAL)",name:"monto",required:!0,message:"Escribir el monto de pasajes",disabled:!0}}),p=b([]),h=b([]),F=[{label:"SI",value:"s"},{label:"NO",value:"n"}],Y=[{label:"PRESENCIAL",value:"p"},{label:"VIRTUAL",value:"v"}],f=(t,i)=>{t=="eventsoffice_id"&&(console.log("00a0a0a00a",i),e.title=null,e.theme=null,E.value.theme.disabled=!1,i==12?(E.value.theme.type="iText",p.value=[{label:"POTENCIA TU EMPRESA - FORMALIZACIÓN",value:"POTENCIA TU EMPRESA - FORMALIZACIÓN"},{label:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL",value:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL"},{label:"POTENCIA TU EMPRESA - DIGITALIZACIÓN",value:"POTENCIA TU EMPRESA - DIGITALIZACIÓN"},{label:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO",value:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO"},{label:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO",value:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO"},{label:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO",value:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO"}]):i==13?p.value=[{label:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE",value:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE"}]:i==14?p.value=[{label:"FORTALECE TU MERCADO",value:"FORTALECE TU MERCADO"}]:i==15?p.value=[{label:"CAMPAÑA DESPEGA TU EMPRESA",value:"CAMPAÑA DESPEGA TU EMPRESA"}]:p.value=[]),t=="title"&&(i=="DIFUSIÓN DE LOS SERVICIOS DEL PNTE"&&(E.value.theme.disabled=!0,E.value.theme.type="iText",e.theme="Brindar difusión de los servicios de los cinco componentes del PNTE"),i=="FORTALECE TU MERCADO"&&(E.value.theme.type="iSelect",h.value=[{label:"FLUJO DE CAJA",value:"FLUJO DE CAJA"},{label:"GESTIÓN EMPRESARIAL",value:"GESTIÓN EMPRESARIAL"},{label:"FINANCIAMIENTO",value:"FINANCIAMIENTO"},{label:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA",value:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA"},{label:"DESTACA Y VENDE MÁS",value:"DESTACA Y VENDE MÁS"}]),i=="CAMPAÑA DESPEGA TU EMPRESA"&&(E.value.theme.type="iText",e.theme="Difusión, asesorías y formalización de MYPES"))},V=t=>{t.forEach(i=>{e.hasOwnProperty(i)&&(e[i]=null)})};y(()=>e.startDate,t=>{e.endDate&&new Date(t)>new Date(e.endDate)&&(e.endDate=null)}),y(()=>e.endDate,t=>{e.startDate&&new Date(t)<new Date(e.startDate)&&(e.startDate=null)});const T=(t,i)=>{const D=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(D)},k=t=>{if(t=="modality")return Y;if(t=="powerBy")return pertenece;if(t=="fairtype_id")return typeFair;if(t=="eventsoffice_id")return G();if(t=="pasaje")return F;if(t=="title")return p.value;if(t=="theme")return h.value},G=()=>[{value:12,label:"CAPACITACIÓN"},{value:13,label:"DIFUSIÓN"},{value:14,label:"CICLO DE CAPACITACIONES"},{value:15,label:"DESPEGA TU EMPRESA Y PRODUCE"}],M=t=>{e.province_id=null,e.district_id=null,r.fetchProvinces(t)},L=t=>{e.district_id=null,r.fetchDistricts(t)},R=()=>{e.eventsoffice_id=null,e.title=null,e.theme=null,e.entidad=null,e.entidad_aliada=null,e.people_id=null,e.beneficiarios=null,e.startDate=null,e.endDate=null,e.modality=null,V(["city_id","province_id","district_id","address","pasaje","monto"])},j=async()=>{O.value=!0;const t={eventsoffice_id:e.eventsoffice_id,title:e.title,theme:e.theme,entidad:e.entidad,entidad_aliada:e.entidad_aliada,beneficiarios:e.beneficiarios,startDate:S(e.startDate).format("YYYY-MM-DD"),endDate:S(e.endDate).format("YYYY-MM-DD"),modality:e.modality,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,pasaje:e.pasaje,monto:e.monto,asesorId:e.people_id};try{const i=A.dataRow?"PUT":"POST",D=A.dataRow?`attendance/update/${A.dataRow.id}`:"attendance/create",s=await q({url:D,method:i,data:t});s.status==200&&(C.success(s.message),w("closeDraw"),await q({url:"attendance/email-create-activity",method:"POST",data:s.data}),R()),s.status==500&&(C.error(s.message),R()),s.status==403&&C.error(s.message)}catch(i){C.error("Se presentó un error, los valores son requeridos",i)}finally{O.value=!1}},B=t=>{const i=e[t]?e[t].trim():"";e[t]=i};function U(t){_.value=!0;try{f("eventsoffice_id",t.tipo_actividad_id),e.eventsoffice_id=t.tipo_actividad_id,e.title=t.nombre_actividad,e.theme=t.tema,e.entidad=t.entidad,e.entidad_aliada=t.entidad_aliada,e.people_id=t.people_id,e.beneficiarios=t.beneficiarios,e.startDate=t.startDate?S(t.startDate,"DD/MM/YYYY"):null,e.endDate=t.endDate?S(t.endDate,"DD/MM/YYYY"):null,e.modality=t.modality,f("modality",t.modality),e.city_id=t.city_id,M(t.city_id),e.province_id=t.province_id,L(t.province_id),e.district_id=t.district_id,e.address=t.address,e.pasaje=t.pasaje,e.monto=t.monto}catch(i){console.error("Error al cargar la información:",i)}finally{_.value=!1}}return X(()=>{A.dataRow?U(A.dataRow):_.value=!1}),y(()=>A.dataRow,t=>{t?U(t):R()}),(t,i)=>{const D=c("a-input"),s=c("a-form-item"),v=c("a-select"),Z=c("a-textarea"),z=c("a-input-number"),W=c("a-date-picker"),J=c("a-button"),$=c("a-form");return _.value?(n(),d(I(ee),{key:0,style:{color:"#00a6db"}})):(n(),N("div",ne,[m($,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:j},{default:u(()=>[ae("div",de,[(n(!0),N(g,null,te(E.value,(a,H)=>(n(),N(g,{key:H},[a.type==="iText"?(n(),d(s,{key:0,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:u(()=>[m(D,{disabled:a.disabled,value:e[a.name],"onUpdate:value":l=>e[a.name]=l,maxlength:a.max,onBlur:l=>B(a.name),placeholder:a.placeholder},null,8,["disabled","value","onUpdate:value","maxlength","onBlur","placeholder"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iSelect"?(n(),d(s,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(v,{value:e[a.name],"onUpdate:value":l=>e[a.name]=l,options:k(a.name),onChange:l=>f(a.name,l)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iTextarea"?(n(),d(s,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(Z,{value:e[a.name],"onUpdate:value":l=>e[a.name]=l,rows:8,maxlength:a.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iNumber"?(n(),d(s,{key:3,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(z,{value:e[a.name],"onUpdate:value":l=>e[a.name]=l,min:0,max:1e4,style:{width:"100px"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iDate"?(n(),d(s,{key:4,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[m(W,{locale:I(ie),value:e[a.name],"onUpdate:value":l=>e[a.name]=l,style:{width:"100%"},format:oe,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),a.type==="iSelectWrite"?(n(),d(s,{key:5,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:u(()=>[a.name=="city_id"?(n(),d(v,{key:0,value:e[a.name],"onUpdate:value":l=>e[a.name]=l,options:I(r).cities,"show-search":"","filter-option":T,onChange:M},null,8,["value","onUpdate:value","options"])):o("",!0),a.name=="province_id"?(n(),d(v,{key:1,value:e[a.name],"onUpdate:value":l=>e[a.name]=l,options:I(r).provinces,"show-search":"","filter-option":T,onChange:L,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),a.name=="district_id"?(n(),d(v,{key:2,value:e[a.name],"onUpdate:value":l=>e[a.name]=l,options:I(r).districts,"show-search":"","filter-option":T,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),a.name=="people_id"?(n(),d(v,{key:3,value:e[a.name],"onUpdate:value":l=>e[a.name]=l,options:I(r).asesores,"show-search":"","filter-option":T},null,8,["value","onUpdate:value","options"])):o("",!0)]),_:2},1032,["name","label","rules"])):o("",!0)],64))),128))]),m(s,null,{default:u(()=>[m(J,{type:"primary","html-type":"submit",loading:O.value},{default:u(()=>[le(se(P.dataRow?"ACTUALIZAR":"GUARDAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))}}};export{Ee as _};
