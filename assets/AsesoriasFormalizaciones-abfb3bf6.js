import{u as ue}from"./selectes-95b92080.js";import{f as Ae,b as Re,c as ze,r as Ne,a as Fe}from"./asesorias-d26c23fa.js";import{c as t,A as $e,x as ge,r as _,a as ie,b as p,o as n,d as C,w as a,e as r,F as J,B as ne,h,q as f,s as m,Y as se,i as q,t as T,Z as _e,y as B,m as K,f as Oe,U as qe,W as Pe,R as be,u as Te,k as Ee,_ as Le,p as Me,j as Ve}from"./index-fd163366.js";/* empty css                                                      */import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Ge}from"./DrawerSolicitante.componente-059ea71b.js";import"./es-6ce47e03.js";var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const He=Ye;function ye(O){for(var A=1;A<arguments.length;A++){var S=arguments[A]!=null?Object(arguments[A]):{},s=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(S).filter(function(R){return Object.getOwnPropertyDescriptor(S,R).enumerable}))),s.forEach(function(R){je(O,R,S[R])})}return O}function je(O,A,S){return A in O?Object.defineProperty(O,A,{value:S,enumerable:!0,configurable:!0,writable:!0}):O[A]=S,O}var ve=function(A,S){var s=ye({},A,S.attrs);return t($e,ye({},s,{icon:He}),null)};ve.displayName="RedoOutlined";ve.inheritAttrs=!1;const Be=ve,Je={class:"wrapper-booking"},We={class:"grid-booking"},Ke={__name:"ReservaNombre",props:["info"],emits:["closeDraw"],setup(O,{emit:A}){const S=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),s=ge(),R=JSON.parse(localStorage.getItem("profile")),W=O,$=A,z=_(!1),k=_(null),N=_(null),i=_(!0),V=_(!1),e=ue();e.$patch({cities:e.cities}),e.$patch({modalities:e.modalities}),e.$patch({economicSectors:e.economicSectors}),e.$patch({comercialActivities:e.comercialActivities}),e.$patch({regimes:e.regimes}),e.fetchEconomicSectors(),e.fetchComercialActivities(),e.fetchRegimes(),e.fetchCities(),e.fetchModalities();const d=ie({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:R.user_id}),E=()=>{var w;(w=e.regimes)!=null&&w.length&&(i.value=!1)},F=async()=>{try{z.value=!0;const w={name:k.value};(await B({url:"create/comercial-activities",method:"POST",data:w})).status==200&&(k.value=null,e.fetchComercialActivities())}catch(w){console.log(w)}finally{z.value=!1}},v=async()=>{try{z.value=!0;const w={name:N.value};(await B({url:"create/economic-sector",method:"POST",data:w})).status==200&&(N.value=null,e.fetchEconomicSectors())}catch(w){console.log(w)}finally{z.value=!1}},b=w=>{d.province_id=null,d.district_id=null,e.fetchProvinces(w)},D=w=>{d.district_id=null,e.fetchDistricts(w)},L=(w,c)=>{const I=w.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},P=async()=>{V.value=!0,d.people_id=W.info.id;try{const w=await B({url:"formalization/ruc20-step1",method:"POST",data:d});if(w.status===200){if(s.query.formalizaciondigital){let c={id:+s.query.formalizaciondigital,documentnumber:s.query.number};await B({url:"formalization/digital/update-attended",method:"PUT",data:c})}K.success(w.message),d.codesunarp=null,d.economicsector_id=null,d.comercialactivity_id=null,d.regime_id=null,d.city_id=null,d.province_id=null,d.district_id=null,d.address=null,d.modality_id=null,$("closeDraw",!0)}}catch(w){console.log("Error: "+w)}finally{V.value=!1}},U=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(w,c)=>{const I=p("a-select"),y=p("a-form-item"),j=p("a-divider"),Y=p("a-input"),Z=p("a-button"),Q=p("a-space"),u=p("a-form"),X=p("a-spin");return n(),C("div",Je,[t(X,{spinning:i.value},{default:a(()=>[t(u,{layout:"vertical",model:d,name:"basic",autocomplete:"off",onFinish:P,onFinishFailed:U},{default:a(()=>[r("div",We,[(n(!0),C(J,null,ne(h(Ae),(l,ee)=>(n(),C(J,{key:ee},[l.type==="iSelect"?(n(),f(y,{key:0,class:"item-max",name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:a(()=>[l.name=="regime_id"?(n(),f(I,{key:0,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,options:h(e).regimes,"show-search":"","filter-option":L},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="modality_id"?(n(),f(I,{key:1,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,options:h(e).modalities},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iSelectWrite"?(n(),f(y,{key:1,class:"item-max",name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:a(()=>[l.name=="comercialactivity_id"?(n(),f(I,{key:0,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,"show-search":"",options:h(e).comercialActivities,"filter-option":L},{dropdownRender:a(({menuNode:o})=>[t(h(S),{vnodes:o},null,8,["vnodes"]),t(j,{style:{margin:"4px 0"}}),t(Q,{style:{padding:"4px 8px"}},{default:a(()=>[t(Y,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":c[0]||(c[0]=ae=>k.value=ae),placeholder:"Nueva actividad"},null,8,["value"]),t(Z,{type:"text",onClick:F,loading:z.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):m("",!0),l.name=="economicsector_id"?(n(),f(I,{key:1,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,"show-search":"",options:h(e).economicSectors,"filter-option":L},{dropdownRender:a(({menuNode:o})=>[t(h(S),{vnodes:o},null,8,["vnodes"]),t(j,{style:{margin:"4px 0"}}),t(Q,{style:{padding:"4px 8px"}},{default:a(()=>[t(Y,{ref_for:!0,ref:"inputRef",value:N.value,"onUpdate:value":c[1]||(c[1]=ae=>N.value=ae),placeholder:"Nuevo Sector"},null,8,["value"]),t(Z,{type:"text",onClick:v,loading:z.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):m("",!0),l.name=="city_id"?(n(),f(I,{key:2,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,"show-search":"",options:h(e).cities,"filter-option":L,onChange:b},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="province_id"?(n(),f(I,{key:3,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,"show-search":"",options:h(e).provinces,"filter-option":L,onChange:D,disabled:!d.city_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0),l.name=="district_id"?(n(),f(I,{key:4,value:d[l.name],"onUpdate:value":o=>d[l.name]=o,"show-search":"",options:h(e).districts,"filter-option":L,disabled:!d.province_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iText"?(n(),f(y,{key:2,name:l.name,label:l.label,rules:[{required:l.required,message:l.message,type:l.email,max:l.max}]},{default:a(()=>[t(Y,{value:d[l.name],"onUpdate:value":o=>d[l.name]=o,disabled:l.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),r("div",null,T(E()),1),t(y,null,{default:a(()=>[t(Z,{class:"btn-produce",type:"primary","html-type":"submit",loading:V.value},{default:a(()=>[q("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ze=oe(Ke,[["__scopeId","data-v-8c562e87"]]);const Qe={class:"wrapper-booking"},Xe={class:"grid-booking"},et={class:"select-notaries"},tt={class:"name"},at={class:"city"},nt={class:"address"},ot={__name:"ActoConstitutivo",props:["info","itemSelectedF20"],emits:["closeDraw"],setup(O,{emit:A}){const S=JSON.parse(localStorage.getItem("profile")),s=ue(),R=O,W=A;s.$patch({notaries:s.notaries}),s.$patch({cities:s.cities}),s.fetchNotaries(),s.fetchCities();const $=_(!0),z=_(!1),k=_(null),N=_(null),i=(b,D)=>{const L=b.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return D.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(L)},V=(b,D)=>{const L=b.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return D.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(L)},e=ie({task:2,name:null,numbernotary:null,notary_id:null,user_id:S.user_id,userupdated_id:S.id}),d=()=>{var b;(b=s.notaries)!=null&&b.length&&($.value=!1)},E=async()=>{try{const b={city_id:k.value},{data:D}=await Oe({url:"public/notaries-filters",method:"GET",params:b});N.value=null,e.notary_id=null;const L=D.map(P=>({value:P.id,name:P.name,city:P.city.name,province:P.province.name,district:P.district.name,address:P.address}));N.value=L}catch(b){console.error("Error de red:",b)}},F=async()=>{z.value=!0,e.people_id=R.info.id;try{let b=null;R.itemSelectedF20?b=`formalization/ruc20-step2/${R.itemSelectedF20.id}`:b="formalization/ruc20-step2/000";const D=await B({url:b,method:"POST",data:e});D.status===200&&(K.success(D.message),e.name=null,e.numbernotary=null,e.notary_id=null,W("closeDraw",!0))}catch(b){console.log("Error: "+b)}finally{z.value=!1}},v=()=>{K.error("Debes de completar todos los espacios requeridos")};return(b,D)=>{const L=p("a-select"),P=p("a-form-item"),U=p("a-input"),w=p("a-button"),c=p("a-form"),I=p("a-spin");return n(),C("div",Qe,[t(I,{spinning:$.value},{default:a(()=>[t(c,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:v},{default:a(()=>[r("div",Xe,[(n(!0),C(J,null,ne(h(Re),(y,j)=>(n(),C(J,{key:j},[y.type==="iSelect"?(n(),f(P,{key:0,class:"item-max",name:y.name,label:y.label,rules:[{required:y.required,message:y.message}]},{default:a(()=>[y.name=="notary_id"?(n(),f(L,{key:0,value:e[y.name],"onUpdate:value":Y=>e[y.name]=Y,options:N.value,"option-label-prop":"name",disabled:!k.value,"show-search":"","filter-option":V},{option:a(({value:Y,name:Z,city:Q,province:u,district:X,address:l})=>[r("div",et,[r("span",tt,T(Z),1),r("span",at,T(Q)+" - "+T(u)+" - "+T(X),1),r("span",nt,T(l),1)])]),_:2},1032,["value","onUpdate:value","options","disabled"])):m("",!0),y.name=="city"?(n(),f(L,{key:1,placeholder:"Seleccionar una provincia para la notaría",style:{width:"350px"},value:k.value,"onUpdate:value":D[0]||(D[0]=Y=>k.value=Y),"show-search":"",options:h(s).cities,"filter-option":i,onChange:E},null,8,["value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),y.type==="iText"?(n(),f(P,{key:1,name:y.name,label:y.label,rules:[{required:y.required,message:y.message,type:y.email,max:y.max}]},{default:a(()=>[t(U,{value:e[y.name],"onUpdate:value":Y=>e[y.name]=Y},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),r("div",null,T(d()),1),t(P,null,{default:a(()=>[t(w,{class:"btn-produce",type:"primary","html-type":"submit",loading:z.value},{default:a(()=>[q("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},lt=oe(ot,[["__scopeId","data-v-246fbdd3"]]);const st={class:"wrapper-booking"},it={class:"grid-booking"},rt={class:"emp-20"},dt={__name:"MypeFinal",props:["itemSelectedF20"],emits:["closeDraw"],setup(O,{emit:A}){const S=O,s=A,R=_(!1),W=_(!0),$=ie({task:3,ruc:null}),z=i=>{$[i]=$[i].replace(/\D/g,"")},k=async()=>{if(!S.itemSelectedF20)return K.error("Debes completar los pasos anteriores");R.value=!0,$.mype_id=S.itemSelectedF20.mype.id;try{const i=await B({url:`formalization/ruc20-step3/${S.itemSelectedF20.id}`,method:"POST",data:$});i.status===200&&(K.success(i.message),$.ruc=null,s("closeDraw",!0))}catch(i){console.log("Error: "+i)}finally{R.value=!1}},N=()=>{K.error("Debes de completar todos los espacios requeridos")};return(i,V)=>{const e=p("a-input"),d=p("a-form-item"),E=p("a-button"),F=p("a-form");return n(),C("div",st,[t(F,{layout:"vertical",model:$,name:"basic",autocomplete:"off",onFinish:k,onFinishFailed:N},{default:a(()=>[r("div",it,[(n(!0),C(J,null,ne(h(ze),(v,b)=>(n(),C(J,{key:b},[v.type==="iText"?(n(),f(d,{key:0,name:v.name,label:v.label,rules:[{required:v.required,message:v.message,type:v.email,max:v.max,min:v.min}]},{default:a(()=>[t(e,{value:$[v.name],"onUpdate:value":D=>$[v.name]=D,disabled:v.disabled,maxlength:9,onInput:D=>z(v.name)},{prefix:a(()=>[qe(r("span",rt,"20",512),[[Pe,W.value]])]),_:2},1032,["value","onUpdate:value","disabled","onInput"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),t(d,null,{default:a(()=>[t(E,{class:"btn-produce",type:"primary","html-type":"submit",loading:R.value},{default:a(()=>[q("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ut=oe(dt,[["__scopeId","data-v-3ed3d126"]]);const ct={class:"wrapper-booking"},mt={class:"grid-booking"},pt={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(O,{emit:A}){const S=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),s=JSON.parse(localStorage.getItem("profile")),R=O,W=A,$=_(!1),z=_(null),k=_(null),N=_(!1),i=ue(),V=_(!1);i.$patch({cities:i.cities}),i.$patch({provinces:i.provinces}),i.$patch({districts:i.districts}),i.$patch({modalities:i.modalities}),i.$patch({detailProcedures:i.detailProcedures}),i.$patch({economicSectors:i.economicSectors}),i.$patch({comercialActivities:i.comercialActivities}),i.fetchDetailProcedures(),i.fetchModalities(),i.fetchEconomicSectors(),i.fetchComercialActivities(),i.fetchCities();const e=ie({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:s.user_id}),d=U=>{U=="ruc"&&(e[U]=e[U].replace(/\D/g,""))},E=async()=>{try{V.value=!0;const U={name:z.value};(await B({url:"create/comercial-activities",method:"POST",data:U})).status==200&&(z.value=null,i.fetchComercialActivities())}catch(U){console.log(U)}finally{V.value=!1}},F=U=>{e.province_id=null,e.district_id=null,i.fetchProvinces(U)},v=U=>{e.district_id=null,i.fetchDistricts(U)},b=(U,w)=>{const c=U.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return w.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(c)},D=async()=>{try{N.value=!0;const U={name:k.value};(await B({url:"create/economic-sector",method:"POST",data:U})).status==200&&(k.value=null,i.fetchEconomicSectors())}catch(U){console.log(U)}finally{N.value=!1}},L=async()=>{$.value=!0,e.people_id=R.info.id;try{const U=await B({url:"formalization/create-ruc-10",method:"POST",data:e});U.status===200&&(K.success(U.message),e.detailprocedure_id=null,e.modality_id=null,e.economicsector_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.ruc=null,W("closeDraw",!0))}catch(U){console.log("Error: "+U)}finally{$.value=!1}},P=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(U,w)=>{const c=p("a-select"),I=p("a-form-item"),y=p("a-input"),j=p("a-divider"),Y=p("a-button"),Z=p("a-space"),Q=p("a-form");return n(),C("div",ct,[t(Q,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:L,onFinishFailed:P},{default:a(()=>[r("div",mt,[(n(!0),C(J,null,ne(h(Ne),(u,X)=>(n(),C(J,{key:X},[u.type==="iSelect"?(n(),f(I,{key:0,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:a(()=>[u.name=="detailprocedure_id"?(n(),f(c,{key:0,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,options:h(i).detailProcedures},null,8,["value","onUpdate:value","options"])):m("",!0),u.name=="modality_id"?(n(),f(c,{key:1,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,options:h(i).modalities},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),u.type==="iText"?(n(),f(I,{key:1,name:u.name,label:u.label,rules:[{required:u.required,message:u.message,type:u.email,max:u.max}]},{default:a(()=>[t(y,{value:e[u.name],"onUpdate:value":l=>e[u.name]=l,disabled:u.disabled,maxlength:u.max,onInput:l=>d(u.name)},null,8,["value","onUpdate:value","disabled","maxlength","onInput"])]),_:2},1032,["name","label","rules"])):m("",!0),u.type==="iSelectWrite"?(n(),f(I,{key:2,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:a(()=>[u.name=="comercialactivity_id"?(n(),f(c,{key:0,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,"show-search":"",options:h(i).comercialActivities,"filter-option":b},{dropdownRender:a(({menuNode:l})=>[t(h(S),{vnodes:l},null,8,["vnodes"]),t(j,{style:{margin:"4px 0"}}),t(Z,{style:{padding:"4px 8px"}},{default:a(()=>[t(y,{ref_for:!0,ref:"inputRef",value:z.value,"onUpdate:value":w[0]||(w[0]=ee=>z.value=ee),placeholder:"Nueva actividad"},null,8,["value"]),t(Y,{type:"text",onClick:E,loading:V.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):m("",!0),u.name=="economicsector_id"?(n(),f(c,{key:1,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,"show-search":"",options:h(i).economicSectors,"filter-option":b},{dropdownRender:a(({menuNode:l})=>[t(h(S),{vnodes:l},null,8,["vnodes"]),t(j,{style:{margin:"4px 0"}}),t(Z,{style:{padding:"4px 8px"}},{default:a(()=>[t(y,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":w[1]||(w[1]=ee=>k.value=ee),placeholder:"Nuevo registro"},null,8,["value"]),t(Y,{type:"text",onClick:D,loading:N.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):m("",!0),u.name=="city_id"?(n(),f(c,{key:2,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,"show-search":"",options:h(i).cities,"filter-option":b,onChange:F},null,8,["value","onUpdate:value","options"])):m("",!0),u.name=="province_id"?(n(),f(c,{key:3,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,"show-search":"",options:h(i).provinces,"filter-option":b,onChange:v,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0),u.name=="district_id"?(n(),f(c,{key:4,value:e[u.name],"onUpdate:value":l=>e[u.name]=l,"show-search":"",options:h(i).districts,"filter-option":b,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),t(I,null,{default:a(()=>[t(Y,{type:"primary",class:"btn-produce","html-type":"submit",loading:$.value},{default:a(()=>[q("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},_t=oe(pt,[["__scopeId","data-v-b169c958"]]);const vt={class:"wrapper-booking"},ft={class:"grid-booking"},ht={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(O,{emit:A}){const S=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),s=ue(),R=JSON.parse(localStorage.getItem("profile")),W=_(!1),$=O,z=A,k=_(!1),N=_(null),i=_(null);s.$patch({components:s.components}),s.$patch({componentThemes:s.componentThemes}),s.$patch({modalities:s.modalities}),s.$patch({cities:s.cities}),s.fetchComponents(),s.fetchComponentThemes(),s.fetchModalities(),s.fetchCities(),s.fetchGenders();const V=_(!0),e=ie({observations:null,user_id:R.user_id,people_id:null,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),d=c=>{c=="ruc"&&(e[c]=e[c].replace(/\D/g,""))},E=async()=>{try{k.value=!0;const c={name:N.value};(await B({url:"create/component",method:"POST",data:c})).status==200&&(N.value=null,s.fetchComponents())}catch(c){console.log(c)}finally{k.value=!1}},F=async()=>{try{k.value=!0;const c={component_id:e.component_id,name:i.value};(await B({url:"create/theme",method:"POST",data:c})).status==200&&(i.value=null,s.fetchComponentThemes(e.component_id))}catch(c){console.log(c)}finally{k.value=!1}},v=()=>{s.cities&&(V.value=!1)},b=c=>{e.theme_id=null,s.fetchComponentThemes(c)},D=c=>{e.province_id=null,e.district_id=null,s.fetchProvinces(c)},L=c=>{e.district_id=null,s.fetchDistricts(c)},P=(c,I)=>{const y=c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return I.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(y)},U=async()=>{W.value=!0,e.people_id=$.info.id;try{const c=await B({url:"advisory/create",method:"POST",data:e});c.status===200&&(K.success(c.message),e.component_id=null,e.theme_id=null,e.modality_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null,e.ruc=null,z("closeDraw",!0))}catch(c){console.log("Error: "+c)}finally{W.value=!1}},w=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(c,I)=>{const y=p("a-select"),j=p("a-form-item"),Y=p("a-textarea"),Z=p("a-input"),Q=p("a-divider"),u=p("a-button"),X=p("a-space"),l=p("a-form"),ee=p("a-spin");return n(),C("div",vt,[t(ee,{spinning:V.value},{default:a(()=>[t(l,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:U,onFinishFailed:w},{default:a(()=>[r("div",ft,[(n(!0),C(J,null,ne(h(Fe),(o,ae)=>(n(),C(J,{key:ae},[o.type==="iSelect"?(n(),f(j,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:a(()=>[o.name=="modality_id"?(n(),f(y,{key:0,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,options:h(s).modalities},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),o.type==="iTextarea"?(n(),f(j,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:a(()=>[t(Y,{value:e[o.name],"onUpdate:value":M=>e[o.name]=M,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):m("",!0),o.type==="iText"?(n(),f(j,{key:2,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email,max:o.max}]},{default:a(()=>[t(Z,{value:e[o.name],"onUpdate:value":M=>e[o.name]=M,maxlength:o.max,onInput:M=>d(o.name)},null,8,["value","onUpdate:value","maxlength","onInput"])]),_:2},1032,["name","label","rules"])):m("",!0),o.type==="iSelectWrite"?(n(),f(j,{key:3,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:a(()=>[o.name=="city_id"?(n(),f(y,{key:0,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,"show-search":"",options:h(s).cities,"filter-option":P,onChange:D},null,8,["value","onUpdate:value","options"])):m("",!0),o.name=="province_id"?(n(),f(y,{key:1,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,"show-search":"",options:h(s).provinces,"filter-option":P,onChange:L,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0),o.name=="district_id"?(n(),f(y,{key:2,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,"show-search":"",options:h(s).districts,"filter-option":P,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):m("",!0),o.name=="component_id"?(n(),f(y,{key:3,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,"show-search":"",options:h(s).components,"filter-option":P,onChange:b},{dropdownRender:a(({menuNode:M})=>[t(h(S),{vnodes:M},null,8,["vnodes"]),t(Q,{style:{margin:"4px 0"}}),t(X,{style:{padding:"4px 8px"}},{default:a(()=>[t(Z,{ref_for:!0,ref:"inputRef",value:N.value,"onUpdate:value":I[0]||(I[0]=te=>N.value=te),placeholder:"Nueva componente"},null,8,["value"]),t(u,{type:"text",onClick:E,loading:k.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):m("",!0),o.name=="theme_id"?(n(),f(y,{key:4,value:e[o.name],"onUpdate:value":M=>e[o.name]=M,"show-search":"",options:h(s).componentThemes,"filter-option":P,disabled:!e.component_id},{dropdownRender:a(({menuNode:M})=>[t(h(S),{vnodes:M},null,8,["vnodes"]),t(Q,{style:{margin:"4px 0"}}),t(X,{style:{padding:"4px 8px"}},{default:a(()=>[t(Z,{ref_for:!0,ref:"inputRef",value:i.value,"onUpdate:value":I[1]||(I[1]=te=>i.value=te),placeholder:"Nueva tema"},null,8,["value"]),t(u,{type:"text",onClick:F,loading:k.value},{icon:a(()=>[t(h(se))]),default:a(()=>[q(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options","disabled"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),r("div",null,T(v()),1),t(j,null,{default:a(()=>[t(u,{type:"primary",class:"btn-produce","html-type":"submit",loading:W.value},{default:a(()=>[q("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},yt=oe(ht,[["__scopeId","data-v-a33ac0c3"]]);const gt={key:0},bt={key:0},wt={key:0},xt={__name:"AsesoriasHistorial",props:["totaladvisories","totalformalization10","totalformalization20"],setup(O){const A=O,S=_("1"),s=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Componente",dataIndex:"component",width:100},{title:"Tema",dataIndex:"theme",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],R=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Detalle del trámite",dataIndex:"detailprocedure",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],W=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:120},{title:"Asesor",dataIndex:"asesor",width:150},{title:"Paso",dataIndex:"task",width:50},{title:"Código SUNARP",dataIndex:"codesunarp",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Notaría",dataIndex:"numbernotary",width:100},{title:"Régimen",dataIndex:"regime",width:80,align:"center"},{title:"MYPE",dataIndex:"mypename",width:100},{title:"MYPE RUC",dataIndex:"myperuc",width:80},{title:"Modalidad",dataIndex:"modality",align:"center",width:80},{title:"Ciudad",dataIndex:"city",width:30},{title:"Provincia",dataIndex:"province",width:30},{title:"Distrito",dataIndex:"district",width:30},{title:"Dirección",dataIndex:"address",width:100}],$=z=>be(z).format("DD/MM/YYYY HH:mm A");return(z,k)=>{const N=p("a-table"),i=p("a-card"),V=p("a-tab-pane"),e=p("a-tabs");return n(),f(e,{activeKey:S.value,"onUpdate:activeKey":k[0]||(k[0]=d=>S.value=d),type:"card",class:"box-hist"},{default:a(()=>[t(V,{key:"1",tab:"ASESORÍAS"},{default:a(()=>[t(i,null,{default:a(()=>[t(N,{columns:s,"data-source":A.totaladvisories,bordered:"",pagination:!1,size:"small",scroll:{x:1600},"expand-column-width":100},{bodyCell:a(({index:d,column:E,record:F})=>[E.dataIndex==="idx"?(n(),C("span",gt,T(d+1),1)):m("",!0),E.dataIndex==="date_start"?(n(),C(J,{key:1},[q(T($(F.createDate)),1)],64)):m("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(V,{key:"2",tab:"RUC 10"},{default:a(()=>[t(i,null,{default:a(()=>[t(N,{columns:R,"data-source":A.totalformalization10,bordered:"",pagination:!1,size:"small",scroll:{x:1800},"expand-column-width":100},{bodyCell:a(({index:d,column:E,record:F})=>[E.dataIndex==="idx"?(n(),C("span",bt,T(d+1),1)):m("",!0),E.dataIndex==="date_start"?(n(),C(J,{key:1},[q(T($(F.createDate)),1)],64)):m("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(V,{key:"3",tab:"RUC 20"},{default:a(()=>[t(i,null,{default:a(()=>[t(N,{columns:W,"data-source":A.totalformalization20,bordered:"",pagination:!1,size:"small",scroll:{x:2200},"expand-column-width":100},{bodyCell:a(({index:d,column:E,record:F})=>[E.dataIndex==="idx"?(n(),C("span",wt,T(d+1),1)):m("",!0),E.dataIndex==="date_start"?(n(),C(J,{key:1},[q(T($(F.createDate)),1)],64)):m("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},St=oe(xt,[["__scopeId","data-v-9962d363"]]);const G=O=>(Me("data-v-fc4d5a6d"),O=O(),Ve(),O),Ut={class:"asesorias"},kt=G(()=>r("h3",{class:"title-produce"},"REGISTRO DE FORMALIZACIONES Y ASESORÍAS",-1)),It=G(()=>r("br",null,null,-1)),Ct={class:"wrapper-s"},Dt=G(()=>r("label",{class:"label"},"Seleccione el tipo de documento",-1)),At=G(()=>r("label",{class:"label"},"Digite el número de documento",-1)),Rt={class:"column-2"},zt={class:"info-update"},Nt=G(()=>r("h4",{class:"title-produce"},"RESULTADO DE LA BÚSQUEDA",-1)),Ft={class:"info-personal"},$t=G(()=>r("span",null,"Apellidos y nombres: ",-1)),Ot=G(()=>r("span",null,"Número de celular:",-1)),qt=G(()=>r("span",null,"Correo electrónico:",-1)),Pt=G(()=>r("span",null,"Asesorías:",-1)),Tt=G(()=>r("span",null,"Formalizaciones RUC 20:",-1)),Et={class:"alert-incomplete"},Lt=G(()=>r("span",null,"Formalizaciones RUC 10:",-1)),Mt=G(()=>r("h4",{class:"title-produce"},"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Vt={class:"card-as-btn"},Gt={key:0,class:"card-as",style:{padding:"1rem"}},Yt=G(()=>r("h4",{class:"title-produce"},"HISTORIAL",-1)),Ht={class:"steps-content"},jt=["onClick"],Bt={class:"pendient"},Jt={key:0,class:"info-tag"},Wt=G(()=>r("b",null,"Paso",-1)),Kt={key:1,class:"info-tag"},Zt=G(()=>r("b",null,"Siguiente paso",-1)),Qt={key:2,class:"info-tag"},Xt=G(()=>r("b",null,"Siguiente paso",-1)),ea={class:"info"},ta=G(()=>r("b",null,"Código SID SUNARP",-1)),aa={class:"code-number"},na=G(()=>r("b",null,"Última consulta",-1)),oa=G(()=>r("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),la=[oa],sa={__name:"AsesoriasFormalizaciones",setup(O){const A=Te(),S=ge(),s=_(0),R=_(null),W=_([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),$=_(null),z=_(!1),k=_(null),N=_(!1),i=_(!1),V=_(!1),e=_(!1),d=_(!1),E=_(!1),F=_(""),v=_([]),b=_(!1),D=_(0),L=_(!1),P=_([]),U=_(null),w=_([]),c=_([]),I=_([]),y=_(!1),j=()=>{fe(F.value),z.value=!1},Y=H=>be(H).format("DD/MM/YYYY HH:mm A"),Z=()=>{u()},Q=()=>{F.value=F.value.replace(/\D/g,"")},u=()=>{F.value="",v.value=[],P.value=[],A.push({name:"asesorias-formalizaciones"})},X=()=>{if(k.value=null,k.value=v.value,!R.value)return K.warning("Seleccionar un tipo de servicio");R.value=="asesoria"&&(E.value=!0),R.value=="ruc10"&&(d.value=!0),R.value=="ruc20"&&ae()},l=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],ee=()=>{$.value=v.value,z.value=!0},o=()=>{D.value=0,e.value=!0,i.value=!1},ae=async()=>{try{L.value=!0;const H=await B({url:`formalization/list-ruc-20/${v.value.id}`,method:"GET"});if(H.length<1)return o();V.value=H,i.value=!0}catch(H){console.log(H)}finally{L.value=!1}},M=async H=>{N.value=!0,D.value=H.task,U.value=H,setTimeout(()=>{N.value=!1,e.value=!0,i.value=!1},400)},te=async()=>{b.value=!0;const H=await B({url:`person/found/${s.value}/${F.value}`,method:"GET"});if(H.status==200)return v.value=H.data,he(v.value.id),b.value=!1},fe=async H=>{if(b.value=!0,!H)return K.warning("Ingresa un número de documento"),b.value=!1;if(s.value==0)return K.warning("Seleccionar el tipo de documento"),b.value=!1;if(s.value==1&&F.value.length<8){K.warning("El número de DNI está incompleto"),b.value=!1;return}const g=await B({url:`person/found/${s.value}/${F.value}`,method:"GET"});if(g.status==200)return v.value=g.data,he(g.data.id),b.value=!1;if(g.status===404){const le={type:s.value,access:"asesorias",number:F.value};A.push({name:"registrar-persona",query:le})}},he=async H=>{try{const{data:g}=await B({url:`historial/registers/${H}`,method:"GET"});w.value=g.advisories,c.value=g.formalization10,I.value=g.formalization20,y.value=!0}catch(g){console.error("Error de red:",g)}};return Ee(()=>{S.query.type&&(console.log("ooaoooaoaa",S.query.type),s.value=S.query.type,F.value=S.query.number)}),(H,g)=>{const le=p("a-radio"),we=p("a-radio-group"),xe=p("a-input-search"),ce=p("a-card"),Se=p("a-select"),Ue=p("a-button"),ke=p("a-step"),Ie=p("a-steps"),re=p("a-drawer"),me=p("a-tag"),Ce=p("a-spin"),De=p("a-modal");return n(),C(J,null,[r("div",Ut,[kt,It,t(ce,{class:"card-as card-gray"},{default:a(()=>[h(S).query.dni?(n(),f(h(Be),{key:0,class:"ico-reload",onClick:Z})):m("",!0),r("div",Ct,[r("div",null,[Dt,t(we,{value:s.value,"onUpdate:value":g[0]||(g[0]=x=>s.value=x),onChange:u,class:"radio-produce"},{default:a(()=>[t(le,{value:"1"},{default:a(()=>[q("DNI")]),_:1}),t(le,{value:"2"},{default:a(()=>[q("CE")]),_:1}),t(le,{value:"3"},{default:a(()=>[q("PAS")]),_:1}),t(le,{value:"4"},{default:a(()=>[q("PTP")]),_:1})]),_:1},8,["value"])]),r("div",null,[At,t(xe,{"enter-button":"BUSCAR",value:F.value,"onUpdate:value":g[1]||(g[1]=x=>F.value=x),placeholder:"",loading:b.value,onSearch:fe,onInput:Q,class:"search-produce",maxlength:s.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),r("div",Rt,[v.value.length!=0?(n(),f(ce,{key:0,class:"card-as"},{default:a(()=>{var x,de,pe;return[r("div",zt,[Nt,t(h(Le),{class:"ico-edit",onClick:ee})]),r("div",Ft,[$t,r("span",null,T(v.value.lastname)+" "+T(v.value.middlename)+", "+T(v.value.name),1),Ot,r("span",null,[r("span",null,T(v.value.phone?v.value.phone:"-"),1)]),qt,r("span",null,T(v.value.email?v.value.email:"-"),1),Pt,r("b",null,T((x=v.value)==null?void 0:x.idadvisory.length),1),Tt,r("div",Et,[r("b",null,T((de=v.value)==null?void 0:de.idformalization20.length),1)]),Lt,r("b",null,T((pe=v.value)==null?void 0:pe.idformalization10.length),1)])]}),_:1})):m("",!0),v.value.length!=0?(n(),f(ce,{key:1,class:"card-as"},{default:a(()=>[Mt,r("div",Vt,[t(Se,{style:{"min-width":"200px"},value:R.value,"onUpdate:value":g[2]||(g[2]=x=>R.value=x),options:W.value},null,8,["value","options"]),t(Ue,{class:"btn-produce",type:"primary",onClick:X},{default:a(()=>[q("REGISTRAR")]),_:1})])]),_:1})):m("",!0)]),y.value?(n(),C("div",Gt,[Yt,t(St,{totaladvisories:w.value,totalformalization10:c.value,totalformalization20:I.value},null,8,["totaladvisories","totalformalization10","totalformalization20"])])):m("",!0)]),r("section",null,[t(re,{width:"510",title:"Formalización con RUC 20",open:e.value,"onUpdate:open":g[7]||(g[7]=x=>e.value=x),placement:"right"},{default:a(()=>[t(Ie,{current:D.value,"onUpdate:current":g[3]||(g[3]=x=>D.value=x),size:"small",class:"steps"},{default:a(()=>[(n(),C(J,null,ne(l,x=>t(ke,{key:x.title,title:x.title},null,8,["title"])),64))]),_:1},8,["current"]),r("div",Ht,[D.value==0?(n(),f(Ze,{key:0,info:k.value,onCloseDraw:g[4]||(g[4]=x=>(e.value=!1,te()))},null,8,["info"])):m("",!0),D.value==1?(n(),f(lt,{key:1,info:k.value,itemSelectedF20:U.value,onCloseDraw:g[5]||(g[5]=x=>(e.value=!1,te()))},null,8,["info","itemSelectedF20"])):m("",!0),D.value==2?(n(),f(ut,{key:2,itemSelectedF20:U.value,onCloseDraw:g[6]||(g[6]=x=>(e.value=!1,te()))},null,8,["itemSelectedF20"])):m("",!0)])]),_:1},8,["open"]),t(re,{title:"Formalización con RUC 10",open:d.value,"onUpdate:open":g[9]||(g[9]=x=>d.value=x),placement:"right"},{default:a(()=>[t(_t,{info:v.value,onCloseDraw:g[8]||(g[8]=x=>(d.value=!1,te()))},null,8,["info"])]),_:1},8,["open"]),t(re,{title:"Nueva asesoría",open:E.value,"onUpdate:open":g[11]||(g[11]=x=>E.value=x),placement:"right"},{default:a(()=>[t(yt,{info:v.value,onCloseDraw:g[10]||(g[10]=x=>(E.value=!1,te()))},null,8,["info"])]),_:1},8,["open"]),t(De,{open:i.value,"onUpdate:open":g[12]||(g[12]=x=>i.value=x),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:a(()=>[t(Ce,{spinning:N.value},{default:a(()=>[(n(!0),C(J,null,ne(V.value,(x,de)=>(n(),C("div",{key:de,onClick:pe=>M(x)},[r("div",Bt,[x.task==0?(n(),C("div",Jt,[Wt,q(),t(me,{color:"error"},{default:a(()=>[q("Reserva de nombre")]),_:1})])):m("",!0),x.task==1?(n(),C("div",Kt,[Zt,q(),t(me,{color:"warning"},{default:a(()=>[q("Acto constitutivo")]),_:1})])):m("",!0),x.task==2?(n(),C("div",Qt,[Xt,q(),t(me,{color:"success"},{default:a(()=>[q("Formalizar")]),_:1})])):m("",!0),r("div",ea,[ta,r("span",null,[r("b",aa,T(x.codesunarp),1)]),na,r("span",null,T(Y(x.updated_at)),1)])])],8,jt))),128)),r("div",{class:"pendient pendient-btn btn-produce",onClick:o},la)]),_:1},8,["spinning"])]),_:1},8,["open"]),t(re,{open:z.value,"onUpdate:open":g[13]||(g[13]=x=>z.value=x),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:a(()=>[t(Ge,{onCloseDraw:j,updateValues:$.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},_a=oe(sa,[["__scopeId","data-v-fc4d5a6d"]]);export{_a as default};
