import{l as m,a9 as E,r as v,G as se,Z as ie,j as re,b as r,o as i,d as c,e as n,x as f,w as d,c as o,h as l,a7 as de,t as _,i as N,y as u,L as ue,F as R,aa as U,O as ce,q as pe}from"./index-761c7055.js";import{_ as me}from"./icoexcel-1b303edf.js";import{u as ve}from"./selectes-e7b639ce.js";import"./es-2faed5fd.js";import{M as _e}from"./MoreOutlined-8f7b9ae2.js";const ge={class:"table-component"},fe={class:"title-produce"},ye={key:1,class:"title-produce"},be={class:"table-filters"},he={key:0,class:"filter-year"},we={key:1,class:"filter-type"},ke={key:2,class:"filter-type"},Se={key:3,class:"filter-offices"},Ce={key:4,class:"filter-range-date"},Oe={key:5,class:"filter-asesor"},xe={key:6,class:"filter-asesor"},ze={key:7,class:"filter-asesor"},Ee={class:"filter-search"},Ne={key:1},Le={class:"paginator"},De="DD/MM/YYYY",Fe={__name:"TableComponent",props:["title","bread","routeBack","new","textNuevo","columns","dataSource","total","placeholderSearch","asesoresList","nameTotal","pageSize","titleSearch","othersList","tipoformalizacion","searchYear","rangeDate","tipooficina","downloadExcel","cityList","heightTable"],emits:["handleNew","handleDownloadExcel","handleSearch","handlePaginator"],setup(y,{emit:I}){m.locale("es");const b=ve();b.$patch({cities:b.cities}),b.fetchCities();const a=y,h=I,T=JSON.parse(localStorage.getItem("role"))||[],s=E("search"),L=E("loading"),F=E("loadingFile"),k=v(window.innerHeight-100),S=v({page:1}),P=v(1200),B=v([{label:"Últimos 7 días",value:[m().add(-7,"d"),m()]},{label:"Últimos 14 días",value:[m().add(-14,"d"),m()]},{label:"Último mes",value:[m().add(-30,"d"),m()]}]),Y=v([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),M=v([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),G=v([{label:"UGO",value:1},{label:"UGSE",value:2},{label:"TODOS",value:3}]),H=p=>T.some(e=>p.includes(e.id)),V=se(()=>p=>(S.value.page-1)*a.pageSize+p+1),j=()=>{h("handleNew")},$=async()=>{h("handleDownloadExcel")},q=()=>{S.value.page=1,h("handleSearch",!0)},J=p=>{S.value.page=p,h("handlePaginator",p)},C=()=>{if(a.heightTable)return k.value=window.innerHeight-a.heightTable;k.value=window.innerHeight-310},O=(p,e)=>{const x=p.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(x)};return ie(()=>{window.removeEventListener("resize",C)}),re(()=>{window.addEventListener("resize",C),C()}),(p,e)=>{const x=r("router-link"),z=r("a-breadcrumb-item"),X=r("a-breadcrumb"),w=r("a-button"),D=r("a-col"),Z=r("a-date-picker"),g=r("a-select"),K=r("a-range-picker"),Q=r("a-input"),W=r("a-row"),ee=r("a-menu"),ae=r("a-dropdown"),le=r("a-table"),te=r("a-tag"),oe=r("a-pagination");return i(),c(R,null,[n("div",ge,[y.bread?(i(),f(X,{key:0},{default:d(()=>[o(z,null,{default:d(()=>[o(x,{to:y.routeBack},{default:d(()=>[o(l(de)),e[10]||(e[10]=n("span",{class:"fs-13"}," Atrás",-1))]),_:1},8,["to"])]),_:1}),o(z,null,{default:d(()=>[n("h3",fe,_(a.title),1)]),_:1})]),_:1})):(i(),c("h3",ye,_(a.title),1)),o(W,{style:{margin:"1rem 0"}},{default:d(()=>[o(D,{xs:24,md:5},{default:d(()=>[a.new?(i(),f(w,{key:0,type:"primary",onClick:j,style:{"margin-right":".6rem"}},{default:d(()=>[N(_(a.textNuevo),1)]),_:1})):u("",!0),y.downloadExcel?u("",!0):(i(),f(w,{key:1,class:"btn-excel",onClick:$,loading:l(F),type:"primary"},{default:d(()=>e[11]||(e[11]=[n("img",{width:"20",style:{margin:"-2px 4px 0 0"},src:me},null,-1)])),_:1},8,["loading"]))]),_:1}),o(D,{xs:24,md:19},{default:d(()=>[n("div",be,[a.searchYear?(i(),c("div",he,[e[12]||(e[12]=n("small",null,"AÑO",-1)),o(Z,{allowClear:!1,value:l(s).year,"onUpdate:value":e[0]||(e[0]=t=>l(s).year=t),picker:"year",placeholder:"Seleccionar año"},null,8,["value"])])):u("",!0),a.tipoformalizacion?(i(),c("div",we,[e[13]||(e[13]=n("small",null,"TIPO",-1)),o(g,{value:l(s).type,"onUpdate:value":e[1]||(e[1]=t=>l(s).type=t),options:M.value},null,8,["value","options"])])):u("",!0),a.tipoformalizacion?(i(),c("div",ke,[e[14]||(e[14]=n("small",null,"TIPO CDE",-1)),o(g,{allowClear:!0,value:l(s).typeCdes,"onUpdate:value":e[2]||(e[2]=t=>l(s).typeCdes=t),options:Y.value},null,8,["value","options"])])):u("",!0),a.tipooficina?(i(),c("div",Se,[e[15]||(e[15]=n("small",null,"OFICINA",-1)),o(g,{value:l(s).offices,"onUpdate:value":e[3]||(e[3]=t=>l(s).offices=t),options:G.value},null,8,["value","options"])])):u("",!0),a.rangeDate?(i(),c("div",Ce,[e[16]||(e[16]=n("small",null,"POR RANGO DE FECHAS",-1)),o(K,{value:l(s).range,"onUpdate:value":e[4]||(e[4]=t=>l(s).range=t),presets:B.value,format:De},null,8,["value","presets"])])):u("",!0),H([1,5])&&a.asesoresList?(i(),c("div",Oe,[e[17]||(e[17]=n("small",null,"POR ASESOR",-1)),a.asesoresList?(i(),f(g,{key:0,allowClear:!0,value:l(s).asesor,"onUpdate:value":e[5]||(e[5]=t=>l(s).asesor=t),placeholder:"Selecciona Asesor","show-search":"",options:a.asesoresList,"filter-option":O},null,8,["value","options"])):u("",!0)])):u("",!0),a.cityList?(i(),c("div",xe,[e[18]||(e[18]=n("small",null,"POR REGIÓN",-1)),o(g,{allowClear:!0,value:l(s).city_id,"onUpdate:value":e[6]||(e[6]=t=>l(s).city_id=t),placeholder:"Selecciona región","show-search":"",options:l(b).cities,"filter-option":O},null,8,["value","options"])])):u("",!0),a.othersList?(i(),c("div",ze,[e[19]||(e[19]=n("small",null,"ORDENAR POR",-1)),o(g,{allowClear:!0,value:l(s).orderby,"onUpdate:value":e[7]||(e[7]=t=>l(s).orderby=t),placeholder:"Filtrador por:","show-search":"",options:a.othersList,"filter-option":O},null,8,["value","options"])])):u("",!0),n("div",Ee,[n("small",null,_(a.titleSearch),1),o(Q,{value:l(s).name,"onUpdate:value":e[8]||(e[8]=t=>l(s).name=t),placeholder:a.placeholderSearch},null,8,["value","placeholder"])]),o(w,{type:"primary",onClick:q},{default:d(()=>[l(L)?(i(),f(l(ue),{key:0})):(i(),c("span",Ne,"BUSCAR"))]),_:1})])]),_:1})]),_:1}),o(le,{bordered:"",scroll:{x:P.value,y:k.value},class:"table-pnte",columns:a==null?void 0:a.columns,"data-source":a==null?void 0:a.dataSource,pagination:!1,loading:l(L),size:"small"},{bodyCell:d(({column:t,record:A,index:ne})=>[t.dataIndex=="idx"?(i(),c(R,{key:0},[N(_(V.value(ne)),1)],64)):u("",!0),U(p.$slots,"data-cell",{column:t,record:A}),t.dataIndex=="actions"?(i(),f(ae,{key:1,trigger:["click"]},{overlay:d(()=>[o(ee,null,{default:d(()=>[U(p.$slots,"custom-options",{record:A})]),_:2},1024)]),default:d(()=>[n("a",{class:"ant-dropdown-link",onClick:e[9]||(e[9]=ce(()=>{},["prevent"]))},[o(w,{shape:"circle",icon:pe(l(_e)),size:"small"},null,8,["icon"])])]),_:2},1024)):u("",!0)]),_:3},8,["scroll","columns","data-source","loading"])]),n("div",Le,[n("span",null,[o(te,{color:"blue"},{default:d(()=>[n("b",null,_(a==null?void 0:a.total),1)]),_:1}),N(_(a.nameTotal),1)]),o(oe,{size:"small",total:a==null?void 0:a.total,pageSize:a.pageSize,onChange:J,showSizeChanger:!1},null,8,["total","pageSize"])])],64)}}};export{Fe as _};
