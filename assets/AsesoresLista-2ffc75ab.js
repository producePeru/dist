import{r as o,u as F,K as H,l as j,b as l,o as r,d as u,e as i,c as t,w as a,F as m,h as S,j as p,t as _,s as v,B as K,i as B,V as Q,E as W,W as X,m as Y}from"./index-7bd77afb.js";import{M as J}from"./MoreOutlined-682cfb10.js";const Z=i("h3",null,"ASESORES",-1),ee={class:"filters-asesorias"},te=["onClick"],ae=i("a",null,"Eliminar",-1),ne={class:"paginator"},ie={__name:"AsesoresLista",setup(oe){const w=o("asesor"),h=o(2),x=o([]),d=o(!1),y=o(0),k=F(),C=o({page:1}),D=o(1200),I=o(window.innerHeight-100),f=()=>{I.value=window.innerHeight-300};H(()=>{window.removeEventListener("resize",f)});const M=[{title:"Apellidos",dataIndex:"lastName",fixed:"left",width:200},{title:"Nombres",dataIndex:"name",fixed:"left",width:120},{title:"Tipo documento",dataIndex:"document_type",align:"center",width:100},{title:"Num. documento",dataIndex:"number_document",align:"center",width:120},{title:"Departamento",dataIndex:"departamento",align:"center",width:140},{title:"Provincia",dataIndex:"province",align:"center",width:140},{title:"Distrito",dataIndex:"distrite",align:"center",width:140},{title:"Correo",dataIndex:"email",width:180},{title:"Celular",dataIndex:"phone",width:100},{title:"",dataIndex:"actions",align:"center",width:50}],R=e=>{C.value.page=e,g()},V=e=>{const n={rol:w.value,dni:e.number_document,access:h.value};k.push({name:"actualizar-persona",query:n})},$=()=>{const e={rol:w.value,access:h.value};k.push({name:"registrar-persona",query:e})},L=async e=>{try{d.value=!0;const n=await S({url:`person-dni/${e.number_document}/${h.value}`,method:"PUT"});g(),Y.success(n.message)}catch(n){console.error("Error de red:",n)}finally{d.value=!1}},g=async()=>{try{d.value=!0;const e=await S({url:`/person/${h.value}`,method:"GET",params:C.value});x.value=e.data,y.value=e.total}catch(e){console.error("Error de red:",e)}finally{d.value=!1}};return j(()=>{g(),window.addEventListener("resize",f),f()}),(e,n)=>{const E=l("a-button"),b=l("a-menu-item"),O=l("a-popconfirm"),T=l("a-menu"),U=l("a-dropdown"),q=l("a-table"),G=l("a-pagination");return r(),u(m,null,[i("div",null,[Z,i("div",ee,[t(E,{type:"primary",onClick:$},{default:a(()=>[p("AGREGAR")]),_:1})]),t(q,{bordered:"",scroll:{x:D.value,y:I.value},class:"ant-table-striped",columns:M,"data-source":x.value,pagination:!1,loading:d.value,size:"small"},{bodyCell:a(({column:c,record:s})=>{var z,N,A;return[c.dataIndex=="lastName"?(r(),u(m,{key:0},[p(_(s.last_name)+" "+_(s.middle_name),1)],64)):v("",!0),c.dataIndex=="departamento"?(r(),u(m,{key:1},[p(_((z=s.department)==null?void 0:z.descripcion),1)],64)):v("",!0),c.dataIndex=="province"?(r(),u(m,{key:2},[p(_((N=s.province)==null?void 0:N.descripcion),1)],64)):v("",!0),c.dataIndex=="distrite"?(r(),u(m,{key:3},[p(_((A=s.district)==null?void 0:A.descripcion),1)],64)):v("",!0),c.dataIndex=="actions"?(r(),K(U,{key:4,trigger:["click"]},{overlay:a(()=>[t(T,null,{default:a(()=>[t(b,null,{default:a(()=>[i("a",{onClick:P=>V(s)},"Editar",8,te)]),_:2},1024),t(b,null,{default:a(()=>[t(O,{title:"Â¿Eliminar?",onConfirm:P=>L(s)},{icon:a(()=>[t(B(Q),{style:{color:"red"}})]),default:a(()=>[ae]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[i("a",{class:"ant-dropdown-link",onClick:n[0]||(n[0]=W(()=>{},["prevent"]))},[t(E,{shape:"circle",icon:X(B(J)),size:"small"},null,8,["icon"])])]),_:2},1024)):v("",!0)]}),_:1},8,["scroll","data-source","loading"])]),i("div",ne,[t(G,{size:"small",total:y.value,pageSize:20,onChange:R,showSizeChanger:!1},null,8,["total"])])],64)}}};export{ie as default};
