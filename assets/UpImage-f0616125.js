import{c as v,A as z,r as f,k as N,T as A,b as w,o as b,d as O,w as F,i as D,e as I,z as H,K as M}from"./index-617fe921.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};const k=$;function x(n){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(d){return Object.getOwnPropertyDescriptor(o,d).enumerable}))),i.forEach(function(d){E(n,d,o[d])})}return n}function E(n,t,o){return t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}var h=function(t,o){var i=x({},t,o.attrs);return v(z,x({},i,{icon:k}),null)};h.displayName="FileImageOutlined";h.inheritAttrs=!1;const q=h;const G={class:"clearfix"},J={key:0},Q=["src"],W={__name:"UpImage",props:{acceptFormats:{type:Array,default:()=>["image/jpeg","image/png","image/jpg","image/gif","image/webp"]},maxImages:{type:Number,default:1},imageLoad:{type:Object,default:()=>null},nameType:{type:String,default:"feria"},clearField:{type:Boolean,default:!1}},emits:["uploadSuccess"],setup(n,{emit:t}){const o="https://apituempresa.soporte-pnte.com/api/",i="http://127.0.0.1:8000/api/",d=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?i:o,l=n,j=t,s=f([]),_=f(!1),m=f(""),p=f(""),L=e=>new Promise((a,c)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>a(r.result),r.onerror=u=>c(u)}),U=async e=>{var a;!e.url&&!e.preview&&(e.preview=await L(e.originFileObj)),m.value=e.url||e.preview,_.value=!0,p.value=e.name||((a=e.url)==null?void 0:a.substring(e.url.lastIndexOf("/")+1))},P=()=>{_.value=!1,p.value=""},S=e=>l.acceptFormats.includes(e.type)?s.value.length<l.maxImages:(alert("Formato de imagen no permitido."),!1),V=async({file:e,onSuccess:a,onError:c})=>{const r=new FormData;r.append("file",e),r.append("from_origin",l.nameType);try{const g=(await M.post(`${d}image/upload-image`,r,{headers:{"Content-Type":"multipart/form-data"}})).data;if(g.status===200){const T={id:g.data.id};j("uploadSuccess",T)}if(l.clearField)return s.value=[];const C={uid:e.uid,name:e.name,status:"done",url:g.thumb};s.value=[C],a(g,e)}catch(u){console.error(u),c(u)}},B=async e=>{};function y(e){const a=e.name||"imagen-cargada",c={uid:"-1",name:a,status:"done",url:e.url};s.value=[c],m.value=e.url,p.value=a}return N(()=>{l.imageLoad&&y(l.imageLoad)}),A(()=>l.imageLoad,e=>{e?y(e):(s.value=[],m.value="",p.value="")}),(e,a)=>{const c=w("a-upload"),r=w("a-modal");return b(),O("div",G,[v(c,{"file-list":s.value,"onUpdate:fileList":a[0]||(a[0]=u=>s.value=u),"custom-request":V,"before-upload":S,"on-remove":B,accept:n.acceptFormats.join(","),"list-type":"picture-card",onPreview:U},{default:F(()=>[s.value.length<l.maxImages?(b(),O("div",J,[v(D(q)),a[1]||(a[1]=I("div",{style:{"margin-top":"8px"}},"Cargar",-1))])):H("",!0)]),_:1},8,["file-list","accept"]),v(r,{open:_.value,title:p.value,footer:null,onCancel:P},{default:F(()=>[I("img",{alt:"example",style:{width:"100%"},src:m.value},null,8,Q)]),_:1},8,["open","title"])])}}},Z=R(W,[["__scopeId","data-v-afa8a2c6"]]);export{Z as U};
