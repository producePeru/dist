import{r as u,a as de,H as re,v as ce,k as ue,b as i,o as d,d as p,e as m,c as a,w as n,i as r,F as f,z as U,t as s,s as c,q as b,h as V,Q as pe,I as me,M as _e,p as fe,j as ge,X as ve,m as he}from"./index-65e669a4.js";import{S as Ie}from"./DrawerSolicitante.componente-10cde4a6.js";import{u as we}from"./selectes-f74fa27c.js";import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";import{M as ye}from"./MoreOutlined-c763702c.js";import"./es-207283b4.js";const G=h=>(fe("data-v-e19b245d"),h=h(),ge(),h),Se=G(()=>m("h3",{class:"title-produce"},"SOLICITANTES",-1)),Ce={key:8,class:"uppercase"},be=["onClick"],ke=G(()=>m("a",null,"Eliminar",-1)),Ee={class:"paginator-asesories"},F=100,De={__name:"SolicitantesLista",setup(h){JSON.parse(localStorage.getItem("profile")),we();const k=u(window.innerHeight-100),H=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DOCUMENTO",fixed:"left",dataIndex:"tdocument",align:"center",width:140},{title:"NUM. DOC",dataIndex:"documentnumber",fixed:"left",width:120},{title:"NOMBRES",dataIndex:"name",width:170},{title:"APELLIDOS",dataIndex:"apellidos",width:170},{title:"REGIÓN",dataIndex:"city",align:"center",width:150},{title:"PROVINCIA",dataIndex:"province",align:"center",width:150},{title:"DISTRITO",dataIndex:"district",align:"center",width:150},{title:"CELULAR",dataIndex:"phone",align:"center",width:150},{title:"EMAIL",dataIndex:"email",width:200},{title:"GÉNERO",dataIndex:"gender",align:"center",width:90},{title:"DISCAPACIDAD",dataIndex:"sickx",align:"center",width:120},{title:"REGISTRADO POR",dataIndex:"registerby",width:200},{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}],_=de({names:""}),x=u(0),g=u({page:0}),$=u(1200),E=u([]),y=u(!1),I=u(!1),D=u(null);u(null);const q=()=>{_.names||console.log("Res")},Q=l=>({DNI:"blue",CE:"yellow",PAS:"red",PTP:"purple"})[l],X=()=>{v(_.names)},j=l=>{g.value.page=l,v()},S=()=>{k.value=window.innerHeight-280},J=()=>{v(),I.value=!1},Y=async l=>{try{const e=await U({url:`person/delete/${l.id}`,method:"DELETE"});e.status==500?ve.warning({title:"Aviso",content:e.message}):(v(),he.success(e.message))}catch(e){console.error("Error de red:",e)}},K=l=>{D.value=l,I.value=!0},W=re(()=>l=>((g.value.page==0?1:g.value.page)-1)*F+l+1),v=async l=>{try{y.value=!0;let e;l?e={..._.names&&{search:l},page:1}:e={...g.value.page!=0&&{page:g.value.page}};const w=await U({url:"person/list",method:"GET",params:e});E.value=w.data,x.value=w.total}catch(e){console.error("Error de red:",e)}finally{y.value=!1}};return ce(()=>{window.removeEventListener("resize",S)}),ue(()=>{window.addEventListener("resize",S),S(),v()}),(l,e)=>{const w=i("a-input"),N=i("a-form-item"),O=i("a-button"),Z=i("a-form"),C=i("a-tag"),A=i("a-menu-item"),ee=i("a-popconfirm"),te=i("a-menu"),ae=i("a-dropdown"),ne=i("a-table"),oe=i("a-pagination"),le=i("a-drawer");return d(),p(f,null,[m("div",null,[Se,a(Z,{layout:"inline",model:_,onFinish:X,class:"form-filter"},{default:n(()=>[a(N,null,{default:n(()=>[a(w,{value:_.names,"onUpdate:value":e[0]||(e[0]=o=>_.names=o),placeholder:"BUSCAR por Nombres o Apellidos",style:{width:"240px"},onInput:q},null,8,["value"])]),_:1}),a(N,null,{default:n(()=>[a(O,{type:"primary","html-type":"submit",disabled:_.names===""},{default:n(()=>[r(" BUSCAR ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),a(ne,{bordered:"",scroll:{x:$.value,y:k.value},class:"ant-table-striped",columns:H,"data-source":E.value,pagination:!1,loading:y.value,size:"small","row-class-name":(o,t)=>t%2===1?"table-striped":null},{bodyCell:n(({column:o,record:t,index:se})=>{var R,L,T,z,M,P,B;return[o.dataIndex=="idx"?(d(),p(f,{key:0},[r(s(W.value(se)),1)],64)):c("",!0),o.dataIndex=="tdocument"?(d(),b(C,{key:1,color:Q(t.typedocument.avr)},{default:n(()=>[r(s(t.typedocument.avr),1)]),_:2},1032,["color"])):c("",!0),o.dataIndex=="apellidos"?(d(),p(f,{key:2},[r(s(t.lastname)+" "+s(t.middlename),1)],64)):c("",!0),o.dataIndex=="city"?(d(),p(f,{key:3},[r(s((R=t.city)==null?void 0:R.name),1)],64)):c("",!0),o.dataIndex=="province"?(d(),p(f,{key:4},[r(s((L=t.province)==null?void 0:L.name),1)],64)):c("",!0),o.dataIndex=="district"?(d(),p(f,{key:5},[r(s((T=t.district)==null?void 0:T.name),1)],64)):c("",!0),o.dataIndex=="gender"?(d(),p(f,{key:6},[r(s((z=t.gender)==null?void 0:z.name),1)],64)):c("",!0),o.dataIndex=="sickx"?(d(),b(C,{key:7,color:t.sick=="no"?"blue":"pink"},{default:n(()=>[r(s(t.sick=="no"?"NO":"SI"),1)]),_:2},1032,["color"])):c("",!0),o.dataIndex=="registerby"?(d(),p("span",Ce,s((M=t.user[0])==null?void 0:M.profile.name)+" "+s((P=t.user[0])==null?void 0:P.profile.lastname)+" "+s((B=t.user[0])==null?void 0:B.profile.middlename),1)):c("",!0),o.dataIndex=="actions"?(d(),b(ae,{key:9,trigger:["click"]},{overlay:n(()=>[a(te,null,{default:n(()=>[a(A,null,{default:n(()=>[m("a",{onClick:ie=>K(t)},"Editar",8,be)]),_:2},1024),a(A,null,{default:n(()=>[a(ee,{title:"¿Seguro de eliminar?",onConfirm:ie=>Y(t)},{icon:n(()=>[a(V(pe),{style:{color:"red"}})]),default:n(()=>[ke]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[m("a",{class:"ant-dropdown-link",onClick:e[1]||(e[1]=me(()=>{},["prevent"]))},[a(O,{shape:"circle",icon:_e(V(ye)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]}),_:1},8,["scroll","data-source","loading","row-class-name"])]),m("div",Ee,[m("span",null,[a(C,{color:"blue"},{default:n(()=>[m("b",null,s(x.value),1)]),_:1}),r("Solicitantes")]),a(oe,{size:"small",total:x.value,pageSize:F,onChange:j,showSizeChanger:!1},null,8,["total"])]),a(le,{width:"600",open:I.value,"onUpdate:open":e[2]||(e[2]=o=>I.value=o),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:n(()=>[a(Ie,{onCloseDraw:J,updateValues:D.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},ze=xe(De,[["__scopeId","data-v-e19b245d"]]);export{ze as default};
