import{_ as U}from"./TableComponent-809d3c49.js";import{r as a,a as A,j as B,a6 as p,b as C,o,d as f,c as w,w as b,N as h,x as v,h as E,L as V,y as I}from"./index-6a351777.js";import{S as z}from"./SaveOutlined-d94d973b.js";import"./icoexcel-1b303edf.js";import"./es-8110547d.js";import"./MoreOutlined-2a04ec81.js";const F={class:"cde-table"},H={key:0,class:"cde-address"},K={__name:"CdesPnte",setup($){JSON.parse(localStorage.getItem("role"));const _=a([]),g=a(0),m=a(150),c=a(!1),i=a(!1),r=a(!1);a(!1),a(null);const s=A({asesor:null,name:null,page:1});a([]);const x=[{title:"#",dataIndex:"idx",align:"center",width:70},{title:"NOMBRE CDE",dataIndex:"name",width:220},{title:"REGIÓN",dataIndex:"city",width:120},{title:"PROVINCIA",dataIndex:"province",width:120},{title:"DISTRITO",dataIndex:"district",width:120},{title:"DIRECCIÓN",dataIndex:"address",width:250},{title:"TIPO",dataIndex:"cdeType",align:"center",width:200}],S=()=>{console.log("handleNew...")},N=a([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),T=async()=>{r.value=!0;try{}catch(e){console.error("Error de red:",e)}finally{r.value=!1}},D=async e=>{s.page=e,await u()},O=async e=>{e&&(s.page=1,await u())},u=async()=>{i.value=!0;try{const e={page:s.page},t=await h({url:"config/cdes",method:"GET",params:e});_.value=t.data.data,g.value=t.data.total,m.value=t.data.per_page}catch(e){console.error("Error de red:",e)}finally{i.value=!1}},k=async(e,t)=>{try{const d={value:e};await h({url:`config/chooseCde/${t.id}`,method:"PUT",data:d})}catch{console.log("Failed to delete")}},R=async e=>{try{c.value=e.id;const t={value:e.address};await h({url:`config/addressCde/${e.id}`,method:"PUT",data:t})}catch{console.log("Failed to delete")}finally{c.value=!1}};return B(async()=>{await u()}),p("search",s),p("loading",i),p("loadingFile",r),(e,t)=>{const d=C("a-textarea"),P=C("a-select");return o(),f("div",F,[w(U,{title:"CDE PNTE",new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",columns:x,titleSearch:"NOMBRE CDE",pageSize:m.value,nameTotal:"Solicitantes",dataSource:_.value,total:g.value,onHandleNew:S,onHandleDownloadExcel:T,onHandleSearch:O,onHandlePaginator:D},{"data-cell":b(({column:y,record:l})=>[y.dataIndex=="address"?(o(),f("div",H,[w(d,{value:l.address,"onUpdate:value":n=>l.address=n,placeholder:"Dirección del CDE","auto-size":{minRows:2,maxRows:5}},null,8,["value","onUpdate:value"]),c.value==l.id?(o(),v(E(V),{key:0})):(o(),v(E(z),{key:1,class:"cde-address-save",onClick:n=>R(l)},null,8,["onClick"]))])):I("",!0),y.dataIndex=="cdeType"?(o(),v(P,{key:1,style:{width:"100%"},value:l.cdetype_id,"onUpdate:value":n=>l.cdetype_id=n,options:N.value,onChange:n=>k(n,l)},null,8,["value","onUpdate:value","options","onChange"])):I("",!0)]),_:1},8,["pageSize","dataSource","total"])])}}};export{K as default};
