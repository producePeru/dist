import{r as d,a as G,k as V,U as J,X as M,o as A,y as z,i as Y,L as Z,d as q,c as v,m as F,h as N,p as x,f as K,b as L,w as D,e as C,j as $,t as Q,z as B,O as ve,n as fe}from"./index-119169c4.js";import{_ as ye}from"./TableComponent-1aca5030.js";import{d as ge}from"./downloadExcel-d6d15071.js";import{_ as W}from"./FormComponent-ce885aac.js";import{u as X}from"./selectes-0b54015a.js";import{u as Ee}from"./useHistorialBusinessman-a5602e77.js";import"./es-5629675f.js";import{g as be}from"./publicInscripcion-ebc9ecb9.js";import{_ as Ce}from"./_plugin-vue_export-helper-c27b6911.js";import"./icoexcel-1b303edf.js";import"./SyncOutlined-32f4c8a1.js";import"./MoreOutlined-60f25d03.js";import"./quill.snow-ec64ad74.js";const Ie={key:1,class:"ases-draw"},he={__name:"EditarAsesoria",props:{info:{type:Object,required:!0,default:()=>({})}},emits:["closeDraw"],setup(P,{emit:f}){const m=P,h=f,t=X(),y=d(!0),g=d(!1),e=G({}),T=d("ACTUALIZAR"),l=d({city_id:[],province_id:[],district_id:[],gender_id:[],sick:[]}),O=async(a,s)=>{if(a=="city_id"&&(await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,c.value.province_id.disabled=!1),a=="province_id"&&(await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,c.value.district_id.disabled=!1),a=="component_id"&&(await t.fetchComponentThemes(e.component_id),l.value.theme_id=t.componentThemes,e.theme_id=null,c.value.theme_id.disabled=!1),a==="theme_id")if(s==17)c.value={...c.value,observations:{type:"iNumber",label:"NÚMERO DE RESERVA (Z- 7 dígitos)",name:"observations",required:!0,message:"Ingresar número de reserva",disabled:!1,prefix:"Z -",maxlength:7,rules:[{validator:(r,i)=>{if(!i)return Promise.reject(new Error("Ingresar número de reserva"));const _=String(i).length;return _<7?Promise.reject(new Error("El número debe tener al menos 7 cifras")):_>7?Promise.reject(new Error("El número no puede superar las 7 cifras")):Promise.resolve()},trigger:"change"}]}};else{e.observations=null;const{observations:r,...i}=c.value;c.value=i}},b=async a=>{a=="city_id"&&(e.province_id=null,e.district_id=null,l.value.province_id=[],l.value.city_id=t.cities),a=="province_id"&&(e.province_id=null,e.district_id=null,l.value.district_id=[])},p=async()=>{g.value=!0;const a={economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,component_id:e.component_id,theme_id:e.theme_id,modality_id:e.modality_id,ruc:e.ruc,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,...e.observations&&{observations:e.observations}};try{const s=await F({url:`advisory/update-values-advisory/${m.info.id}`,method:"PUT",data:a});s.status==200&&(N.success(s.message),h("closeDraw",!0),S())}catch{const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{g.value=!1}},S=()=>{e.economicsector_id=null,e.comercialactivity_id=null,e.component_id=null,e.theme_id=null,e.theme_id=null,e.modality_id=null,e.ruc=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null;const{observations:a,...s}=c.value;c.value=s},c=d({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},component_id:{type:"iSelect",label:"COMPONENTE",name:"component_id",required:!0,message:"Seleccionar un componente",disabled:!1},theme_id:{type:"iSelect",label:"TEMA DEL COMPONENTE",name:"theme_id",required:!0,message:"Seleccionar un tema del componente",disabled:!0},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,rules:[{validator:(a,s)=>{if(!s)return Promise.resolve();const r=s.toString();return r.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15","17","20"].includes(r.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10, 15, 17 o 20"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0}}),I=async a=>{y.value=!0;try{if(a){if(e.economicsector_id=a.econimic_sector_id,e.comercialactivity_id=a.activity_comercial_id,e.city_id=a.city_id,await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,e.province_id=a.province_id,await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,e.district_id=a.district_id,e.modality_id=a.modality_id,e.ruc=a.ruc,e.component_id=a.component_id,c.value.theme_id.disabled=!1,e.component_id=a.component_id,await t.fetchComponentThemes(e.component_id),l.value.theme_id=t.componentThemes,e.theme_id=a.theme_id,a.theme_id==17)c.value={...c.value,observations:{type:"iNumber",label:"NÚMERO DE RESERVA (7 dígitos)",name:"observations",required:!0,message:"Ingresar número de reserva",disabled:!1,prefix:"Z -",maxlength:7,rules:[{validator:(s,r)=>{if(!r)return Promise.reject(new Error("Ingresar número de reserva"));const i=String(r).length;return i<7?Promise.reject(new Error("El número debe tener al menos 7 cifras")):i>7?Promise.reject(new Error("El número no puede superar las 7 cifras")):Promise.resolve()},trigger:"change"}]}};else{e.observations=null;const{observations:s,...r}=c.value;c.value=r}e.observations=a.observations}}catch(s){console.error("Error al cargar la información:",s)}finally{y.value=!1}};return V(async()=>{m.info&&I(m.info),await t.fetchEconomicSectors(),l.value.economicsector_id=t.economicSectors,await t.fetchComercialActivities(),l.value.comercialactivity_id=t.comercialActivities,await t.fetchCities(),l.value.city_id=t.cities,await t.fetchModalities(),l.value.modality_id=t.modalities,await t.fetchComponents(),l.value.component_id=t.components,y.value=!1}),J(()=>m.info,a=>{a?I(a):S()}),M("formState",e),M("loadingState",g),(a,s)=>y.value?(A(),z(Y(Z),{key:0,style:{color:"#00a6db"}})):(A(),q("div",Ie,[v(W,{fields:c.value,options:l.value,btnSaveName:T.value,onHandleFocusSelect:b,onHandleChangeSelect:O,onOnSubmit:p},null,8,["fields","options","btnSaveName"])]))}};const Se={key:1,class:"ppnn-draw"},we={__name:"EditarPPNN",props:{info:{type:Object,required:!0,default:()=>({})}},emits:["closeDraw"],setup(P,{emit:f}){const m=P,h=f,t=X(),y=d(!0),g=d(!1),e=G({}),T=d("ACTUALIZAR"),l=d({city_id:[],province_id:[],district_id:[],economicsector_id:[]}),O=async a=>{a=="city_id"&&(await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,c.value.province_id.disabled=!1),a=="province_id"&&(await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,c.value.district_id.disabled=!1),a=="component_id"&&(await t.fetchComponentThemes(e.component_id),l.value.theme_id=t.componentThemes,e.theme_id=null,c.value.theme_id.disabled=!1)},b=async a=>{a=="city_id"&&(await t.fetchCities(),e.district_id=null,l.value.province_id=[],l.value.city_id=t.cities),a=="province_id"&&(e.province_id=null,e.district_id=null,l.value.district_id=[])},p=async()=>{g.value=!0;const a={economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,detailprocedure_id:e.detailprocedure_id,modality_id:e.modality_id,ruc:e.ruc,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address};try{const s=await F({url:`formalization/update-values-ruc-10/${m.info.id}`,method:"PUT",data:a});s.status==200&&(N.success(s.message),h("closeDraw",!0),S())}catch{N.error(t.error)}finally{g.value=!1}},S=()=>{e.economicsector_id=null,e.comercialactivity_id=null,e.detailprocedure_id=null,e.modality_id=null,e.ruc=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null},c=d({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},detailprocedure_id:{type:"iSelect",label:"DETALLE DEL TRÁMITE",name:"detailprocedure_id",required:!0,message:"Seleccionar detalle del trámite",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"NÚMERO DE RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,required:!0,rules:[{validator:(a,s)=>{if(!s)return Promise.reject(new Error("El Número de RUC es obligatorio"));const r=s.toString();return r.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15","17"].includes(r.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10, 15 o 17"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!0,message:"Escribir la direccion del Negocio",disabled:!1}}),I=async a=>{y.value=!0;try{a&&(e.economicsector_id=a.econimic_sector_id,e.comercialactivity_id=a.activity_comercial_id,e.detailprocedure_id=a.detailprocedure_id,e.modality_id=a.modality_id,e.ruc=a.ruc,e.city_id=a.city_id,await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,e.province_id=a.province_id,await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,e.district_id=a.district_id,e.address=a.address)}catch(s){N.error(s.message)}finally{y.value=!1}};return V(async()=>{m.info&&I(m.info),await t.fetchEconomicSectors(),l.value.economicsector_id=t.economicSectors,await t.fetchComercialActivities(),l.value.comercialactivity_id=t.comercialActivities,await t.fetchDetailProcedures(),l.value.detailprocedure_id=t.detailProcedures,await t.fetchModalities(),l.value.modality_id=t.modalities,await t.fetchCities(),l.value.city_id=t.cities,await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,y.value=!1}),J(()=>m.info,a=>{a?I(a):S()}),M("formState",e),M("loadingState",g),(a,s)=>y.value?(A(),z(Y(Z),{key:0,style:{color:"#00a6db"}})):(A(),q("div",Se,[v(W,{fields:c.value,options:l.value,btnSaveName:T.value,onHandleFocusSelect:b,onHandleChangeSelect:O,onOnSubmit:p,mayus:!0},null,8,["fields","options","btnSaveName"])]))}};const De={key:1,class:"ppjj-draw"},Oe={__name:"EditarPPJJ",props:{info:{type:Object,required:!0,default:()=>({})}},emits:["closeDraw"],setup(P,{emit:f}){x.locale("es");const m=P,h=f,t=X();Ee();const y=d(!0),g=d(!1),e=G({}),T=d("ACTUALIZAR"),l=d({city_id:[],province_id:[],district_id:[],modality_id:[],comercialactivity_id:[],isbic:[],typecapital_id:[]}),O=async i=>{i=="city_id"&&(await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,s.value.province_id.disabled=!1),i=="province_id"&&(await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,s.value.district_id.disabled=!1)},b=async i=>{i=="city_id"&&(await t.fetchCities(),e.city_id=null,e.province_id=null,e.district_id=null,l.value.province_id=[],l.value.city_id=t.cities),i=="province_id"&&(e.province_id=null,e.district_id=null,l.value.district_id=[]),i=="modality_id"&&(await t.fetchModalities(),l.value.modality_id=t.modalities),i=="regime_id"&&(await t.fetchRegimes(),l.value.regime_id=t.regimes),i=="economicsector_id"&&(await t.fetchEconomicSectors(),l.value.economicsector_id=t.economicSectors),i=="comercialactivity_id"&&(await t.fetchComercialActivities(),l.value.comercialactivity_id=t.comercialActivities),i=="notary_id"&&I(),i=="isbic"&&p(),i=="typecapital_id"&&(await t.fetchTypeCapital(),l.value.typecapital_id=t.typeCapital)},p=()=>{l.value.isbic=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}]},S=async()=>{g.value=!0;const i={ruc:e.ruc,regime_id:e.regime_id,nameMype:e.nameMype,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,modality_id:e.modality_id,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,numbernotary:e.numbernotary,notary_id:e.notary_id,dateReception:e.dateReception?x(e.dateReception).format("YYYY-MM-DD"):null,dateTramite:e.dateTramite?x(e.dateTramite).format("YYYY-MM-DD"):null,isbic:e.isbic,montocapital:e.montocapital,typecapital_id:e.typecapital_id};try{const _=await F({url:`formalization/update-values-ruc-20/${m.info.id}`,method:"PUT",data:i});_.status==200&&(N.success(_.message),h("closeDraw",!0),a())}catch{N.error(t.error)}finally{g.value=!1}},c=async i=>{i=="dateReception"&&(e.dateTramite&&(e.dateTramite=null),s.value.dateTramite.disabled=!1)},I=async()=>{try{const{data:i}=await K({url:"public/notaries-filters",method:"GET"}),_=i.map(w=>({value:w.id,name:w.name,city:w.city.name,province:w.province.name,district:w.district.name,address:w.address}));l.value.notary_id=_}catch(i){console.error("Error de red:",i)}},a=()=>{Object.keys(e).forEach(i=>{["city_id","province_id","district_id","address"].includes(i)||(e[i]=null)}),s.value.province_id.disabled=!0,s.value.district_id.disabled=!0,s.value.dateTramite.disabled=!0},s=d({ruc:{type:"iNumber",label:"NÚMERO DE RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,required:!1,rules:[{validator:(i,_)=>{if(!_)return Promise.resolve();const w=_.toString();return w.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["20"].includes(w.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 20"))},trigger:"change"}]},regime_id:{type:"iSelect",label:"TIPO DE RÉGIMEN SOCIETARIO",name:"regime_id",required:!0,message:"Seleccionar el régimen societario",disabled:!1},nameMype:{type:"iText",label:"NOMBRE EMPRESA",name:"nameMype",required:!0,message:"Escribir nombre de la empresa",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!0,message:"Escribir la direccion del Negocio",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},numbernotary:{type:"iText",label:"NÚMERO SOLICITUD CONSTANCIA",name:"numbernotary",required:!0,message:"Escribir el número de solicitud",disabled:!1,maxlength:8,rules:[{validator:(i,_)=>{if(!_)return Promise.reject(new Error("El número de notaría es requerido"));const w=_.toString();return/^\d{8}$/.test(w)?Promise.resolve():Promise.reject(new Error("El número debe tener exactamente 8 dígitos numéricos"))},trigger:"change"}]},notary_id:{type:"iSelectNotary",label:"NOTARÍA",name:"notary_id",required:!0,message:"Seleccionar una notaría",disabled:!1},dateReception:{type:"iDate",label:"FECHA DE RECEPCION PNTE",name:"dateReception",required:!0,disabled:!1,disabledDate:i=>!1},dateTramite:{type:"iDate",label:"FECHA TRÁMITE SID SUNARP-SUNAT",name:"dateTramite",required:!0,disabled:!0,disabledDate:i=>e.dateReception&&i&&x(i).isBefore(x(e.dateReception))},isbic:{type:"iSelect",label:"¿ES UNA SOCIEDAD BIC?",name:"isbic",required:!0,message:"Seleccionar si es BIC",disabled:!1},montocapital:{type:"iMoney",label:"MONTO DE CAPITAL SOCIAL",name:"montocapital",required:!0,message:"Escribir el Monto de capital social",disabled:!1},typecapital_id:{type:"iSelect",label:"TIPO DE APORTE DE CAPITAL",name:"typecapital_id",required:!0,message:"Seleccionar tipo de aporte",disabled:!1}}),r=async i=>{try{i&&(e.ruc=i.ruc,e.nameMype=i.name_mype,e.city_id=i.city_id,s.value.province_id.disabled=!1,e.province_id=i.province_id,s.value.district_id.disabled=!1,e.district_id=i.district_id,e.address=i.address,e.modality_id=i.modality_id,e.regime_id=i.regime_id,e.economicsector_id=i.econimic_sector_id,e.numbernotary=i.num_solicitud,e.comercialactivity_id=i.activity_comercial_id,e.notary_id=i.notary_id,s.value.dateTramite.disabled=!1,e.dateReception=i.date_reception?x(i.date_reception,"DD/MM/YYYY"):null,e.dateTramite=i.date_tramite?x(i.date_tramite,"DD/MM/YYYY"):null,e.isbic=i.bic,e.montocapital=i.monto_capital,e.typecapital_id=i.typecapital_id)}catch(_){N.error(_.message)}};return V(async()=>{m.info&&r(m.info),await t.fetchCities(),l.value.city_id=t.cities,await t.fetchProvinces(e.city_id),l.value.province_id=t.provinces,await t.fetchDistricts(e.province_id),l.value.district_id=t.districts,await t.fetchModalities(),l.value.modality_id=t.modalities,await t.fetchRegimes(),l.value.regime_id=t.regimes,await t.fetchEconomicSectors(),l.value.economicsector_id=t.economicSectors,await t.fetchComercialActivities(),l.value.comercialactivity_id=t.comercialActivities,I(),await t.fetchTypeCapital(),l.value.typecapital_id=t.typeCapital,y.value=!1}),J(()=>m.info,i=>{i?r(i):a()}),M("formState",e),M("loadingState",g),(i,_)=>y.value?(A(),z(Y(Z),{key:0,style:{color:"#00a6db"}})):(A(),q("div",De,[v(W,{fields:s.value,options:l.value,btnSaveName:T.value,onHandleFocusSelect:b,onHandleChangeSelect:O,onHandleChangeClock:c,onOnSubmit:S,mayus:!0},null,8,["fields","options","btnSaveName"])]))}};const Ae={class:"flex justify-between mt-4"},Ne={__name:"DescribeMotive",props:["loadingDescribeMotive"],emits:["closeModal","goToFunction"],setup(P,{emit:f}){const m=P,h=f,t=d(!0),y=d(null),g=d({comentario:""}),e={comentario:[{validator:(O,b)=>b?b.trim().split(/\s+/).length<4?Promise.reject("Debe contener al menos 4 palabras"):Promise.resolve():Promise.reject("El comentario es obligatorio"),trigger:"blur"}]},T=()=>{t.value=!1,y.value.resetFields(),h("closeModal")},l=()=>{y.value.validate().then(()=>{h("goToFunction",g.value.comentario)}).catch(()=>{N.error("Corrige los errores antes de continuar")})};return(O,b)=>{const p=L("a-textarea"),S=L("a-form-item"),c=L("a-button"),I=L("a-form");return A(),z(I,{model:g.value,rules:e,ref_key:"formRef",ref:y,layout:"vertical"},{default:D(()=>[v(S,{name:"comentario"},{default:D(()=>[v(p,{value:g.value.comentario,"onUpdate:value":b[0]||(b[0]=a=>g.value.comentario=a),placeholder:"Escribe tu comentario (mínimo 4 palabras)...",rows:4},null,8,["value"])]),_:1}),C("div",Ae,[v(c,{onClick:T,class:"w-1/2 mr-2"},{default:D(()=>b[1]||(b[1]=[$("Cancelar")])),_:1}),v(c,{type:"primary",class:"w-1/2 ml-2",onClick:l,loading:m.loadingDescribeMotive},{default:D(()=>[$(Q(m.loadingDescribeMotive?"":"Aceptar"),1)]),_:1},8,["loading"])])]),_:1},8,["model"])}}},Te=Ce(Ne,[["__scopeId","data-v-19c517c6"]]);const Re={class:"layout-content"},xe={class:"advisory-table"},Me={class:"filter-type"},Pe={key:0,class:"filter-type"},Le={key:1,class:"filter-asesor"},Ue=["onClick"],Ye=["onClick"],Xe={__name:"reportes-index",setup(P){const f=JSON.parse(localStorage.getItem("profile"))||{},m=d(!1),h=d(null),t=d(!1),y=d([{label:"ASESORÍAS",value:1},{label:"F. RUC 10",value:2},{label:"F. RUC 20",value:3}]),g=d([{label:"CDE",value:1},{label:"CDEAI INSTITUCIONES",value:2},{label:"CDEAN NOTARÍAS",value:3}]),e=d([]),T=d(0),l=d(90),O=d(!1),b=d(!1),p=d("Asesorías"),S=d(!1),c=d(!1),I=d(!1),a=d(null),s=d(!1),r=G({year:x("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null}),i=d([]),_=d([]),w=(n,o)=>{const E=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return o.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(E)},H=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:80},{title:"FECHA",fixed:"left",dataIndex:"date",width:100,align:"center"},...f.rol!=2?[{title:"ASESOR",dataIndex:"asesor",width:200,customCell:()=>({style:{backgroundColor:"#f0f5ff"}})}]:[],...f.rol!=2?[{title:"ASESOR CDE",dataIndex:"asesor_cde",width:160,customCell:()=>({style:{backgroundColor:"#f0f5ff"}})}]:[],{title:"TIPO DOCUMENTO",dataIndex:"emp_document_type",width:100,align:"center"},{title:"NÚMERO DE DOCUMENTO",dataIndex:"emp_document_number",align:"center",width:140},{title:"SOLICITANTE APELLIDO PATERNO",dataIndex:"emp_lastname",width:150},{title:"SOLICITANTE APELLIDO MATERNO",dataIndex:"emp_middlename",width:150},{title:"SOLICITANTE NONBRE",dataIndex:"emp_name",width:150},{title:"PAÍS",dataIndex:"emp_country",align:"center",width:120},{title:"FEC. NAC",dataIndex:"emp_birth",align:"center",width:120},{title:"EDAD",dataIndex:"emp_age",align:"center",width:80},{title:"GÉNERO",dataIndex:"emp_gender",width:80,align:"center"},{title:"DISCAPACIDAD",dataIndex:"emp_discapabilities",width:120,align:"center"},{title:"HIJOS",dataIndex:"emp_soons",width:80,align:"center"},{title:"CELULAR",dataIndex:"emp_phone",width:120,align:"center"},{title:"EMAIL",dataIndex:"emp_email",width:200},{title:"CIUDAD",dataIndex:"city",width:120,align:"center"},{title:"PROVINCIA",dataIndex:"province",width:140,align:"center"},{title:"DISTRITO",dataIndex:"district",width:140,align:"center"},{title:"RUC",dataIndex:"ruc",width:120,align:"center"}],ee=[{title:"SECTOR ECONÓMICO",dataIndex:"econimic_service",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"COMPONENTE",dataIndex:"component",width:140,align:"center"},{title:"TEMA",dataIndex:"theme",width:200},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"CODIGO SID SUNARP",align:"center",dataIndex:"observations",width:140},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],te=[{title:"SECTOR ECONÓMICO",dataIndex:"econimic_sector",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"DETALLE DEL TRÁMITE",dataIndex:"detail_tramit",width:180},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],ie=[{title:"NOMBRE DE LA EMPRESA",dataIndex:"nameMype",width:200},{title:"SECTOR ECONÓMICO",dataIndex:"econimic_sector",width:120,align:"center"},{title:"ACTIVIDAD COMERCIAL",dataIndex:"activity_comercial",width:200},{title:"FECHA DE RECEPCIÓN",dataIndex:"date_reception",width:160,align:"center"},{title:"FECHA DE TRÁMITE",dataIndex:"date_tramite",width:160,align:"center"},{title:"TIPO DE RÉGIMEN",dataIndex:"type_regimen",width:150,align:"center"},{title:"BIC",dataIndex:"bic",width:50,align:"center"},{title:"NÚMERO DE SOLICITUD",dataIndex:"num_solicitud",width:160,align:"center"},{title:"NOTARÍA",dataIndex:"notaria",width:200},{title:"TIPO DE APORTE",dataIndex:"type_aporte",width:160,align:"center"},{title:"MONTO CAPITAL",dataIndex:"monto_capital",width:160,align:"center"},{title:"NODALIDAD",dataIndex:"modality",width:100,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}];function ae(){if(f.user_id){const n={user:f.user_id,name:f.name,lastname:f.lastname,middlename:f.middlename};if(f.user_id){const o=btoa(JSON.stringify(n)),E=`${be()}/preguntas-formalizaciones?data=${o}`;window.open(E,"_blank")}}}const re=()=>{console.log("handleNew...")},oe=n=>({Asesorias:"ases","Formalizaciones RUC 10":"f10","Formalizaciones RUC 20":"f20"})[n],le=async n=>{m.value=!0;try{const E={table_name:{Asesorias:"asesoria","Formalizaciones RUC 10":"f10","Formalizaciones RUC 20":"f20"}[p.value]||p.value,row_id:h.value.id,description:n,action:"d"};if((await F({url:"token/indicate-reason-action",method:"POST",data:E})).status==200)try{let R=null;p.value==="Asesorias"&&(R=`advisory/delete/${h.value.id}`),p.value==="Formalizaciones RUC 10"&&(R=`formalization/delete-ruc-10/${h.value.id}`),p.value==="Formalizaciones RUC 20"&&(R=`formalization/delete-ruc-20/${h.value.id}`);const j=await F({url:R,method:"DELETE"});U(),N.success(j.message),t.value=!1}catch(R){console.error("Error al eliminar registro:",R),N.error("No se pudo eliminar el registro.")}}catch(o){console.error("Error al registrar motivo:",o),N.error("No se pudo registrar el motivo de la acción.")}finally{m.value=!1}},ne=n=>{h.value=n,t.value=!0},se=async()=>{b.value=!0;try{const n={};r.year&&(n.year=x(r.year).format("YYYY")),r.range&&(n.dateStart=r.range[0].format("YYYY/MM/DD"),n.dateEnd=r.range[1].format("YYYY/MM/DD")),r.asesor&&(n.asesor=r.asesor),r.name&&(n.name=r.name),r.typeCdes&&(n.typeCdes=r.typeCdes);let o=null,E=null;r.type==1&&(o="download/asesories",E="Asesorías"),r.type==2&&(o="download/formalizations-ruc10",E="Formalizaciones 10"),r.type==3&&(o="download/formalizations-ruc20",E="Formalizaciones 20"),await ge(o,E,n)}catch(n){console.error("Error de red:",n)}finally{b.value=!1}},de=async n=>{r.page=n,await U()},ce=async n=>{n&&(r.page=1,await U())},ue=n=>{a.value=n,r.type==1&&(S.value=!0),r.type==2&&(c.value=!0),r.type==3&&(I.value=!0)},me=()=>{r.type==1&&(_.value=[...H,...ee],p.value="Asesorias"),r.type==2&&(_.value=[...H,...te],p.value="Formalizaciones RUC 10"),r.type==3&&(_.value=[...H,...ie],p.value="Formalizaciones RUC 20")},U=async()=>{O.value=!0,me();try{const n={page:r.page};r.year&&(n.year=x(r.year).format("YYYY")),r.range&&(n.dateStart=r.range[0].format("YYYY/MM/DD"),n.dateEnd=r.range[1].format("YYYY/MM/DD")),r.asesor&&(n.asesor=r.asesor),r.name&&(n.name=r.name),r.typeCdes&&(n.typeCdes=r.typeCdes);let o=null;r.type==1&&(o="historial/advisories/filters"),r.type==2&&(o="historial/formalizations-10/filters"),r.type==3&&(o="historial/formalizations-20/filters");const E=await F({url:o,method:"GET",params:n});e.value=E.data.data,T.value=E.data.total,l.value=E.data.per_page,f.rol!=2&&await pe()}catch(n){console.error("Error de red:",n)}finally{O.value=!1}},pe=async()=>{try{const n=await K({url:"select/asesores-report",method:"GET"});n.status==200&&(i.value=n.data)}catch{console.log("Failed to delete")}};return V(async()=>{await U()}),M("search",r),M("loading",O),M("loadingFile",b),(n,o)=>{const E=L("a-select"),k=L("a-menu-item"),R=L("a-drawer"),j=L("a-modal");return A(),q("div",Re,[C("div",xe,[v(ye,{title:`REPORTE GENERAL - ${p.value}`,new:!1,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:_.value,downloadExcel:!0,titleSearch:"NÚMERO DE DOCUMENTO",pageSize:l.value,nameTotal:p.value,dataSource:e.value,total:T.value,onHandleNew:re,onHandleDownloadExcel:se,onHandleSearch:ce,onHandlePaginator:de},{header:D(()=>[C("div",Me,[o[12]||(o[12]=C("small",null,"TIPO",-1)),v(E,{value:r.type,"onUpdate:value":o[0]||(o[0]=u=>r.type=u),options:y.value},null,8,["value","options"])]),Y(f).rol!=2?(A(),q("div",Pe,[o[13]||(o[13]=C("small",null,"TIPO CDE",-1)),v(E,{allowClear:!0,value:r.typeCdes,"onUpdate:value":o[1]||(o[1]=u=>r.typeCdes=u),options:g.value},null,8,["value","options"])])):B("",!0),Y(f).rol!=2?(A(),q("div",Le,[o[14]||(o[14]=C("small",null,"POR ASESOR",-1)),v(E,{allowClear:!0,value:r.asesor,"onUpdate:value":o[2]||(o[2]=u=>r.asesor=u),placeholder:"Selecciona Asesor","show-search":"",options:i.value,"filter-option":w},null,8,["value","options"])])):B("",!0)]),"custom-options":D(({record:u})=>[v(k,null,{default:D(()=>[C("a",{onClick:_e=>ue(u)},"Editar",8,Ue)]),_:2},1024),Y(f).rol==1?(A(),z(k,{key:0},{default:D(()=>[C("a",{onClick:_e=>ne(u),style:{color:"#ff4d4f"}},"Eliminar",8,Ye)]),_:2},1024)):B("",!0)]),_:1},8,["title","columns","pageSize","nameTotal","dataSource","total"]),v(R,{width:"600",title:"EDITAR ASESORÍA",open:S.value,"onUpdate:open":o[4]||(o[4]=u=>S.value=u),placement:"right"},{default:D(()=>[v(he,{info:a.value,onCloseDraw:o[3]||(o[3]=u=>(S.value=!1,U()))},null,8,["info"])]),_:1},8,["open"]),v(R,{width:"600",title:"EDITAR PPNN",open:c.value,"onUpdate:open":o[6]||(o[6]=u=>c.value=u),placement:"right"},{default:D(()=>[v(we,{info:a.value,onCloseDraw:o[5]||(o[5]=u=>(c.value=!1,U()))},null,8,["info"])]),_:1},8,["open"]),v(R,{width:"600",title:"Editar Formalización RUC 20",open:I.value,"onUpdate:open":o[8]||(o[8]=u=>I.value=u),placement:"right"},{default:D(()=>[v(Oe,{info:a.value,onCloseDraw:o[7]||(o[7]=u=>(I.value=!1,U()))},null,8,["info"])]),_:1},8,["open"]),v(j,{open:s.value,"onUpdate:open":o[9]||(o[9]=u=>s.value=u),title:"📌 ¿Aún no llenaste el formulario?",width:"420px",footer:null,maskClosable:!1,closable:!1},{default:D(()=>[o[15]||(o[15]=C("p",null,"¡Hola! 👋",-1)),o[16]||(o[16]=C("p",null,"Notamos que aún no has completado el formulario con preguntas frecuentes sobre formalización.",-1)),o[17]||(o[17]=C("p",null,"Tómate un momento para completarlo cuando puedas. ¡Tu experiencia es importante para nosotros!",-1)),o[18]||(o[18]=C("br",null,null,-1)),C("a",{href:"#",onClick:ve(ae,["prevent"]),class:"btn-complete-modal"}," IR AL FORMULARIO "),o[19]||(o[19]=C("br",null,null,-1)),o[20]||(o[20]=C("p",{style:{color:"#ff4d4f","text-align":"center"}},[$("Completado el formulario regresa a esta página y "),C("b",null,"actualiza"),$(" para que este mensaje desaparezca. ")],-1))]),_:1},8,["open"]),v(j,{open:t.value,"onUpdate:open":o[11]||(o[11]=u=>t.value=u),title:"DESCRIBE MOTIVO",footer:null,width:"450px"},{default:D(()=>[C("span",{class:fe(["tag-formalizations",oe(p.value)])},Q(p.value),3),v(Te,{onCloseModal:o[10]||(o[10]=u=>t.value=!1),onGoToFunction:le,loadingDescribeMotive:m.value},null,8,["loadingDescribeMotive"])]),_:1},8,["open"])])])}}};export{Xe as default};
