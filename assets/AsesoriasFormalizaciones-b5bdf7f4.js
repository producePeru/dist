import{a as be,f as ke,r as Se,b as xe,R as Ue}from"./ReservaNombre-4dce717b.js";import{u as se}from"./selectes-9890a566.js";import{c as l,A as we,r as U,a as ee,b as d,o as e,d as v,w as s,e as u,F as R,D as j,h as A,q as _,s as i,i as C,z as H,m as M,O as Ce,P as Ie,U as Re,V as Ae,t as k,u as De,y as Fe,k as $e,W as ze,p as Oe,j as qe,R as Ee}from"./index-baf99455.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Ne}from"./DrawerSolicitante.componente-14cb722b.js";import"./es-920acf37.js";var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Pe=Te;function ue(I){for(var h=1;h<arguments.length;h++){var r=arguments[h]!=null?Object(arguments[h]):{},S=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(S=S.concat(Object.getOwnPropertySymbols(r).filter(function(w){return Object.getOwnPropertyDescriptor(r,w).enumerable}))),S.forEach(function(w){Le(I,w,r[w])})}return I}function Le(I,h,r){return h in I?Object.defineProperty(I,h,{value:r,enumerable:!0,configurable:!0,writable:!0}):I[h]=r,I}var le=function(h,r){var S=ue({},h,r.attrs);return l(we,ue({},S,{icon:Pe}),null)};le.displayName="RedoOutlined";le.inheritAttrs=!1;const Me=le;const Ve={class:"wrapper-booking"},Ge={class:"grid-booking"},Be={__name:"ActoConstitutivo",props:["info","itemSelectedF20"],emits:["closeDraw"],setup(I,{emit:h}){const r=JSON.parse(localStorage.getItem("profile")),S=se(),w=I,V=h;S.$patch({notaries:S.notaries}),S.fetchNotaries();const F=U(!1),x=ee({task:2,name:null,numbernotary:null,notary_id:null,user_id:r.user_id,userupdated_id:r.id}),t=async()=>{F.value=!0,x.people_id=w.info.id;try{const c=await H({url:`formalization/ruc20-step2/${w.itemSelectedF20.codesunarp}`,method:"POST",data:x});c.status===200&&(M.success(c.message),x.name=null,x.numbernotary=null,x.notary_id=null,V("closeDraw",!0))}catch(c){console.log("Error: "+c)}finally{F.value=!1}},D=()=>{M.error("Debes de completar todos los espacios requeridos")};return(c,L)=>{const E=d("a-select"),z=d("a-form-item"),N=d("a-input"),m=d("a-button"),n=d("a-form");return e(),v("div",Ve,[l(n,{layout:"vertical",model:x,name:"basic",autocomplete:"off",onFinish:t,onFinishFailed:D},{default:s(()=>[u("div",Ge,[(e(!0),v(R,null,j(A(be),(a,g)=>(e(),v(R,{key:g},[a.type==="iSelect"?(e(),_(z,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:s(()=>[a.name=="notary_id"?(e(),_(E,{key:0,value:x[a.name],"onUpdate:value":f=>x[a.name]=f,options:A(S).notaries},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),a.type==="iText"?(e(),_(z,{key:1,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:s(()=>[l(N,{value:x[a.name],"onUpdate:value":f=>x[a.name]=f},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(z,null,{default:s(()=>[l(m,{class:"btn-produce",type:"primary","html-type":"submit",loading:F.value},{default:s(()=>[C("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},He=Y(Be,[["__scopeId","data-v-efc10b2c"]]);const je={class:"wrapper-booking"},Ye={class:"grid-booking"},Je={class:"emp-20"},We={__name:"MypeFinal",props:["itemSelectedF20"],emits:["closeDraw"],setup(I,{emit:h}){const r=I,S=h,w=U(!1),V=U(!0),F=ee({task:3,ruc:null}),x=async()=>{w.value=!0,F.mype_id=r.itemSelectedF20.mype.id;try{const D=await H({url:`formalization/ruc20-step3/${r.itemSelectedF20.codesunarp}`,method:"POST",data:F});D.status===200&&(M.success(D.message),F.ruc=null,S("closeDraw",!0))}catch(D){console.log("Error: "+D)}finally{w.value=!1}},t=()=>{M.error("Debes de completar todos los espacios requeridos")};return(D,c)=>{const L=d("a-input"),E=d("a-form-item"),z=d("a-button"),N=d("a-form");return e(),v("div",je,[l(N,{layout:"vertical",model:F,name:"basic",autocomplete:"off",onFinish:x,onFinishFailed:t},{default:s(()=>[u("div",Ye,[(e(!0),v(R,null,j(A(ke),(m,n)=>(e(),v(R,{key:n},[m.type==="iText"?(e(),_(E,{key:0,name:m.name,label:m.label,rules:[{required:m.required,message:m.message,type:m.email,max:m.max,min:m.min}]},{default:s(()=>[l(L,{value:F[m.name],"onUpdate:value":a=>F[m.name]=a,disabled:m.disabled,maxlength:9},{prefix:s(()=>[Ce(u("span",Je,"20",512),[[Ie,V.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l(E,null,{default:s(()=>[l(z,{class:"btn-produce",type:"primary","html-type":"submit",loading:w.value},{default:s(()=>[C("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Ke=Y(We,[["__scopeId","data-v-9faa4d7d"]]);const Qe={class:"wrapper-booking"},Ze={class:"grid-booking"},Xe={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(I,{emit:h}){const r=Ae({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),S=JSON.parse(localStorage.getItem("profile")),w=I,V=h,F=U(!1),x=U(null),t=se(),D=U(!1);t.$patch({cities:t.cities}),t.$patch({provinces:t.provinces}),t.$patch({districts:t.districts}),t.$patch({modalities:t.modalities}),t.$patch({detailProcedures:t.detailProcedures}),t.$patch({economicSectors:t.economicSectors}),t.$patch({comercialActivities:t.comercialActivities}),t.fetchDetailProcedures(),t.fetchModalities(),t.fetchEconomicSectors(),t.fetchComercialActivities(),t.fetchCities();const c=ee({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:S.user_id}),L=async()=>{try{D.value=!0;const a={name:x.value};(await H({url:"create/comercial-activities",method:"POST",data:a})).status==200&&(x.value=null,t.fetchComercialActivities())}catch(a){console.log(a)}finally{D.value=!1}},E=a=>{c.province_id=null,c.district_id=null,t.fetchProvinces(a)},z=a=>{c.district_id=null,t.fetchDistricts(a)},N=(a,g)=>{const f=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return g.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(f)},m=async()=>{F.value=!0,c.people_id=w.info.id;try{const a=await H({url:"formalization/create-ruc-10",method:"POST",data:c});a.status===200&&(M.success(a.message),c.detailprocedure_id=null,c.modality_id=null,c.economicsector_id=null,c.comercialactivity_id=null,c.city_id=null,c.province_id=null,c.district_id=null,V("closeDraw",!0))}catch(a){console.log("Error: "+a)}finally{F.value=!1}},n=()=>{M.warning("Debes de completar todos los espacios requeridos")};return(a,g)=>{const f=d("a-select"),$=d("a-form-item"),P=d("a-input"),B=d("a-divider"),G=d("a-button"),p=d("a-space"),J=d("a-form");return e(),v("div",Qe,[l(J,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:m,onFinishFailed:n},{default:s(()=>[u("div",Ze,[(e(!0),v(R,null,j(A(Se),(o,te)=>(e(),v(R,{key:te},[o.type==="iSelect"?(e(),_($,{key:0,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:s(()=>[o.name=="detailprocedure_id"?(e(),_(f,{key:0,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,options:A(t).detailProcedures},null,8,["value","onUpdate:value","options"])):i("",!0),o.name=="modality_id"?(e(),_(f,{key:1,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,options:A(t).modalities},null,8,["value","onUpdate:value","options"])):i("",!0),o.name=="economicsector_id"?(e(),_(f,{key:2,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,options:A(t).economicSectors},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),o.type==="iText"?(e(),_($,{key:1,name:o.name,label:o.label,rules:[{required:o.required,message:o.message,type:o.email,max:o.max}]},{default:s(()=>[l(P,{value:c[o.name],"onUpdate:value":O=>c[o.name]=O,disabled:o.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):i("",!0),o.type==="iSelectWrite"?(e(),_($,{key:2,class:"item-max",name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:s(()=>[o.name=="comercialactivity_id"?(e(),_(f,{key:0,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,"show-search":"",options:A(t).comercialActivities,"filter-option":N},{dropdownRender:s(({menuNode:O})=>[l(A(r),{vnodes:O},null,8,["vnodes"]),l(B,{style:{margin:"4px 0"}}),l(p,{style:{padding:"4px 8px"}},{default:s(()=>[l(P,{ref_for:!0,ref:"inputRef",value:x.value,"onUpdate:value":g[0]||(g[0]=ae=>x.value=ae),placeholder:"Nueva actividad"},null,8,["value"]),l(G,{type:"text",onClick:L,loading:D.value},{icon:s(()=>[l(A(Re))]),default:s(()=>[C(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):i("",!0),o.name=="city_id"?(e(),_(f,{key:1,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,"show-search":"",options:A(t).cities,"filter-option":N,onChange:E},null,8,["value","onUpdate:value","options"])):i("",!0),o.name=="province_id"?(e(),_(f,{key:2,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,"show-search":"",options:A(t).provinces,"filter-option":N,onChange:z},null,8,["value","onUpdate:value","options"])):i("",!0),o.name=="district_id"?(e(),_(f,{key:3,value:c[o.name],"onUpdate:value":O=>c[o.name]=O,"show-search":"",options:A(t).districts,"filter-option":N},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),l($,null,{default:s(()=>[l(G,{type:"primary",class:"btn-produce","html-type":"submit",loading:F.value},{default:s(()=>[C("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},et=Y(Xe,[["__scopeId","data-v-19e57382"]]);const tt={class:"wrapper-booking"},at={class:"grid-booking"},nt={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(I,{emit:h}){const r=se(),S=JSON.parse(localStorage.getItem("profile")),w=U(!1),V=I,F=h;r.$patch({components:r.components}),r.$patch({componentThemes:r.componentThemes}),r.$patch({modalities:r.modalities}),r.$patch({cities:r.cities}),r.fetchComponents(),r.fetchComponentThemes(),r.fetchModalities(),r.fetchCities(),r.fetchGenders();const x=U(!0),t=ee({observations:null,user_id:S.user_id,people_id:V.info.id,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),D=()=>{r.cities&&(x.value=!1)},c=n=>{t.theme_id=null,r.fetchComponentThemes(n)},L=n=>{t.province_id=null,t.district_id=null,r.fetchProvinces(n)},E=n=>{t.district_id=null,r.fetchDistricts(n)},z=(n,a)=>{const g=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)},N=async()=>{w.value=!0;try{const n=await H({url:"advisory/create",method:"POST",data:t});n.status===200&&(M.success(n.message),t.component_id=null,t.theme_id=null,t.modality_id=null,t.city_id=null,t.province_id=null,t.district_id=null,t.observations=null,F("closeDraw",!0))}catch(n){console.log("Error: "+n)}finally{w.value=!1}},m=()=>{M.warning("Debes de completar todos los espacios requeridos")};return(n,a)=>{const g=d("a-select"),f=d("a-form-item"),$=d("a-textarea"),P=d("a-button"),B=d("a-form"),G=d("a-spin");return e(),v("div",tt,[l(G,{spinning:x.value},{default:s(()=>[l(B,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:m},{default:s(()=>[u("div",at,[(e(!0),v(R,null,j(A(xe),(p,J)=>(e(),v(R,{key:J},[p.type==="iSelect"?(e(),_(f,{key:0,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:s(()=>[p.name=="component_id"?(e(),_(g,{key:0,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,options:A(r).components,onChange:c},null,8,["value","onUpdate:value","options"])):i("",!0),p.name=="modality_id"?(e(),_(g,{key:1,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,options:A(r).modalities},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0),p.type==="iTextarea"?(e(),_(f,{key:1,name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:s(()=>[l($,{value:t[p.name],"onUpdate:value":o=>t[p.name]=o,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):i("",!0),p.type==="iSelectWrite"?(e(),_(f,{key:2,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:s(()=>[p.name=="theme_id"?(e(),_(g,{key:0,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,"show-search":"",options:A(r).componentThemes,"filter-option":z},null,8,["value","onUpdate:value","options"])):i("",!0),p.name=="city_id"?(e(),_(g,{key:1,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,"show-search":"",options:A(r).cities,"filter-option":z,onChange:L},null,8,["value","onUpdate:value","options"])):i("",!0),p.name=="province_id"?(e(),_(g,{key:2,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,"show-search":"",options:A(r).provinces,"filter-option":z,onChange:E},null,8,["value","onUpdate:value","options"])):i("",!0),p.name=="district_id"?(e(),_(g,{key:3,value:t[p.name],"onUpdate:value":o=>t[p.name]=o,"show-search":"",options:A(r).districts,"filter-option":z},null,8,["value","onUpdate:value","options"])):i("",!0)]),_:2},1032,["name","label","rules"])):i("",!0)],64))),128))]),u("div",null,k(D()),1),l(f,null,{default:s(()=>[l(P,{type:"primary",class:"btn-produce","html-type":"submit",loading:w.value},{default:s(()=>[C("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},ot=Y(nt,[["__scopeId","data-v-89fa55d3"]]);const st={key:0},lt={key:0},it={key:4,class:"steps"},rt={style:{"text-align":"right"}},ut={key:0},ct={__name:"AsesoriasHistorial",props:["info"],setup(I){const h=I,r=U("1"),S=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"}],w=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"component"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"}],V=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"}];return(F,x)=>{const t=d("a-empty"),D=d("a-table"),c=d("a-card"),L=d("a-tab-pane"),E=d("a-progress"),z=d("a-space"),N=d("a-tabs");return e(),_(N,{activeKey:r.value,"onUpdate:activeKey":x[0]||(x[0]=m=>r.value=m),type:"card",class:"box-hist"},{default:s(()=>[l(L,{key:"1",tab:"ASESORÍAS"},{default:s(()=>[l(c,null,{default:s(()=>{var m,n,a;return[((m=h.info)==null?void 0:m.idadvisory.length)==0?(e(),_(t,{key:0})):i("",!0),((n=h.info)==null?void 0:n.idadvisory.length)>=1?(e(),_(D,{key:1,columns:V,"data-source":(a=h.info)==null?void 0:a.idadvisory,bordered:"",pagination:!1,size:"small"},{bodyCell:s(({index:g,column:f,record:$})=>{var P,B,G;return[f.dataIndex==="idx"?(e(),v("span",st,k(g+1),1)):i("",!0),f.dataIndex==="date_start"?(e(),v(R,{key:1},[C(k($.created_at),1)],64)):i("",!0),f.dataIndex==="component"?(e(),v(R,{key:2},[C(k((P=$.component)==null?void 0:P.name),1)],64)):i("",!0),f.dataIndex==="tema_compoment"?(e(),v(R,{key:3},[C(k((B=$.theme)==null?void 0:B.name),1)],64)):i("",!0),f.dataIndex==="modality"?(e(),v(R,{key:4},[C(k((G=$.modality)==null?void 0:G.name),1)],64)):i("",!0)]}),_:1},8,["data-source"])):i("",!0)]}),_:1})]),_:1}),l(L,{key:"2",tab:"RUC 20"},{default:s(()=>[l(c,null,{default:s(()=>[h.info.idformalization20.length==0?(e(),_(t,{key:0})):i("",!0),h.info.idformalization20.length>=1?(e(),_(D,{key:1,columns:S,"data-source":h.info.idformalization20,bordered:"",pagination:!1,size:"small"},{bodyCell:s(({index:m,column:n,record:a})=>{var g,f,$,P;return[n.dataIndex==="idx"?(e(),v("span",lt,k(m+1),1)):i("",!0),n.dataIndex==="date_start"?(e(),v(R,{key:1},[C(k(a.created_at),1)],64)):i("",!0),n.dataIndex==="date_last"?(e(),v(R,{key:2},[C(k(a.updated_at),1)],64)):i("",!0),n.dataIndex==="sector"?(e(),v(R,{key:3},[C(k((g=a.economicsector)==null?void 0:g.name),1)],64)):i("",!0),n.dataIndex==="progress"?(e(),v("div",it,[u("span",rt,k(a.task==1?"Reserva de nombre":a.task==2?"Proceso de notaría":"Formalizado"),1),l(z,{direction:"vertical",style:{width:"100%"}},{default:s(()=>[l(E,{percent:a.task*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):i("",!0),n.dataIndex==="asesor_update"?(e(),v(R,{key:5},[C(k((f=a.user.profile)==null?void 0:f.name)+" "+k(($=a.userupdater)==null?void 0:$.profile.lastname)+" "+k((P=a.user)==null?void 0:P.profile.middlename),1)],64)):i("",!0)]}),_:1},8,["data-source"])):i("",!0)]),_:1})]),_:1}),l(L,{key:"3",tab:"RUC 10"},{default:s(()=>[l(c,null,{default:s(()=>[h.info.idformalization10.length==0?(e(),_(t,{key:0})):i("",!0),h.info.idformalization10.length>=1?(e(),_(D,{key:1,columns:w,"data-source":h.info.idformalization10,bordered:"",pagination:!1,size:"small"},{bodyCell:s(({index:m,column:n,record:a})=>{var g,f,$;return[n.dataIndex==="idx"?(e(),v("span",ut,k(m+1),1)):i("",!0),n.dataIndex==="date_start"?(e(),v(R,{key:1},[C(k(a.created_at),1)],64)):i("",!0),n.dataIndex==="component"?(e(),v(R,{key:2},[C(k((g=a.detailprocedure)==null?void 0:g.name),1)],64)):i("",!0),n.dataIndex==="sector"?(e(),v(R,{key:3},[C(k((f=a.economicsector)==null?void 0:f.name),1)],64)):i("",!0),n.dataIndex==="modality"?(e(),v(R,{key:4},[C(k(($=a.modality)==null?void 0:$.name),1)],64)):i("",!0)]}),_:1},8,["data-source"])):i("",!0)]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},dt=Y(ct,[["__scopeId","data-v-beaf5b43"]]);const q=I=>(Oe("data-v-64988591"),I=I(),qe(),I),pt={class:"asesorias"},mt=q(()=>u("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),_t=q(()=>u("br",null,null,-1)),vt={class:"wrapper-s"},ft=q(()=>u("label",{class:"label"},"Seleccione el tipo de documento",-1)),yt=q(()=>u("label",{class:"label"},"Digite el número de documento",-1)),ht={class:"column-2"},gt={class:"info-update"},bt=q(()=>u("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),kt={class:"info-personal"},St=q(()=>u("span",null,"Apellidos y nombres: ",-1)),xt=q(()=>u("span",null,"Número de celular:",-1)),Ut=q(()=>u("span",null,"Correo electrónico:",-1)),wt=q(()=>u("span",null,"Asesorías:",-1)),Ct=q(()=>u("span",null,"Formalizaciones RUC 20:",-1)),It={class:"alert-incomplete"},Rt=q(()=>u("span",null,"Formalizaciones RUC 10:",-1)),At=q(()=>u("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Dt={class:"card-as-btn"},Ft=q(()=>u("h4",null,"HISTORIAL",-1)),$t={class:"steps-content"},zt=["onClick"],Ot={class:"pendient"},qt={key:0,class:"info-tag"},Et=q(()=>u("b",null,"Paso",-1)),Nt={key:1,class:"info-tag"},Tt=q(()=>u("b",null,"Siguiente paso",-1)),Pt={key:2,class:"info-tag"},Lt=q(()=>u("b",null,"Siguiente paso",-1)),Mt={class:"info"},Vt=q(()=>u("b",null,"Código SID SUNARP",-1)),Gt={class:"code-number"},Bt=q(()=>u("b",null,"Última consulta",-1)),Ht=q(()=>u("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),jt=[Ht],Yt={__name:"AsesoriasFormalizaciones",setup(I){const h=De(),r=Fe(),S=U(0),w=U(null),V=U([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),F=U(null),x=U(!1),t=U(null),D=U(!1),c=U(!1),L=U(!1),E=U(!1),z=U(!1),N=U(!1),m=U(""),n=U([]),a=U(!1),g=U(0),f=U(!1),$=U([]),P=U(null),B=()=>{re(m.value),x.value=!1},G=T=>Ee(T).format("DD/MM/YYYY HH:mm A"),p=()=>{o()},J=()=>{m.value=m.value.replace(/\D/g,"")},o=()=>{m.value="",n.value=[],$.value=[],h.push({name:"asesorias-formalizaciones"})},te=()=>{if(t.value=null,t.value=n.value,!w.value)return M.warning("Seleccionar un tipo de servicio");w.value=="asesoria"&&(N.value=!0),w.value=="ruc10"&&(z.value=!0),w.value=="ruc20"&&ce()},O=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],ae=()=>{F.value=n.value,x.value=!0},ie=()=>{g.value=0,E.value=!0,c.value=!1},ce=async()=>{try{f.value=!0;const T=await H({url:`formalization/list-ruc-20/${n.value.id}`,method:"GET"});if(T.length<1)return ie();L.value=T,c.value=!0}catch(T){console.log(T)}finally{f.value=!1}},de=async T=>{D.value=!0,g.value=T.task,P.value=T,setTimeout(()=>{D.value=!1,E.value=!0,c.value=!1},400)},W=async()=>{a.value=!0;const T=await H({url:`person/found/${S.value}/${m.value}`,method:"GET"});if(T.status==200)return n.value=T.data,a.value=!1},re=async T=>{if(a.value=!0,!T)return M.warning("Ingresa un número de documento"),a.value=!1;if(S.value==0)return M.warning("Seleccionar el tipo de documento"),a.value=!1;if(S.value==1&&m.value.length<8){M.warning("El número de DNI está incompleto"),a.value=!1;return}const b=await H({url:`person/found/${S.value}/${m.value}`,method:"GET"});if(b.status==200)return n.value=b.data,a.value=!1;if(b.status===404){const K={type:S.value,access:"asesorias",number:m.value};h.push({name:"registrar-persona",query:K})}};return $e(()=>{r.query.type&&(console.log("ooaoooaoaa",r.query.type),S.value=r.query.type,m.value=r.query.number)}),(T,b)=>{const K=d("a-radio"),pe=d("a-radio-group"),me=d("a-input-search"),Q=d("a-card"),_e=d("a-select"),ve=d("a-button"),fe=d("a-step"),ye=d("a-steps"),Z=d("a-drawer"),ne=d("a-tag"),he=d("a-spin"),ge=d("a-modal");return e(),v(R,null,[u("div",pt,[mt,_t,l(Q,{class:"card-as"},{default:s(()=>[A(r).query.dni?(e(),_(A(Me),{key:0,class:"ico-reload",onClick:p})):i("",!0),u("div",vt,[u("div",null,[ft,l(pe,{value:S.value,"onUpdate:value":b[0]||(b[0]=y=>S.value=y),onChange:o,class:"radio-produce"},{default:s(()=>[l(K,{value:"1"},{default:s(()=>[C("DNI")]),_:1}),l(K,{value:"2"},{default:s(()=>[C("CE")]),_:1})]),_:1},8,["value"])]),u("div",null,[yt,l(me,{"enter-button":"BUSCAR",value:m.value,"onUpdate:value":b[1]||(b[1]=y=>m.value=y),placeholder:"",loading:a.value,onSearch:re,onInput:J,class:"search-produce",maxlength:S.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),u("div",ht,[n.value.length!=0?(e(),_(Q,{key:0,class:"card-as"},{default:s(()=>{var y,X,oe;return[u("div",gt,[bt,l(A(ze),{class:"ico-edit",onClick:ae})]),u("div",kt,[St,u("span",null,k(n.value.lastname)+" "+k(n.value.middlename)+", "+k(n.value.name),1),xt,u("span",null,[u("span",null,k(n.value.phone?n.value.phone:"-"),1)]),Ut,u("span",null,k(n.value.email?n.value.email:"-"),1),wt,u("b",null,k((y=n.value)==null?void 0:y.idadvisory.length),1),Ct,u("div",It,[u("b",null,k((X=n.value)==null?void 0:X.idformalization20.length),1)]),Rt,u("b",null,k((oe=n.value)==null?void 0:oe.idformalization10.length),1)])]}),_:1})):i("",!0),n.value.length!=0?(e(),_(Q,{key:1,class:"card-as"},{default:s(()=>[At,u("div",Dt,[l(_e,{style:{"min-width":"200px"},value:w.value,"onUpdate:value":b[2]||(b[2]=y=>w.value=y),options:V.value},null,8,["value","options"]),l(ve,{class:"btn-produce",type:"primary",onClick:te},{default:s(()=>[C("REGISTRAR")]),_:1})])]),_:1})):i("",!0)]),n.value.length!=0?(e(),_(Q,{key:0,class:"card-as"},{default:s(()=>[Ft,l(dt,{info:n.value},null,8,["info"])]),_:1})):i("",!0)]),u("section",null,[l(Z,{width:"510",title:"Formalización con RUC 20",open:E.value,"onUpdate:open":b[6]||(b[6]=y=>E.value=y),placement:"right"},{default:s(()=>[l(ye,{current:g.value,size:"small",class:"steps"},{default:s(()=>[(e(),v(R,null,j(O,y=>l(fe,{key:y.title,title:y.title},null,8,["title"])),64))]),_:1},8,["current"]),u("div",$t,[g.value==0?(e(),_(Ue,{key:0,info:t.value,onCloseDraw:b[3]||(b[3]=y=>(E.value=!1,W()))},null,8,["info"])):i("",!0),g.value==1?(e(),_(He,{key:1,info:t.value,itemSelectedF20:P.value,onCloseDraw:b[4]||(b[4]=y=>(E.value=!1,W()))},null,8,["info","itemSelectedF20"])):i("",!0),g.value==2?(e(),_(Ke,{key:2,itemSelectedF20:P.value,onCloseDraw:b[5]||(b[5]=y=>(E.value=!1,W()))},null,8,["itemSelectedF20"])):i("",!0)])]),_:1},8,["open"]),l(Z,{title:"Formalización con RUC 10",open:z.value,"onUpdate:open":b[8]||(b[8]=y=>z.value=y),placement:"right"},{default:s(()=>[l(et,{info:n.value,onCloseDraw:b[7]||(b[7]=y=>(z.value=!1,W()))},null,8,["info"])]),_:1},8,["open"]),l(Z,{title:"Nueva asesoría",open:N.value,"onUpdate:open":b[10]||(b[10]=y=>N.value=y),placement:"right"},{default:s(()=>[l(ot,{info:n.value,onCloseDraw:b[9]||(b[9]=y=>(N.value=!1,W()))},null,8,["info"])]),_:1},8,["open"]),l(ge,{open:c.value,"onUpdate:open":b[11]||(b[11]=y=>c.value=y),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:s(()=>[l(he,{spinning:D.value},{default:s(()=>[(e(!0),v(R,null,j(L.value,(y,X)=>(e(),v("div",{key:X,onClick:oe=>de(y)},[u("div",Ot,[y.task==0?(e(),v("div",qt,[Et,C(),l(ne,{color:"error"},{default:s(()=>[C("Reserva de nombre")]),_:1})])):i("",!0),y.task==1?(e(),v("div",Nt,[Tt,C(),l(ne,{color:"warning"},{default:s(()=>[C("Acto constitutivo")]),_:1})])):i("",!0),y.task==2?(e(),v("div",Pt,[Lt,C(),l(ne,{color:"success"},{default:s(()=>[C("Formalizar")]),_:1})])):i("",!0),u("div",Mt,[Vt,u("span",null,[u("b",Gt,k(y.codesunarp),1)]),Bt,u("span",null,k(G(y.updated_at)),1)])])],8,zt))),128)),u("div",{class:"pendient pendient-btn btn-produce",onClick:ie},jt)]),_:1},8,["spinning"])]),_:1},8,["open"]),l(Z,{open:x.value,"onUpdate:open":b[12]||(b[12]=y=>x.value=y),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:s(()=>[l(Ne,{onCloseDraw:B,updateValues:F.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},ea=Y(Yt,[["__scopeId","data-v-64988591"]]);export{ea as default};
