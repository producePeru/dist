import{R as Pe}from"./historialInformationBusinessman.vue_vue_type_style_index_0_scoped_f968e821_lang-85ca818e.js";import{E as Ne}from"./EditarEmpresario-1edb532e.js";import{_ as te}from"./FormComponent-6f0e120d.js";import{u as Z}from"./selectes-73cf3849.js";import{c as p,A as se,r as C,a as Q,k as W,T as X,W as L,o as y,d as O,m as ae,h as $,p as G,f as Re,b as j,e as t,n as q,y as V,X as Y,t as o,i as h,j as T,z as x,w as g,F as k,v as ie,C as Ie,G as ce,Y as De,Z as Ae,_ as ue}from"./index-27eb4ced.js";import{u as H}from"./useHistorialBusinessman-5b085528.js";import"./es-6769ff5b.js";import{u as we}from"./useBusinessman-9835429c.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";import{U as Te}from"./UserOutlined-1b91314d.js";import"./quill.snow-308ce936.js";var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};const Be=Me;function pe(m){for(var c=1;c<arguments.length;c++){var r=arguments[c]!=null?Object(arguments[c]):{},u=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),u.forEach(function(s){xe(m,s,r[s])})}return m}function xe(m,c,r){return c in m?Object.defineProperty(m,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):m[c]=r,m}var re=function(c,r){var u=pe({},c,r.attrs);return p(se,pe({},u,{icon:Be}),null)};re.displayName="BankOutlined";re.inheritAttrs=!1;const je=re;var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"};const qe=$e;function me(m){for(var c=1;c<arguments.length;c++){var r=arguments[c]!=null?Object(arguments[c]):{},u=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),u.forEach(function(s){ke(m,s,r[s])})}return m}function ke(m,c,r){return c in m?Object.defineProperty(m,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):m[c]=r,m}var oe=function(c,r){var u=me({},c,r.attrs);return p(se,me({},u,{icon:qe}),null)};oe.displayName="SmileOutlined";oe.inheritAttrs=!1;const Le=oe;var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M140 188h584v164h76V144c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h544v-76H140V188z"}},{tag:"path",attrs:{d:"M414.3 256h-60.6c-3.4 0-6.4 2.2-7.6 5.4L219 629.4c-.3.8-.4 1.7-.4 2.6 0 4.4 3.6 8 8 8h55.1c3.4 0 6.4-2.2 7.6-5.4L322 540h196.2L422 261.4a8.42 8.42 0 00-7.7-5.4zm12.4 228h-85.5L384 360.2 426.7 484zM936 528H800v-93c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v93H592c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24h136v152c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V752h136c13.3 0 24-10.7 24-24V552c0-13.3-10.7-24-24-24zM728 680h-88v-80h88v80zm160 0h-88v-80h88v80z"}}]},name:"translation",theme:"outlined"};const ze=Ue;function ve(m){for(var c=1;c<arguments.length;c++){var r=arguments[c]!=null?Object(arguments[c]):{},u=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),u.forEach(function(s){Fe(m,s,r[s])})}return m}function Fe(m,c,r){return c in m?Object.defineProperty(m,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):m[c]=r,m}var ne=function(c,r){var u=ve({},c,r.attrs);return p(se,ve({},u,{icon:ze}),null)};ne.displayName="TranslationOutlined";ne.inheritAttrs=!1;const Ge=ne;const Ve={class:"ases-draw"},He={__name:"RegistrarAsesoria",props:{detailRegister:{type:Object,required:!0,default:()=>({})},infoBusinessMan:{type:Object,required:!1,default:()=>({})}},emits:["registered"],setup(m,{emit:c}){const r=m,u=c,s=Z(),f=H(),N=C(!1),i=Q({}),B=C("REGISTRAR"),n=C({city_id:[],province_id:[],district_id:[],gender_id:[],sick:[]}),D=async(e,l)=>{if(e=="city_id"&&(await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,b.value.province_id.disabled=!1),e=="province_id"&&(await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,b.value.district_id.disabled=!1),e=="component_id"&&(await s.fetchComponentThemes(i.component_id),n.value.theme_id=s.componentThemes,i.theme_id=null,b.value.theme_id.disabled=!1),e==="theme_id")if(l==17)b.value={...b.value,observations:{type:"iNumber",label:"NÚMERO DE RESERVA (Z- 7 dígitos)",name:"observations",required:!0,message:"Ingresar número de reserva",disabled:!1,prefix:"Z -",maxlength:7,rules:[{validator:(w,d)=>{if(!d)return Promise.reject(new Error("Ingresar número de reserva"));const P=String(d).length;return P<7?Promise.reject(new Error("El número debe tener al menos 7 cifras")):P>7?Promise.reject(new Error("El número no puede superar las 7 cifras")):Promise.resolve()},trigger:"change"}]}};else{i.observations=null;const{observations:w,...d}=b.value;b.value=d}},A=async e=>{e=="economicsector_id"&&(await s.fetchEconomicSectors(),n.value.economicsector_id=s.economicSectors),e=="comercialactivity_id"&&(await s.fetchComercialActivities(),n.value.comercialactivity_id=s.comercialActivities),e=="component_id"&&(await s.fetchComponents(),n.value.component_id=s.components),e=="modality_id"&&(await s.fetchModalities(),n.value.modality_id=s.modalities),e=="city_id"&&(await s.fetchCities(),i.province_id=null,i.district_id=null,n.value.province_id=[],n.value.city_id=s.cities),e=="province_id"&&(i.province_id=null,i.district_id=null,n.value.district_id=[])},M=async()=>{N.value=!0;const e={dni:r.detailRegister.dni,cde_id:r.detailRegister.cde_id,people_id:r.detailRegister.people_id,user_id:r.detailRegister.user_id,economicsector_id:i.economicsector_id,comercialactivity_id:i.comercialactivity_id,component_id:i.component_id,theme_id:i.theme_id,modality_id:i.modality_id,ruc:i.ruc,city_id:i.city_id,province_id:i.province_id,district_id:i.district_id,...i.observations&&{observations:i.observations}};try{const l=await ae({url:"advisory/create",method:"POST",data:e});l.status==200&&(f.fetchAsesorias(r.infoBusinessMan.id),$.success(l.message),u("registered",l.data),R())}catch{$.error(s.error)}finally{N.value=!1}},R=()=>{i.economicsector_id=null,i.comercialactivity_id=null,i.component_id=null,i.theme_id=null,i.theme_id=null,i.modality_id=null,i.ruc=null,i.observations=null;const{observations:e,...l}=b.value;b.value=l},b=C({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},component_id:{type:"iSelect",label:"COMPONENTE",name:"component_id",required:!0,message:"Seleccionar un componente",disabled:!1},theme_id:{type:"iSelect",label:"TEMA DEL COMPONENTE",name:"theme_id",required:!0,message:"Seleccionar un tema del componente",disabled:!0},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,rules:[{validator:(e,l)=>{if(!l)return Promise.resolve();const w=l.toString();return w.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15","17","20"].includes(w.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10, 15, 17 o 20"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0}}),v=async e=>{e&&(console.log("info",e),await s.fetchCities(),n.value.city_id=s.cities,i.city_id=e.city_id,await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,i.province_id=e.province_id,await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,i.district_id=e.district_id)};return W(()=>{r.infoBusinessMan&&v(r.infoBusinessMan)}),X(()=>r.infoBusinessMan,e=>{e?v(e):R()}),L("formState",i),L("loadingState",N),(e,l)=>(y(),O("div",Ve,[p(te,{fields:b.value,options:n.value,btnSaveName:B.value,onHandleFocusSelect:A,onHandleChangeSelect:D,onOnSubmit:M},null,8,["fields","options","btnSaveName"])]))}},Je={class:"ppnn-draw"},Ye={__name:"RegistrarPPNN",props:{detailRegister:{type:Object,required:!0,default:()=>({})},infoBusinessMan:{type:Object,required:!1,default:()=>({})}},emits:["registered"],setup(m,{emit:c}){const r=m,u=c,s=Z(),f=H(),N=C(!1),i=Q({}),B=C("REGISTRAR"),n=C({city_id:[],province_id:[],district_id:[],economicsector_id:[]}),D=async(e,l)=>{e=="city_id"&&(await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,b.value.province_id.disabled=!1),e=="province_id"&&(await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,b.value.district_id.disabled=!1),e=="component_id"&&(await s.fetchComponentThemes(i.component_id),n.value.theme_id=s.componentThemes,i.theme_id=null,b.value.theme_id.disabled=!1)},A=async e=>{e=="economicsector_id"&&(await s.fetchEconomicSectors(),n.value.economicsector_id=s.economicSectors),e=="comercialactivity_id"&&(await s.fetchComercialActivities(),n.value.comercialactivity_id=s.comercialActivities),e=="component_id"&&(await s.fetchComponents(),n.value.component_id=s.components),e=="detailprocedure_id"&&(await s.fetchDetailProcedures(),n.value.detailprocedure_id=s.detailProcedures),e=="modality_id"&&(await s.fetchModalities(),n.value.modality_id=s.modalities),e=="city_id"&&(await s.fetchCities(),i.city_id=null,i.province_id=null,i.district_id=null,n.value.province_id=[],n.value.city_id=s.cities),e=="province_id"&&(i.province_id=null,i.district_id=null,n.value.district_id=[])},M=async()=>{N.value=!0;const e={dni:r.detailRegister.dni,cde_id:r.detailRegister.cde_id,people_id:r.detailRegister.people_id,user_id:r.detailRegister.user_id,economicsector_id:i.economicsector_id,comercialactivity_id:i.comercialactivity_id,detailprocedure_id:i.detailprocedure_id,modality_id:i.modality_id,ruc:i.ruc,city_id:i.city_id,province_id:i.province_id,district_id:i.district_id,address:i.address};try{const l=await ae({url:"formalization/create-ruc-10",method:"POST",data:e});l.status==200&&(f.fetchF10(r.infoBusinessMan.id),$.success(l.message),u("registered",l.data),R())}catch{$.error(s.error)}finally{N.value=!1}},R=()=>{i.economicsector_id=null,i.comercialactivity_id=null,i.detailprocedure_id=null,i.modality_id=null,i.ruc=null},b=C({economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},detailprocedure_id:{type:"iSelect",label:"DETALLE DEL TRÁMITE",name:"detailprocedure_id",required:!0,message:"Seleccionar detalle del trámite",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},ruc:{type:"iNumber",label:"NÚMERO DE RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,required:!0,rules:[{validator:(e,l)=>{if(!l)return Promise.reject(new Error("El Número de RUC es obligatorio"));const w=l.toString();return w.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["10","15","17"].includes(w.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 10, 15 o 17"))},trigger:"change"}]},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!0,message:"Escribir la direccion del Negocio",disabled:!1}}),v=async e=>{e&&(console.log("info",e),await s.fetchCities(),n.value.city_id=s.cities,i.city_id=e.city_id,await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,i.province_id=e.province_id,await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,i.district_id=e.district_id,i.address=e.address)};return W(()=>{r.infoBusinessMan&&v(r.infoBusinessMan)}),X(()=>r.infoBusinessMan,e=>{e?v(e):R()}),L("formState",i),L("loadingState",N),(e,l)=>(y(),O("div",Je,[p(te,{fields:b.value,options:n.value,btnSaveName:B.value,onHandleFocusSelect:A,onHandleChangeSelect:D,onOnSubmit:M,mayus:!0},null,8,["fields","options","btnSaveName"])]))}},Ze={class:"ppjj-draw"},Qe={__name:"RegistrarPPJJ",props:{detailRegister:{type:Object,required:!0,default:()=>({})},infoBusinessMan:{type:Object,required:!1,default:()=>({})}},emits:["registered"],setup(m,{emit:c}){G.locale("es");const r=m,u=c,s=Z(),f=H(),N=C(!1),i=Q({}),B=C("REGISTRAR"),n=C({city_id:[],province_id:[],district_id:[],modality_id:[],comercialactivity_id:[],isbic:[],typecapital_id:[]}),D=async(d,P)=>{d=="city_id"&&(await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,l.value.province_id.disabled=!1),d=="province_id"&&(await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,l.value.district_id.disabled=!1),d=="regime_id"&&(P==5?(l.value.notary_id.required=!1,l.value.notary_id.disabled=!0):(l.value.notary_id.required=!0,l.value.notary_id.disabled=!1))},A=async d=>{d=="city_id"&&(await s.fetchCities(),i.city_id=null,i.province_id=null,i.district_id=null,n.value.province_id=[],n.value.city_id=s.cities),d=="province_id"&&(i.province_id=null,i.district_id=null,n.value.district_id=[]),d=="modality_id"&&(await s.fetchModalities(),n.value.modality_id=s.modalities),d=="regime_id"&&(await s.fetchRegimes(),n.value.regime_id=s.regimes),d=="economicsector_id"&&(await s.fetchEconomicSectors(),n.value.economicsector_id=s.economicSectors),d=="comercialactivity_id"&&(await s.fetchComercialActivities(),n.value.comercialactivity_id=s.comercialActivities),d=="notary_id"&&v(),d=="isbic"&&M(),d=="typecapital_id"&&(await s.fetchTypeCapital(),n.value.typecapital_id=s.typeCapital)},M=()=>{n.value.isbic=[{value:"SI",label:"SI"},{value:"NO",label:"NO"}]},R=async()=>{N.value=!0;const d={dni:r.detailRegister.dni,cde_id:r.detailRegister.cde_id,people_id:r.detailRegister.people_id,user_id:r.detailRegister.user_id,ruc:i.ruc,regime_id:i.regime_id,nameMype:i.nameMype,city_id:i.city_id,province_id:i.province_id,district_id:i.district_id,address:i.address,modality_id:i.modality_id,economicsector_id:i.economicsector_id,comercialactivity_id:i.comercialactivity_id,numbernotary:i.numbernotary,notary_id:i.notary_id,dateReception:i.dateReception?G(i.dateReception).format("YYYY-MM-DD"):null,dateTramite:i.dateTramite?G(i.dateTramite).format("YYYY-MM-DD"):null,isbic:i.isbic,montocapital:i.montocapital,typecapital_id:i.typecapital_id};try{const P=await ae({url:"formalization/create-ruc20",method:"POST",data:d});P.status==200&&(f.fetchF20(r.infoBusinessMan.id),$.success(P.message),u("registered",P.data),e())}catch{$.error(s.error)}finally{N.value=!1}},b=async d=>{d=="dateReception"&&(i.dateTramite&&(i.dateTramite=null),l.value.dateTramite.disabled=!1)},v=async()=>{try{const{data:d}=await Re({url:"public/notaries-filters",method:"GET"}),P=d.map(I=>({value:I.id,name:I.name,city:I.city.name,province:I.province.name,district:I.district.name,address:I.address}));n.value.notary_id=P}catch(d){console.error("Error de red:",d)}},e=()=>{Object.keys(i).forEach(d=>{["city_id","province_id","district_id","address"].includes(d)||(i[d]=null)}),l.value.province_id.disabled=!0,l.value.district_id.disabled=!0,l.value.dateTramite.disabled=!0},l=C({ruc:{type:"iNumber",label:"NÚMERO DE RUC",name:"ruc",message:"Escribir número de RUC",disabled:!1,maxlength:11,required:!1,rules:[{validator:(d,P)=>{if(!P)return Promise.resolve();const I=P.toString();return I.length!==11?Promise.reject(new Error("El número debe tener exactamente 11 dígitos")):["20"].includes(I.substring(0,2))?Promise.resolve():Promise.reject(new Error("El RUC debe empezar con 20"))},trigger:"change"}]},regime_id:{type:"iSelect",label:"TIPO DE RÉGIMEN SOCIETARIO",name:"regime_id",required:!0,message:"Seleccionar el régimen societario",disabled:!1},nameMype:{type:"iText",label:"NOMBRE EMPRESA",name:"nameMype",required:!0,message:"Escribir nombre de la empresa",disabled:!1},city_id:{type:"iSelect",label:"REGIÓN DEL NEGOCIO",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelect",label:"PROVINCIA DEL NEGOCIO",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"DISTRITO DEL NEGOCIO",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},address:{type:"iText",label:"DIRECCIÓN DEL NEGOCIO",name:"address",required:!0,message:"Escribir la direccion del Negocio",disabled:!1},modality_id:{type:"iSelect",label:"MODALIDAD DE ATENCIÓN",name:"modality_id",required:!0,message:"Seleccionar modalidad",disabled:!1},economicsector_id:{type:"iSelect",label:"SECTOR ECONÓMICO",name:"economicsector_id",required:!0,message:"Seleccionar el sector económico",disabled:!1},comercialactivity_id:{type:"iSelect",label:"ACTIVIDAD COMERCIAL",name:"comercialactivity_id",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},numbernotary:{type:"iText",label:"NÚMERO SOLICITUD CONSTANCIA",name:"numbernotary",required:!0,message:"Escribir el número de solicitud",disabled:!1,max:8,rules:[{validator:(d,P)=>{if(!P)return Promise.reject(new Error("El número de notaría es requerido"));const I=P.toString();return/^\d{8}$/.test(I)?["08","09","10","11","12","13","14","15"].includes(I.substring(0,2))?Promise.resolve():Promise.reject(new Error("Debe empezar con 08, 09, 10, 11, 12, 13, 14 o 15")):Promise.reject(new Error("El número debe tener exactamente 8 dígitos numéricos"))},trigger:"change"}]},notary_id:{type:"iSelectNotary",label:"NOTARÍA",name:"notary_id",required:!0,message:"Seleccionar una notaría",disabled:!1},dateReception:{type:"iDate",label:"FECHA DE RECEPCION PNTE",name:"dateReception",required:!0,disabled:!1},dateTramite:{type:"iDate",label:"FEC. TRÁMITE SID SUNARP-SUNAT",name:"dateTramite",required:!0,disabled:!0,disabledDate:d=>{if(!i.dateReception||!d)return!1;const P=G(i.dateReception).startOf("day"),I=G(d).startOf("day");return!!(I.isBefore(P)||I.isAfter(P.add(2,"day")))}},isbic:{type:"iSelect",label:"¿ES UNA SOCIEDAD BIC?",name:"isbic",required:!0,message:"Seleccionar si es BIC",disabled:!1},montocapital:{type:"iMoney",label:"MONTO DE CAPITAL SOCIAL",name:"montocapital",required:!0,message:"Escribir el Monto de capital social",disabled:!1},typecapital_id:{type:"iSelect",label:"TIPO DE APORTE DE CAPITAL",name:"typecapital_id",required:!0,message:"Seleccionar tipo de aporte",disabled:!1}}),w=async d=>{d&&(console.log("info",d),await s.fetchCities(),n.value.city_id=s.cities,i.city_id=d.city_id,await s.fetchProvinces(i.city_id),n.value.province_id=s.provinces,i.province_id=d.province_id,await s.fetchDistricts(i.province_id),n.value.district_id=s.districts,i.district_id=d.district_id,i.address=d.address)};return W(()=>{r.infoBusinessMan&&w(r.infoBusinessMan)}),X(()=>r.infoBusinessMan,d=>{d?w(d):e()}),L("formState",i),L("loadingState",N),(d,P)=>(y(),O("div",Ze,[p(te,{fields:l.value,options:n.value,btnSaveName:B.value,onHandleFocusSelect:A,onHandleChangeSelect:D,onHandleChangeClock:b,onOnSubmit:R,mayus:!0},null,8,["fields","options","btnSaveName"])]))}},We={class:"history-grid"},Xe={class:"history-card"},Ke={class:"history-body"},ei={class:"history-top"},ii={class:"history-type"},ti={class:"history-dt"},si={key:0,class:"history-advisor"},ai={key:1,class:"history-advisor"},ri={key:0,class:"history-card"},oi={class:"history-body"},ni={class:"history-top"},li={class:"history-type"},di={class:"history-list"},ci={class:"history-note"},ui={class:"history-advisor history-detail"},pi={key:0},mi={key:1},vi={class:"history-advisor"},_i={style:{"font-size":"12px"}},fi={key:0,class:"history-card"},yi={class:"history-body"},gi={class:"history-top"},bi={class:"history-type"},hi={class:"history-list"},Si={class:"history-note"},Ei={class:"history-advisor history-detail"},Ci={key:0},Oi={class:"history-advisor"},Pi={style:{"font-size":"12px"}},Ni={key:0,class:"history-card"},Ri={class:"history-body"},Ii={class:"history-top"},Di={class:"history-type"},Ai={class:"history-list"},wi={class:"history-note"},Ti={class:"history-advisor history-detail"},Mi={key:0},Bi={class:"history-advisor"},xi={style:{"font-size":"12px"}},ji={key:0,class:"history-empty"},$i={__name:"historialInformationBusinessman",props:{infoBusinessMan:{type:Object,required:!1,default:()=>({})}},setup(m){const c=m,r=H(),u={edit:{label:"Registrado",icon:Le,colorClass:"text-blue-500"},asesoria:{label:"Asesorias",icon:Ge,colorClass:"text-green-500"},ppnn:{label:"PPNN",icon:Ie,colorClass:"text-purple-500"},ppjj:{label:"PPJJ",icon:je,colorClass:"text-orange-500"}};return W(()=>{c.infoBusinessMan&&r.fetchAll(c.infoBusinessMan)}),X(()=>c.infoBusinessMan,s=>{s&&r.fetchAll(s)}),(s,f)=>{var i,B,n,D,A,M,R,b,v;const N=j("a-skeleton");return y(),O("div",null,[f[7]||(f[7]=t("h4",{style:{"margin-top":"16px"}},"Movimientos recientes",-1)),t("div",We,[t("div",Xe,[t("div",{class:q(["history-icon",u.edit.colorClass])},[(y(),V(Y(u.edit.icon)))],2),t("div",Ke,[t("div",ei,[t("span",ii,o(u.edit.label),1),f[0]||(f[0]=t("span",{class:"dot"},"•",-1)),t("span",ti,o((i=h(r).registered)==null?void 0:i.date),1)]),(B=h(r).registered)!=null&&B.registeredby?(y(),O("div",si,[f[1]||(f[1]=T(" Registrado por: ")),t("strong",null,o((n=h(r).registered)==null?void 0:n.registeredby),1),T(" "+o((D=h(r).registered)!=null&&D.cde?`(${(A=h(r).registered)==null?void 0:A.cde})`:""),1)])):x("",!0),(M=h(r).registered)!=null&&M.updatedby?(y(),O("div",ai,[f[2]||(f[2]=T(" Validado por: ")),t("strong",null,o((R=h(r).registered)==null?void 0:R.updatedby),1),T(" "+o((b=h(r).registered)!=null&&b.cdeUpdate?`(${(v=h(r).registered)==null?void 0:v.cdeUpdate})`:""),1)])):x("",!0)])]),p(N,{loading:h(r).loadingAsesoria},{default:g(()=>[h(r).registeredAsesoria.length>=1?(y(),O("div",ri,[t("div",{class:q(["history-icon",u.asesoria.colorClass])},[(y(),V(Y(u.asesoria.icon)))],2),t("div",oi,[t("div",ni,[t("span",li,o(u.asesoria.label),1)]),t("ol",di,[(y(!0),O(k,null,ie(h(r).registeredAsesoria,(e,l)=>(y(),O("li",{key:l},[t("div",ci,[t("div",ui,[t("p",null,"Registrado: "+o(e.registro),1),t("p",null,"Sector económico: "+o(e.sector_economico),1),t("p",null,"Actividad comercial: "+o(e.actividad),1),t("p",null,"Componente: "+o(e.componente),1),t("p",null,"Tema: "+o(e.tema),1),t("p",null,"Modalidad: "+o(e.modalidad),1),e.ruc?(y(),O("p",pi,"RUC: "+o(e.ruc),1)):x("",!0),e.observaciones?(y(),O("p",mi,"Código SID SUNARP: Z-"+o(e.observaciones),1)):x("",!0),t("p",null,o(e.region)+" / "+o(e.provincia)+" / "+o(e.distrito),1)])]),t("div",vi,[f[3]||(f[3]=T(" Atendido por: ")),t("strong",_i,o(e.asesor),1),T(" ("+o(e.cde)+") ",1)])]))),128))])])])):x("",!0)]),_:1},8,["loading"]),p(N,{loading:h(r).loadingF10},{default:g(()=>[h(r).registeredF10.length>=1?(y(),O("div",fi,[t("div",{class:q(["history-icon",u.ppnn.colorClass])},[(y(),V(Y(u.ppnn.icon)))],2),t("div",yi,[t("div",gi,[t("span",bi,o(u.ppnn.label),1)]),t("ol",hi,[(y(!0),O(k,null,ie(h(r).registeredF10,(e,l)=>(y(),O("li",{key:l},[t("div",Si,[t("div",Ei,[t("p",null,"Registrado: "+o(e.registro),1),t("p",null,"Sector económico: "+o(e.sector_economico),1),t("p",null,"Actividad comercial: "+o(e.actividad),1),t("p",null,"Detalle del Trámite: "+o(e.detalle),1),t("p",null,"Modalidad: "+o(e.modalidad),1),e.ruc?(y(),O("p",Ci,"RUC: "+o(e.ruc),1)):x("",!0),t("p",null,o(e.region)+" / "+o(e.provincia)+" / "+o(e.distrito)+" / "+o(e.address),1)])]),t("div",Oi,[f[4]||(f[4]=T(" Atendido por: ")),t("strong",Pi,o(e.asesor),1),T(" ("+o(e.cde)+") ",1)])]))),128))])])])):x("",!0)]),_:1},8,["loading"]),p(N,{loading:h(r).loadingF20},{default:g(()=>[h(r).registeredF20.length>=1?(y(),O("div",Ni,[t("div",{class:q(["history-icon",u.ppjj.colorClass])},[(y(),V(Y(u.ppjj.icon)))],2),t("div",Ri,[t("div",Ii,[t("span",Di,o(u.ppjj.label),1)]),t("ol",Ai,[(y(!0),O(k,null,ie(h(r).registeredF20,(e,l)=>(y(),O("li",{key:l},[t("div",wi,[t("div",Ti,[t("p",null,"Registrado: "+o(e.registro),1),e.ruc?(y(),O("p",Mi,"RUC: "+o(e.ruc),1)):x("",!0),t("p",null,"Tipo de Regimen: "+o(e.typeregimen),1),t("p",null,[f[5]||(f[5]=T("Nombre de la Empresa: ")),t("b",null,o(e.nameEmpresa),1)]),t("p",null,"Modalidad: "+o(e.modalidad),1),t("p",null,"Sector económico: "+o(e.sector_economico),1),t("p",null,"Actividad comercial: "+o(e.actividad),1),t("p",null,"Número de solicitud: "+o(e.numsolicitud),1),t("p",null,"Notaría: "+o(e.notaria),1),t("p",null,"Fecha de recepción PNTE: "+o(e.fecharecepcion),1),t("p",null,"Fecha SID SUNARP: "+o(e.fechasid),1),t("p",null,"BIC: "+o(e.isbic),1),t("p",null,"Monto Capital: "+o(e.montocapital),1),t("p",null,"Tipo de aporte: "+o(e.typecapital),1),t("p",null,"Registrado: "+o(e.registro),1),t("p",null,o(e.region)+" / "+o(e.provincia)+" / "+o(e.distrito)+" / "+o(e.address),1)])]),t("div",Bi,[f[6]||(f[6]=T(" Atendido por: ")),t("strong",xi,o(e.asesor),1),T(" ("+o(e.cde)+") ",1)])]))),128))])])])):x("",!0)]),_:1},8,["loading"]),h(r).registeredAsesoria.length===0&&h(r).registeredF10.length===0&&h(r).registeredF20.length===0?(y(),O("div",ji," No hay registros. ")):x("",!0)])])}}},qi=_e($i,[["__scopeId","data-v-f968e821"]]);const ki={class:"page"},Li={class:"hint"},Ui={style:{display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"8px"}},zi={class:"quick-actions"},Fi={class:"cde-select"},Gi={class:"user-card"},Vi={class:"avatar-box"},Hi={class:"user-fields"},Ji={class:"field"},Yi={class:"value"},Zi={class:"field"},Qi={class:"value"},Wi={class:"field"},Xi={class:"value"},Ki={class:"field"},et={class:"value"},it={class:"user-actions"},tt={__name:"registrar-index",setup(m){const c=Z(),r=H(),u=C(!1),s=C(!1),f=C(null),N=JSON.parse(localStorage.getItem("profile")||"{}"),i=C(N.cde_id),B=C(!1),n=C(null),D=C(null),A=C(null),M=C(null),R=C(!1),b=we(),v=C(null),e=Q({type:"DNI",number:null}),l=C(!1);c.fetchCdes();const w=ce(()=>{switch(e.type){case"DNI":return 8;case"CE":return 9;case"PAS":return 12;case"PTP":return 9;default:return 10}}),d=ce(()=>{switch(e.type){case"DNI":return"12345678";case"CE":return"001234567";case"PAS":return"Ingrese su pasaporte";case"PTP":return"Ingrese su PTP";default:return"Ingrese documento"}});function P(){const _=String(e.number||"").trim();return _.length?_.length!==w.value?($.error(`El ${e.type} debe tener ${w.value} dígitos`),!1):["DNI","CE","PTP"].includes(e.type)&&!/^\d+$/.test(_)?($.error("Solo dígitos"),!1):(v.value=null,!0):($.warning("Ingrese el número de documento"),!1)}const I=_=>{R.value=!1,v.value=_},le=_=>{D.value=!1};function J(_){console.log("changeTypeDocument",_),e.type=_,e.number=null,v.value=null}async function de(){if(console.log("Hoooola"),!!P()){l.value=!0;try{r.reloadClear();const _={documentnumber:e.number};if(e.type==="DNI"){const a=await b.get(_);if(M.value={type:1,number:e.number},a.status==200){const{data:S}=a;(S.typedocument_id===1&&S.country_id!==155||S.country_id===null||S.hasSoon===null||S.phone===null||S.email===null)&&(D.value=!0,n.value=S),v.value=S,l.value=!1}else fe(_)}else{const a=await b.get(_);if(a.status==200){const{data:S}=a;(S.typedocument_id==2&&S.country_id==155||S.country_id===null||S.hasSoon===null||S.phone===null)&&(D.value=!0,n.value=S),v.value=S,l.value=!1}else M.value={type:e.type==="CE"?2:e.type==="PAS"?3:e.type==="PTP"?4:1,number:String(e.number??"").trim()},A.value={},R.value=!0,l.value=!1}}catch{console.log("Error:",b.error)}}}const fe=async _=>{try{const a=await b.reniec(_);a.status==200?(A.value=a.data,R.value=!0):a.status==404&&(ue.warning({message:"Aviso",description:"El servicio de consulta RENIEC no está disponible. Por favor, registre los datos manualmente.",duration:2.5}),A.value={reniecError:"no_disponible",numeroDocumento:e.number,name:null,lastname:null,middlename:null},M.value={type:1,number:e.number},setTimeout(()=>{R.value=!0,l.value=!1},3e3)),l.value=!1}catch{ue.warning({message:"Aviso",description:"El servicio de consulta RENIEC no está disponible. Por favor, registre los datos manualmente.",duration:2.5}),A.value={reniecError:"no_disponible",numeroDocumento:e.number,name:null,lastname:null,middlename:null},M.value={type:1,number:e.number},setTimeout(()=>{R.value=!0,l.value=!1},3e3)}};function K(_){const a={dni:v.value.documentnumber,people_id:v.value.id,user_id:N.id,cde_id:i.value};_==="Asesoría"&&(f.value=a,B.value=!0),_==="PPNN"&&(f.value=a,s.value=!0),_==="PPJJ"&&(f.value=a,u.value=!0)}const ye=_=>{i.value=_;const a=JSON.parse(localStorage.getItem("profile")||"{}");a.cde_id=_,localStorage.setItem("profile",JSON.stringify(a))},ge=(_,a)=>{const S=_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(S)};function be(_){console.log("uauauauau",A),n.value=_,D.value=!0}const ee=_=>{_==="ase"?B.value=!1:_==="ppnn"?s.value=!1:_==="ppjj"?u.value=!1:console.log("Error: tipo no reconocido")};return(_,a)=>{const S=j("a-card"),U=j("a-col"),he=j("a-row"),Se=j("a-input"),z=j("a-button"),Ee=j("a-input-group"),Ce=j("a-select"),Oe=j("a-tooltip"),F=j("a-drawer");return y(),O(k,null,[t("div",ki,[p(S,{class:"card"},{default:g(()=>[a[34]||(a[34]=t("h1",{class:"title"},"Búsqueda de Usuario",-1)),a[35]||(a[35]=t("p",{class:"subtitle"},"Ingresa los datos del documento para buscar o registrar un usuario",-1)),a[36]||(a[36]=t("div",{class:"section-label"},"Tipo de Documento",-1)),p(he,{gutter:[16,16]},{default:g(()=>[p(U,{xs:24,sm:12},{default:g(()=>[p(S,{hoverable:"",class:q(["doc-type",{active:e.type==="DNI"}]),onClick:a[0]||(a[0]=E=>J("DNI"))},{default:g(()=>a[18]||(a[18]=[t("div",{class:"doc-type-title"},"DNI",-1),t("div",{class:"doc-type-sub"},"Documento Nacional de Identidad",-1)])),_:1},8,["class"])]),_:1}),p(U,{xs:24,sm:12},{default:g(()=>[p(S,{hoverable:"",class:q(["doc-type",{active:e.type==="CE"}]),onClick:a[1]||(a[1]=E=>J("CE"))},{default:g(()=>a[19]||(a[19]=[t("div",{class:"doc-type-title"},"CE",-1),t("div",{class:"doc-type-sub"},"Carné de Extranjería",-1)])),_:1},8,["class"])]),_:1}),p(U,{xs:24,sm:12},{default:g(()=>[p(S,{hoverable:"",class:q(["doc-type",{active:e.type==="PAS"}]),onClick:a[2]||(a[2]=E=>J("PAS"))},{default:g(()=>a[20]||(a[20]=[t("div",{class:"doc-type-title"},"PAS",-1),t("div",{class:"doc-type-sub"},"Pasaporte",-1)])),_:1},8,["class"])]),_:1}),p(U,{xs:24,sm:12},{default:g(()=>[p(S,{hoverable:"",class:q(["doc-type",{active:e.type==="PTP"}]),onClick:a[3]||(a[3]=E=>J("PTP"))},{default:g(()=>a[21]||(a[21]=[t("div",{class:"doc-type-title"},"PTP",-1),t("div",{class:"doc-type-sub"},"Permiso Temporal de Permanencia",-1)])),_:1},8,["class"])]),_:1})]),_:1}),a[37]||(a[37]=t("div",{class:"section-label mt-20"},"Número de Documento",-1)),p(Ee,{compact:"",class:"doc-input-group"},{default:g(()=>[p(Se,{value:e.number,"onUpdate:value":a[4]||(a[4]=E=>e.number=E),maxlength:w.value,placeholder:d.value,class:"doc-input",disabled:l.value,onPressEnter:de},null,8,["value","maxlength","placeholder","disabled"]),p(z,{type:"primary",class:"btn-search",loading:l.value,onClick:de},{icon:g(()=>[p(h(De))]),default:g(()=>[a[22]||(a[22]=T(" BUSCAR "))]),_:1},8,["loading"])]),_:1}),t("div",Li,"Debe tener "+o(w.value)+" dígitos",1),v.value?(y(),O(k,{key:0},[a[28]||(a[28]=t("div",{class:"section-label mt-20"},"Accesos rápidos",-1)),t("div",Ui,[t("div",null,[a[26]||(a[26]=t("span",null,null,-1)),t("div",zi,[p(z,{onClick:a[5]||(a[5]=E=>K("Asesoría"))},{default:g(()=>a[23]||(a[23]=[T("Asesoría")])),_:1}),p(z,{onClick:a[6]||(a[6]=E=>K("PPNN"))},{default:g(()=>a[24]||(a[24]=[T("PPNN")])),_:1}),p(z,{onClick:a[7]||(a[7]=E=>K("PPJJ"))},{default:g(()=>a[25]||(a[25]=[T("PPJJ")])),_:1})])]),t("div",Fi,[a[27]||(a[27]=t("span",null,"Centro de Desarrollo Empresarial (CDE)",-1)),p(Ce,{value:i.value,"onUpdate:value":a[8]||(a[8]=E=>i.value=E),options:h(c).cdes,"show-search":"","filter-option":ge,onChange:ye,class:"custom-select"},null,8,["value","options"])])])],64)):x("",!0),v.value?(y(),O(k,{key:1},[a[33]||(a[33]=t("div",{class:"section-label mt-20"},"Datos del usuario",-1)),t("div",Gi,[t("div",Vi,[p(h(Te))]),t("div",Hi,[t("div",Ji,[a[29]||(a[29]=t("div",{class:"label"},"Nro. Documento",-1)),t("div",Yi,o(v.value.documentnumber),1)]),t("div",Zi,[a[30]||(a[30]=t("div",{class:"label"},"Nombres",-1)),t("div",Qi,o(v.value.name),1)]),t("div",Wi,[a[31]||(a[31]=t("div",{class:"label"},"Apellidos",-1)),t("div",Xi,o(v.value.lastname)+" "+o(v.value.middlename),1)]),t("div",Ki,[a[32]||(a[32]=t("div",{class:"label"},"Celular",-1)),t("div",et,o(v.value.phone),1)])]),t("div",it,[p(Oe,{title:"Editar datos"},{default:g(()=>[p(z,{type:"text",shape:"circle",onClick:a[9]||(a[9]=E=>be(v.value))},{icon:g(()=>[p(h(Ae))]),_:1})]),_:1})])])],64)):x("",!0),v.value?(y(),V(qi,{key:2,infoBusinessMan:v.value},null,8,["infoBusinessMan"])):x("",!0)]),_:1})]),p(F,{title:"Registrar Nuevo Empresario",open:R.value,"onUpdate:open":a[10]||(a[10]=E=>R.value=E),placement:"right",width:"500px"},{default:g(()=>[p(Pe,{infoBusinessMan:A.value,detailDocument:M.value,onRegistered:I},null,8,["infoBusinessMan","detailDocument"])]),_:1},8,["open"]),p(F,{title:"VALIDAR DATOS DEL EMPRESARIO",open:D.value,"onUpdate:open":a[11]||(a[11]=E=>D.value=E),placement:"right",width:"500px",maskClosable:!1,closable:!1},{default:g(()=>[p(Ne,{updateInfoBusinessman:n.value,asesor:!0,onRegistered:le},null,8,["updateInfoBusinessman"])]),_:1},8,["open"]),p(F,{title:"Asesoría",placement:"right",width:"600px",open:B.value,"onUpdate:open":a[13]||(a[13]=E=>B.value=E)},{default:g(()=>[p(He,{detailRegister:f.value,onRegistered:a[12]||(a[12]=E=>ee("ase")),infoBusinessMan:v.value},null,8,["detailRegister","infoBusinessMan"])]),_:1},8,["open"]),p(F,{title:"PPNN",placement:"right",width:"600px",open:s.value,"onUpdate:open":a[15]||(a[15]=E=>s.value=E)},{default:g(()=>[p(Ye,{detailRegister:f.value,onRegistered:a[14]||(a[14]=E=>ee("ppnn")),infoBusinessMan:v.value},null,8,["detailRegister","infoBusinessMan"])]),_:1},8,["open"]),p(F,{title:"PPJJ",placement:"right",width:"600px",open:u.value,"onUpdate:open":a[17]||(a[17]=E=>u.value=E)},{default:g(()=>[p(Qe,{detailRegister:f.value,onRegistered:a[16]||(a[16]=E=>ee("ppjj")),infoBusinessMan:v.value},null,8,["detailRegister","infoBusinessMan"])]),_:1},8,["open"])],64)}}},vt=_e(tt,[["__scopeId","data-v-5ac9e88d"]]);export{vt as default};
