import{p as S,r as _,E as Q,a as X,T as R,k as ee,b as m,o as n,y as d,i as I,L as ae,d as N,c as E,w as u,e as te,F as q,v as ie,z as o,M as le,j as se,t as re,m as x,h as O}from"./index-bf92f82a.js";import{u as ne}from"./selectes-545057dd.js";import"./es-033363e2.js";const de={key:1},oe={class:"form-activity-ugo"},ue="DD/MM/YYYY",Ae={__name:"EventosUgo",props:["dataRow"],emits:["closeDraw"],setup(P,{emit:F}){S.locale("es");const r=ne();r.$patch({cities:r.cities}),r.$patch({provinces:r.provinces}),r.$patch({districts:r.districts}),r.fetchCities(),r.fetchAsesores();const f=_(!1),A=P,w=F;Q();const b=_(!0),e=X({}),c=_({startDate:{type:"iDate",label:"FECHA INICIO DE LA ACTIVIDAD",name:"startDate",required:!0,message:"Seleccionar fecha de Inicio",disabled:!1},endDate:{type:"iDate",label:"FECHA CIERRE DE LA ACTIVIDAD",name:"endDate",required:!0,message:"Seleccionar fecha de Fin",disabled:!1,placeholder:"Ejemplo: Lunes 20 de enero"},eventsoffice_id:{type:"iSelect",label:"TIPO DE ACTIVIDAD",name:"eventsoffice_id",required:!0,message:"Seleccionar un tipo de actividad",disabled:!0},title:{type:"iSelect",label:"NOMBRE DE ACTIVIDAD",name:"title",required:!0,message:"Escribir el nombre de la actividad",disabled:!0,max:100},theme:{type:"iText",label:"TEMA DE LA ACTIVIDAD",name:"theme",required:!0,message:"Seleccionar tema de actividad",disabled:!1},entidad:{type:"iText",label:"NOMBRE DE ENTIDAD ORGANIZADORA",name:"entidad",required:!0,message:"Escribir nombre de la entidad",disabled:!1},entidad_aliada:{type:"iText",label:"NOMBRE DE ENTIDAD O INSTITUCION ALIADA / PARTICIPANTE",name:"entidad_aliada",required:!0,message:"Escribir nombre de la entidad aliada",disabled:!1},people_id:{type:"iSelectWrite",label:"REPRESENTANTE DE PRODUCE QUE PARTICIPA (APELLIDOS Y NOMBRES)",name:"people_id",required:!0,message:"Seleccionar al asesor",disabled:!0},beneficiarios:{type:"iNumber",label:"MYPE Y/O EMPRENDEDORES BENEFICIADOS ESPERADOS",name:"beneficiarios",required:!0,message:"Escribir número de beneficiarios",disabled:!0},modality:{type:"iSelect",label:"MODALIDAD",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!0},city_id:{type:"iSelectWrite",label:"REGIÓN DE LA ACTIVIDAD",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelectWrite",label:"PROVINCIA DE LA ACTIVIDAD",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"DISTRITO DE LA ACTIVIDAD",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"LUGAR DE LA ACTIVIDAD",name:"address",required:!0,message:"Escribir lugar de la actividad",disabled:!1,max:100,placeholder:"Ejemplo: Av. Los Incas 1234 - San Miguel"},pasaje:{type:"iSelect",label:"¿REQUERIRÁ PASAJES?",name:"pasaje",required:!0,message:"Seleccionar si requiere pasajes",disabled:!0},monto:{type:"iNumber",label:"COLOCAR SOLO EL MONTO DE GASTOS EN PASAJES EN SOLES IDA + VUELTA (INTERPROVINCIAL)",name:"monto",required:!0,message:"Escribir el monto de pasajes",disabled:!0}}),p=_([]),h=_([]),Y=[{label:"SI",value:"s"},{label:"NO",value:"n"}],V=[{label:"PRESENCIAL",value:"p"},{label:"VIRTUAL",value:"v"}],T=(a,i)=>{a=="eventsoffice_id"&&(console.log("00a0a0a00a",i),e.title=null,e.theme=null,c.value.theme.disabled=!1,i==12?(c.value.theme.type="iText",p.value=[{label:"POTENCIA TU EMPRESA - FORMALIZACIÓN",value:"POTENCIA TU EMPRESA - FORMALIZACIÓN"},{label:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL",value:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL"},{label:"POTENCIA TU EMPRESA - DIGITALIZACIÓN",value:"POTENCIA TU EMPRESA - DIGITALIZACIÓN"},{label:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO",value:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO"},{label:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO",value:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO"},{label:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO",value:"COMPRAS -SECTOR ECONÓMICO PRIORIZADO"}]):i==13?p.value=[{label:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE",value:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE"}]:i==14?p.value=[{label:"FORTALECE TU MERCADO",value:"FORTALECE TU MERCADO"}]:i==15?p.value=[{label:"CAMPAÑA DESPEGA TU EMPRESA",value:"CAMPAÑA DESPEGA TU EMPRESA"}]:p.value=[]),a=="title"&&(i=="DIFUSIÓN DE LOS SERVICIOS DEL PNTE"&&(c.value.theme.disabled=!0,c.value.theme.type="iText",e.theme="Brindar difusión de los servicios de los cinco componentes del PNTE"),i=="FORTALECE TU MERCADO"&&(c.value.theme.type="iSelect",h.value=[{label:"FLUJO DE CAJA",value:"FLUJO DE CAJA"},{label:"GESTIÓN EMPRESARIAL",value:"GESTIÓN EMPRESARIAL"},{label:"FINANCIAMIENTO",value:"FINANCIAMIENTO"},{label:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA",value:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA"},{label:"DESTACA Y VENDE MÁS",value:"DESTACA Y VENDE MÁS"}]),i=="CAMPAÑA DESPEGA TU EMPRESA"&&(c.value.theme.type="iText",e.theme="Difusión, asesorías y formalización de MYPES"))},L=a=>{a.forEach(i=>{e.hasOwnProperty(i)&&(e[i]=null)})},k=a=>{a.forEach(i=>delete c.value[i])};R(()=>e.startDate,a=>{e.endDate&&new Date(a)>new Date(e.endDate)&&(e.endDate=null)}),R(()=>e.endDate,a=>{e.startDate&&new Date(a)<new Date(e.startDate)&&(e.startDate=null)});const C=(a,i)=>{const D=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(D)},G=a=>{if(a=="modality")return V;if(a=="powerBy")return pertenece;if(a=="fairtype_id")return typeFair;if(a=="eventsoffice_id")return j();if(a=="pasaje")return Y;if(a=="title")return p.value;if(a=="theme")return h.value},j=()=>[{value:12,label:"CAPACITACIÓN"},{value:13,label:"DIFUSIÓN"},{value:14,label:"CICLO DE CAPACITACIONES"},{value:15,label:"DESPEGA TU EMPRESA Y PRODUCE"}],M=a=>{e.province_id=null,e.district_id=null,r.fetchProvinces(a)},U=a=>{e.district_id=null,r.fetchDistricts(a)},y=()=>{e.eventsoffice_id=null,e.title=null,e.theme=null,e.entidad=null,e.entidad_aliada=null,e.people_id=null,e.beneficiarios=null,e.startDate=null,e.endDate=null,e.modality=null,L(["city_id","province_id","district_id","address","pasaje","monto"])},B=async()=>{f.value=!0;const a={eventsoffice_id:e.eventsoffice_id,title:e.title,theme:e.theme,entidad:e.entidad,entidad_aliada:e.entidad_aliada,beneficiarios:e.beneficiarios,startDate:S(e.startDate).format("YYYY-MM-DD"),endDate:S(e.endDate).format("YYYY-MM-DD"),modality:e.modality,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,pasaje:e.pasaje,monto:e.monto,asesorId:e.people_id};try{const i=A.dataRow?"PUT":"POST",D=A.dataRow?`attendance/update/${A.dataRow.id}`:"attendance/create",s=await x({url:D,method:i,data:a});s.status==200&&(O.success(s.message),w("closeDraw"),await x({url:"attendance/email-create-activity",method:"POST",data:s.data}),y()),s.status==500&&(O.error(s.message),y()),s.status==403&&O.error(s.message)}catch(i){O.error("Se presentó un error, los valores son requeridos",i)}finally{f.value=!1}},Z=a=>{const i=e[a]?e[a].trim():"";e[a]=i};function g(a){b.value=!0;try{if(T("eventsoffice_id",a.tipo_actividad_id),e.eventsoffice_id=a.tipo_actividad_id,e.title=a.nombre_actividad,e.theme=a.tema,e.entidad=a.entidad,e.entidad_aliada=a.entidad_aliada,e.people_id=a.people_id,e.beneficiarios=a.beneficiarios,e.startDate=a.startDate?S(a.startDate,"DD/MM/YYYY"):null,e.endDate=a.endDate?S(a.endDate,"DD/MM/YYYY"):null,e.modality=a.modality,T("modality",a.modality),a.modality=="PRESENCIAL")T("modality",a.modality),e.city_id=a.city_id,M(a.city_id),e.province_id=a.province_id,U(a.province_id),e.district_id=a.district_id,e.address=a.address,e.pasaje=a.pasaje,e.monto=a.monto;else{const i=["city_id","province_id","district_id","address","pasaje","monto"];L(i),k(i)}}catch(i){console.error("Error al cargar la información:",i)}finally{b.value=!1}}return ee(()=>{A.dataRow?g(A.dataRow):b.value=!1}),R(()=>A.dataRow,a=>{a?g(a):y()}),(a,i)=>{const D=m("a-input"),s=m("a-form-item"),v=m("a-select"),z=m("a-textarea"),W=m("a-input-number"),J=m("a-date-picker"),$=m("a-button"),H=m("a-form");return b.value?(n(),d(I(ae),{key:0,style:{color:"#00a6db"}})):(n(),N("div",de,[E(H,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:B},{default:u(()=>[te("div",oe,[(n(!0),N(q,null,ie(c.value,(t,K)=>(n(),N(q,{key:K},[t.type==="iText"?(n(),d(s,{key:0,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,max:t.max}]},{default:u(()=>[E(D,{disabled:t.disabled,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,maxlength:t.max,onBlur:l=>Z(t.name),placeholder:t.placeholder},null,8,["disabled","value","onUpdate:value","maxlength","onBlur","placeholder"])]),_:2},1032,["name","label","rules"])):o("",!0),t.type==="iSelect"?(n(),d(s,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:u(()=>[E(v,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:G(t.name),onChange:l=>T(t.name,l)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1032,["name","label","rules"])):o("",!0),t.type==="iTextarea"?(n(),d(s,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:u(()=>[E(z,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,rows:8,maxlength:t.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):o("",!0),t.type==="iNumber"?(n(),d(s,{key:3,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:u(()=>[E(W,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,min:0,max:1e4,style:{width:"100px"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),t.type==="iDate"?(n(),d(s,{key:4,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:u(()=>[E(J,{locale:I(le),value:e[t.name],"onUpdate:value":l=>e[t.name]=l,style:{width:"100%"},format:ue,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),t.type==="iSelectWrite"?(n(),d(s,{key:5,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:u(()=>[t.name=="city_id"?(n(),d(v,{key:0,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).cities,"show-search":"","filter-option":C,onChange:M},null,8,["value","onUpdate:value","options"])):o("",!0),t.name=="province_id"?(n(),d(v,{key:1,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).provinces,"show-search":"","filter-option":C,onChange:U,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),t.name=="district_id"?(n(),d(v,{key:2,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).districts,"show-search":"","filter-option":C,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):o("",!0),t.name=="people_id"?(n(),d(v,{key:3,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).asesores,"show-search":"","filter-option":C},null,8,["value","onUpdate:value","options"])):o("",!0)]),_:2},1032,["name","label","rules"])):o("",!0)],64))),128))]),E(s,null,{default:u(()=>[E($,{type:"primary","html-type":"submit",loading:f.value},{default:u(()=>[se(re(P.dataRow?"ACTUALIZAR":"GUARDAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))}}};export{Ae as _};
