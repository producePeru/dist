import{c as f,A as T,r as v,j as z,X as A,b,o as _,d as O,w as I,h as D,e as F,y as H,K as M}from"./index-3ae03cd9.js";/* empty css                                                                */import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};const E=$;function x(n){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(o).filter(function(m){return Object.getOwnPropertyDescriptor(o,m).enumerable}))),s.forEach(function(m){k(n,m,o[m])})}return n}function k(n,t,o){return t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}var w=function(t,o){var s=x({},t,o.attrs);return f(T,x({},s,{icon:E}),null)};w.displayName="FileImageOutlined";w.inheritAttrs=!1;const q=w,X={class:"clearfix"},G={key:0},J=["src"],Q={__name:"UpImage",props:{acceptFormats:{type:Array,default:()=>["image/jpeg","image/png","image/jpg","image/gif","image/webp"]},maxImages:{type:Number,default:1},imageLoad:{type:Object,default:()=>null},nameType:{type:String,default:"feria"}},emits:["uploadSuccess"],setup(n,{emit:t}){const o="https://apituempresa.soporte-pnte.com/api/",s="http://127.0.0.1:8000/api/",m=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?s:o,l=n,j=t,i=v([]),h=v(!1),d=v(""),p=v(""),L=e=>new Promise((a,c)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>a(r.result),r.onerror=u=>c(u)}),P=async e=>{var a;!e.url&&!e.preview&&(e.preview=await L(e.originFileObj)),d.value=e.url||e.preview,h.value=!0,p.value=e.name||((a=e.url)==null?void 0:a.substring(e.url.lastIndexOf("/")+1))},S=()=>{h.value=!1,p.value=""},U=e=>l.acceptFormats.includes(e.type)?i.value.length<l.maxImages:(alert("Formato de imagen no permitido."),!1),V=async({file:e,onSuccess:a,onError:c})=>{const r=new FormData;r.append("file",e),r.append("from_origin",l.nameType);try{const g=(await M.post(`${m}image/upload-image`,r,{headers:{"Content-Type":"multipart/form-data"}})).data;if(g.status===200){const N={id:g.data.id};j("uploadSuccess",N)}const B={uid:e.uid,name:e.name,status:"done",url:g.thumb};i.value=[B],a(g,e)}catch(u){console.error(u),c(u)}},C=async e=>{};function y(e){const a=e.name||"imagen-cargada",c={uid:"-1",name:a,status:"done",url:e.url};i.value=[c],d.value=e.url,p.value=a}return z(()=>{l.imageLoad&&y(l.imageLoad)}),A(()=>l.imageLoad,e=>{e?y(e):(i.value=[],d.value="",p.value="")}),(e,a)=>{const c=b("a-upload"),r=b("a-modal");return _(),O("div",X,[f(c,{"file-list":i.value,"onUpdate:fileList":a[0]||(a[0]=u=>i.value=u),"custom-request":V,"before-upload":U,"on-remove":C,accept:n.acceptFormats.join(","),"list-type":"picture-card",onPreview:P},{default:I(()=>[i.value.length<l.maxImages?(_(),O("div",G,[f(D(q)),a[1]||(a[1]=F("div",{style:{"margin-top":"8px"}},"Cargar",-1))])):H("",!0)]),_:1},8,["file-list","accept"]),f(r,{open:h.value,title:p.value,footer:null,onCancel:S},{default:I(()=>[F("img",{alt:"example",style:{width:"100%"},src:d.value},null,8,J)]),_:1},8,["open","title"])])}}},K=R(Q,[["__scopeId","data-v-b481d107"]]);export{K as U};
