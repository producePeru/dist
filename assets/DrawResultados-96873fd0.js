import"./FormComponent-5c64144c.js";import{r as f,a as D,j as T,X as q,b as i,o as r,d as c,c as l,w as n,e as A,F as _,s as B,x as C,h as E,y as F,i as N,R as P,m as U}from"./index-f21e93b6.js";import{u as I}from"./selectes-e44581ea.js";import{Q as O}from"./quill.snow-6239c239.js";const V={class:"grid-event-resultado"},G={__name:"DrawResultados",props:["dataRow"],emits:["closeDraw"],setup(y,{emit:g}){const d=I();d.$patch({officesPnte:d.officesPnte}),d.fetchOfficesPnte();const v=g,s=y,u=f(!1),b={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}],["link"]]},contentType:"html"},R=f({resultados:{type:"iTextArea",label:"DESCRIBIR RESULTADOS",name:"resultados",required:!1,message:"Escribe los resultados de los evento",max:500}}),a=D({resultado:null}),w=async()=>{const e={resultado:a.resultado};u.value=!0;try{const t=await P({url:`event/update/${s.dataRow.id}`,method:"PUT",data:e});t.status===200&&(a.resultado="</p>",U.success(t.message),v("closeDraw"))}catch(t){console.error("Failed to update record",t)}finally{u.value=!1}},m=e=>{console.log("Setting",e),e.resultado?a.resultado=e.resultado:a.resultado="</p>"};return T(()=>{s.dataRow&&m(s.dataRow)}),q(()=>s.dataRow,e=>{e&&m(e)}),(e,t)=>{const p=i("a-form-item"),h=i("a-button"),x=i("a-form");return r(),c("div",null,[l(x,{class:"form-events",layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:w},{default:n(()=>[A("div",V,[(r(!0),c(_,null,B(R.value,(o,k)=>(r(),c(_,{key:k},[o.type==="iTextArea"?(r(),C(p,{key:0,name:o.name,label:o.label,rules:[{required:o.required,message:o.message}]},{default:n(()=>[l(E(O),{class:"quill-editor",content:a.resultado,"onUpdate:content":t[0]||(t[0]=S=>a.resultado=S),options:b,contentType:"html"},null,8,["content"])]),_:2},1032,["name","label","rules"])):F("",!0)],64))),128))]),l(p,null,{default:n(()=>[l(h,{type:"primary","html-type":"submit",loading:u.value,style:{"margin-top":"1rem"}},{default:n(()=>t[1]||(t[1]=[N("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}};export{G as _};
