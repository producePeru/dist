import{_ as F}from"./TableComponent-00128634.js";import{c as l,A as G,r as u,u as L,a as U,k as q,X as x,b as _,o as g,d as O,w as c,p as J,m as X,y as I,i as C,z as v,F as K,j as N,t as Q,e as S}from"./index-1618ed33.js";import{_ as W}from"./DrawMP-f3465e1c.js";import"./downloadExcel-21ed71ff.js";import"./es-0191a91e.js";import{g as k}from"./publicInscripcion-ebc9ecb9.js";import{G as Z}from"./GlobalOutlined-5c51f47f.js";import"./icoexcel-1b303edf.js";import"./selectes-46e53dac.js";import"./SyncOutlined-bca6904a.js";import"./MoreOutlined-e7af4172.js";import"./FormComponent-f9ecb771.js";import"./quill.snow-83df5919.js";import"./UpImage-03bd25b0.js";import"./_plugin-vue_export-helper-c27b6911.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};const te=ee;function V(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),d.forEach(function(o){ae(i,o,n[o])})}return i}function ae(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}var y=function(t,n){var d=V({},t,n.attrs);return l(G,V({},d,{icon:te}),null)};y.displayName="VideoCameraOutlined";y.inheritAttrs=!1;const ne=y;const oe={class:"layout-content"},re=["href"],le=["onClick"],ie=["onClick"],Ie={__name:"mp-index",setup(i){JSON.parse(localStorage.getItem("role"));const t=u([]),n=u(0),d=u(150),o=u(!1);u(!1),L();const w=u(!1),h=u(null),b=u(!1),a=U({page:1}),D=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK INSCRIPCIONES",dataIndex:"link",width:80,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÃ“N",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"LINK SALA",dataIndex:"link_sala",width:50,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],T=e=>{h.value=e,o.value=!0},A=()=>{m(),o.value=!1},R=()=>{h.value=null,o.value=!0},Y=async()=>{},P=async e=>{a.page=e,await m()},$=async e=>{e&&(a.page=1,await m())},z=e=>{const r=`${k()}/mujer-produce/${e}`;window.open(r,"_blank")},H=e=>{const r=`${k()}/mujer-produce-asistencia/${e}`;window.open(r,"_blank")},m=async()=>{try{w.value=!0;const e={page:a.page};a.year&&(e.year=J(a.year).format("YYYY")),a.range&&(e.startDate=a.range[0].format("YYYY/MM/DD"),e.endDate=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const r=await X({url:"mp/index-events",method:"GET",params:e}),{data:f}=r;t.value=f.data,n.value=f.total,d.value=f.per_page}catch(e){console.error("Error de red:",e)}finally{w.value=!1}};return q(async()=>{await m()}),x("search",a),x("loading",w),x("loadingFile",b),(e,r)=>{const f=_("a-button"),M=_("a-tag"),E=_("a-menu-item"),j=_("router-link"),B=_("a-drawer");return g(),O("div",oe,[l(F,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:D,titleSearch:"BUSCAR POR EVENTO",pageSize:d.value,nameTotal:"Capacitaciones",dataSource:t.value,total:n.value,btnUpdate:!0,onHandleNew:R,onHandleCallFetchData:m,onHandleDownloadExcel:Y,onHandleSearch:$,onHandlePaginator:P},{"data-cell":c(({column:s,record:p})=>[s.dataIndex=="link"?(g(),I(f,{key:0,onClick:se=>z(p.slug),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:c(()=>[l(C(Z))]),_:2},1032,["onClick"])):v("",!0),s.dataIndex=="link_sala"?(g(),O(K,{key:1},[p.link?(g(),O("a",{key:0,href:p.link,target:"_blank",style:{color:"#2196f3","font-size":"16px","margin-top":"-2px"}},[l(C(ne))],8,re)):v("",!0)],64)):v("",!0),s.dataIndex=="registered"?(g(),I(M,{key:2,color:"purple"},{default:c(()=>[N(Q(p.registered),1)]),_:2},1024)):v("",!0)]),"custom-options":c(({record:s})=>[l(E,null,{default:c(()=>[S("span",{onClick:p=>H(s.slug)}," Asistencia ",8,le)]),_:2},1024),l(E,null,{default:c(()=>[l(j,{to:`/admin/mp/inscritos/${s.slug}`},{default:c(()=>r[1]||(r[1]=[N(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),l(E,null,{default:c(()=>[S("a",{onClick:p=>T(s)},"Editar",8,ie)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),l(B,{open:o.value,"onUpdate:open":r[0]||(r[0]=s=>o.value=s),title:h.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:c(()=>[l(W,{onCloseDraw:A,info:h.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ie as default};
