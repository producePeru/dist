import{_ as H}from"./TableComponent-c5a6df1c.js";import{r as l,u as M,a as F,p as v,k as P,X as g,b as c,o as f,d as U,c as r,w as n,m as z,y,i as j,z as x,j as I,t as L,e as N}from"./index-9c3e0987.js";import{_ as q}from"./DrawMP-d149eac1.js";import"./downloadExcel-8f9017e0.js";import"./es-6c78391e.js";import{g as k}from"./publicInscripcion-ebc9ecb9.js";import{G as J}from"./GlobalOutlined-d7d97a02.js";import"./icoexcel-1b303edf.js";import"./selectes-3a5ea8f7.js";import"./SyncOutlined-b244af5a.js";import"./MoreOutlined-97be7c4c.js";import"./FormComponent-f7493c4e.js";import"./quill.snow-e524dd0a.js";import"./UpImage-aa3b1c03.js";import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"layout-content"},X=["onClick"],Q=["onClick"],ge={__name:"mp-index",setup(W){JSON.parse(localStorage.getItem("role"));const h=l([]),E=l(0),w=l(150),s=l(!1);l(!1),M();const m=l(!1),u=l(null),C=l(!1),t=F({year:v("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:3}),S=[{title:"#",dataIndex:"idx",align:"center",width:50},{title:"LINK",dataIndex:"link",width:70,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÃ“N",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],D=e=>{u.value=e,s.value=!0},T=()=>{i(),s.value=!1},O=()=>{u.value=null,s.value=!0},Y=async()=>{},R=async e=>{t.page=e,await i()},V=async e=>{e&&(t.page=1,await i())},b=e=>{const a=`${k()}/mujer-produce/${e}`;window.open(a,"_blank")},A=e=>{const a=`${k()}/mujer-produce-asistencia/${e}`;window.open(a,"_blank")},i=async()=>{try{m.value=!0;const e={page:t.page};t.year&&(e.year=v(t.year).format("YYYY")),t.range&&(e.startDate=t.range[0].format("YYYY/MM/DD"),e.endDate=t.range[1].format("YYYY/MM/DD")),t.name&&(e.name=t.name),t.orderby&&(e.orderby=t.orderby);const a=await z({url:"mp/index-events",method:"GET",params:e}),{data:d}=a;h.value=d.data,E.value=d.total,w.value=d.per_page}catch(e){console.error("Error de red:",e)}finally{m.value=!1}};return P(async()=>{await i()}),g("search",t),g("loading",m),g("loadingFile",C),(e,a)=>{const d=c("a-button"),$=c("a-tag"),_=c("a-menu-item"),G=c("router-link"),B=c("a-drawer");return f(),U("div",K,[r(H,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:S,titleSearch:"BUSCAR POR EVENTO",pageSize:w.value,nameTotal:"Eventos",dataSource:h.value,total:E.value,btnUpdate:!0,onHandleNew:O,onHandleCallFetchData:i,onHandleDownloadExcel:Y,onHandleSearch:V,onHandlePaginator:R},{"data-cell":n(({column:o,record:p})=>[o.dataIndex=="link"?(f(),y(d,{key:0,onClick:Z=>b(p.slug),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:n(()=>[r(j(J))]),_:2},1032,["onClick"])):x("",!0),o.dataIndex=="registered"?(f(),y($,{key:1,color:"purple"},{default:n(()=>[I(L(p.registered),1)]),_:2},1024)):x("",!0)]),"custom-options":n(({record:o})=>[r(_,null,{default:n(()=>[N("span",{onClick:p=>A(o.slug)}," Asistencia ",8,X)]),_:2},1024),r(_,null,{default:n(()=>[r(G,{to:`/admin/mp/inscritos/${o.slug}`},{default:n(()=>a[1]||(a[1]=[I(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),r(_,null,{default:n(()=>[N("a",{onClick:p=>D(o)},"Editar",8,Q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),r(B,{open:s.value,"onUpdate:open":a[0]||(a[0]=o=>s.value=o),title:u.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:n(()=>[r(q,{onCloseDraw:T,info:u.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{ge as default};
