import{c as d,A as G,i as p,I as S,n as X,a as _,o as a,b as x,g as h,j as i,w as t,s as c,d as k,F as I,L as J,K as Q,M as W,m as z,q as M,e as l,l as Z}from"./index-6e46cec1.js";import{M as K}from"./MoreOutlined-5c8d0d35.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const te=ee;function U(u){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable}))),r.forEach(function(f){ae(u,f,o[f])})}return u}function ae(u,n,o){return n in u?Object.defineProperty(u,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):u[n]=o,u}var E=function(n,o){var r=U({},n,o.attrs);return d(G,U({},r,{icon:te}),null)};E.displayName="UploadOutlined";E.inheritAttrs=!1;const oe=E;const ne=h("h3",null,"Lista de MYPES",-1),le={class:"w-search"},re={class:"paginator"},ie={key:0,class:"full-spin"},de={__name:"MypesRD",setup(u){const n="https://app.soporte-pnte.com/api",o=p(!1),r=p(null),f=p([]),b=p(!1),A=p(1e3),P=p("60vh");p("");const O=p(0),N=S(J,{style:{fontSize:"40px"},spin:!0}),C=p({page:1}),V=[{title:"RUC",dataIndex:"ruc",fixed:"left",width:130},{title:"Razón social",dataIndex:"razon_social",fixed:"left",width:250},{title:"Rubro",dataIndex:"rubro",width:200},{title:"Tipo",dataIndex:"tipo",align:"center",width:140},{title:"Departamento",dataIndex:"departamento",width:140},{title:"Distrito",dataIndex:"distrito",width:130},{title:"Nombres y Apellidos",dataIndex:"nombres_apellidos",width:300},{title:"DNI",dataIndex:"dni",align:"center",width:120},{title:"Sexo",dataIndex:"sexo",align:"center",width:130},{title:"Teléfono",dataIndex:"telefono",align:"center",width:130},{title:"Email",dataIndex:"email",width:200}],j=e=>{C.value.page=e,v()},T=()=>{let e=document.createElement("input");e.type="file",e.accept=".xls, .xlsx",e.onchange=s=>{r.value=s.target.files[0],Q.open({message:"¡Alerta!",description:"Debes ahora de cargar los datos del excel.",onClick:()=>{console.log("Notification Clicked!")}})},e.click()},R=()=>{if(!r.value){alert("Por favor selecciona un archivo Excel.");return}o.value=!0;const e=new FormData;e.append("file",r.value),W.post(`${n}/digital-route/load-excel`,e,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then(s=>{z.success(s.data.message),v()}).catch(s=>{console.error("Error al subir el archivo",s)}).finally(()=>{o.value=!1,r.value=null})},B=async()=>{try{const e=await M({url:"/digital-route/delete-excel-records",method:"DELETE"});new Promise(s=>{setTimeout(()=>s(!0),3e3)}),e&&(z.success(e.message),v())}catch(e){console.error("Error de red:",e)}},v=async()=>{try{b.value=!0;const e=await M({url:"/digital-route/data-excel",method:"GET",params:C.value});f.value=e.data,O.value=e.total}catch(e){console.error("Error de red:",e)}finally{b.value=!1}};return X(v),(e,s)=>{const y=_("a-button"),L=_("a-popconfirm"),m=_("a-tag"),D=_("a-menu-item"),F=_("a-menu"),$=_("a-dropdown"),q=_("a-table"),H=_("a-pagination"),Y=_("a-spin");return a(),x(I,null,[h("div",null,[ne,h("div",le,[h("div",null,[r.value?(a(),i(y,{key:1,onClick:R,type:"primary"},{default:t(()=>[l("Cargar datos")]),_:1})):(a(),i(y,{key:0,onClick:T},{icon:t(()=>[d(k(oe))]),default:t(()=>[l(" Seleccionar archivo excel ")]),_:1})),f.value.length>=1?(a(),i(L,{key:2,title:"¿Deseas borrar todos los registros?",onConfirm:B},{default:t(()=>[d(y,{type:"primary",danger:"",class:"btn-drop"},{default:t(()=>[l("Drop base de datos")]),_:1})]),_:1})):c("",!0)])]),d(q,{bordered:"",class:"ant-table-striped",scroll:{x:A.value,y:P.value},columns:V,"data-source":f.value,pagination:!1,loading:b.value,size:"small"},{bodyCell:t(({column:w,record:g})=>[w.dataIndex=="tipo_usuario"?(a(),x(I,{key:0},[g.tipo_usuario===1?(a(),i(m,{key:0,bordered:!1,color:"processing"},{default:t(()=>[l("Administrador")]),_:1})):c("",!0),g.tipo_usuario===2?(a(),i(m,{key:1,bordered:!1,color:"magenta"},{default:t(()=>[l("Común")]),_:1})):c("",!0),g.tipo_usuario===3?(a(),i(m,{key:2,bordered:!1,color:"purple"},{default:t(()=>[l("3")]),_:1})):c("",!0),g.tipo_usuario===4?(a(),i(m,{key:3,bordered:!1,color:"warning"},{default:t(()=>[l("4")]),_:1})):c("",!0),g.tipo_usuario===5?(a(),i(m,{key:4,bordered:!1,color:"cyan"},{default:t(()=>[l("5")]),_:1})):c("",!0)],64)):c("",!0),w.dataIndex=="estado"?(a(),x(I,{key:1},[g.estado===1?(a(),i(m,{key:0,color:"success"},{default:t(()=>[l("Activo")]),_:1})):(a(),i(m,{key:1,color:"error"},{default:t(()=>[l("Inactivo")]),_:1}))],64)):c("",!0),w.dataIndex=="actions"?(a(),i($,{key:2,trigger:["click"]},{overlay:t(()=>[d(F,null,{default:t(()=>[d(D,{key:"1"},{default:t(()=>[l("Editar")]),_:1}),d(D,{key:"2"},{default:t(()=>[l("Dar de baja / Activar")]),_:1})]),_:1})]),default:t(()=>[d(y,{onClick:s[0]||(s[0]=Z(()=>{},["prevent"])),shape:"circle",size:"small",icon:S(k(K))},null,8,["icon"])]),_:1})):c("",!0)]),_:1},8,["scroll","data-source","loading"])]),h("div",re,[d(H,{size:"small",total:O.value,pageSize:50,onChange:j,showSizeChanger:!1},null,8,["total"])]),o.value?(a(),x("div",ie,[d(Y,{indicator:k(N),spinning:o.value},null,8,["indicator","spinning"])])):c("",!0)],64)}}};export{de as default};
