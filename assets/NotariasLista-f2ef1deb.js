import{c as o,A as ne,r as f,a as oe,j as ie,T as ge,b as _,o as i,v as N,w as r,e as y,d as v,F as U,q as Y,h as b,x as d,t as A,a2 as fe,i as M,K as J,m as V,l as K,E as ve,p as ee,a0 as ye,J as be}from"./index-c1671488.js";import{u as le}from"./selectes-9c1c3deb.js";import{Q}from"./quill.snow-d4934ba0.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import"./downloadExcel-dfe52833.js";import"./es-4dc4ead2.js";import{M as Oe}from"./MoreOutlined-c5a36585.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const xe=Ie;function te(m){for(var l=1;l<arguments.length;l++){var s=arguments[l]!=null?Object(arguments[l]):{},c=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(s).filter(function(O){return Object.getOwnPropertyDescriptor(s,O).enumerable}))),c.forEach(function(O){Ce(m,O,s[O])})}return m}function Ce(m,l,s){return l in m?Object.defineProperty(m,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):m[l]=s,m}var X=function(l,s){var c=te({},l,s.attrs);return o(ne,te({},c,{icon:xe}),null)};X.displayName="LinkOutlined";X.inheritAttrs=!1;const Ne=X;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const we=Te;function ae(m){for(var l=1;l<arguments.length;l++){var s=arguments[l]!=null?Object(arguments[l]):{},c=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(s).filter(function(O){return Object.getOwnPropertyDescriptor(s,O).enumerable}))),c.forEach(function(O){Se(m,O,s[O])})}return m}function Se(m,l,s){return l in m?Object.defineProperty(m,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):m[l]=s,m}var W=function(l,s){var c=ae({},l,s.attrs);return o(ne,ae({},c,{icon:we}),null)};W.displayName="PlusCircleOutlined";W.inheritAttrs=!1;const ke=W,Ae={name:{type:"iText",label:"NOMBRE DE LA NOTARÍA",name:"name",required:!0,message:"Ingresa el nombre de la notaría"},city_id:{type:"iSelect",label:"REGIÓN",name:"city_id",required:!0,message:"Seleccionar un tipo"},province_id:{type:"iSelect",label:"PROVINCIA",name:"province_id",required:!0,message:"Seleccionar un tipo"},district_id:{type:"iSelect",label:"DISTRITO",name:"district_id",required:!0,message:"Seleccionar un tipo"},address:{type:"iText",label:"DIRECCIÓN",name:"address",required:!1,message:"Escribe la dirección"},gastosnotariales:{type:"iSpecialField",label:"",name:"gastosnotariales",required:!1,message:"Escribe un monto"},biometrico:{type:"iQuillEditor",label:"BIOMÉTRICO",name:"biometrico",required:!1,message:"Escribir datos del biometrico"},sociointerveniente:{type:"iQuillEditor",label:"SOCIO O INTERVINIENTE ADICIONAL",name:"sociointerveniente",required:!1,message:"Escribe la tarifa"},infocontacto:{type:"iQuillEditor",label:"DATOS DEL CONTACTO",name:"infocontacto",required:!0,message:"Escribe la tarifa"},tarifanormal:{type:"iText",label:"TARIFA NORMAL",name:"tarifanormal",required:!1,message:"Ingresa el nombre de la notaría"},tarifasocial:{type:"iText",label:"TARIFA SOCIAL",name:"tarifasocial",required:!1,message:"Ingresa el nombre de la notaría"}};const Ee={class:"grid-notary"},Le={for:""},De={for:""},Re={class:"wrapper-form_btn"},qe={__name:"DrawerNotaria.componente",props:["updateNotary"],emits:["closeDraw"],setup(m,{emit:l}){const s=JSON.parse(localStorage.getItem("profile")),c=le(),O=l,T=m;c.$patch({cities:c.cities}),c.fetchCities();const E={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}]]},contentType:"html"},S=f(!1),e=oe({city_id:null,province_id:null,district_id:null,address:null,name:null,sociointerveniente:null,biometrico:null,infocontacto:null,user_id:s.id,gastos:[{gasto:null,condicion:null}]}),z=()=>{e==null||e.gastos.push({gasto:null,condicion:null})},L=a=>{e.gastos.splice(a,1)},R=a=>{e.province_id=null,e.district_id=null,c.fetchProvinces(a)},w=a=>{e.district_id=null,c.fetchDistricts(a)},F=()=>{e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.name=null,e.istestimonio=!1,e.price="</p>",e.conditions="</p>",e.sociointerveniente="</p>",e.biometrico="</p>",e.infocontacto="</p>",e.gastos.gastos="</p>",e.gastos.condicion="</p>",e.tarifanormal=null,e.tarifasocial=null},j=async()=>{let a=e;S.value=!0;try{let I=null,x=null;T.updateNotary?(I=`notary/update/${T.updateNotary.id}`,x="PATCH"):(I="notary/create",x="POST");const h=await J({url:I,method:x,data:a});if(h.status==200)return F(),O("closeDraw",!0),V.success(h.message);V.error("Error al registrar notaría")}catch{V.error("Error al registrar notaría")}finally{S.value=!1}};function $(a){var I,x;e.id=a.id,e.city_id=a.city.id,R(a.city.id),e.province_id=a.province.id,w(a.province.id),e.district_id=a.district.id,e.address=a.address,e.name=a.name,e.istestimonio=a.istestimonio!=0,e.price=a.price,e.conditions=a.conditions,e.sociointerveniente=a.sociointerveniente,e.biometrico=a.biometrico,e.infocontacto=a.infocontacto,((I=a.gastos)==null?void 0:I.length)>=1?e.gastos=(x=a.gastos)==null?void 0:x.map(h=>({gasto:h.gasto,condicion:h.condicion})):e.gastos=[{gasto:null,condicion:null}],e.tarifanormal=a.tarifanormal,e.tarifasocial=a.tarifasocial}return ie(()=>{T.updateNotary&&$(T.updateNotary)}),ge(()=>T.updateNotary,a=>{a?$(a):clear()}),(a,I)=>{const x=_("a-select"),h=_("a-form-item"),B=_("a-checkbox"),D=_("a-input"),G=_("a-input-number"),u=_("a-button"),n=_("a-form");return i(),N(n,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:j},{default:r(()=>[y("div",Ee,[(i(!0),v(U,null,Y(b(Ae),(t,H)=>(i(),v(U,{key:H},[t.type==="iSelect"?(i(),N(h,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[t.name=="city_id"?(i(),N(x,{key:0,value:e[t.name],"onUpdate:value":p=>e[t.name]=p,options:b(c).cities,onChange:R},null,8,["value","onUpdate:value","options"])):d("",!0),t.name=="province_id"?(i(),N(x,{key:1,value:e[t.name],"onUpdate:value":p=>e[t.name]=p,options:b(c).provinces,onChange:w},null,8,["value","onUpdate:value","options"])):d("",!0),t.name=="district_id"?(i(),N(x,{key:2,value:e[t.name],"onUpdate:value":p=>e[t.name]=p,options:b(c).districts},null,8,["value","onUpdate:value","options"])):d("",!0)]),_:2},1032,["name","label","rules"])):d("",!0),t.type==="iSpecialField"?(i(),N(h,{key:1,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[(i(!0),v(U,null,Y(e.gastos,(p,q)=>(i(),v("div",{class:"gastos-notariales",key:q},[y("div",null,[y("label",Le,"GASTOS NOTARIALES "+A(q+1),1),o(b(Q),{class:"quill-editor",content:p.gasto,"onUpdate:content":P=>p.gasto=P,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),y("div",null,[y("label",De,"CONDICIONES "+A(q+1),1),o(b(Q),{class:"quill-editor",content:p.condicion,"onUpdate:content":P=>p.condicion=P,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),o(b(fe),{class:"notaria-ico-delete",onClick:P=>L(q)},null,8,["onClick"])]))),128)),o(b(ke),{class:"notaria-ico-plus",onClick:z})]),_:2},1032,["name","label","rules"])):d("",!0),t.type==="checked"?(i(),N(h,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[o(B,{checked:e[t.name],"onUpdate:checked":p=>e[t.name]=p},null,8,["checked","onUpdate:checked"])]),_:2},1032,["name","label","rules"])):d("",!0),t.type==="iText"?(i(),N(h,{key:3,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[o(D,{value:e[t.name],"onUpdate:value":p=>e[t.name]=p},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):d("",!0),t.type==="iNumber"?(i(),N(h,{key:4,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[o(G,{value:e[t.name],"onUpdate:value":p=>e[t.name]=p},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):d("",!0),t.type==="iQuillEditor"?(i(),N(h,{key:5,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:r(()=>[o(b(Q),{class:"quill-editor",content:e[t.name],"onUpdate:content":p=>e[t.name]=p,options:E,contentType:"html"},null,8,["content","onUpdate:content"])]),_:2},1032,["name","label","rules"])):d("",!0)],64))),128))]),y("div",Re,[o(u,{class:"btn-produce",type:"primary","html-type":"submit",loading:S.value},{default:r(()=>I[0]||(I[0]=[M("GUARDAR")])),_:1},8,["loading"])])]),_:1},8,["model"])}}},Pe=he(qe,[["__scopeId","data-v-e99b93c0"]]);const Ue={key:0,style:{display:"grid","grid-template-columns":"1fr 1fr"}},Me={key:1,style:{"text-transform":"uppercase"}},ze={key:2,style:{"text-transform":"uppercase"}},$e={key:3,style:{"text-transform":"uppercase"}},He={key:4,style:{"text-transform":"uppercase"}},Ve={style:{display:"grid","grid-template-columns":"1fr 1fr"}},Fe=["innerHTML"],je=["innerHTML"],Be=["innerHTML"],Ge=["innerHTML"],Qe=["innerHTML"],Ye={key:0},Je=["onClick"],Xe={class:"paginator"},it={__name:"NotariasLista",setup(m){K.locale("es");const l=JSON.parse(localStorage.getItem("role")),s=le();f(K("2025","YYYY")),f(null),f(null),f(null),f(!1),f();const c=f(50),O=f([]),T=f(!1),E=f(0),S=f({page:1});f("plans-action/list");const e=f(1200),z=f(window.innerHeight-100),L=f(!1);f(null);const R=f(null),w=f(null);s.$patch({cities:s.cities}),s.fetchCities();const F=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOTARÍA",dataIndex:"name",width:250,fixed:"left"},{title:"REGIÓN",fixed:"left",dataIndex:"region",width:120,align:"center"},{title:"PROVINCIA",fixed:"left",dataIndex:"province",width:120,align:"center"},{title:"DISTRITO",fixed:"left",dataIndex:"district",width:120,align:"center"},{title:"DIRECCIÓN",dataIndex:"address",width:180},{title:"GASTOS NOTARIALES",dataIndex:"gastos_notariales",width:450},{title:"BIOMÉTRICO / HUELLA DIGITAL",dataIndex:"biometric",width:200,align:"center"},{title:"SOCIO O INTERVINIENTE ADICIONAL",dataIndex:"socio",width:200,align:"center"},{title:"CONTÁCTO",dataIndex:"contacto",width:280,align:"center"},...l.some(u=>u.id==1||u.id==5)?[{title:"",dataIndex:"actions",width:50,align:"center",fixed:"right"}]:[]],j=(u,n)=>{const t=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return n.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t)},$=()=>{D(),L.value=!1},a=()=>{R.value=null,L.value=!0},I=async u=>{try{const n=await J({url:`notary/delete/${u.id}`,method:"DELETE"});n.status==200&&(V.success(n.message),D())}catch{console.log("Failed to delete")}},x=u=>{R.value=u,L.value=!0},h=()=>{z.value=window.innerHeight-315};oe({search:""});const B=u=>{S.value.page=u,D()},D=async()=>{T.value=!0;try{const u={};S.value.page&&(u.page=S.value.page),w.value&&(u.city=w.value);const n=await J({url:"notary/list",method:"GET",params:u});O.value=n.data,E.value=n.total,c.value=n.per_page}catch(u){console.error("Error de red:",u)}finally{T.value=!1}},G=ve(()=>u=>(S.value.page-1)*c.value+u+1);return ie(()=>{D(),window.addEventListener("resize",h),h()}),(u,n)=>{const t=_("a-button"),H=_("router-link"),p=_("a-col"),q=_("a-select"),P=_("a-row"),Z=_("a-menu-item"),se=_("a-popconfirm"),re=_("a-menu"),ce=_("a-dropdown"),de=_("a-table"),ue=_("a-tag"),pe=_("a-pagination"),me=_("a-drawer");return i(),v("div",null,[n[8]||(n[8]=y("h3",{class:"title-produce"},"NOTARÍAS",-1)),o(P,{style:{margin:"1rem 0"}},{default:r(()=>[o(p,{xs:24,md:12,lg:18},{default:r(()=>[Array.isArray(b(l))&&b(l).some(g=>g.id==1||g.id==5)?(i(),N(t,{key:0,onClick:a,type:"primary",style:{"margin-right":"1rem"}},{default:r(()=>n[3]||(n[3]=[M("NUEVO")])),_:1})):d("",!0),o(H,{to:`/notarias/${w.value?w.value:"todos"}`,target:"_blank"},{default:r(()=>[o(t,{type:"dashed",icon:ee(b(Ne))},{default:r(()=>n[4]||(n[4]=[M("VER LINK")])),_:1},8,["icon"])]),_:1},8,["to"])]),_:1}),o(p,{xs:24,md:12,lg:6},{default:r(()=>[o(q,{placeholder:"BUSCAR POR PROVINCIA",value:w.value,"onUpdate:value":n[0]||(n[0]=g=>w.value=g),"show-search":"",options:b(s).cities,"filter-option":j,style:{width:"100%"},onChange:D},null,8,["value","options"])]),_:1})]),_:1}),o(de,{bordered:"",scroll:{x:e.value,y:z.value},class:"table-actions",columns:F,"data-source":O.value,pagination:!1,loading:T.value,size:"small"},{headerCell:r(({column:g,text:C})=>[g.dataIndex==="gastos_notariales"?(i(),v("div",Ue,n[5]||(n[5]=[y("span",null,"GASTOS NOTARIALES",-1),y("span",{style:{"padding-left":"8px"}},"CONDICIONES",-1)]))):d("",!0)]),bodyCell:r(({column:g,record:C,index:_e})=>[g.dataIndex==="idx"?(i(),v(U,{key:0},[M(A(G.value(_e)),1)],64)):d("",!0),g.dataIndex==="name"?(i(),v("span",Me,A(C.name),1)):d("",!0),g.dataIndex==="region"?(i(),v("span",ze,A(C.city.name),1)):d("",!0),g.dataIndex==="province"?(i(),v("span",$e,A(C.province.name),1)):d("",!0),g.dataIndex==="district"?(i(),v("span",He,A(C.district.name),1)):d("",!0),g.dataIndex==="gastos_notariales"?(i(!0),v(U,{key:5},Y(C.gastos,(k,We)=>(i(),v("div",Ve,[y("div",{innerHTML:k==null?void 0:k.gasto},null,8,Fe),y("div",{innerHTML:k==null?void 0:k.condicion,style:{"border-left":"1px solid #ddd","padding-left":"8px"}},null,8,je)]))),256)):d("",!0),g.dataIndex==="biometric"?(i(),v("div",{key:6,innerHTML:C.biometrico},null,8,Be)):d("",!0),g.dataIndex==="socio"?(i(),v("div",{key:7,innerHTML:C.sociointerveniente},null,8,Ge)):d("",!0),g.dataIndex==="contacto"?(i(),v("div",{key:8,innerHTML:C.infocontacto},null,8,Qe)):d("",!0),g.dataIndex=="actions"?(i(),v(U,{key:9},[C.status=="observado"||b(l)[0].id!=2?(i(),v("div",Ye,[o(ce,{trigger:["click"]},{overlay:r(()=>[o(re,null,{default:r(()=>[o(Z,null,{default:r(()=>[y("a",{onClick:k=>x(C)},"Editar",8,Je)]),_:2},1024),o(Z,null,{default:r(()=>[o(se,{title:"¿Seguro de eliminar?",onConfirm:k=>I(C)},{icon:r(()=>[o(b(ye),{style:{color:"red"}})]),default:r(()=>[n[6]||(n[6]=y("a",null,"Eliminar",-1))]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:r(()=>[y("a",{class:"ant-dropdown-link",onClick:n[1]||(n[1]=be(()=>{},["prevent"]))},[o(t,{shape:"circle",icon:ee(b(Oe)),size:"small"},null,8,["icon"])])]),_:2},1024)])):d("",!0)],64)):d("",!0)]),_:1},8,["scroll","data-source","loading"]),y("div",Xe,[y("span",null,[o(ue,{color:"blue"},{default:r(()=>[y("b",null,A(E.value),1)]),_:1}),n[7]||(n[7]=M("Notarías registradas"))]),o(pe,{size:"small",total:E.value,pageSize:c.value,onChange:B,showSizeChanger:!1},null,8,["total","pageSize"])]),o(me,{open:L.value,"onUpdate:open":n[2]||(n[2]=g=>L.value=g),class:"draw-notary","root-class-name":"root-class-name",title:"DATOS DE LA NOTARÍA",width:"700",placement:"right"},{default:r(()=>[o(Pe,{onCloseDraw:$,updateNotary:R.value},null,8,["updateNotary"])]),_:1},8,["open"])])}}};export{it as default};
