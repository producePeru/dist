import{i as S,r as W,n as L,a as u,o as t,b as h,c,g as _,w as d,F as U,q,m as v,N as z,d as H,e as J,p as K,f as Q,j as r,s as l}from"./index-2890f88a.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Z={usuario:{type:"iText",label:"Usuario",name:"usuario",required:!0,message:"Escribe cuenta de usuario"},clave:{type:"iText",label:"Contraseña",name:"clave",required:!0,message:"Registra la contraseña"},tipo_documento:{type:"iSelect",label:"Tipo de documento",name:"tipo_documento",required:!0,message:"Seleccionar tipo de documento"},nro_documento:{type:"iSearch",label:"Número de documento",name:"nro_documento",required:!0,message:"Error en el tipo de documento"},apellido_paterno:{type:"iText",label:"Apellido paterno",name:"apellido_paterno",required:!0,message:"Escribe el apellido paterno"},apellido_materno:{type:"iText",label:"Apellido materno",name:"apellido_materno",required:!0,message:"Escribe el apellido materno"},nombres:{type:"iText",label:"Nombres",name:"nombres",required:!0,message:"Escribe el nombre"},pais:{type:"iSelectWrite",label:"País",name:"pais",required:!0,message:"Seleccionar país"},fecha_nacimiento:{type:"iDate",label:"Fecha de nacimiento",name:"fecha_nacimiento",required:!1,message:"Seleccionar país"},genero:{type:"iSelect",label:"Género",name:"genero",required:!1,message:"Seleccionar tipo de documento"},discapacidad:{type:"iSelect",label:"¿Tiene discapacidad?",name:"discapacidad",required:!0,message:"Seleccionar un tipo"},correo:{type:"iText",label:"Correo",name:"correo",required:!1,email:"email",message:"Escribe el correo del usuario"},celular:{type:"iText",label:"Celular",name:"celular",required:!1,message:"Escribe el celular del usuario"},oficina:{type:"iSelect",label:"Oficina",name:"idOficina",required:!0,message:"Seleccionar un tipo"},sede_labora:{type:"iSelect",label:"Sede donde labora",name:"idSede",required:!0,message:"Seleccionar un tipo"},tipo_usuario:{type:"iSelect",label:"Tipo de usuario",name:"tipo_usuario",required:!0,message:"Seleccionar un tipo"}};const k=b=>(K("data-v-84ce5ce2"),b=b(),Q(),b),$=k(()=>_("h3",null,"Registro de Usuarios",-1)),ee=k(()=>_("span",null,"Formulario para el registro de usuarios:",-1)),ae={class:"user"},oe={class:"grid-item"},te=k(()=>_("div",null,[_("h1")],-1)),ne={__name:"NuevoUsuarios",setup(b){const g=S(!1),y=S([]),f=S([]),a=W({usuario:"",clave:"",tipo_documento:"",nro_documento:"",apellido_paterno:"",apellido_materno:"",nombres:"",pais:"",fecha_nacimiento:null,genero:"",discapacidad:null,correo:"",celular:"",tipo_usuario:null,idOficina:null,idSede:null}),T=[{label:"DNI",value:1},{label:"CE",value:2},{label:"PAS",value:3},{label:"PTP",value:4}],x=[{label:"Masculino",value:1},{label:"Femenino",value:2},{label:"...",value:3}],E=[{label:"Si",value:2},{label:"No",value:1}],N=[{label:"Administrador",value:"1"},{label:"Usuario",value:"2"},{label:"Invitado",value:"3"}],D=[{label:"Dirección ejecutiva",value:1},{label:"Unidad de gestión de servicios empresariales",value:2},{label:"Unidad de gestión de operaciones",value:3},{label:"Unidad de gestión estratégica y entrega de resultados",value:4}],F=()=>{a.usuario="",a.clave="",a.tipo_documento="",a.nro_documento="",a.apellido_paterno="",a.apellido_materno="",a.nombres="",a.pais="",a.fecha_nacimiento=null,a.genero="",a.discapacidad=null,a.correo="",a.celular="",a.tipo_usuario=null,a.idOficina=null,a.idSede=null},w=async n=>{const m={...n,idUsuarioRegistrador:1};g.value=!0;try{const i=await q({url:"/register-user",method:"POST",data:m});F(),v.success(i.message)}catch{v.error("No se pudo registrar este usuario")}finally{g.value=!1}},C=()=>{v.error("Debes de completar todos los espacios requeridos")},I=async n=>{if(!a.tipo_documento)return v.error("Selecciona el tipo de documento");if(!n)return v.error("El campo número de documento esta vacío");console.log(typeof n)},O=()=>{a.nro_documento=a.nro_documento.replace(/\D/g,"")},P=(n,s)=>{},R=async()=>{try{(await q({url:"/countries",method:"GET"})).map(s=>{const m={value:s.idPais,label:s.nombre};y.value=[...y.value,m]})}catch(n){console.error("Error de red:",n)}},j=async()=>{try{(await q({url:"/sedes",method:"GET"})).map(s=>{const m={label:s.nombre,value:s.idSede};f.value=[...f.value,m]})}catch(n){console.error("Error de red:",n)}};return L(R(),j()),(n,s)=>{const m=u("a-divider"),i=u("a-select"),p=u("a-form-item"),A=u("a-input-search"),B=u("a-input"),M=u("a-date-picker"),Y=u("a-button"),G=u("a-form");return t(),h(U,null,[$,ee,c(m),_("div",ae,[c(G,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:w,onFinishFailed:C},{default:d(()=>[_("div",oe,[(t(!0),h(U,null,z(H(Z),(e,V)=>(t(),h(U,{key:V},[e.type==="iSelect"?(t(),r(p,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[e.name=="tipo_documento"?(t(),r(i,{key:0,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:T},null,8,["value","onUpdate:value"])):l("",!0),e.name=="genero"?(t(),r(i,{key:1,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:x},null,8,["value","onUpdate:value"])):l("",!0),e.name=="discapacidad"?(t(),r(i,{key:2,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:E},null,8,["value","onUpdate:value"])):l("",!0),e.name=="idOficina"?(t(),r(i,{key:3,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:D},null,8,["value","onUpdate:value"])):l("",!0),e.name=="idSede"?(t(),r(i,{key:4,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:f.value},null,8,["value","onUpdate:value","options"])):l("",!0),e.name=="tipo_usuario"?(t(),r(i,{key:5,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:N},null,8,["value","onUpdate:value"])):l("",!0)]),_:2},1032,["name","label","rules"])):l("",!0),e.type==="iSearch"?(t(),r(p,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,len:8}]},{default:d(()=>[c(A,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,"enter-button":"",onSearch:I,onInput:O},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):l("",!0),e.type==="iText"?(t(),r(p,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:d(()=>[c(B,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):l("",!0),e.type==="iSelectWrite"?(t(),r(p,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[c(i,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,"show-search":"",options:y.value,"filter-option":P},null,8,["value","onUpdate:value","options"])]),_:2},1032,["name","label","rules"])):l("",!0),e.type==="iDate"?(t(),r(p,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[c(M,{value:a.fecha_nacimiento,"onUpdate:value":s[0]||(s[0]=o=>a.fecha_nacimiento=o),style:{width:"100%"},format:"YYYY-MM-DD"},null,8,["value"])]),_:2},1032,["name","label","rules"])):l("",!0)],64))),128))]),c(p,null,{default:d(()=>[c(Y,{type:"primary","html-type":"submit",loading:g.value},{default:d(()=>[J("Registrar usuario")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),te])],64)}}},se=X(ne,[["__scopeId","data-v-84ce5ce2"]]);export{se as default};
