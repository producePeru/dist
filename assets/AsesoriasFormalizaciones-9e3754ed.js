import{a as Ce,f as $e,r as Oe,b as Ee,R as Fe}from"./ReservaNombre-1e6de1d6.js";import{m as ce,p as he,e as be,a as we}from"./selects-0fbcf7fc.js";import{c as l,A as Te,r as h,b as oe,n as ne,d as p,o as e,e as x,w as n,f as i,F as Y,D as Q,j as V,v as _,x as r,k as H,m as B,i as M,M as ze,N as qe,T as Ne,a as ye,h as Pe,U as Ge,V as Le,g as K,t as O,u as Me,z as Ve,W as Be,X as je,p as He,l as Ye,P as Je}from"./index-2d9453b9.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Ke=We;function ge(U){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?Object(arguments[y]):{},m=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(S).filter(function(D){return Object.getOwnPropertyDescriptor(S,D).enumerable}))),m.forEach(function(D){Qe(U,D,S[D])})}return U}function Qe(U,y,S){return y in U?Object.defineProperty(U,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):U[y]=S,U}var de=function(y,S){var m=ge({},y,S.attrs);return l(Te,ge({},m,{icon:Ke}),null)};de.displayName="RedoOutlined";de.inheritAttrs=!1;const Xe=de;const Ze={class:"wrapper-booking"},ea={class:"grid-booking"},aa={__name:"ActoConstitutivo",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const S=JSON.parse(localStorage.getItem("user")),m=U,D=y,j=h([]),q=h(!1),c=oe({id_person:null,dni:null,step:2,code_sid_sunarp:null,social_reason:null,num_notary:null,id_notary:null,modality:null,updated_by:S.id}),N=async()=>{c.id_person=m.info.id_person,c.dni=m.info.dni,c.code_sid_sunarp=m.info.code_sid_sunarp,q.value=!0;try{const o=await B({url:"/formalization20",method:"POST",data:c});o&&(M.success(o.message),c.social_reason=null,c.id_notary=null,c.num_notary=null,c.modality=null,D("closeDraw",!0))}catch{M.error("Error al registrar")}finally{q.value=!1}},R=()=>{M.error("Debes de completar todos los espacios requeridos")},w=async()=>{try{const{data:o}=await B({url:"/notaries-select",method:"GET"});j.value=o}catch(o){console.log(o)}};return ne(async()=>{await w()}),(o,A)=>{const F=p("a-select"),s=p("a-form-item"),k=p("a-input-search"),$=p("a-input"),G=p("a-date-picker"),E=p("a-button"),d=p("a-form");return e(),x("div",Ze,[l(d,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:R},{default:n(()=>[i("div",ea,[(e(!0),x(Y,null,Q(V(Ce),(a,I)=>(e(),x(Y,{key:I},[a.type==="iSelect"?(e(),_(s,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[a.name=="id_notary"?(e(),_(F,{key:0,value:c[a.name],"onUpdate:value":v=>c[a.name]=v,options:j.value,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):r("",!0),a.name=="modality"?(e(),_(F,{key:1,value:c[a.name],"onUpdate:value":v=>c[a.name]=v,options:V(ce),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0),a.type==="iSearch"?(e(),_(s,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[l(k,{maxlength:15,loading:o.searchLoading,value:c[a.name],"onUpdate:value":v=>c[a.name]=v,onSearch:o.handleSearchApi,onInput:o.validateNumber},null,8,["loading","value","onUpdate:value","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):r("",!0),a.type==="iText"?(e(),_(s,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:n(()=>[l($,{value:c[a.name],"onUpdate:value":v=>c[a.name]=v,disabled:a.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0),a.type==="iDate"?(e(),_(s,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[l(G,{locale:o.locale,value:o.birthdateDate,"onUpdate:value":A[0]||(A[0]=v=>o.birthdateDate=v),style:{width:"100%"},format:o.dateFormat,disabled:a.disabled},null,8,["locale","value","format","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),l(s,null,{default:n(()=>[l(E,{type:"primary","html-type":"submit",loading:q.value},{default:n(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ta=X(aa,[["__scopeId","data-v-6dc96d72"]]);const oa={class:"wrapper-booking"},na={class:"grid-booking"},la={class:"emp-20"},sa={__name:"MypeFinal",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const S=JSON.parse(localStorage.getItem("user")),m=U,D=y,j=h(!1),q=h(!0),c=oe({id_person:null,dni:null,step:3,code_sid_sunarp:null,ruc:null,updated_by:S.id}),N=async()=>{c.id_person=m.info.id_person,c.dni=m.info.dni,c.code_sid_sunarp=m.info.code_sid_sunarp,c.ruc=`20${c.ruc}`,j.value=!0,q.value=!1;const w={ruc:c.ruc,social_reason:m.info.social_reason,category:m.info.category,person_type:2,economic_sector:m.info.economy_sector,department:m.info.department,province:m.info.province,district:m.info.district,address:m.info.address,email:null,phone:null,created_by:1,update_by:1,status:1},o={number:m.info.dni,id_post:4};try{const A=await B({url:"/formalization20",method:"POST",data:c});await B({url:"/formalization-company",method:"POST",data:w}),await B({url:"/person-post",method:"POST",data:o}),M.success(A.message),c.ruc=null,D("closeDraw",!0)}catch{M.error("Error al registrar")}finally{j.value=!1}},R=()=>{M.error("Debes de completar todos los espacios requeridos")};return(w,o)=>{const A=p("a-input"),F=p("a-form-item"),s=p("a-button"),k=p("a-form");return e(),x("div",oa,[l(k,{layout:"vertical",model:c,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:R},{default:n(()=>[i("div",na,[(e(!0),x(Y,null,Q(V($e),($,G)=>(e(),x(Y,{key:G},[$.type==="iText"?(e(),_(F,{key:0,name:$.name,label:$.label,rules:[{required:$.required,message:$.message,type:$.email,max:$.max,min:$.min}]},{default:n(()=>[l(A,{value:c[$.name],"onUpdate:value":E=>c[$.name]=E,disabled:$.disabled},{prefix:n(()=>[ze(i("span",la,"20",512),[[qe,q.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),l(F,null,{default:n(()=>[l(s,{type:"primary","html-type":"submit",loading:j.value},{default:n(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ra=X(sa,[["__scopeId","data-v-e48e936f"]]),ke=Ne("pagestore",{state:()=>({count:0,userPhoto:null}),actions:{increment(){count++},async logout(){const U="https://programa.soporte-pnte.com/",y="http://127.0.0.1:5173/",S=window.location.hostname=="127.0.0.1"?y:U;try{await B({url:"/logout",method:"POST"})&&(ye.remove("token"),localStorage.clear(),window.location.href=S)}catch(m){console.error("Error de red:",m)}},async imgProfile(){console.log("aaaaaalalalalllll");try{const U=window.location.hostname=="127.0.0.1"?"http://127.0.0.1:8000/api/v1":"https://apituempresa.soporte-pnte.com/api/v1",y=ye.get("token"),S=JSON.parse(localStorage.getItem("info")),m=await Pe.get(`${U}/profile-photo/${S.id}/${S.dni}`,{responseType:"blob",headers:{Accept:"application/json",Authorization:`Bearer ${y}`}}),D=window.URL.createObjectURL(new Blob([m.data]));this.userPhoto=D}catch(U){console.error("Error al descargar el archivo",U)}}}});const ia={class:"wrapper-booking"},ua={class:"grid-booking"},ca={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const S=Le({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),m=ke(),D=U,j=JSON.parse(localStorage.getItem("user")),q=y,c=h(),N=h([]),R=h([]),w=h([]),o=h([]),A=h(!1),F=h(!1),s=oe({detail_procedure:null,modality:null,economy_sector:null,category:null,department:null,province:null,district:null,id_person:D.info.id,created_by:j.id,created_dni:j.document_number}),k=(g,C)=>{const T=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return C.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(T)},$=async()=>{const g=s;A.value=!0;try{const C=await B({url:"/formalization10",method:"POST",data:g});if(C.status==400)return M.error(C.message),m.logout();C&&(M.success(C.message),s.detail_procedure=null,s.modality=null,s.economy_sector=null,s.category=null,s.department=null,s.province=null,s.district=null,q("closeDraw",!0))}catch{M.error("Error al registrar")}finally{A.value=!1}},G=async()=>{F.value=!0;try{await B({url:"/create-comercial-activities",method:"POST",data:{name:c.value}}),v(),c.value=""}catch{M.error("Error al registrar")}finally{F.value=!1}},E=()=>{M.warning("Debes de completar todos los espacios requeridos")},d=async()=>{try{const{data:g}=await K({url:"/departaments",method:"GET"});let C=g.map(T=>({label:T.label,value:T.id}));N.value=[...N.value,...C]}catch(g){console.log(g)}},a=async g=>{s.province=null,s.district=null,R.value=[],w.value=[];try{const{data:C}=await K({url:`/province/${g}`,method:"GET"});let T=C.map(u=>({label:u.label,value:u.id}));R.value=[...R.value,...T]}catch(C){console.log(C)}},I=async g=>{s.district=null,w.value=[];try{const{data:C}=await K({url:`/district/${g}`,method:"GET"});let T=C.map(u=>({label:u.label,value:u.id}));w.value=[...w.value,...T]}catch(C){console.log(C)}},v=async()=>{try{const{data:g}=await B({url:"/comercial-activities",method:"GET"});o.value=g}catch(g){console.log(g)}};return ne(()=>{d(),v()}),(g,C)=>{const T=p("a-select"),u=p("a-form-item"),W=p("a-input"),L=p("a-divider"),Z=p("a-button"),J=p("a-space"),le=p("a-form");return e(),x("div",ia,[l(le,{layout:"vertical",model:s,name:"basic",autocomplete:"off",onFinish:$,onFinishFailed:E},{default:n(()=>[i("div",ua,[(e(!0),x(Y,null,Q(V(Oe),(t,f)=>(e(),x(Y,{key:f},[t.type==="iSelect"?(e(),_(u,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="detail_procedure"?(e(),_(T,{key:0,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,options:V(he)},null,8,["value","onUpdate:value","options"])):r("",!0),t.name=="modality"?(e(),_(T,{key:1,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,options:V(ce)},null,8,["value","onUpdate:value","options"])):r("",!0),t.name=="economy_sector"?(e(),_(T,{key:2,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,options:V(be)},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0),t.type==="iText"?(e(),_(u,{key:1,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:n(()=>[l(W,{value:s[t.name],"onUpdate:value":z=>s[t.name]=z,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0),t.type==="iSelectWrite"?(e(),_(u,{key:2,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="category"?(e(),_(T,{key:0,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,"show-search":"",options:o.value,"filter-option":k},{dropdownRender:n(({menuNode:z})=>[l(V(S),{vnodes:z},null,8,["vnodes"]),l(L,{style:{margin:"4px 0"}}),l(J,{style:{padding:"4px 8px"}},{default:n(()=>[l(W,{ref_for:!0,ref:"inputRef",value:c.value,"onUpdate:value":C[0]||(C[0]=se=>c.value=se),placeholder:"Nueva actividad"},null,8,["value"]),l(Z,{type:"text",onClick:G,loading:F.value},{icon:n(()=>[l(V(Ge))]),default:n(()=>[H(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):r("",!0),t.name=="department"?(e(),_(T,{key:1,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,"show-search":"",options:N.value,"filter-option":k,onChange:a},null,8,["value","onUpdate:value","options"])):r("",!0),t.name=="province"?(e(),_(T,{key:2,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,"show-search":"",options:R.value,"filter-option":k,onChange:I},null,8,["value","onUpdate:value","options"])):r("",!0),t.name=="district"?(e(),_(T,{key:3,value:s[t.name],"onUpdate:value":z=>s[t.name]=z,"show-search":"",options:w.value,"filter-option":k},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),l(u,null,{default:n(()=>[l(Z,{type:"primary","html-type":"submit",loading:A.value},{default:n(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},da=X(ca,[["__scopeId","data-v-bd39cf0b"]]);const pa={class:"wrapper-booking"},ma={class:"grid-booking"},_a={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(U,{emit:y}){const S=ke(),m=U,D=JSON.parse(localStorage.getItem("user")),j=y,q=h([]),c=h([]),N=h([]),R=h([]),w=h(!1),o=oe({component:null,tema_compoment:null,modality:null,department:null,province:null,district:null,description:null,id_person:m.info.id,created_by:D.id,created_dni:D.document_number}),A=(d,a)=>{const I=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},F=async()=>{const d=o;w.value=!0;try{const a=await B({url:"/create-consulting",method:"POST",data:d});if(a.status==400)return M.error(a.message),S.logout();a&&(M.success(a.message),o.component=null,o.tema_compoment=null,o.modality=null,o.department=null,o.province=null,o.district=null,o.description=null,j("closeDraw",!0))}catch{M.error("Error al registrar")}finally{w.value=!1}},s=()=>{M.warning("Debes de completar todos los espacios requeridos")},k=async()=>{try{const{data:d}=await K({url:"/departaments",method:"GET"});let a=d.map(I=>({label:I.label,value:I.id}));q.value=[...q.value,...a]}catch(d){console.log(d)}},$=async d=>{o.province=null,o.district=null,c.value=[],N.value=[];try{const{data:a}=await K({url:`/province/${d}`,method:"GET"});let I=a.map(v=>({label:v.label,value:v.id}));c.value=[...c.value,...I]}catch(a){console.log(a)}},G=async d=>{o.district=null,N.value=[];try{const{data:a}=await K({url:`/district/${d}`,method:"GET"});let I=a.map(v=>({label:v.label,value:v.id}));N.value=[...N.value,...I]}catch(a){console.log(a)}},E=async()=>{try{const{data:d}=await B({url:"/theme-component",method:"GET"});R.value=d}catch(d){console.log(d)}};return ne(async()=>{await k(),await E()}),(d,a)=>{const I=p("a-select"),v=p("a-form-item"),g=p("a-textarea"),C=p("a-button"),T=p("a-form");return e(),x("div",pa,[l(T,{layout:"vertical",model:o,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:s},{default:n(()=>[i("div",ma,[(e(!0),x(Y,null,Q(V(Ee),(u,W)=>(e(),x(Y,{key:W},[u.type==="iSelect"?(e(),_(v,{key:0,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[u.name=="component"?(e(),_(I,{key:0,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,options:V(we)},null,8,["value","onUpdate:value","options"])):r("",!0),u.name=="modality"?(e(),_(I,{key:1,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,options:V(ce)},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0),u.type==="iTextarea"?(e(),_(v,{key:1,name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[l(g,{value:o[u.name],"onUpdate:value":L=>o[u.name]=L,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):r("",!0),u.type==="iSelectWrite"?(e(),_(v,{key:2,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:n(()=>[u.name=="tema_compoment"?(e(),_(I,{key:0,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:R.value,"filter-option":A},null,8,["value","onUpdate:value","options"])):r("",!0),u.name=="department"?(e(),_(I,{key:1,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:q.value,"filter-option":A,onChange:$},null,8,["value","onUpdate:value","options"])):r("",!0),u.name=="province"?(e(),_(I,{key:2,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:c.value,"filter-option":A,onChange:G},null,8,["value","onUpdate:value","options"])):r("",!0),u.name=="district"?(e(),_(I,{key:3,value:o[u.name],"onUpdate:value":L=>o[u.name]=L,"show-search":"",options:N.value,"filter-option":A},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),l(v,null,{default:n(()=>[l(C,{type:"primary","html-type":"submit",loading:w.value},{default:n(()=>[H("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},va=X(_a,[["__scopeId","data-v-65b67094"]]);const fa={key:0},ya={key:1},ga={key:2},ha={key:0},ba={key:1,class:"steps"},wa={style:{"text-align":"right"}},ka={key:0},Sa={key:1},xa={key:3},Ua={__name:"AsesoriasHistorial",props:["info"],setup(U){const y=U,S=h("1"),m=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"},{title:"Registrado por",dataIndex:"asesor_create"},{title:"Último asesor atendido",dataIndex:"asesor_update"}],D=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"detalle"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],j=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],q=R=>be.find(w=>w.value===R).label,c=R=>he.find(w=>w.value===R).label,N=R=>we.find(w=>w.value===R).label;return(R,w)=>{const o=p("a-empty"),A=p("a-table"),F=p("a-card"),s=p("a-tab-pane"),k=p("a-progress"),$=p("a-space"),G=p("a-tabs");return e(),_(G,{activeKey:S.value,"onUpdate:activeKey":w[0]||(w[0]=E=>S.value=E),type:"card",class:"box-hist"},{default:n(()=>[l(s,{key:"1",tab:"ASESORÍAS"},{default:n(()=>[l(F,null,{default:n(()=>{var E,d,a;return[((E=y.info[0])==null?void 0:E.adv.length)==0?(e(),_(o,{key:0})):r("",!0),((d=y.info[0])==null?void 0:d.adv.length)>=1?(e(),_(A,{key:1,columns:j,"data-source":(a=y.info[0])==null?void 0:a.adv,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:v,record:g})=>[v.dataIndex==="idx"?(e(),x("span",fa,O(I+1),1)):r("",!0),v.dataIndex==="component"?(e(),x("span",ya,O(N(g.component)),1)):r("",!0),v.dataIndex==="modality"?(e(),x("span",ga,O(g.modality==1?"Virtual":"Presencial"),1)):r("",!0)]),_:1},8,["data-source"])):r("",!0)]}),_:1})]),_:1}),l(s,{key:"2",tab:"RUC 20"},{default:n(()=>[l(F,null,{default:n(()=>{var E,d,a;return[((E=y.info[0])==null?void 0:E.ruc20.length)==0?(e(),_(o,{key:0})):r("",!0),((d=y.info[0])==null?void 0:d.ruc20.length)>=1?(e(),_(A,{key:1,columns:m,"data-source":(a=y.info[0])==null?void 0:a.ruc20,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:v,record:g})=>[v.dataIndex==="idx"?(e(),x("span",ha,O(I+1),1)):r("",!0),v.dataIndex==="progress"?(e(),x("div",ba,[i("span",wa,O(g.step==1?"Reserva de nombre":g.step==2?"Proceso de notaría":"Formalizado"),1),l($,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[l(k,{percent:g.step*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):r("",!0),v.dataIndex==="sector"?(e(),x(Y,{key:2},[i("div",null,O(q(g.sector)),1),i("div",null,O(g.category),1)],64)):r("",!0)]),_:1},8,["data-source"])):r("",!0)]}),_:1})]),_:1}),l(s,{key:"3",tab:"RUC 10"},{default:n(()=>[l(F,null,{default:n(()=>{var E,d,a;return[((E=y.info[0])==null?void 0:E.ruc10.length)==0?(e(),_(o,{key:0})):r("",!0),((d=y.info[0])==null?void 0:d.ruc10.length)>=1?(e(),_(A,{key:1,columns:D,"data-source":(a=y.info[0])==null?void 0:a.ruc10,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:I,column:v,record:g})=>[v.dataIndex==="idx"?(e(),x("span",ka,O(I+1),1)):r("",!0),v.dataIndex==="detalle"?(e(),x("span",Sa,O(c(g.detail_procedure)),1)):r("",!0),v.dataIndex==="sector"?(e(),x(Y,{key:2},[i("div",null,O(q(g.economy_sector)),1),i("div",null,O(g.category),1)],64)):r("",!0),v.dataIndex==="modality"?(e(),x("span",xa,O(g.modality==1?"Virtual":"Presencial"),1)):r("",!0)]),_:1},8,["data-source"])):r("",!0)]}),_:1})]),_:1})]),_:1},8,["activeKey"])}}},Ia=X(Ua,[["__scopeId","data-v-dc6fa541"]]);const P=U=>(He("data-v-5b2e7ac6"),U=U(),Ye(),U),Ra={class:"asesorias"},Aa=P(()=>i("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),Da=P(()=>i("br",null,null,-1)),Ca={class:"wrapper-s"},$a=P(()=>i("label",{class:"label"},"Seleccione el tipo de documento",-1)),Oa=P(()=>i("label",{class:"label"},"Digite el número de documento",-1)),Ea={class:"column-2"},Fa={class:"info-update"},Ta=P(()=>i("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),za={class:"info-personal"},qa=P(()=>i("span",null,"Apellidos y nombres: ",-1)),Na=P(()=>i("span",null,"Número de celular:",-1)),Pa=P(()=>i("span",null,"Correo electrónico:",-1)),Ga=P(()=>i("span",null,"Asesorías:",-1)),La=P(()=>i("span",null,"Formalizaciones RUC 20:",-1)),Ma={class:"alert-incomplete"},Va={key:0,class:"alert"},Ba={class:"small"},ja=P(()=>i("span",null,"Formalizaciones RUC 10:",-1)),Ha=P(()=>i("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Ya={class:"card-as-btn"},Ja=P(()=>i("h4",null,"HISTORIAL",-1)),Wa={class:"steps-content"},Ka=["onClick"],Qa={key:0,class:"info-tag"},Xa=P(()=>i("b",null,"Paso",-1)),Za={key:1,class:"info-tag"},et=P(()=>i("b",null,"Siguiente paso",-1)),at={key:2,class:"info-tag"},tt=P(()=>i("b",null,"Siguiente paso",-1)),ot={class:"info"},nt=P(()=>i("b",null,"Código SID SUNARP",-1)),lt=P(()=>i("b",null,"Última consulta",-1)),st=P(()=>i("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),rt=[st],it={__name:"AsesoriasFormalizaciones",setup(U){const y=Me(),S=Ve(),m=h(1),D=h(),j=h([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),q=h(!1),c=h(!1),N=h(!1),R=h(!1),w=h(!1),o=h(!1),A=h(!1),F=h(!1),s=h(""),k=h([]),$=h(!1),G=h(0),E=h(!1),d=h([]),a=t=>Je(t).format("DD/MM/YYYY HH:mm A"),I=()=>{g()},v=()=>{s.value=s.value.replace(/\D/g,"")},g=()=>{s.value="",k.value=[],d.value=[],y.push({name:"asesorias-formalizaciones"})},C=()=>{if(!D.value)return M.warning("Selecciona un tipo de servicio");D.value=="asesoria"&&(F.value=!0),D.value=="ruc10"&&(A.value=!0),D.value=="ruc20"&&W()},T=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],u=()=>{const t={rol:"solicitante",access:3,dni:s.value,type:"asesoria",typedoc:m.value==1?"dni":"ce"};y.push({name:"actualizar-persona",query:t})},W=async()=>{try{if(c.value={id:k.value.id,dni:k.value.number_document},E.value=!0,w.value)return R.value=!0;const{data:t}=await B({url:`/my-formalizations20/${k.value.number_document}`,method:"GET"});if(t.length>=1){w.value=t,R.value=!0;return}o.value=!0}catch(t){console.log(t)}finally{E.value=!1}},L=async t=>{q.value=!0;try{const{data:f}=await B({url:`find-formalization20/${t}`,method:"GET"});G.value=f.step,R.value=!1,o.value=!0,N.value=f}catch(f){console.log(f)}finally{q.value=!1}},Z=async t=>{d.value=[];try{const f=await B({url:`/historial-formalization/${t.number_document}/${t.id}`,method:"GET"});d.value=[...d.value,f]}catch(f){console.log(f)}},J=async()=>{if(w.value=!1,G.value=0,m.value==1&&s.value.length<8)return M.warning("El número a buscar es incorrecto");$.value=!0;try{const t=await B({url:`/applicant-new/${s.value}`,method:"GET"});if(t.status==205){const f={rol:"solicitante",access:3,dni:s.value};y.push({name:"registrar-persona",query:f})}else k.value=t,Z(t)}catch(t){console.log("You have an error",t)}finally{$.value=!1}},le=async()=>{S.query.typedoc=="ce"?m.value=2:m.value=1;const t=await B({url:`/applicant-new/${S.query.dni}`,method:"GET"});s.value=t.number_document,k.value=t,await Z(t)};return ne(()=>{S.query.dni&&le()}),(t,f)=>{const z=p("a-radio"),se=p("a-radio-group"),Se=p("a-input-search"),ae=p("a-card"),xe=p("a-select"),Ue=p("a-button"),Ie=p("a-step"),Re=p("a-steps"),re=p("a-drawer"),ie=p("a-tag"),Ae=p("a-spin"),De=p("a-modal");return e(),x(Y,null,[i("div",Ra,[Aa,Da,l(ae,{class:"card-as"},{default:n(()=>[V(S).query.dni?(e(),_(V(Xe),{key:0,class:"ico-reload",onClick:I})):r("",!0),i("div",Ca,[i("div",null,[$a,l(se,{value:m.value,"onUpdate:value":f[0]||(f[0]=b=>m.value=b),onChange:g},{default:n(()=>[l(z,{value:1},{default:n(()=>[H("DNI")]),_:1}),l(z,{value:2},{default:n(()=>[H("CE")]),_:1})]),_:1},8,["value"])]),i("div",null,[Oa,l(Se,{"enter-button":"BUSCAR",value:s.value,"onUpdate:value":f[1]||(f[1]=b=>s.value=b),placeholder:"",loading:$.value,onSearch:J,onInput:v,maxlength:m.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),i("div",Ea,[k.value.length!=0?(e(),_(ae,{key:0,class:"card-as"},{default:n(()=>{var b,te,ue,pe,me,_e,ve,fe;return[i("div",Fa,[Ta,l(V(Be),{class:"ico-edit",onClick:u})]),i("div",za,[qa,i("span",null,O(k.value.last_name)+" "+O(k.value.middle_name)+", "+O(k.value.name),1),Na,i("span",null,[i("span",null,O(k.value.phone?k.value.phone:"-"),1)]),Pa,i("span",null,O(k.value.email?k.value.email:"-"),1),Ga,i("b",null,O((b=d.value[0])!=null&&b.adv?(te=d.value[0])==null?void 0:te.adv.length:""),1),La,i("div",Ma,[i("b",null,O((ue=d.value[0])!=null&&ue.ruc20?(pe=d.value[0])==null?void 0:pe.ruc20.length:""),1),((me=d.value[0])==null?void 0:me.ruc20.filter(ee=>ee.step===1||ee.step===2).length)>=1?(e(),x("span",Va,[l(V(je)),i("span",Ba,"Tienes "+O((_e=d.value[0])==null?void 0:_e.ruc20.filter(ee=>ee.step===1||ee.step===2).length)+" procesos pendientes",1)])):r("",!0)]),ja,i("b",null,O((ve=d.value[0])!=null&&ve.ruc10?(fe=d.value[0])==null?void 0:fe.ruc10.length:""),1)])]}),_:1})):r("",!0),k.value.length!=0?(e(),_(ae,{key:1,class:"card-as"},{default:n(()=>[Ha,i("div",Ya,[l(xe,{style:{"min-width":"200px"},value:D.value,"onUpdate:value":f[2]||(f[2]=b=>D.value=b),options:j.value},null,8,["value","options"]),l(Ue,{type:"primary",onClick:C},{default:n(()=>[H("REGISTRAR")]),_:1})])]),_:1})):r("",!0)]),k.value.length!=0?(e(),_(ae,{key:0,class:"card-as"},{default:n(()=>[Ja,l(Ia,{info:d.value},null,8,["info"])]),_:1})):r("",!0)]),i("section",null,[l(re,{width:"510",title:"Formalización con RUC 20",open:o.value,"onUpdate:open":f[6]||(f[6]=b=>o.value=b),placement:"right"},{default:n(()=>[l(Re,{current:G.value,size:"small",class:"steps"},{default:n(()=>[(e(),x(Y,null,Q(T,b=>l(Ie,{key:b.title,title:b.title},null,8,["title"])),64))]),_:1},8,["current"]),i("div",Wa,[G.value==0?(e(),_(Fe,{key:0,info:c.value,onCloseDraw:f[3]||(f[3]=b=>(o.value=!1,w.value=!1,J()))},null,8,["info"])):r("",!0),G.value==1?(e(),_(ta,{key:1,info:N.value,onCloseDraw:f[4]||(f[4]=b=>(o.value=!1,w.value=!1,J()))},null,8,["info"])):r("",!0),G.value==2?(e(),_(ra,{key:2,info:N.value,onCloseDraw:f[5]||(f[5]=b=>(o.value=!1,w.value=!1,J()))},null,8,["info"])):r("",!0)])]),_:1},8,["open"]),l(re,{title:"Formalización con RUC 10",open:A.value,"onUpdate:open":f[8]||(f[8]=b=>A.value=b),placement:"right"},{default:n(()=>[l(da,{info:k.value,onCloseDraw:f[7]||(f[7]=b=>(A.value=!1,J()))},null,8,["info"])]),_:1},8,["open"]),l(re,{title:"Nueva asesoría",open:F.value,"onUpdate:open":f[10]||(f[10]=b=>F.value=b),placement:"right"},{default:n(()=>[l(va,{info:k.value,onCloseDraw:f[9]||(f[9]=b=>(F.value=!1,J()))},null,8,["info"])]),_:1},8,["open"]),l(De,{open:R.value,"onUpdate:open":f[12]||(f[12]=b=>R.value=b),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:n(()=>[l(Ae,{spinning:q.value},{default:n(()=>[(e(!0),x(Y,null,Q(w.value,(b,te)=>(e(),x("div",{key:te,class:"pendient",onClick:ue=>L(b.id)},[b.step==0?(e(),x("div",Qa,[Xa,H(),l(ie,{color:"error"},{default:n(()=>[H("Reserva de nombre")]),_:1})])):r("",!0),b.step==1?(e(),x("div",Za,[et,H(),l(ie,{color:"warning"},{default:n(()=>[H("Acto constitutivo")]),_:1})])):r("",!0),b.step==2?(e(),x("div",at,[tt,H(),l(ie,{color:"success"},{default:n(()=>[H("Formalizar")]),_:1})])):r("",!0),i("div",ot,[nt,i("span",null,O(b.code_sid_sunarp),1),lt,i("span",null,O(a(b.updated_at)),1)])],8,Ka))),128)),i("div",{class:"pendient pendient-btn",onClick:f[11]||(f[11]=b=>(o.value=!0,R.value=!1,G.value=0))},rt)]),_:1},8,["spinning"])]),_:1},8,["open"])])],64)}}},mt=X(it,[["__scopeId","data-v-5b2e7ac6"]]);export{mt as default};
