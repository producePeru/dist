import{r as t,u as le,y as se,I as ie,k as de,b as r,o as l,d,e as _,c as s,h as b,w as c,F as u,B as S,i as m,t as p,s as i,q as F,R as re,J as ce,S as ue,p as pe,j as me,m as _e}from"./index-257602e5.js";import{u as ve}from"./selectes-1c1d7496.js";/* empty css                                                      */import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import{S as fe}from"./DrawerSolicitante.componente-1ec6c4d1.js";import{M as ge}from"./MoreOutlined-24bf899b.js";import"./es-ed83daf4.js";const U=f=>(pe("data-v-20320c0d"),f=f(),me(),f),xe=U(()=>_("h3",null,"SOLICITUDES DE FORMALIZACIÓN DIGITAL",-1)),we={class:"filters-dig"},Ie=["onClick"],ye=["onClick"],ke=["onClick"],Ce=U(()=>_("a",null,"Quitar de la lista",-1)),be={class:"paginator"},R=20,Se={__name:"SolicitudesLista",setup(f){const g=ve();g.$patch({cdes:g.cdes}),g.fetchCdes();const x=t(!1),z=t(null);t(!1),t(!1),t(!1),t(0),t(!1);const E=t(!1);t(!1),t("solicitante"),t(5);const D=t([]),I=t(!1),N=t(0),V=le(),w=t({page:1});t("");const y=t("formalization/digital-list");t([]);const A=t(null),B=t(1200),L=t(window.innerHeight-100),k=()=>{L.value=window.innerHeight-300};se(()=>{window.removeEventListener("resize",k)});const T=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"Apellidos",dataIndex:"lastName",fixed:"left",width:150},{title:"Nombres",dataIndex:"name",fixed:"left",width:150},{title:"DNI",dataIndex:"number_document",align:"center",width:90},{title:"Departamento",dataIndex:"department",width:140},{title:"Provincia",dataIndex:"province",width:140},{title:"Distrito",dataIndex:"district",width:140},{title:"CDE Atención",dataIndex:"gps_name",width:140},{title:"Celular",dataIndex:"phone",width:100},{title:"Correo",dataIndex:"email",width:200},{title:"Atendido",dataIndex:"statu",align:"center",width:100},{title:"Reserva de nombre",dataIndex:"reserva",align:"center",width:160},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],M=e=>{z.value=e.people,x.value=!0},O=()=>{v(),x.value=!1},P=t([{value:1,label:"Aprobado"},{value:2,label:"Desaprobado"},{value:3,label:"Pendiente"}]),q=e=>{w.value.page=e,v()},H=async e=>{const a={type:e.people.typedocument_id,number:e.people.documentnumber,formalizaciondigital:e.id};V.push({name:"asesorias-formalizaciones",query:a})},G=e=>{if(e!=1e3){y.value=`/formalization-digital?department=${e}`,v();return}y.value="/formalization-digital",v()},Q=async e=>{const a={booking:e};await S({url:`/formalization-digital-status/${E.value.number_document}`,method:"PATCH",data:a})},j=e=>{E.value=e},J=async e=>{try{const a=await S({url:`formalization/delete/${e.id}`,method:"DELETE"});a.status==200&&(v(),_e.success(a.message))}catch(a){console.error("Error de red:",a)}},v=async()=>{try{I.value=!0;let e=w.value.page==1?"":w.value;const{data:a}=await S({url:y.value,method:"GET",params:e});D.value=a.data,N.value=a.total}catch(e){console.error("Error de red:",e)}finally{I.value=!1}},X=ie(()=>e=>(w.value.page-1)*R+e+1);return de(()=>{v(),window.addEventListener("resize",k),k()}),(e,a)=>{const $=r("a-select"),Y=r("a-checkbox"),Z=r("a-button"),C=r("a-menu-item"),K=r("a-popconfirm"),W=r("a-menu"),ee=r("a-dropdown"),te=r("a-table"),ae=r("a-pagination"),ne=r("a-drawer");return l(),d(u,null,[_("div",null,[xe,_("div",we,[s($,{value:A.value,"onUpdate:value":a[0]||(a[0]=o=>A.value=o),placeholder:"Filtrar por CDES",options:b(g).cdes,onChange:G},null,8,["value","options"])]),s(te,{bordered:"",scroll:{x:B.value,y:L.value},class:"ant-table-striped",columns:T,"data-source":D.value,pagination:!1,loading:I.value,size:"small"},{bodyCell:c(({column:o,record:n,index:oe})=>[o.dataIndex=="idx"?(l(),d(u,{key:0},[m(p(X.value(oe)),1)],64)):i("",!0),o.dataIndex=="lastName"?(l(),d(u,{key:1},[m(p(n.people.lastname)+" "+p(n.people.middle),1)],64)):i("",!0),o.dataIndex=="name"?(l(),d(u,{key:2},[m(p(n.people.name),1)],64)):i("",!0),o.dataIndex=="number_document"?(l(),d(u,{key:3},[m(p(n.people.documentnumber),1)],64)):i("",!0),o.dataIndex=="department"?(l(),d(u,{key:4},[m(p(n.people.city.name),1)],64)):i("",!0),o.dataIndex=="province"?(l(),d(u,{key:5},[m(p(n.people.province.name),1)],64)):i("",!0),o.dataIndex=="district"?(l(),d(u,{key:6},[m(p(n.people.district.name),1)],64)):i("",!0),o.dataIndex=="phone"?(l(),d(u,{key:7},[m(p(n.people.phone),1)],64)):i("",!0),o.dataIndex=="email"?(l(),d(u,{key:8},[m(p(n.people.email),1)],64)):i("",!0),o.dataIndex=="statu"?(l(),F(Y,{key:9,checked:n.attended!=0,disabled:""},null,8,["checked"])):i("",!0),o.dataIndex=="reserva"?(l(),d("div",{key:10,onClick:h=>j(n)},[s($,{disabled:n.attended==0,value:n.status,"onUpdate:value":h=>n.status=h,placeholder:"Escoger el proceso",style:{width:"90%"},options:P.value,onChange:Q},null,8,["disabled","value","onUpdate:value","options"])],8,Ie)):i("",!0),o.dataIndex=="actions"?(l(),F(ee,{key:11,trigger:["click"]},{overlay:c(()=>[s(W,null,{default:c(()=>[s(C,null,{default:c(()=>[_("a",{onClick:h=>H(n)},"Formalizar",8,ye)]),_:2},1024),s(C,null,{default:c(()=>[_("a",{onClick:h=>M(n)},"Editar datos",8,ke)]),_:2},1024),s(C,null,{default:c(()=>[s(K,{title:"¿Eliminar?",onConfirm:h=>J(n)},{icon:c(()=>[s(b(re),{style:{color:"red"}})]),default:c(()=>[Ce]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:c(()=>[_("a",{class:"ant-dropdown-link",onClick:a[1]||(a[1]=ce(()=>{},["prevent"]))},[s(Z,{shape:"circle",icon:ue(b(ge)),size:"small"},null,8,["icon"])])]),_:2},1024)):i("",!0)]),_:1},8,["scroll","data-source","loading"])]),_("div",be,[s(ae,{size:"small",total:N.value,pageSize:R,onChange:q,showSizeChanger:!1},null,8,["total"])]),s(ne,{open:x.value,"onUpdate:open":a[2]||(a[2]=o=>x.value=o),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:c(()=>[s(fe,{onCloseDraw:O,updateValues:z.value},null,8,["updateValues"])]),_:1},8,["open"])],64)}}},Fe=he(Se,[["__scopeId","data-v-20320c0d"]]);export{Fe as default};
