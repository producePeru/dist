import{r as e,u as ae,L as te,E as ne,k as oe,b as r,o as l,d,e as f,c as s,w as _,F as u,m as M,i as p,t as i,s as c,q as le,h as O,R as se,G as ie,S as re,p as de,j as ue,g as ce}from"./index-3e84d68c.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";import{M as me}from"./MoreOutlined-9a866f09.js";const V=h=>(de("data-v-b7a7b70a"),h=h(),ue(),h),_e=V(()=>f("h3",null,"USUARIOS",-1)),fe={class:"filters-dig"},ve=V(()=>f("a",null,"Eliminar",-1)),he={class:"paginator"},R=20,ge={__name:"ListaUsuarios",setup(h){e(!1),e(!1),e(!1),e(0),e(!1),e(!1),e(!1),e("solicitante"),e(5);const k=e([]),I=e(!1),S=e(0);ae();const g=e({page:1}),x=e(""),v=e("user/list"),$=e([]),C=e(null),T=e(1200),z=e(window.innerHeight-100),b=()=>{z.value=window.innerHeight-300};te(()=>{window.removeEventListener("resize",b)});const q=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"DNI",dataIndex:"documentnumber",fixed:"left",width:100},{title:"Nombres",dataIndex:"name",fixed:"left",width:120},{title:"Apellidos",dataIndex:"lastname",fixed:"left",width:120},{title:"Celular",dataIndex:"email",width:180},{title:"Correo",dataIndex:"phone",width:180,align:"center"},{title:"Oficina",dataIndex:"office",width:140},{title:"CDE",dataIndex:"cde",width:140},{title:"",dataIndex:"actions",align:"center",width:50}];e([{value:1,label:"Aprobado"},{value:2,label:"Desaprobado"},{value:3,label:"Pendiente"}]);const G=a=>{g.value.page=a,m()},H=a=>{if(a!=1e3){v.value=`/formalization-digital?department=${a}`,m();return}v.value="/formalization-digital",m()},P=()=>{if(x.value){v.value=`/formalization-digital?search=${x.value}`,m();return}v.value="/formalization-digital",m()},j=async a=>{try{const n=await M({url:`user/delete/${a.id}`,method:"DELETE"});n&&(m(),ce.success(n.message))}catch(n){console.error("Error de red:",n)}},m=async()=>{try{I.value=!0;let a=g.value.page==1?"":g.value;const w=(await M({url:v.value,method:"GET",params:a})).data.filter(y=>y!==null);k.value=w,S.value=w.length}catch(a){console.error("Error de red:",a)}finally{I.value=!1}},Q=ne(()=>a=>(g.value.page-1)*R+a+1);return oe(()=>{m(),window.addEventListener("resize",b),b()}),(a,n)=>{const w=r("a-select"),y=r("a-input-search"),X=r("a-button"),E=r("a-menu-item"),Y=r("a-popconfirm"),J=r("a-menu"),K=r("a-dropdown"),W=r("a-table"),Z=r("a-pagination");return l(),d(u,null,[f("div",null,[_e,f("div",fe,[s(w,{value:C.value,"onUpdate:value":n[0]||(n[0]=t=>C.value=t),placeholder:"Filtrar por CDES",options:$.value,onChange:H},null,8,["value","options"]),s(y,{value:x.value,"onUpdate:value":n[1]||(n[1]=t=>x.value=t),placeholder:"","enter-button":"Buscar",onSearch:P},null,8,["value"])]),s(W,{bordered:"",scroll:{x:T.value,y:z.value},class:"ant-table-striped",columns:q,"data-source":k.value,pagination:!1,loading:I.value,size:"small"},{bodyCell:_(({column:t,record:o,index:ee})=>{var U,D,L,N,B,A,F;return[t.dataIndex=="idx"?(l(),d(u,{key:0},[p(i(Q.value(ee)),1)],64)):c("",!0),t.dataIndex=="lastName"?(l(),d(u,{key:1},[p(i(o.last_name)+" "+i(o.middle_name),1)],64)):c("",!0),t.dataIndex=="documentnumber"?(l(),d(u,{key:2},[p(i((U=o.profile)==null?void 0:U.documentnumber),1)],64)):c("",!0),t.dataIndex=="name"?(l(),d(u,{key:3},[p(i((D=o.profile)==null?void 0:D.name),1)],64)):c("",!0),t.dataIndex=="lastname"?(l(),d(u,{key:4},[p(i((L=o.profile)==null?void 0:L.lastname)+" "+i((N=o.profile)==null?void 0:N.middlename),1)],64)):c("",!0),t.dataIndex=="phone"?(l(),d(u,{key:5},[p(i((B=o.profile)==null?void 0:B.phone),1)],64)):c("",!0),t.dataIndex=="office"?(l(),d(u,{key:6},[p(i((A=o.profile)==null?void 0:A.office.name),1)],64)):c("",!0),t.dataIndex=="cde"?(l(),d(u,{key:7},[p(i((F=o.profile)==null?void 0:F.cde.name),1)],64)):c("",!0),t.dataIndex=="actions"?(l(),le(K,{key:8,trigger:["click"]},{overlay:_(()=>[s(J,null,{default:_(()=>[s(E),s(E,null,{default:_(()=>[s(Y,{title:"Â¿Seguro de eliminar?",onConfirm:xe=>j(o)},{icon:_(()=>[s(O(se),{style:{color:"red"}})]),default:_(()=>[ve]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:_(()=>[f("a",{class:"ant-dropdown-link",onClick:n[2]||(n[2]=ie(()=>{},["prevent"]))},[s(X,{shape:"circle",icon:re(O(me)),size:"small"},null,8,["icon"])])]),_:2},1024)):c("",!0)]}),_:1},8,["scroll","data-source","loading"])]),f("div",he,[s(Z,{size:"small",total:S.value,pageSize:R,onChange:G,showSizeChanger:!1},null,8,["total"])])],64)}}},ye=pe(ge,[["__scopeId","data-v-b7a7b70a"]]);export{ye as default};
