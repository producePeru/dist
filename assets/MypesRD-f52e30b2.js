import{c as u,A as $,i as c,I as z,n as q,a as _,o as n,b as h,g as v,j as i,w as e,d as w,s as d,F as I,L as H,K as Y,m as G,q as X,e as r,l as J}from"./index-2e532d04.js";import{M as Q}from"./MoreOutlined-04b1ff0f.js";var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Z=W;function D(s){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?Object(arguments[o]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable}))),l.forEach(function(f){K(s,f,a[f])})}return s}function K(s,o,a){return o in s?Object.defineProperty(s,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[o]=a,s}var O=function(o,a){var l=D({},o,a.attrs);return u($,D({},l,{icon:Z}),null)};O.displayName="UploadOutlined";O.inheritAttrs=!1;const ee=O;const te=v("h3",null,"Lista de MYPES",-1),ae={class:"w-search"},ne={class:"paginator"},oe={key:0,class:"full-spin"},ie={__name:"MypesRD",setup(s){const o="http://localhost/api/public/api",a=c(!1),l=c(null),f=c([]),y=c(!1),U=c(1e3),M=c("60vh");c("");const C=c(0),A=z(H,{style:{fontSize:"40px"},spin:!0}),E=c({page:1}),P=[{title:"RUC",dataIndex:"ruc",fixed:"left",width:130},{title:"Razón social",dataIndex:"razon_social",fixed:"left",width:180},{title:"Rubro",dataIndex:"rubro",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center"},{title:"Departamento",dataIndex:"departamento",width:140},{title:"Distrito",dataIndex:"distrito",align:"center"},{title:"Nombres y Apellidos",dataIndex:"nombres_apellidos",align:"center",width:220},{title:"DNI",dataIndex:"dni",align:"center",width:100},{title:"Sexo",dataIndex:"sexo",align:"center",width:130},{title:"Teléfono",dataIndex:"telefono",align:"center"},{title:"Email",dataIndex:"email",align:"center"}],V=t=>{E.value.page=t,x()},j=()=>{let t=document.createElement("input");t.type="file",t.accept=".xls, .xlsx",t.onchange=p=>{l.value=p.target.files[0]},t.click()},N=()=>{if(!l.value){alert("Por favor selecciona un archivo Excel.");return}a.value=!0;const t=new FormData;t.append("file",l.value),Y.post(`${o}/digital-route/load-excel`,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then(p=>{G.success(p.message),x()}).catch(p=>{console.error("Error al subir el archivo",p)}).finally(()=>{a.value=!1,l.value=null})},x=async()=>{try{y.value=!0;const t=await X({url:"/digital-route/data-excel",method:"GET",params:E.value});f.value=t.data,C.value=t.total}catch(t){console.error("Error de red:",t)}finally{y.value=!1}};return q(x),(t,p)=>{const b=_("a-button"),m=_("a-tag"),S=_("a-menu-item"),R=_("a-menu"),B=_("a-dropdown"),T=_("a-table"),F=_("a-pagination"),L=_("a-spin");return n(),h(I,null,[v("div",null,[te,v("div",ae,[v("div",null,[l.value?(n(),i(b,{key:1,onClick:N,type:"primary"},{default:e(()=>[r("Cargar datos")]),_:1})):(n(),i(b,{key:0,onClick:j},{icon:e(()=>[u(w(ee))]),default:e(()=>[r(" Seleccionar archivo excel ")]),_:1}))])]),u(T,{bordered:"",class:"ant-table-striped",scroll:{x:U.value,y:M.value},columns:P,"data-source":f.value,pagination:!1,loading:y.value,size:"small"},{bodyCell:e(({column:k,record:g})=>[k.dataIndex=="tipo_usuario"?(n(),h(I,{key:0},[g.tipo_usuario===1?(n(),i(m,{key:0,bordered:!1,color:"processing"},{default:e(()=>[r("Administrador")]),_:1})):d("",!0),g.tipo_usuario===2?(n(),i(m,{key:1,bordered:!1,color:"magenta"},{default:e(()=>[r("Común")]),_:1})):d("",!0),g.tipo_usuario===3?(n(),i(m,{key:2,bordered:!1,color:"purple"},{default:e(()=>[r("3")]),_:1})):d("",!0),g.tipo_usuario===4?(n(),i(m,{key:3,bordered:!1,color:"warning"},{default:e(()=>[r("4")]),_:1})):d("",!0),g.tipo_usuario===5?(n(),i(m,{key:4,bordered:!1,color:"cyan"},{default:e(()=>[r("5")]),_:1})):d("",!0)],64)):d("",!0),k.dataIndex=="estado"?(n(),h(I,{key:1},[g.estado===1?(n(),i(m,{key:0,color:"success"},{default:e(()=>[r("Activo")]),_:1})):(n(),i(m,{key:1,color:"error"},{default:e(()=>[r("Inactivo")]),_:1}))],64)):d("",!0),k.dataIndex=="actions"?(n(),i(B,{key:2,trigger:["click"]},{overlay:e(()=>[u(R,null,{default:e(()=>[u(S,{key:"1"},{default:e(()=>[r("Editar")]),_:1}),u(S,{key:"2"},{default:e(()=>[r("Dar de baja / Activar")]),_:1})]),_:1})]),default:e(()=>[u(b,{onClick:p[0]||(p[0]=J(()=>{},["prevent"])),shape:"circle",size:"small",icon:z(w(Q))},null,8,["icon"])]),_:1})):d("",!0)]),_:1},8,["scroll","data-source","loading"])]),v("div",ne,[u(F,{size:"small",total:C.value,pageSize:50,onChange:V,showSizeChanger:!1},null,8,["total"])]),a.value?(n(),h("div",oe,[u(L,{indicator:w(A),spinning:a.value},null,8,["indicator","spinning"])])):d("",!0)],64)}}};export{ie as default};
