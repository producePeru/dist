import{c as o,A as oe,l as g,r,a as W,j as X,T as re,a5 as J,o as m,d as p,K as ie,p as de,b as C,e as t,t as c,w as S,h as y,L as ue,f as Z,F as ce,q as me,s as P,ag as pe,i as U,v as ve,x as A,y as fe,z as _e}from"./index-62266265.js";import"./es-b43b0347.js";import{_ as he}from"./DrawResultados-aa3054c4.js";import{_ as ye}from"./FormComponent-a20f2163.js";import{u as ge}from"./selectes-b886f1d3.js";import{F as be,C as Ee}from"./FilterOutlined-74c2cde4.js";import{H as Oe}from"./HomeOutlined-87e86545.js";import{E as Ce}from"./EnvironmentOutlined-1b73e26f.js";import{T as Se}from"./TeamOutlined-9d0227f7.js";import{U as De}from"./UserOutlined-79d63a96.js";/* empty css             */import"./quill.snow-7427a127.js";var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};const Ae=Me;function Q(f){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?Object(arguments[u]):{},b=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(l).filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable}))),b.forEach(function(v){ke(f,v,l[v])})}return f}function ke(f,u,l){return u in f?Object.defineProperty(f,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):f[u]=l,f}var B=function(u,l){var b=Q({},u,l.attrs);return o(oe,Q({},b,{icon:Ae}),null)};B.displayName="FormOutlined";B.inheritAttrs=!1;const we=B;const Te={class:"f-20"},Ne={__name:"EventosObservaciones",props:["info"],emits:["closeDraw"],setup(f,{emit:u}){g.locale("es");const l=r({obs_id:{type:"iSelect",label:"TIPO DE OBSERVACIÓN",name:"obs_id",required:!0,message:"Seleccionar una opción",disabled:!1}});JSON.parse(localStorage.getItem("profile"));const b=u,v=f,k=r("ACTUALIZAR"),i=W({}),D=r(!1);ge();const n=r(null),w=r({obs_id:[]}),N=d=>{console.log("handleInputEvent",d)},H=async d=>{d=="dateReception"&&(i.dateTramite&&(i.dateTramite=null),l.value.dateTramite.disabled=!1)},Y=async d=>{d=="obs_id"&&(delete l.value.rescheduled,delete l.value.date,delete l.value.hours,delete l.value.canceled,i.obs_id===1?l.value.canceled={type:"iTextArea",label:"ESCRIBIR MOTIVO DE LA CANCELACIÓN",name:"canceled",required:!0,message:"Escribir el motivo",rows:5}:i.obs_id===2&&(l.value.date={type:"iDatePicker",label:"SELECCIONAR FECHA DEL EVENTO",name:"date",message:"Seleccionar una opción"},l.value.hours={type:"iHour",label:"SELECCIONAR HORA DEL EVENTO",name:"hours",message:"Seleccionar la hora",required:!1},l.value.rescheduled={type:"iTextArea",label:"ESCRIBIR MOTIVO DE LA CANCELACIÓN",name:"rescheduled",required:!0,message:"Escribir el motivo",rows:5}))},M=async d=>{d=="obs_id"&&R()},V=d=>{},R=()=>{w.value.obs_id=[{value:1,label:"CANCELADO"},{value:2,label:"REPROGRAMADO"}]},I=async()=>{let d=null;i.obs_id===1?d={canceled:i.canceled}:i.obs_id===2&&(d={dateStart:g(i.date.start).format("YYYY-MM-DD"),dateEnd:g(i.date.end).format("YYYY-MM-DD"),...i.hours?{start:g(i.hours[0]).format("HH:mm"),end:g(i.hours[1]).format("HH:mm")}:{start:null,end:null},rescheduled:i.rescheduled});try{(await ie({url:`event/update-obs/${v.info}`,method:"PUT",data:d})).status===200&&($(),b("closeDraw",!0))}catch(L){console.error("Error:",L);const T=document.getElementsByClassName("ant-drawer-body")[0];T&&(T.scrollTop=0)}finally{D.value=!1}},$=()=>{i.ruc=null},F=async d=>{};return X(()=>{v.info&&F(v.info)}),re(()=>v.info,d=>{d&&F()}),J("formState",i),J("loadingState",D),(d,L)=>(m(),p("div",Te,[o(ye,{fields:l.value,options:w.value,btnSaveName:k.value,onHandleInputEvent:N,resetSelect:n.value,onHandleChangeSelect:Y,onHandleFocusSelect:M,onHandleBlurSelect:V,onHandleChangeClock:H,onOnSubmit:I},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const Re={class:"container-events"},Ie={class:"schedule"},Le={class:"schedule-header"},He={class:"schedule-date"},Ye={class:"schedule-filter"},Ve={key:0,class:"event-time"},Fe={key:1,class:"event-time"},$e={class:"event-hour-2"},xe={class:"ugger-options"},Pe={class:"title"},Ue={class:"event-description"},Be=["onClick"],ze={class:"modal-calendar-detail"},je={style:{"line-height":"1.3","margin-bottom":".5rem"}},qe=["innerHTML"],Ge={key:0},Je={style:{"margin-left":".5rem"}},Ze={key:1},Qe={style:{"margin-left":".5rem"}},We={key:2},Xe={style:{"margin-left":".5rem"}},Ke={style:{"margin-left":".5rem"}},et={key:0},tt={style:{"margin-left":".5rem"}},at={key:3},nt={style:{"margin-left":".5rem"}},st={key:4},lt=["href"],ot={key:5},rt=["innerHTML"],bt={__name:"EventosCalendarioObs",setup(f){g.locale("es");const u=W({value1:["ugo","ugse"]}),l=["ugo","ugse"],b=de(ue,{style:{fontSize:"24px"},spin:!0}),v=r(null),k=r(!1),i=r(null),D=r(!1);r(!1);const n=r(null),w=r(!1),N=r(null),H=r(null),Y=r(new Date),M=r([]),V=r(null),R=r([]),I=r(!1),$=a=>{k.value=!0,v.value=a.id},F=a=>{const e={id:a.id,resultado:a.resultado};i.value=e,D.value=!0},d=a=>{n.value=a,w.value=!0},L=a=>{if(Array.isArray(a)&&a.length>0&&a[0].id){const e=a[0].id;N.value=e,V.value!==e&&(V.value=e,j(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},T=a=>({1:"#808080",2:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",6:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[a],z=a=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[a],K=a=>{if(!Array.isArray(a)||a.length===0)return"";const e=g(a[0]).locale("es").format("DD [de] MMMM"),_=a.length>1?g(a[a.length-1]).locale("es").format("DD [de] MMMM"):null;return _?`Desde: ${e} Hasta: ${_}`:`${e}`},ee=async()=>{N.value&&(await x("nodata"),await j(N.value))},x=async(a={date:g().format("YYYY-MM-DD")},e)=>{I.value=!0;const _=g(a.date).format("YYYY-MM-DD");H.value=g(a.date).format("dddd DD [de] MMMM [de] YYYY"),e!="nodata"&&M.value.length>0&&M.value[0].dates&&(M.value[0].dates=a.date);const E={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let O=[];u.value1.forEach(h=>{E[h]&&O.push(...E[h])}),O=[...new Set(O)];try{const h=await Z({url:`pnte/events-day/${_}`,method:"GET",params:O});h.data&&Array.isArray(h.data)?R.value=h.data:console.warn("⚠️ Respuesta inesperada de la API:",h)}catch(h){console.error("❌ Error al obtener eventos:",h)}finally{I.value=!1}},j=async a=>{try{const e={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let _=[];u.value1.forEach(O=>{e[O]&&_.push(...e[O])}),_=[...new Set(_)];const E=await Z({url:`pnte/dots/${a}`,method:"GET",params:_});E.data&&Array.isArray(E.data)?M.value=[{key:"today",highlight:"",dates:[new Date]},...E.data]:console.warn("⚠️ Respuesta de API inesperada:",E)}catch(e){console.error("❌ Error al obtener eventos:",e)}},te=async()=>{await x()};return X(()=>{te()}),(a,e)=>{const _=C("VCalendar"),E=C("a-checkbox-group"),O=C("a-menu"),h=C("a-dropdown"),ae=C("a-empty"),ne=C("a-spin"),se=C("a-modal"),q=C("a-drawer");return m(),p("section",Re,[e[14]||(e[14]=t("h1",{class:"title-pc"},"CALENDARIO ADMIN PNTE 2025",-1)),t("div",null,[o(_,{ref:"calendar",modelValue:Y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>Y.value=s),attributes:M.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":L,onDayclick:x},null,8,["modelValue","attributes"])]),t("div",Ie,[t("div",Le,[e[7]||(e[7]=t("h4",null,"EVENTOS",-1)),t("span",He,c(H.value),1),o(h,{trigger:["click"]},{overlay:S(()=>[o(O,null,{default:S(()=>[t("div",Ye,[o(E,{value:u.value1,"onUpdate:value":e[1]||(e[1]=s=>u.value1=s),options:l,onChange:ee},null,8,["value"])])]),_:1})]),default:S(()=>[t("span",null,[o(y(be))])]),_:1})]),o(ne,{indicator:y(b),spinning:I.value},{default:S(()=>[R.value.length>0?(m(!0),p(ce,{key:0},me(R.value,(s,le)=>(m(),p("div",{key:le,class:"event"},[s.start?(m(),p("div",Fe,[t("div",null,c(s.start),1),e[9]||(e[9]=t("br",null,null,-1)),t("div",$e,c(s.end),1)])):(m(),p("div",Ve,e[8]||(e[8]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:P({"border-color":T(s.id_pnte)})},[t("small",{class:"schedule-tag",style:P({"background-color":T(s.id_pnte)})},[t("span",null,c(z(s.id_pnte)),1)],4),t("div",xe,[t("span",null,[o(y(pe),{onClick:G=>$(s)},null,8,["onClick"])]),t("span",null,[o(y(we),{onClick:G=>F(s)},null,8,["onClick"])])]),t("div",Pe,c(s.title),1),t("div",Ue,[U(c(s.descriptionparse)+" ",1),t("span",{onClick:G=>d(s),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,Be)])],4)]))),128)):(m(),ve(ae,{key:1,class:"no-events"},{description:S(()=>e[10]||(e[10]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),o(se,{open:w.value,"onUpdate:open":e[2]||(e[2]=s=>w.value=s),title:"",footer:""},{default:S(()=>[t("div",ze,[t("div",null,[t("h3",je,c(n.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:P({"background-color":T(n.value.id_pnte)})},c(z(n.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:n.value.descripionAll},null,8,qe),n.value.organiza?(m(),p("div",Ge,[o(y(Oe)),t("span",Je,c(n.value.organiza),1)])):A("",!0),n.value.gps?(m(),p("div",Ze,[o(y(Ce)),t("span",Qe,c(n.value.gps),1)])):A("",!0),n.value.numMypes?(m(),p("div",We,[t("span",null,[o(y(Se))]),t("span",Xe,c(n.value.numMypes),1)])):A("",!0),t("div",null,[t("div",null,[o(y(fe)),t("span",Ke,c(K(n.value.dates)),1)]),n.value.start?(m(),p("div",et,[o(y(_e)),t("span",tt,c(n.value.start),1),e[11]||(e[11]=U(" - ")),t("span",null,c(n.value.end),1)])):A("",!0)]),n.value.nameUser?(m(),p("div",at,[o(y(De)),t("span",nt,[U(c(n.value.nameUser)+" ",1),e[12]||(e[12]=t("small",null,"(Representante)",-1))])])):A("",!0),n.value.link?(m(),p("div",st,[o(y(Ee)),t("a",{style:{"margin-left":".5rem"},href:n.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,lt)])):A("",!0),n.value.resultado?(m(),p("div",ot,[e[13]||(e[13]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:n.value.resultado},null,8,rt)])):A("",!0)])]),_:1},8,["open"]),o(q,{open:D.value,"onUpdate:open":e[4]||(e[4]=s=>D.value=s),title:"RESULTADOS",placement:"right",width:"550"},{default:S(()=>[o(he,{dataRow:i.value,onCloseDraw:e[3]||(e[3]=s=>{D.value=!1})},null,8,["dataRow"])]),_:1},8,["open"]),o(q,{open:k.value,"onUpdate:open":e[6]||(e[6]=s=>k.value=s),title:"OBSERVACIONES",placement:"right",width:"550"},{default:S(()=>[o(Ne,{info:v.value,onCloseDraw:e[5]||(e[5]=s=>{k.value=!1})},null,8,["info"])]),_:1},8,["open"])])}}};export{bt as default};
