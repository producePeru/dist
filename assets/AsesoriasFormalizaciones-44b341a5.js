import{c as l,A as Ae,r as g,a as te,l as oe,b as _,o as e,d as U,w as n,e as c,F as Y,z as X,i as L,B as v,s,Q as be,j,R as he,h as V,m as M,f as Q,M as Te,N as Ee,S as Fe,g as Oe,t as z,u as Ne,x as $e,T as ze,U as Pe,p as Ge,k as Le,P as Me}from"./index-7bd77afb.js";import{e as de,r as We,m as ce,p as Se,a as we}from"./selects-0fbcf7fc.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Be=Ve;function ge(T){for(var w=1;w<arguments.length;w++){var I=arguments[w]!=null?Object(arguments[w]):{},b=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(I).filter(function(E){return Object.getOwnPropertyDescriptor(I,E).enumerable}))),b.forEach(function(E){He(T,E,I[E])})}return T}function He(T,w,I){return w in T?Object.defineProperty(T,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):T[w]=I,T}var me=function(w,I){var b=ge({},w,I.attrs);return l(Ae,ge({},b,{icon:Be}),null)};me.displayName="RedoOutlined";me.inheritAttrs=!1;const je=me,Ye={code_sid_sunarp:{type:"iText",label:"Código SID sunarp",name:"code_sid_sunarp",required:!0,message:"Escribir apellido",disabled:!1},economy_sector:{type:"iSelect",label:"Sector económico",name:"economy_sector",required:!0,message:"Seleccionar tipo de documento",disabled:!1},category:{type:"iSelectWrite",label:"Actividad comercial",name:"category",required:!0,message:"Seleccionar tipo de documento",disabled:!1},department:{type:"iSelectWrite",label:"Departamento",name:"department",required:!0,message:"Seleccionar departamento",disabled:!1},province:{type:"iSelectWrite",label:"Provincia",name:"province",required:!0,message:"Seleccionar provincia",disabled:!1},district:{type:"iSelectWrite",label:"Distrito",name:"district",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"Dirección del negocio",name:"address",required:!1,message:"Escribir apellido",disabled:!1}},Je={social_reason:{type:"iText",label:"Nombre empresa",name:"social_reason",required:!0,message:"Escribir apellido",disabled:!1},type_regimen:{type:"iSelect",label:"Tipo de régimen societario",name:"type_regimen",required:!0,message:"Seleccionar tipo de documento",disabled:!1},num_notary:{type:"iText",label:"Número de solicitud de envio a Notaría",name:"num_notary",required:!1,message:"Seleccionar departamento",disabled:!1},id_notary:{type:"iSelect",label:"Notaría",name:"id_notary",required:!1,message:"Seleccionar notaría",disabled:!1},modality:{type:"iSelect",label:"Modalidad de atención",name:"modality",required:!1,message:"Seleccionar modalidad",disabled:!1}},Ke={ruc:{type:"iText",label:"Número de RUC",name:"ruc",required:!0,message:"Escribir número de RUC",disabled:!1,max:9,min:9}},Qe={detail_procedure:{type:"iSelect",label:"Detalle del trámite",name:"detail_procedure",required:!0,message:"Escribir número de RUC",disabled:!1},modality:{type:"iSelect",label:"Modalidad de atención",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!1},economy_sector:{type:"iSelect",label:"Sector económico",name:"economy_sector",required:!0,message:"Seleccionar el sector económico",disabled:!1},category:{type:"iSelectWrite",label:"Actividad comercial",name:"category",required:!0,message:"Seleccionar la actividad comercial",disabled:!1},department:{type:"iSelectWrite",label:"Departamento",name:"department",required:!0,message:"Seleccionar departamento",disabled:!1},province:{type:"iSelectWrite",label:"Provincia",name:"province",required:!0,message:"Seleccionar provincia",disabled:!1},district:{type:"iSelectWrite",label:"Distrito",name:"district",required:!0,message:"Seleccionar distrito",disabled:!1}},Ze={component:{type:"iSelect",label:"Componente",name:"component",required:!0,message:"Seleccionar un componente",disabled:!1},tema_compoment:{type:"iSelectWrite",label:"Tema del componente",name:"tema_compoment",required:!0,message:"Seleccionar un tema del componente",disabled:!1},modality:{type:"iSelect",label:"Modalidad de atención",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!1},department:{type:"iSelectWrite",label:"Departamento",name:"department",required:!0,message:"Seleccionar departamento",disabled:!1},province:{type:"iSelectWrite",label:"Provincia",name:"province",required:!0,message:"Seleccionar provincia",disabled:!1},district:{type:"iSelectWrite",label:"Distrito",name:"district",required:!0,message:"Seleccionar distrito",disabled:!1},description:{type:"iTextarea",label:"Observaciones",name:"description",required:!1,message:"Seleccionar tipo de documento",disabled:!1}};const Xe={class:"wrapper-booking"},ea={class:"grid-booking"},aa={__name:"ReservaNombre",props:["info"],emits:["closeDraw"],setup(T,{emit:w}){const I=he({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),b=JSON.parse(localStorage.getItem("user")),E=T,H=w,N=g([]),m=g([]),F=g([]),A=g([]),x=g(!1),o=g(),C=g(!1),f=te({id_person:null,dni:null,step:1,code_sid_sunarp:null,economy_sector:null,department:null,province:null,district:null,address:null,created_by:b.id}),i=async()=>{C.value=!0;try{await V({url:"/create-comercial-activities",method:"POST",data:{name:o.value}}),R(),o.value=""}catch{M.error("Error al registrar")}finally{C.value=!1}},k=async()=>{f.id_person=E.info.id,f.dni=E.info.dni,x.value=!0;const r={number:E.info.dni,id_post:3};try{const u=await V({url:"/formalization20",method:"POST",data:f});await V({url:"/person-post",method:"POST",data:r}),u&&(M.success("Registro exitoso"),f.code_sid_sunarp=null,f.economy_sector=null,f.department=null,f.province=null,f.district=null,f.address=null,H("closeDraw",!0))}catch{M.error("Error al registrar")}finally{x.value=!1}},O=()=>{M.error("Debes de completar todos los espacios requeridos")},P=(r,u)=>{const h=r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return u.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(h)},$=async()=>{try{const{data:r}=await Q({url:"/departaments",method:"GET"});let u=r.map(h=>({label:h.label,value:h.id}));N.value=[...N.value,...u]}catch(r){console.log(r)}},y=async r=>{f.province=null,f.district=null,m.value=[],F.value=[];try{const{data:u}=await Q({url:`/province/${r}`,method:"GET"});let h=u.map(D=>({label:D.label,value:D.id}));m.value=[...m.value,...h]}catch(u){console.log(u)}},a=async r=>{f.district=null,F.value=[];try{const{data:u}=await Q({url:`/district/${r}`,method:"GET"});let h=u.map(D=>({label:D.label,value:D.id}));F.value=[...F.value,...h]}catch(u){console.log(u)}},R=async()=>{try{const{data:r}=await V({url:"/comercial-activities",method:"GET"});A.value=r}catch(r){console.log(r)}};return oe(()=>{$(),R()}),(r,u)=>{const h=_("a-select"),D=_("a-form-item"),p=_("a-divider"),K=_("a-input"),W=_("a-button"),Z=_("a-space"),J=_("a-form");return e(),U("div",Xe,[l(J,{layout:"vertical",model:f,name:"basic",autocomplete:"off",onFinish:k,onFinishFailed:O},{default:n(()=>[c("div",ea,[(e(!0),U(Y,null,X(L(Ye),(S,t)=>(e(),U(Y,{key:t},[S.type==="iSelect"?(e(),v(D,{key:0,class:"item-max",name:S.name,label:S.label,rules:[{required:S.required,message:S.message}]},{default:n(()=>[S.name=="economy_sector"?(e(),v(h,{key:0,value:f[S.name],"onUpdate:value":d=>f[S.name]=d,options:L(de)},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),S.type==="iSelectWrite"?(e(),v(D,{key:1,class:"item-max",name:S.name,label:S.label,rules:[{required:S.required,message:S.message}]},{default:n(()=>[S.name=="category"?(e(),v(h,{key:0,value:f[S.name],"onUpdate:value":d=>f[S.name]=d,"show-search":"",options:A.value,"filter-option":P},{dropdownRender:n(({menuNode:d})=>[l(L(I),{vnodes:d},null,8,["vnodes"]),l(p,{style:{margin:"4px 0"}}),l(Z,{style:{padding:"4px 8px"}},{default:n(()=>[l(K,{ref_for:!0,ref:"inputRef",value:o.value,"onUpdate:value":u[0]||(u[0]=G=>o.value=G),placeholder:"Nueva actividad"},null,8,["value"]),l(W,{type:"text",onClick:i,loading:C.value},{icon:n(()=>[l(L(be))]),default:n(()=>[j(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):s("",!0),S.name=="department"?(e(),v(h,{key:1,value:f[S.name],"onUpdate:value":d=>f[S.name]=d,"show-search":"",options:N.value,"filter-option":P,onChange:y},null,8,["value","onUpdate:value","options"])):s("",!0),S.name=="province"?(e(),v(h,{key:2,value:f[S.name],"onUpdate:value":d=>f[S.name]=d,"show-search":"",options:m.value,"filter-option":P,onChange:a},null,8,["value","onUpdate:value","options"])):s("",!0),S.name=="district"?(e(),v(h,{key:3,value:f[S.name],"onUpdate:value":d=>f[S.name]=d,"show-search":"",options:F.value,"filter-option":P},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),S.type==="iText"?(e(),v(D,{key:2,name:S.name,label:S.label,rules:[{required:S.required,message:S.message,type:S.email,max:S.max}]},{default:n(()=>[l(K,{value:f[S.name],"onUpdate:value":d=>f[S.name]=d,disabled:S.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(D,null,{default:n(()=>[l(W,{type:"primary","html-type":"submit",loading:x.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ta=ee(aa,[["__scopeId","data-v-3d6d232d"]]);const oa={class:"wrapper-booking"},na={class:"grid-booking"},la={__name:"ActoConstitutivo",props:["info"],emits:["closeDraw"],setup(T,{emit:w}){const I=JSON.parse(localStorage.getItem("user")),b=T,E=w,H=g([]),N=g(!1),m=te({id_person:null,dni:null,step:2,code_sid_sunarp:null,social_reason:null,type_regimen:null,num_notary:null,id_notary:null,modality:null,updated_by:I.id}),F=async()=>{m.id_person=b.info.id_person,m.dni=b.info.dni,m.code_sid_sunarp=b.info.code_sid_sunarp,N.value=!0;try{const o=await V({url:"/formalization20",method:"POST",data:m});o&&(M.success(o.message),m.social_reason=null,m.type_regimen=null,m.id_notary=null,m.num_notary=null,m.modality=null,E("closeDraw",!0))}catch{M.error("Error al registrar")}finally{N.value=!1}},A=()=>{M.error("Debes de completar todos los espacios requeridos")},x=async()=>{try{const{data:o}=await V({url:"/notaries-select",method:"GET"});H.value=o}catch(o){console.log(o)}};return oe(async()=>{await x()}),(o,C)=>{const f=_("a-select"),i=_("a-form-item"),k=_("a-input-search"),O=_("a-input"),P=_("a-date-picker"),$=_("a-button"),y=_("a-form");return e(),U("div",oa,[l(y,{layout:"vertical",model:m,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:A},{default:n(()=>[c("div",na,[(e(!0),U(Y,null,X(L(Je),(a,R)=>(e(),U(Y,{key:R},[a.type==="iSelect"?(e(),v(i,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[a.name=="type_regimen"?(e(),v(f,{key:0,value:m[a.name],"onUpdate:value":r=>m[a.name]=r,options:L(We),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):s("",!0),a.name=="id_notary"?(e(),v(f,{key:1,value:m[a.name],"onUpdate:value":r=>m[a.name]=r,options:H.value,disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):s("",!0),a.name=="modality"?(e(),v(f,{key:2,value:m[a.name],"onUpdate:value":r=>m[a.name]=r,options:L(ce),disabled:a.disabled},null,8,["value","onUpdate:value","options","disabled"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),a.type==="iSearch"?(e(),v(i,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[l(k,{maxlength:15,loading:o.searchLoading,value:m[a.name],"onUpdate:value":r=>m[a.name]=r,onSearch:o.handleSearchApi,onInput:o.validateNumber},null,8,["loading","value","onUpdate:value","onSearch","onInput"])]),_:2},1032,["name","label","rules"])):s("",!0),a.type==="iText"?(e(),v(i,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email,max:a.max}]},{default:n(()=>[l(O,{value:m[a.name],"onUpdate:value":r=>m[a.name]=r,disabled:a.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0),a.type==="iDate"?(e(),v(i,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:n(()=>[l(P,{locale:o.locale,value:o.birthdateDate,"onUpdate:value":C[0]||(C[0]=r=>o.birthdateDate=r),style:{width:"100%"},format:o.dateFormat,disabled:a.disabled},null,8,["locale","value","format","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(i,null,{default:n(()=>[l($,{type:"primary","html-type":"submit",loading:N.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},sa=ee(la,[["__scopeId","data-v-e1e3c0e4"]]);const ra={class:"wrapper-booking"},ia={class:"grid-booking"},ua={class:"emp-20"},da={__name:"MypeFinal",props:["info"],emits:["closeDraw"],setup(T,{emit:w}){const I=JSON.parse(localStorage.getItem("user")),b=T,E=w,H=g(!1),N=g(!0),m=te({id_person:null,dni:null,step:3,code_sid_sunarp:null,ruc:null,updated_by:I.id}),F=async()=>{m.id_person=b.info.id_person,m.dni=b.info.dni,m.code_sid_sunarp=b.info.code_sid_sunarp,m.ruc=`20${m.ruc}`,H.value=!0,N.value=!1;const x={ruc:m.ruc,social_reason:b.info.social_reason,category:b.info.category,person_type:2,economic_sector:b.info.economy_sector,department:b.info.department,province:b.info.province,district:b.info.district,address:b.info.address,email:null,phone:null,created_by:1,update_by:1,status:1},o={number:b.info.dni,id_post:4};try{const C=await V({url:"/formalization20",method:"POST",data:m});await V({url:"/formalization-company",method:"POST",data:x}),await V({url:"/person-post",method:"POST",data:o}),M.success(C.message),m.ruc=null,E("closeDraw",!0)}catch{M.error("Error al registrar")}finally{H.value=!1}},A=()=>{M.error("Debes de completar todos los espacios requeridos")};return(x,o)=>{const C=_("a-input"),f=_("a-form-item"),i=_("a-button"),k=_("a-form");return e(),U("div",ra,[l(k,{layout:"vertical",model:m,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:A},{default:n(()=>[c("div",ia,[(e(!0),U(Y,null,X(L(Ke),(O,P)=>(e(),U(Y,{key:P},[O.type==="iText"?(e(),v(f,{key:0,name:O.name,label:O.label,rules:[{required:O.required,message:O.message,type:O.email,max:O.max,min:O.min}]},{default:n(()=>[l(C,{value:m[O.name],"onUpdate:value":$=>m[O.name]=$,disabled:O.disabled},{prefix:n(()=>[Te(c("span",ua,"20",512),[[Ee,N.value]])]),_:2},1032,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(f,null,{default:n(()=>[l(i,{type:"primary","html-type":"submit",loading:H.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ca=ee(da,[["__scopeId","data-v-e48e936f"]]),xe=Fe("pagestore",{state:()=>({count:0}),actions:{increment(){this.count++},async logout(){const T="https://programa.soporte-pnte.com/",w="http://127.0.0.1:5173/",I=window.location.hostname=="127.0.0.1"?w:T;try{await V({url:"/logout",method:"POST"})&&(Oe.remove("token"),localStorage.clear(),window.location.href=I)}catch(b){console.error("Error de red:",b)}}}});const ma={class:"wrapper-booking"},pa={class:"grid-booking"},_a={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(T,{emit:w}){const I=he({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),b=xe(),E=T,H=JSON.parse(localStorage.getItem("user")),N=w,m=g(),F=g([]),A=g([]),x=g([]),o=g([]),C=g(!1),f=g(!1),i=te({detail_procedure:null,modality:null,economy_sector:null,category:null,department:null,province:null,district:null,id_person:E.info.id,created_by:H.id,created_dni:H.document_number}),k=(u,h)=>{const D=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return h.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(D)},O=async()=>{const u=i;C.value=!0;try{const h=await V({url:"/formalization10",method:"POST",data:u});if(h.status==400)return M.error(h.message),b.logout();h&&(M.success(h.message),i.detail_procedure=null,i.modality=null,i.economy_sector=null,i.category=null,i.department=null,i.province=null,i.district=null,N("closeDraw",!0))}catch{M.error("Error al registrar")}finally{C.value=!1}},P=async()=>{f.value=!0;try{await V({url:"/create-comercial-activities",method:"POST",data:{name:m.value}}),r(),m.value=""}catch{M.error("Error al registrar")}finally{f.value=!1}},$=()=>{M.warning("Debes de completar todos los espacios requeridos")},y=async()=>{try{const{data:u}=await Q({url:"/departaments",method:"GET"});let h=u.map(D=>({label:D.label,value:D.id}));F.value=[...F.value,...h]}catch(u){console.log(u)}},a=async u=>{i.province=null,i.district=null,A.value=[],x.value=[];try{const{data:h}=await Q({url:`/province/${u}`,method:"GET"});let D=h.map(p=>({label:p.label,value:p.id}));A.value=[...A.value,...D]}catch(h){console.log(h)}},R=async u=>{i.district=null,x.value=[];try{const{data:h}=await Q({url:`/district/${u}`,method:"GET"});let D=h.map(p=>({label:p.label,value:p.id}));x.value=[...x.value,...D]}catch(h){console.log(h)}},r=async()=>{try{const{data:u}=await V({url:"/comercial-activities",method:"GET"});o.value=u}catch(u){console.log(u)}};return oe(()=>{y(),r()}),(u,h)=>{const D=_("a-select"),p=_("a-form-item"),K=_("a-input"),W=_("a-divider"),Z=_("a-button"),J=_("a-space"),S=_("a-form");return e(),U("div",ma,[l(S,{layout:"vertical",model:i,name:"basic",autocomplete:"off",onFinish:O,onFinishFailed:$},{default:n(()=>[c("div",pa,[(e(!0),U(Y,null,X(L(Qe),(t,d)=>(e(),U(Y,{key:d},[t.type==="iSelect"?(e(),v(p,{key:0,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="detail_procedure"?(e(),v(D,{key:0,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,options:L(Se)},null,8,["value","onUpdate:value","options"])):s("",!0),t.name=="modality"?(e(),v(D,{key:1,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,options:L(ce)},null,8,["value","onUpdate:value","options"])):s("",!0),t.name=="economy_sector"?(e(),v(D,{key:2,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,options:L(de)},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),t.type==="iText"?(e(),v(p,{key:1,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,type:t.email,max:t.max}]},{default:n(()=>[l(K,{value:i[t.name],"onUpdate:value":G=>i[t.name]=G,disabled:t.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):s("",!0),t.type==="iSelectWrite"?(e(),v(p,{key:2,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:n(()=>[t.name=="category"?(e(),v(D,{key:0,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,"show-search":"",options:o.value,"filter-option":k},{dropdownRender:n(({menuNode:G})=>[l(L(I),{vnodes:G},null,8,["vnodes"]),l(W,{style:{margin:"4px 0"}}),l(J,{style:{padding:"4px 8px"}},{default:n(()=>[l(K,{ref_for:!0,ref:"inputRef",value:m.value,"onUpdate:value":h[0]||(h[0]=se=>m.value=se),placeholder:"Nueva actividad"},null,8,["value"]),l(Z,{type:"text",onClick:P,loading:f.value},{icon:n(()=>[l(L(be))]),default:n(()=>[j(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):s("",!0),t.name=="department"?(e(),v(D,{key:1,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,"show-search":"",options:F.value,"filter-option":k,onChange:a},null,8,["value","onUpdate:value","options"])):s("",!0),t.name=="province"?(e(),v(D,{key:2,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,"show-search":"",options:A.value,"filter-option":k,onChange:R},null,8,["value","onUpdate:value","options"])):s("",!0),t.name=="district"?(e(),v(D,{key:3,value:i[t.name],"onUpdate:value":G=>i[t.name]=G,"show-search":"",options:x.value,"filter-option":k},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(p,null,{default:n(()=>[l(Z,{type:"primary","html-type":"submit",loading:C.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},va=ee(_a,[["__scopeId","data-v-bd39cf0b"]]);const fa={class:"wrapper-booking"},ya={class:"grid-booking"},ga={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(T,{emit:w}){const I=xe(),b=T,E=JSON.parse(localStorage.getItem("user")),H=w,N=g([]),m=g([]),F=g([]),A=g([]),x=g(!1),o=te({component:null,tema_compoment:null,modality:null,department:null,province:null,district:null,description:null,id_person:b.info.id,created_by:E.id,created_dni:E.document_number}),C=(y,a)=>{const R=y.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(R)},f=async()=>{const y=o;x.value=!0;try{const a=await V({url:"/create-consulting",method:"POST",data:y});if(a.status==400)return M.error(a.message),I.logout();a&&(M.success(a.message),o.component=null,o.tema_compoment=null,o.modality=null,o.department=null,o.province=null,o.district=null,o.description=null,H("closeDraw",!0))}catch{M.error("Error al registrar")}finally{x.value=!1}},i=()=>{M.warning("Debes de completar todos los espacios requeridos")},k=async()=>{try{const{data:y}=await Q({url:"/departaments",method:"GET"});let a=y.map(R=>({label:R.label,value:R.id}));N.value=[...N.value,...a]}catch(y){console.log(y)}},O=async y=>{o.province=null,o.district=null,m.value=[],F.value=[];try{const{data:a}=await Q({url:`/province/${y}`,method:"GET"});let R=a.map(r=>({label:r.label,value:r.id}));m.value=[...m.value,...R]}catch(a){console.log(a)}},P=async y=>{o.district=null,F.value=[];try{const{data:a}=await Q({url:`/district/${y}`,method:"GET"});let R=a.map(r=>({label:r.label,value:r.id}));F.value=[...F.value,...R]}catch(a){console.log(a)}},$=async()=>{try{const{data:y}=await V({url:"/theme-component",method:"GET"});A.value=y}catch(y){console.log(y)}};return oe(async()=>{await k(),await $()}),(y,a)=>{const R=_("a-select"),r=_("a-form-item"),u=_("a-textarea"),h=_("a-button"),D=_("a-form");return e(),U("div",fa,[l(D,{layout:"vertical",model:o,name:"basic",autocomplete:"off",onFinish:f,onFinishFailed:i},{default:n(()=>[c("div",ya,[(e(!0),U(Y,null,X(L(Ze),(p,K)=>(e(),U(Y,{key:K},[p.type==="iSelect"?(e(),v(r,{key:0,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:n(()=>[p.name=="component"?(e(),v(R,{key:0,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,options:L(we)},null,8,["value","onUpdate:value","options"])):s("",!0),p.name=="modality"?(e(),v(R,{key:1,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,options:L(ce)},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0),p.type==="iTextarea"?(e(),v(r,{key:1,name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:n(()=>[l(u,{value:o[p.name],"onUpdate:value":W=>o[p.name]=W,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):s("",!0),p.type==="iSelectWrite"?(e(),v(r,{key:2,class:"item-max",name:p.name,label:p.label,rules:[{required:p.required,message:p.message}]},{default:n(()=>[p.name=="tema_compoment"?(e(),v(R,{key:0,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,"show-search":"",options:A.value,"filter-option":C},null,8,["value","onUpdate:value","options"])):s("",!0),p.name=="department"?(e(),v(R,{key:1,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,"show-search":"",options:N.value,"filter-option":C,onChange:O},null,8,["value","onUpdate:value","options"])):s("",!0),p.name=="province"?(e(),v(R,{key:2,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,"show-search":"",options:m.value,"filter-option":C,onChange:P},null,8,["value","onUpdate:value","options"])):s("",!0),p.name=="district"?(e(),v(R,{key:3,value:o[p.name],"onUpdate:value":W=>o[p.name]=W,"show-search":"",options:F.value,"filter-option":C},null,8,["value","onUpdate:value","options"])):s("",!0)]),_:2},1032,["name","label","rules"])):s("",!0)],64))),128))]),l(r,null,{default:n(()=>[l(h,{type:"primary","html-type":"submit",loading:x.value},{default:n(()=>[j("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ba=ee(ga,[["__scopeId","data-v-65b67094"]]);const ha={key:0},Sa={key:1},wa={key:2},xa={key:0},ka={key:1,class:"steps"},Ua={style:{"text-align":"right"}},Da={key:0},qa={key:1},Ra={key:3},Ia={__name:"AsesoriasHistorial",props:["info"],setup(T){const w=T,I=g("1"),b=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start",width:160},{title:"Fecha última actualización",dataIndex:"date_last",width:160},{title:"Proceso",dataIndex:"progress"},{title:"Sector económico",dataIndex:"sector"},{title:"Registrado por",dataIndex:"asesor_create"},{title:"Último asesor atendido",dataIndex:"asesor_update"}],E=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Detalle del trámite",dataIndex:"detalle"},{title:"Sector económico",dataIndex:"sector"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],H=[{title:"#",dataIndex:"idx"},{title:"Fecha registro",dataIndex:"date_start"},{title:"Componente",dataIndex:"component"},{title:"Tema",dataIndex:"tema_compoment"},{title:"Modalidad",dataIndex:"modality",align:"center"},{title:"Registrado por",dataIndex:"asesor_create"}],N=A=>de.find(x=>x.value===A).label,m=A=>Se.find(x=>x.value===A).label,F=A=>we.find(x=>x.value===A).label;return(A,x)=>{const o=_("a-empty"),C=_("a-table"),f=_("a-card"),i=_("a-tab-pane"),k=_("a-progress"),O=_("a-space"),P=_("a-tabs");return e(),v(P,{activeKey:I.value,"onUpdate:activeKey":x[0]||(x[0]=$=>I.value=$),type:"card",class:"box-hist"},{default:n(()=>[l(i,{key:"1",tab:"ASESORÍAS"},{default:n(()=>[l(f,null,{default:n(()=>{var $,y,a;return[(($=w.info[0])==null?void 0:$.adv.length)==0?(e(),v(o,{key:0})):s("",!0),((y=w.info[0])==null?void 0:y.adv.length)>=1?(e(),v(C,{key:1,columns:H,"data-source":(a=w.info[0])==null?void 0:a.adv,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:R,column:r,record:u})=>[r.dataIndex==="idx"?(e(),U("span",ha,z(R+1),1)):s("",!0),r.dataIndex==="component"?(e(),U("span",Sa,z(F(u.component)),1)):s("",!0),r.dataIndex==="modality"?(e(),U("span",wa,z(u.modality==1?"Virtual":"Presencial"),1)):s("",!0)]),_:1},8,["data-source"])):s("",!0)]}),_:1})]),_:1}),l(i,{key:"2",tab:"RUC 20"},{default:n(()=>[l(f,null,{default:n(()=>{var $,y,a;return[(($=w.info[0])==null?void 0:$.ruc20.length)==0?(e(),v(o,{key:0})):s("",!0),((y=w.info[0])==null?void 0:y.ruc20.length)>=1?(e(),v(C,{key:1,columns:b,"data-source":(a=w.info[0])==null?void 0:a.ruc20,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:R,column:r,record:u})=>[r.dataIndex==="idx"?(e(),U("span",xa,z(R+1),1)):s("",!0),r.dataIndex==="progress"?(e(),U("div",ka,[c("span",Ua,z(u.step==1?"Reserva de nombre":u.step==2?"Proceso de notaría":"Formalizado"),1),l(O,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[l(k,{percent:u.step*33.33,steps:3,title:"hi"},null,8,["percent"])]),_:2},1024)])):s("",!0),r.dataIndex==="sector"?(e(),U(Y,{key:2},[c("div",null,z(N(u.sector)),1),c("div",null,z(u.category),1)],64)):s("",!0)]),_:1},8,["data-source"])):s("",!0)]}),_:1})]),_:1}),l(i,{key:"3",tab:"RUC 10"},{default:n(()=>[l(f,null,{default:n(()=>{var $,y,a;return[(($=w.info[0])==null?void 0:$.ruc10.length)==0?(e(),v(o,{key:0})):s("",!0),((y=w.info[0])==null?void 0:y.ruc10.length)>=1?(e(),v(C,{key:1,columns:E,"data-source":(a=w.info[0])==null?void 0:a.ruc10,bordered:"",pagination:!1,size:"small"},{bodyCell:n(({index:R,column:r,record:u})=>[r.dataIndex==="idx"?(e(),U("span",Da,z(R+1),1)):s("",!0),r.dataIndex==="detalle"?(e(),U("span",qa,z(m(u.detail_procedure)),1)):s("",!0),r.dataIndex==="sector"?(e(),U(Y,{key:2},[c("div",null,z(N(u.economy_sector)),1),c("div",null,z(u.category),1)],64)):s("",!0),r.dataIndex==="modality"?(e(),U("span",Ra,z(u.modality==1?"Virtual":"Presencial"),1)):s("",!0)]),_:1},8,["data-source"])):s("",!0)]}),_:1})]),_:1})]),_:1},8,["activeKey"])}}},Ca=ee(Ia,[["__scopeId","data-v-3f8370a4"]]);const B=T=>(Ge("data-v-fcdb8d6d"),T=T(),Le(),T),Aa={class:"asesorias"},Ta=B(()=>c("h3",null,"REGISTRO DE FORMALIZACIONES Y ASESRÍAS",-1)),Ea=B(()=>c("br",null,null,-1)),Fa={class:"wrapper-s"},Oa=B(()=>c("label",{class:"label"},"Seleccione el tipo de documento",-1)),Na=B(()=>c("label",{class:"label"},"Digite el número de documento",-1)),$a={class:"column-2"},za={class:"info-update"},Pa=B(()=>c("h4",null,"RESULTADO DE LA BÚSQUEDA",-1)),Ga={class:"info-personal"},La=B(()=>c("span",null,"Apellidos y nombres: ",-1)),Ma=B(()=>c("span",null,"Número de celular:",-1)),Wa=B(()=>c("span",null,"Correo electrónico:",-1)),Va=B(()=>c("span",null,"Asesorías:",-1)),Ba=B(()=>c("span",null,"Formalizaciones RUC 20:",-1)),Ha={class:"alert-incomplete"},ja={key:0,class:"alert"},Ya={class:"small"},Ja=B(()=>c("span",null,"Formalizaciones RUC 10:",-1)),Ka=B(()=>c("h4",null,"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Qa={class:"card-as-btn"},Za=B(()=>c("h4",null,"HISTORIAL",-1)),Xa={class:"steps-content"},et=["onClick"],at={key:0,class:"info-tag"},tt=B(()=>c("b",null,"Paso",-1)),ot={key:1,class:"info-tag"},nt=B(()=>c("b",null,"Siguiente paso",-1)),lt={key:2,class:"info-tag"},st=B(()=>c("b",null,"Siguiente paso",-1)),rt={class:"info"},it=B(()=>c("b",null,"Código SID SUNARP",-1)),ut=B(()=>c("b",null,"Última consulta",-1)),dt=B(()=>c("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),ct=[dt],mt={__name:"AsesoriasFormalizaciones",setup(T){const w=Ne(),I=$e(),b=g(1),E=g(),H=g([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),N=g(!1),m=g(!1),F=g(!1),A=g(!1),x=g(!1),o=g(!1),C=g(!1),f=g(!1),i=g(""),k=g([]),O=g(!1),P=g(0),$=g(!1),y=g([]),a=t=>Me(t).format("DD/MM/YYYY HH:mm A"),R=()=>{u()},r=()=>{i.value=i.value.replace(/\D/g,"")},u=()=>{i.value="",k.value=[],y.value=[],w.push({name:"asesorias-formalizaciones"})},h=()=>{if(!E.value)return M.warning("Selecciona un tipo de servicio");E.value=="asesoria"&&(f.value=!0),E.value=="ruc10"&&(C.value=!0),E.value=="ruc20"&&K()},D=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],p=()=>{const t={rol:"solicitante",access:3,dni:i.value,type:"asesoria",typedoc:b.value==1?"dni":"ce"};w.push({name:"actualizar-persona",query:t})},K=async()=>{try{if(m.value={id:k.value.id,dni:k.value.number_document},$.value=!0,x.value)return A.value=!0;const{data:t}=await V({url:`/my-formalizations20/${k.value.number_document}`,method:"GET"});if(t.length>=1){x.value=t,A.value=!0;return}o.value=!0}catch(t){console.log(t)}finally{$.value=!1}},W=async t=>{N.value=!0;try{const{data:d}=await V({url:`find-formalization20/${t}`,method:"GET"});P.value=d.step,A.value=!1,o.value=!0,F.value=d}catch(d){console.log(d)}finally{N.value=!1}},Z=async t=>{y.value=[];try{const d=await V({url:`/historial-formalization/${t.number_document}/${t.id}`,method:"GET"});y.value=[...y.value,d]}catch(d){console.log(d)}},J=async()=>{if(x.value=!1,P.value=0,b.value==1&&i.value.length<8)return M.warning("El número a buscar es incorrecto");O.value=!0;try{const t=await V({url:`/applicant-new/${i.value}`,method:"GET"});if(t.status==205){const d={rol:"solicitante",access:3,dni:i.value};w.push({name:"registrar-persona",query:d})}else k.value=t,Z(t)}catch(t){console.log("You have an error",t)}finally{O.value=!1}},S=async()=>{I.query.typedoc=="ce"?b.value=2:b.value=1;const t=await V({url:`/applicant-new/${I.query.dni}`,method:"GET"});i.value=t.number_document,k.value=t,await Z(t)};return oe(()=>{I.query.dni&&S()}),(t,d)=>{const G=_("a-radio"),se=_("a-radio-group"),ke=_("a-input-search"),ne=_("a-card"),Ue=_("a-select"),De=_("a-button"),qe=_("a-step"),Re=_("a-steps"),re=_("a-drawer"),ie=_("a-tag"),Ie=_("a-spin"),Ce=_("a-modal");return e(),U(Y,null,[c("div",Aa,[Ta,Ea,l(ne,{class:"card-as"},{default:n(()=>[L(I).query.dni?(e(),v(L(je),{key:0,class:"ico-reload",onClick:R})):s("",!0),c("div",Fa,[c("div",null,[Oa,l(se,{value:b.value,"onUpdate:value":d[0]||(d[0]=q=>b.value=q),onChange:u},{default:n(()=>[l(G,{value:1},{default:n(()=>[j("DNI")]),_:1}),l(G,{value:2},{default:n(()=>[j("CE")]),_:1})]),_:1},8,["value"])]),c("div",null,[Na,l(ke,{"enter-button":"BUSCAR",value:i.value,"onUpdate:value":d[1]||(d[1]=q=>i.value=q),placeholder:"",loading:O.value,onSearch:J,onInput:r,maxlength:b.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),c("div",$a,[k.value.length!=0?(e(),v(ne,{key:0,class:"card-as"},{default:n(()=>{var q,le,ue,pe,_e,ve,fe,ye;return[c("div",za,[Pa,l(L(ze),{class:"ico-edit",onClick:p})]),c("div",Ga,[La,c("span",null,z(k.value.last_name)+" "+z(k.value.middle_name)+", "+z(k.value.name),1),Ma,c("span",null,[c("span",null,z(k.value.phone?k.value.phone:"-"),1)]),Wa,c("span",null,z(k.value.email?k.value.email:"-"),1),Va,c("b",null,z((q=y.value[0])!=null&&q.adv?(le=y.value[0])==null?void 0:le.adv.length:""),1),Ba,c("div",Ha,[c("b",null,z((ue=y.value[0])!=null&&ue.ruc20?(pe=y.value[0])==null?void 0:pe.ruc20.length:""),1),((_e=y.value[0])==null?void 0:_e.ruc20.filter(ae=>ae.step===1||ae.step===2).length)>=1?(e(),U("span",ja,[l(L(Pe)),c("span",Ya,"Tienes "+z((ve=y.value[0])==null?void 0:ve.ruc20.filter(ae=>ae.step===1||ae.step===2).length)+" procesos pendientes",1)])):s("",!0)]),Ja,c("b",null,z((fe=y.value[0])!=null&&fe.ruc10?(ye=y.value[0])==null?void 0:ye.ruc10.length:""),1)])]}),_:1})):s("",!0),k.value.length!=0?(e(),v(ne,{key:1,class:"card-as"},{default:n(()=>[Ka,c("div",Qa,[l(Ue,{style:{"min-width":"200px"},value:E.value,"onUpdate:value":d[2]||(d[2]=q=>E.value=q),options:H.value},null,8,["value","options"]),l(De,{type:"primary",onClick:h},{default:n(()=>[j("REGISTRAR")]),_:1})])]),_:1})):s("",!0)]),k.value.length!=0?(e(),v(ne,{key:0,class:"card-as"},{default:n(()=>[Za,l(Ca,{info:y.value},null,8,["info"])]),_:1})):s("",!0)]),c("section",null,[l(re,{width:"510",title:"Formalización con RUC 20",open:o.value,"onUpdate:open":d[6]||(d[6]=q=>o.value=q),placement:"right"},{default:n(()=>[l(Re,{current:P.value,size:"small",class:"steps"},{default:n(()=>[(e(),U(Y,null,X(D,q=>l(qe,{key:q.title,title:q.title},null,8,["title"])),64))]),_:1},8,["current"]),c("div",Xa,[P.value==0?(e(),v(ta,{key:0,info:m.value,onCloseDraw:d[3]||(d[3]=q=>(o.value=!1,x.value=!1,J()))},null,8,["info"])):s("",!0),P.value==1?(e(),v(sa,{key:1,info:F.value,onCloseDraw:d[4]||(d[4]=q=>(o.value=!1,x.value=!1,J()))},null,8,["info"])):s("",!0),P.value==2?(e(),v(ca,{key:2,info:F.value,onCloseDraw:d[5]||(d[5]=q=>(o.value=!1,x.value=!1,J()))},null,8,["info"])):s("",!0)])]),_:1},8,["open"]),l(re,{title:"Formalización con RUC 10",open:C.value,"onUpdate:open":d[8]||(d[8]=q=>C.value=q),placement:"right"},{default:n(()=>[l(va,{info:k.value,onCloseDraw:d[7]||(d[7]=q=>(C.value=!1,J()))},null,8,["info"])]),_:1},8,["open"]),l(re,{title:"Nueva asesoría",open:f.value,"onUpdate:open":d[10]||(d[10]=q=>f.value=q),placement:"right"},{default:n(()=>[l(ba,{info:k.value,onCloseDraw:d[9]||(d[9]=q=>(f.value=!1,J()))},null,8,["info"])]),_:1},8,["open"]),l(Ce,{open:A.value,"onUpdate:open":d[12]||(d[12]=q=>A.value=q),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:n(()=>[l(Ie,{spinning:N.value},{default:n(()=>[(e(!0),U(Y,null,X(x.value,(q,le)=>(e(),U("div",{key:le,class:"pendient",onClick:ue=>W(q.id)},[q.step==0?(e(),U("div",at,[tt,j(),l(ie,{color:"error"},{default:n(()=>[j("Reserva de nombre")]),_:1})])):s("",!0),q.step==1?(e(),U("div",ot,[nt,j(),l(ie,{color:"warning"},{default:n(()=>[j("Acto constitutivo")]),_:1})])):s("",!0),q.step==2?(e(),U("div",lt,[st,j(),l(ie,{color:"success"},{default:n(()=>[j("Formalizar")]),_:1})])):s("",!0),c("div",rt,[it,c("span",null,z(q.code_sid_sunarp),1),ut,c("span",null,z(a(q.updated_at)),1)])],8,et))),128)),c("div",{class:"pendient pendient-btn",onClick:d[11]||(d[11]=q=>(o.value=!0,A.value=!1,P.value=0))},ct)]),_:1},8,["spinning"])]),_:1},8,["open"])])],64)}}},ft=ee(mt,[["__scopeId","data-v-fcdb8d6d"]]);export{ft as default};
