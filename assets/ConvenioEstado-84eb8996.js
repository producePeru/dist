import{D as B,r as c,a as ae,k as W,S as ne,b as d,o as s,s as k,w as l,c as n,e as E,d as v,F as P,y as he,v as D,h as T,E as ve,I as X,m as z,a5 as Ae,a8 as ye,t as H,i as j,a7 as _e,g as ge,H as be,L as Te,B as te,Q as Ne,x as Re,Z as Ye,R as Le,p as qe,j as ze}from"./index-5fd26e4c.js";import{_ as Fe}from"./icoexcel-1b303edf.js";import{u as Ce}from"./selectes-b1dc16fb.js";import"./es-1738796d.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Me}from"./SaveOutlined-60cc01f5.js";import{C as Be}from"./CloudUploadOutlined-82bceb37.js";import{M as Ve}from"./MessageOutlined-f7ca1855.js";import{M as Pe}from"./MoreOutlined-e9e32f5c.js";const Ge={class:"grid-convenios"},He={key:5},je={key:0},Xe={key:1},fe="DD/MM/YYYY",Ze={__name:"DrawConvenioUGO",props:["idConvenio"],emits:["closeDraw"],setup(Y,{emit:V}){B.locale("es");const g=JSON.parse(localStorage.getItem("profile")),w=Ce(),L=V,C=Y;w.$patch({cities:w.cities}),w.$patch({provinces:w.provinces}),w.$patch({districts:w.districts}),w.fetchCities();const m=c(!1),I=c(!1),e=ae({}),b=[{value:1,label:"1 Año"},{value:2,label:"2 Años"},{value:3,label:"3 Años"},{value:4,label:"4 Años"},{value:5,label:"5 Años"},{value:6,label:"6 Años"},{value:7,label:"7 Años"},{value:8,label:"8 Años"},{value:9,label:"9 Años"},{value:10,label:"10 Años"}],$=(o,h)=>{o=="external"&&(h==1?(i.value.homeOperations.required=!1,i.value.homeOperations.label="Fecha de suscripción del convenio (OPCIONAL)",i.value.startDate.required=!1,i.value.startDate.label="Inicio Convenio Vigente (OPCIONAL)"):(i.value.homeOperations.required=!0,i.value.homeOperations.label="Fecha de suscripción del convenio",i.value.startDate.required=!0,i.value.startDate.label="Inicio Convenio Vigente"))},G=o=>{const h=B(e.startDate).add(1,"day").startOf("day");return B(o).startOf("day").isBefore(h,"day")},q=o=>{e.province_id=null,e.district_id=null,w.fetchProvinces(o)},A=o=>{e.district_id=null,w.fetchDistricts(o)},N=(o,h)=>{const M=o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return h.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(M)},S=()=>{e.city_id=null,e.province_id=null,e.district_id=null,e.alliedEntity=null,e.homeOperations=null,e.startDate=null,e.external=null,e.years=null,e.endDate=null,e.observations=null,e.created_id=g.user_id},F=async()=>{m.value=!0;const o={city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,alliedEntity:e.alliedEntity,homeOperations:e.homeOperations?B(e.homeOperations).format("YYYY-MM-DD"):null,startDate:e.startDate?B(e.startDate).format("YYYY-MM-DD"):null,external:e.external==null?0:1,years:e.years,endDate:e.startDate?B(e.startDate).add(e.years,"year").format("YYYY-MM-DD"):null,observations:e.observations,created_id:g.user_id,entity:"ugo"};try{const h=C.idConvenio?"PUT":"POST",M=C.idConvenio?`agreement/update-values/${C.idConvenio.id}`:"agreement/create",U=await X({url:M,method:h,data:o});U.status==200&&(z.success(U.message),L("closeDraw",!0),S())}catch(h){z.error("Se originó un error: "+h.message)}finally{m.value=!1}},u=()=>{z.error("Debes de completar todos los espacios requeridos")},a=async o=>{o.id&&(e.city_id=o.city_id,q(o.city_id),e.province_id=o.province_id,A(o.province_id),e.district_id=o.district_id,e.external=o.external,e.homeOperations=o.startOperations?B(o.startOperations,"YYYY-MM-DD"):null,e.startDate=o.startDate?B(o.startDate,"YYYY-MM-DD"):null,e.years=o.years,e.observations=o.observations,e.alliedEntity=o.entity,$("external",o.external))};W(()=>{C.idConvenio&&a(C.idConvenio)}),ne(()=>C.idConvenio,o=>{o?a(o):S()});const i=c({city_id:{type:"iSelect",label:"Región",name:"city_id",required:!0,message:"Seleccionar una región",disabled:!0},province_id:{type:"iSelect",label:"Provincia",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!0},district_id:{type:"iSelect",label:"Distrito",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!0},alliedEntity:{type:"iText",label:"Entidad Aliada",name:"alliedEntity",required:!0,message:"Escribir la entidad aliada",disabled:!0,max:100},external:{type:"iSwitch",label:"CDE AGENTE EXTERNO",name:"external",required:!1,message:"Seleccionar",disabled:!0},homeOperations:{type:"iDate",label:"Fecha de suscripción del convenio",name:"homeOperations",required:!0,message:"Seleccionar fecha",disabled:!0},startDate:{type:"iDate",label:"Inicio Convenio Vigente",name:"startDate",required:!0,message:"Seleccionar fecha de convenio vigente",disabled:!0},years:{type:"iSelect",label:"Número de años vigente",name:"years",required:!0,message:"Seleccionar años",disabled:!1},observations:{type:"iTextarea",label:"Observaciones",name:"observations",required:!1,message:"Seleccionar",disabled:!1}});return(o,h)=>{const M=d("a-input"),U=d("a-form-item"),y=d("a-select"),J=d("a-date-picker"),R=d("a-switch"),oe=d("a-textarea"),se=d("a-button"),K=d("a-form"),ie=d("a-spin");return s(),k(ie,{spinning:I.value},{default:l(()=>[n(K,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:u},{default:l(()=>[E("div",Ge,[(s(!0),v(P,null,he(i.value,(t,le)=>(s(),v(P,{key:le},[t.type==="iText"?(s(),k(U,{key:0,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,max:t.max}]},{default:l(()=>[n(M,{value:e[t.name],"onUpdate:value":x=>e[t.name]=x,maxlength:t.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):D("",!0),t.type==="iSelect"?(s(),k(U,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:l(()=>[t.name=="city_id"?(s(),k(y,{key:0,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,options:T(w).cities,"show-search":"","filter-option":N,onChange:q},null,8,["value","onUpdate:value","options"])):D("",!0),t.name=="province_id"?(s(),k(y,{key:1,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,options:T(w).provinces,"show-search":"","filter-option":N,onChange:A,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):D("",!0),t.name=="district_id"?(s(),k(y,{key:2,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,options:T(w).districts,"show-search":"","filter-option":N,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):D("",!0),t.name=="years"?(s(),k(y,{key:3,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,options:b,"show-search":"","filter-option":N},null,8,["value","onUpdate:value"])):D("",!0)]),_:2},1032,["name","label","rules"])):D("",!0),t.type==="iDate"?(s(),k(U,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:l(()=>[t.name=="endDate"?(s(),k(J,{key:0,"disabled-date":G,locale:T(ve),disabled:!e.startDate,value:e[t.name],"onUpdate:value":x=>e[t.name]=x,style:{width:"100%"},format:fe,placeholder:"día/mes/año"},null,8,["locale","disabled","value","onUpdate:value"])):(s(),k(J,{key:1,locale:T(ve),value:e[t.name],"onUpdate:value":x=>e[t.name]=x,style:{width:"100%"},format:fe,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"]))]),_:2},1032,["name","label","rules"])):D("",!0),t.type==="iSwitch"?(s(),k(U,{key:3,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:l(()=>[n(R,{checked:e[t.name],"onUpdate:checked":x=>e[t.name]=x,"checked-children":"si","un-checked-children":"",checkedValue:1,unCheckedValue:0,onChange:x=>$(t.name,x)},null,8,["checked","onUpdate:checked","onChange"])]),_:2},1032,["name","label","rules"])):D("",!0),t.type==="iTextarea"?(s(),k(U,{key:4,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:l(()=>[n(oe,{value:e[t.name],"onUpdate:value":x=>e[t.name]=x,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):D("",!0),t.type==="iSpace"?(s(),v("span",He)):D("",!0)],64))),128))]),n(U,null,{default:l(()=>[n(se,{type:"primary","html-type":"submit",loading:m.value},{default:l(()=>[Y.idConvenio?(s(),v("span",je,"ACTUALIZAR")):(s(),v("span",Xe,"GUARDAR"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},Je=De(Ze,[["__scopeId","data-v-b2d6c523"]]);const Qe={class:"accion-icons"},Ke={key:0},We={key:1},et={__name:"DrawAcciones",props:["idConvenio"],emits:["refreshTable"],setup(Y,{emit:V}){const g=Y,w=V,L=c([]),C=c(!0),m=c(null),I=c(""),e=c(!1);c(null);const b=ae({description:null});W(()=>{g.idConvenio&&S(g.idConvenio)}),ne(()=>g.idConvenio,u=>{u&&S()});function $(u){m.value=u.id,I.value=u.description,_e(()=>{F()})}function G(u){const a=L.value.findIndex(i=>i.id===u.id);a!==-1&&(L.value[a].description=I.value),m.value=null,A(u.id)}const q=async u=>{try{const a=await X({url:`agreement/delete-acction/${u.id}`,method:"DELETE"});a.status==200&&(S(),z.success(a.message),w("refreshTable",!0))}catch(a){console.error("Error de red:",a)}},A=async u=>{try{const a={description:I.value},i=await X({url:`agreement/update/${u}`,method:"PUT",data:a});i.status==200&&(z.success(i.message),S())}catch(a){console.error("Error de red:",a)}},N=async()=>{try{const u={description:b.description,agreements_id:g.idConvenio},a=await X({url:"agreement/create-acction",method:"POST",data:u});a.status==200&&(z.success(a.message),w("refreshTable",!0),S(),b.description=null)}catch(u){console.error("Error de red:",u)}},S=async()=>{C.value=!0;try{const u=await X({url:`agreement/list/${g.idConvenio}`,method:"GET"});u.status==200&&(L.value=u.data)}catch{}finally{C.value=!1}},F=()=>{_e(()=>{const u=document.getElementById("auto-resize");u.style.height="auto",u.style.height=u.scrollHeight+"px"})};return(u,a)=>{const i=d("a-textarea"),o=d("a-spin"),h=d("a-form-item"),M=d("a-button"),U=d("a-form");return s(),v("div",null,[n(o,{spinning:C.value},{default:l(()=>[(s(!0),v(P,null,he(L.value,(y,J)=>(s(),v("div",{class:"acciones",key:J},[E("div",Qe,[n(T(Ae),{class:"pointer ico-acc",onClick:R=>$(y)},null,8,["onClick"]),m.value===y.id?(s(),k(T(Me),{key:0,class:"pointer ico-save",onClick:R=>G(y)},null,8,["onClick"])):D("",!0),n(T(ye),{class:"pointer ico-acc",onClick:R=>q(y)},null,8,["onClick"])]),m.value===y.id?(s(),v("div",Ke,[n(i,{value:I.value,"onUpdate:value":a[0]||(a[0]=R=>I.value=R),onInput:F,id:"auto-resize"},null,8,["value"])])):(s(),v("p",We,H(y.description),1))]))),128))]),_:1},8,["spinning"]),n(U,{layout:"vertical",model:b,name:"basic",autocomplete:"off",onFinish:N},{default:l(()=>[n(h,{name:"description",label:"Registra una acción",rules:[{required:!0,message:"Escribir la descripción"}]},{default:l(()=>[n(i,{value:b.description,"onUpdate:value":a[1]||(a[1]=y=>b.description=y),maxlength:250,rows:4},null,8,["value"])]),_:1}),n(h,null,{default:l(()=>[n(M,{type:"primary","html-type":"submit",loading:e.value},{default:l(()=>[j("CREAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}};const tt={__name:"DrawObservations",props:["idConvenio"],emits:["refreshTable"],setup(Y,{emit:V}){const g=Y,w=V;c([]);const L=c(!0);c(null),c("");const C=c(!1);c(null);const m=ae({description:null});W(()=>{g.idConvenio&&e(g.idConvenio)}),ne(()=>g.idConvenio,b=>{b&&e()});const I=async()=>{C.value=!0;try{const b={observations:m.description},$=await X({url:`agreement/update-values/${g.idConvenio.id}`,method:"PUT",data:b});$.status==200&&(z.success($.message),w("refreshTable",!0))}catch(b){console.error("Error de red:",b)}finally{C.value=!1}},e=async()=>{m.description=g.idConvenio.observations,m.description!=null&&(L.value=!1)};return(b,$)=>{const G=d("a-textarea"),q=d("a-form-item"),A=d("a-button"),N=d("a-form"),S=d("a-spin");return s(),v("div",null,[n(S,{spinning:L.value},{default:l(()=>[n(N,{layout:"vertical",model:m,name:"basic",autocomplete:"off",onFinish:I},{default:l(()=>[n(q,{name:"description",label:"Orbservaciones",rules:[{required:!0,message:"Escribir la descripción"}]},{default:l(()=>[n(G,{value:m.description,"onUpdate:value":$[0]||($[0]=F=>m.description=F),rows:6},null,8,["value"])]),_:1}),n(q,null,{default:l(()=>[n(A,{type:"primary","html-type":"submit",loading:C.value},{default:l(()=>[j("ACTUALIZAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}};const at=E("div",{class:"agreements-file"},[E("b",null,"Formatos a subir"),E("span",null,"pdf, doc, docx, xls, xlsx, ppt, pptx"),E("span",null,"*(Máximo 20MB)")],-1),nt={class:"file-options"},ot={style:{"line-height":"1.3"}},st=["onClick"],it=["onClick"],lt={__name:"DrawFiles",props:["idConvenio"],setup(Y){B.locale("es");const V=ge.get("token"),g=Y,w="https://apituempresa.soporte-pnte.com/api/",L="http://127.0.0.1:8000/api/",C=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?L:w,m=c(!1),I=c([]),e=c(null),b=c(null),$=be(Te,{style:{fontSize:"20px"},spin:!0});W(()=>{g.idConvenio&&u(g.idConvenio)}),ne(()=>g.idConvenio,a=>{a&&u(a)});const G=a=>B(a).format("DD-MM-YYYY HH:mm"),q=a=>(A(a),!1),A=async a=>{const i=new FormData;i.append("file",a),i.append("agreements_id",g.idConvenio),m.value=!0;try{const{data:o}=await te.post(`${C}agreement/file`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${V}`}});o.status==200&&(z.success(o.message),u(g.idConvenio))}catch{z.error("Error al subir este tipo de archivo")}finally{m.value=!1}},N=async a=>{e.value=a.uid;try{const i=await te({url:`${C}agreement/file-download/${a.uid}`,method:"POST",responseType:"blob",headers:{Authorization:`Bearer ${V}`}}),o=window.URL.createObjectURL(new Blob([i.data])),h=document.createElement("a");h.href=o,h.setAttribute("download",a.name),document.body.appendChild(h),h.click(),window.URL.revokeObjectURL(o),document.body.removeChild(h)}catch(i){console.error("Error downloading file:",i)}finally{e.value=null}},S=a=>{a.file.status!=="uploading"&&console.log(a.file,a.fileList),a.file.status==="done"?(z.success(`${a.file.name} file uploaded successfully`),I.value=a.fileList.filter(i=>i.status!=="error")):a.file.status==="error"&&(z.error(`${a.file.name} file upload failed.`),I.value=a.fileList.filter(i=>i.uid!==a.file.uid))},F=async a=>{b.value=a.uid;try{const i=await X({url:`agreement/delete/file/${a.uid}`,method:"DELETE"});i.status==200&&(u(g.idConvenio),z.success(i.message))}catch(i){console.error("Error de red:",i)}finally{b.value=null}},u=async a=>{try{const{data:i}=await te.get(`${C}agreement/list-files/${a}`,{headers:{Authorization:`Bearer ${V}`}});i.status===200&&(I.value=i.data.map(o=>({uid:o.id,name:o.name,status:"done",url:o.path,date:o.created_at})))}catch(i){console.error("Error fetching files:",i)}};return(a,i)=>{const o=d("a-button"),h=d("a-spin"),M=d("a-space"),U=d("a-upload");return s(),v("div",null,[at,n(U,{"file-list":I.value,name:"file",onChange:S,"custom-request":A,"before-upload":q},{itemRender:l(({file:y,actions:J})=>[n(M,{style:{margin:"0rem 0","font-size":"13px",width:"100%"}},{default:l(()=>[E("div",nt,[E("span",ot,H(y.name),1),E("span",null,H(G(y.date)),1),e.value!=y.uid?(s(),v("a",{key:0,onClick:R=>N(y)},"Descargar",8,st)):(s(),k(h,{key:1,indicator:T($)},null,8,["indicator"])),b.value==y.uid?(s(),k(h,{key:2,indicator:T($)},null,8,["indicator"])):(s(),v("a",{key:3,onClick:R=>F(y),style:{color:"var(--error)"}},[n(T(ye))],8,it))])]),_:2},1024)]),default:l(()=>[n(o,{style:{"margin-bottom":".6rem"},loading:m.value},{default:l(()=>[n(T(Be)),j(" SUBIR ARCHIVO ")]),_:1},8,["loading"])]),_:1},8,["file-list"])])}}};const ue=Y=>(qe("data-v-8f391104"),Y=Y(),ze(),Y),rt=ue(()=>E("h3",{class:"title-produce"},"CONVENIOS UGO",-1)),dt=ue(()=>E("img",{width:"20",style:{margin:"-2px 0 0 0"},src:Fe},null,-1)),ct={key:0},ut={key:1},pt={key:0},mt={key:1},vt={key:0,class:"list-days"},_t={key:1,class:"list-days"},ft=["onClick"],ht=["onClick"],yt=ue(()=>E("a",null,"Eliminar",-1)),gt={class:"paginator"},bt={__name:"ConvenioEstado",props:["idConvenio"],setup(Y){B.locale("es"),JSON.parse(localStorage.getItem("profile")),Ce();const V=ge.get("token"),g="https://apituempresa.soporte-pnte.com/api/",w="http://127.0.0.1:8000/api/",L=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?w:g;c(null),c(null);const C=c(!1),m=c(null),I=c(0),e=c(50),b=c({page:0}),$=c(1200),G=c([]),q=c(!1),A=c(!1),N=c(!1),S=c(!1),F=c(!1);c(null),c(null);const u=c(window.innerHeight-100),a=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:70},{title:"REGIÓN",dataIndex:"city",fixed:"left",width:120},{title:"PROVINCIA",dataIndex:"province",fixed:"left",width:120},{title:"DISTRITO",dataIndex:"district",fixed:"left",width:140},{title:"ENTIDAD ALIADA",dataIndex:"entity",width:300},{title:"CDE AGENTE EXTERNO",dataIndex:"externo",width:100,align:"center"},{title:"FECHA DE SUSCRIPCIÓN DE CONVENIO",dataIndex:"startOperations",align:"center",width:180},{title:"INICIO DE CONVENIO VIGENTE",dataIndex:"startDate",align:"center",width:180},{title:"N° DE AÑOS VIGENTE",dataIndex:"years",width:120,align:"center"},{title:"FIN DEL CONVENIO",dataIndex:"endDate",align:"center",width:180},{title:"ESTADO",dataIndex:"status",align:"center",width:150},{title:"FECHA RESTANTE",dataIndex:"numbrestantes",align:"center",width:140},{title:"OBSERVACIONES",dataIndex:"observations",align:"center",width:140},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],i=ae({search:""}),o=()=>{let p={search:i.search};Z(p)},h=()=>{i.search||Z()},M=p=>{m.value=p,A.value=!0},U=p=>{m.value=p,S.value=!0},y=p=>B(p).format("DD/MM/YYYY"),J=p=>{m.value=p.id,F.value=!0},R=(p,r)=>{const O=new Date(p),Q=new Date,re=O.getTime()-Q.getTime();return Math.floor(re/(1e3*3600*24))+1},oe=p=>p<=0||p<20?"red":p<40?"#f9e717":"#11d811",se=p=>{b.value.page=p,Z()},K=()=>{u.value=window.innerHeight-320},ie=()=>{m.value=null,A.value=!0},t=p=>{Z(),p==1&&(A.value=!1,m.value=null),p==2&&(N.value=!1),p==4&&(S.value=!1),m.value=null},le=async p=>{try{const r=await X({url:`agreement/delete/${p.id}`,method:"DELETE"});r.status==200&&(Z(),z.success(r.message))}catch(r){console.error("Error de red:",r)}},x=Ne(()=>p=>b.value.page*e.value+p+1),Z=async p=>{try{q.value=!0;let r;r=b.value.page==0?"":b.value,r=p?{...r,...p}:r;const{data:O}=await X({url:"agreement/list/ugo",method:"GET",params:r});G.value=O==null?void 0:O.data,I.value=O.total,e.value=O.per_page}catch(r){console.error("Error de red:",r)}finally{q.value=!1}},we=async()=>{C.value=!0;try{const p=await te({url:`${L}agreement/download`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${V}`}}),r=window.URL.createObjectURL(new Blob([p.data])),O=document.createElement("a"),Q="convenios.xlsx";O.href=r,O.setAttribute("download",Q),document.body.appendChild(O),O.click(),window.URL.revokeObjectURL(r),document.body.removeChild(O)}catch(p){console.error("Error downloading file:",p)}finally{C.value=!1}};return Re(()=>{window.removeEventListener("resize",K)}),W(()=>{window.addEventListener("resize",K),K(),Z()}),(p,r)=>{const O=d("a-button"),Q=d("a-col"),re=d("a-input"),pe=d("a-input-group"),xe=d("a-row"),me=d("a-tag"),ke=d("a-progress"),de=d("a-menu-item"),Ee=d("a-popconfirm"),Ie=d("a-menu"),Oe=d("a-dropdown"),Se=d("a-table"),Ue=d("a-pagination"),ee=d("a-drawer");return s(),v(P,null,[E("div",null,[rt,n(xe,{style:{margin:"1rem 0"}},{default:l(()=>[n(Q,{xs:24,md:12,lg:18},{default:l(()=>[n(O,{type:"primary",onClick:ie,style:{"margin-right":".5rem"}},{default:l(()=>[j("NUEVO")]),_:1}),n(O,{class:"btn-excel",onClick:we,loading:C.value,type:"primary"},{default:l(()=>[dt]),_:1},8,["loading"])]),_:1}),n(Q,{xs:24,md:12,lg:6},{default:l(()=>[n(pe,{compact:""},{default:l(()=>[n(re,{value:i.search,"onUpdate:value":r[0]||(r[0]=f=>i.search=f),style:{width:"calc(100% - 80px)"},onInput:h},null,8,["value"]),n(O,{type:"primary",disabled:i.search==="",onClick:o},{default:l(()=>[j("BUSCAR")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),n(Se,{bordered:"",scroll:{x:$.value,y:u.value},class:"table-agreements",columns:a,"data-source":G.value,pagination:!1,loading:q.value,size:"small"},{headerCell:l(({column:f})=>[]),bodyCell:l(({column:f,record:_,index:$e})=>[f.dataIndex=="idx"?(s(),v(P,{key:0},[j(H(x.value($e)),1)],64)):D("",!0),f.dataIndex=="externo"?(s(),v(P,{key:1},[_.external==1?(s(),k(me,{key:0,color:"cyan"},{default:l(()=>[j("Externo")]),_:1})):D("",!0)],64)):D("",!0),f.dataIndex=="startOperations"?(s(),v(P,{key:2},[_.startOperations?(s(),v("span",ct,H(y(_.startOperations)),1)):(s(),v("span",ut,"-"))],64)):D("",!0),f.dataIndex=="startDate"?(s(),v(P,{key:3},[_.startDate?(s(),v("span",pt,H(y(_==null?void 0:_.startDate)),1)):(s(),v("span",mt,"-"))],64)):D("",!0),f.dataIndex=="endDate"?(s(),v(P,{key:4},[j(H(y(_==null?void 0:_.endDate)),1)],64)):D("",!0),f.dataIndex=="numbrestantes"?(s(),v(P,{key:5},[R(_.endDate,_.startDate)>=1?(s(),v("p",vt,H(R(_.endDate,_.startDate))+" días faltantes",1)):(s(),v("p",_t,H(R(_.endDate,_.startDate))+" días vencidos",1))],64)):D("",!0),f.dataIndex=="status"?(s(),k(ke,{key:6,style:{margin:"0"},percent:R(_.endDate,_.startDate),size:4,showInfo:!1,strokeColor:oe(R(_.endDate,_.startDate))},null,8,["percent","strokeColor"])):D("",!0),f.dataIndex=="observations"?(s(),v(P,{key:7},[_!=null&&_.observations?(s(),k(T(Ve),{key:0,class:"observation-icon",onClick:ce=>U(_)},null,8,["onClick"])):D("",!0)],64)):D("",!0),f.dataIndex=="actions"?(s(),k(Oe,{key:8,trigger:["click"]},{overlay:l(()=>[n(Ie,null,{default:l(()=>[n(de,null,{default:l(()=>[E("a",{onClick:ce=>J(_)},"Archivos",8,ft)]),_:2},1024),n(de,null,{default:l(()=>[E("a",{onClick:ce=>M(_)},"Editar",8,ht)]),_:2},1024),n(de,null,{default:l(()=>[n(Ee,{title:"¿Seguro de eliminar?",onConfirm:ce=>le(_)},{icon:l(()=>[n(T(Ye),{style:{color:"red"}})]),default:l(()=>[yt]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[E("a",{class:"ant-dropdown-link",onClick:r[1]||(r[1]=Le(()=>{},["prevent"]))},[n(O,{shape:"circle",icon:be(T(Pe)),size:"small"},null,8,["icon"])])]),_:2},1024)):D("",!0)]),_:1},8,["scroll","data-source","loading"])]),E("div",gt,[E("span",null,[n(me,{color:"blue"},{default:l(()=>[E("b",null,H(I.value),1)]),_:1}),j("Convenios")]),n(Ue,{size:"small",total:I.value,pageSize:e.value,onChange:se,showSizeChanger:!1},null,8,["total","pageSize"])]),n(ee,{open:A.value,"onUpdate:open":r[3]||(r[3]=f=>A.value=f),"root-class-name":"root-class-name",title:"Convenios",placement:"right",width:"650"},{default:l(()=>[n(Je,{idConvenio:m.value,onCloseDraw:r[2]||(r[2]=f=>t(1))},null,8,["idConvenio"])]),_:1},8,["open"]),n(ee,{open:N.value,"onUpdate:open":r[6]||(r[6]=f=>N.value=f),title:"Acciones",placement:"right",width:"550"},{default:l(()=>[n(et,{idConvenio:m.value,onCloseDraw:r[4]||(r[4]=f=>t(2)),onRefreshTable:r[5]||(r[5]=f=>Z())},null,8,["idConvenio"])]),_:1},8,["open"]),n(ee,{open:F.value,"onUpdate:open":r[8]||(r[8]=f=>F.value=f),title:"Cargar Archivos",placement:"right",width:"550"},{default:l(()=>[n(lt,{idConvenio:m.value,onCloseDraw:r[7]||(r[7]=f=>t(3))},null,8,["idConvenio"])]),_:1},8,["open"]),n(ee,{open:S.value,"onUpdate:open":r[11]||(r[11]=f=>S.value=f),title:"Observaciones",placement:"right",width:"550"},{default:l(()=>[n(tt,{idConvenio:m.value,onCloseDraw:r[9]||(r[9]=f=>t(4)),onRefreshTable:r[10]||(r[10]=f=>Z())},null,8,["idConvenio"])]),_:1},8,["open"])],64)}}},Ut=De(bt,[["__scopeId","data-v-8f391104"]]);export{Ut as default};
