import{_ as q}from"./TableComponent-f6bf1cb8.js";import{c as s,A as J,r as p,u as X,a as K,k as Q,X as E,b as g,o as f,d as y,w as i,p as V,m as W,y as O,i as b,z as h,F as Z,j as D,t as I,e as C}from"./index-50a1728d.js";import{_ as ee}from"./DrawMP-28018958.js";import"./downloadExcel-287e2265.js";import"./es-62d225f3.js";import{g as T}from"./publicInscripcion-ebc9ecb9.js";import{G as te}from"./GlobalOutlined-91eeeac5.js";import"./icoexcel-1b303edf.js";import"./selectes-dcf5f747.js";import"./SyncOutlined-fc4a6188.js";import"./MoreOutlined-b42fbb1f.js";import"./FormComponent-b857d38d.js";import"./quill.snow-a7367c41.js";import"./UpImage-52a2ac0c.js";import"./_plugin-vue_export-helper-c27b6911.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};const ne=ae;function A(c){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),d.forEach(function(o){oe(c,o,n[o])})}return c}function oe(c,t,n){return t in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}var N=function(t,n){var d=A({},t,n.attrs);return s(J,A({},d,{icon:ne}),null)};N.displayName="VideoCameraOutlined";N.inheritAttrs=!1;const re=N;const le={class:"layout-content"},ie={key:3},se=["onClick"],ce=["onClick"],Ce={__name:"mp-index",setup(c){JSON.parse(localStorage.getItem("role"));const t=p([]),n=p(0),d=p(150),o=p(!1);p(!1),X();const w=p(!1),v=p(null),R=p(!1),a=K({page:1}),H=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK INSCRIPCIONES",dataIndex:"link",width:80,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"LINK SALA",dataIndex:"link_sala",width:50,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],S=e=>e?V(e,["HH:mm:ss","HH:mm"]).format("hh:mm A"):null,$=e=>{v.value=e,o.value=!0},P=()=>{_(),o.value=!1},Y=()=>{v.value=null,o.value=!0},z=async()=>{},M=async e=>{a.page=e,await _()},j=async e=>{e&&(a.page=1,await _())},k=(e,r)=>{const u=`${T()}/${r}/${e}`;window.open(u,"_blank")},B=e=>{const r=`${T()}/mujer-produce-asistencia/${e}`;window.open(r,"_blank")},_=async()=>{try{w.value=!0;const e={page:a.page};a.year&&(e.year=V(a.year).format("YYYY")),a.range&&(e.startDate=a.range[0].format("YYYY/MM/DD"),e.endDate=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const r=await W({url:"mp/index-events",method:"GET",params:e}),{data:u}=r;t.value=u.data,n.value=u.total,d.value=u.per_page}catch(e){console.error("Error de red:",e)}finally{w.value=!1}};return Q(async()=>{await _()}),E("search",a),E("loading",w),E("loadingFile",R),(e,r)=>{const u=g("a-button"),F=g("a-tag"),x=g("a-menu-item"),G=g("router-link"),L=g("a-drawer");return f(),y("div",le,[s(q,{title:"CAPACITACIONES",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:H,titleSearch:"BUSCAR POR EVENTO",pageSize:d.value,nameTotal:"Capacitaciones",dataSource:t.value,total:n.value,btnUpdate:!0,onHandleNew:Y,onHandleCallFetchData:_,onHandleDownloadExcel:z,onHandleSearch:j,onHandlePaginator:M},{"data-cell":i(({column:l,record:m})=>[l.dataIndex=="link"?(f(),O(u,{key:0,onClick:U=>k(m.slug,"mujer-produce"),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:i(()=>[s(b(te))]),_:2},1032,["onClick"])):h("",!0),l.dataIndex=="link_sala"?(f(),y(Z,{key:1},[m.link?(f(),O(u,{key:0,onClick:U=>k(m.slug,"mujer-produce-sala-link"),style:{color:"#2196f3","font-size":"16px","margin-top":"-2px"},type:"text"},{default:i(()=>[s(b(re))]),_:2},1032,["onClick"])):h("",!0)],64)):h("",!0),l.dataIndex=="registered"?(f(),O(F,{key:2,color:"purple"},{default:i(()=>[D(I(m.registered),1)]),_:2},1024)):h("",!0),l.dataIndex=="hours"?(f(),y("span",ie,[C("span",null,I(S(m.hourStart))+" – "+I(S(m.hourEnd)),1)])):h("",!0)]),"custom-options":i(({record:l})=>[s(x,null,{default:i(()=>[C("span",{onClick:m=>B(l.slug)}," Asistencia ",8,se)]),_:2},1024),s(x,null,{default:i(()=>[s(G,{to:`/admin/mp/inscritos/${l.slug}`},{default:i(()=>r[1]||(r[1]=[D(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),s(x,null,{default:i(()=>[C("a",{onClick:m=>$(l)},"Editar",8,ce)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),s(L,{open:o.value,"onUpdate:open":r[0]||(r[0]=l=>o.value=l),title:v.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:i(()=>[s(ee,{onCloseDraw:P,info:v.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ce as default};
