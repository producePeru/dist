import{p as $,r as i,a as W,k as F,U as Z,X as H,o as b,d as E,c as t,m as P,h as x,b as q,e as s,w as c,F as j,v as X,t as M,i as C,_ as J,$ as K,P as Q,j as V}from"./index-6461f108.js";import{_ as ee}from"./FormComponent-7baeaed8.js";import{u as ae}from"./selectes-7910164a.js";import"./es-208a6fcf.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./quill.snow-d12f2c99.js";const oe={__name:"EspecialistaCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:I}){$.locale("es");const h=i({name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1},ocupation:{type:"iText",label:"ESPECIALIDAD",name:"ocupation",required:!0,message:"Ingrese la especialidad",disabled:!1},color:{type:"iColor",label:"COLOR IDENTIFICADOR",name:"color",required:!0,message:"Ingrese el color",disabled:!1}}),w=I,p=G,S=i("REGISTRAR"),a=W({office_id:1}),f=i(!1),l=ae(),D=i(null),m=i({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},N=async e=>{e=="dateReception"&&(a.dateTramite&&(a.dateTramite=null),h.value.dateTramite.disabled=!1)},R=async e=>{console.log("handleChangeSelect",e)},A=async e=>{e=="gender_id"&&(await l.fetchGenders(),m.value.gender_id=l.genders),e=="office_id"&&(await l.fetchOffices(),m.value.office_id=l.Offices),e=="cde_id"&&(await l.fetchCdes(),m.value.cde_id=l.cdes)},O=async()=>{f.value=!0;const e={name:a.name,ocupation:a.ocupation,color:a.color};try{let o,r=null;p.info?(o=`training/update-specialist/${p.info.id}`,r="PUT"):(o="training/register-specialist",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),w("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{a.name=null,a.ocupation=null},y=async e=>{e&&(a.name=e.name,a.ocupation=e.ocupation,a.color=e.color)};return F(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),H("formState",a),H("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:R,onHandleFocusSelect:A,onHandleChangeClock:N,onOnSubmit:O,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}},le={__name:"DimensionCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:I}){$.locale("es");const h=i({name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingrese el nombre",disabled:!1}}),w=I,p=G,S=i("REGISTRAR"),a=W({office_id:1}),f=i(!1),l=ae(),D=i(null),m=i({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},N=async e=>{e=="dateReception"&&(a.dateTramite&&(a.dateTramite=null),h.value.dateTramite.disabled=!1)},R=async e=>{console.log("handleChangeSelect",e)},A=async e=>{e=="gender_id"&&(await l.fetchGenders(),m.value.gender_id=l.genders),e=="office_id"&&(await l.fetchOffices(),m.value.office_id=l.Offices),e=="cde_id"&&(await l.fetchCdes(),m.value.cde_id=l.cdes)},O=async()=>{f.value=!0;const e={name:a.name,ocupation:a.ocupation};try{let o,r=null;p.info?(o=`training/update-dimension/${p.info.id}`,r="PUT"):(o="training/register-dimension",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),w("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{a.name=null,a.ocupation=null},y=async e=>{e&&(a.name=e.name,a.ocupation=e.ocupation)};return F(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),H("formState",a),H("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:R,onHandleFocusSelect:A,onHandleChangeClock:N,onOnSubmit:O,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}},ie={__name:"MetasCapacitaciones",props:["info"],emits:["closeDraw"],setup(G,{emit:I}){$.locale("es");const h=i({month:{type:"iDatePickerType",label:"MES",name:"month",required:!0,message:"Seleccionar fecha",disabled:!1,picker:"month"},capacitaciones:{type:"iNumber",label:"CANTIDAD DE CAPACITACIONES",name:"capacitaciones",required:!0,message:"Ingrese el número de capacitaciones",disabled:!1,maxlength:5},participantes:{type:"iNumber",label:"CANTIDAD DE PARTICIPANTES",name:"participantes",required:!0,message:"Ingrese el número de participantes",disabled:!1,maxlength:5},empresas:{type:"iNumber",label:"CANTIDAD DE EMPRESAS",name:"empresas",required:!0,message:"Ingrese el número de empresas",disabled:!1,maxlength:5}}),w=I,p=G,S=i("REGISTRAR"),a=W({office_id:1}),f=i(!1),l=ae(),D=i(null),m=i({gender_id:[],office_id:[],cde_id:[]}),T=e=>{console.log("handleInputEvent",e)},N=async e=>{e=="dateReception"&&(a.dateTramite&&(a.dateTramite=null),h.value.dateTramite.disabled=!1)},R=async e=>{console.log("handleChangeSelect",e)},A=async e=>{e=="gender_id"&&(await l.fetchGenders(),m.value.gender_id=l.genders),e=="office_id"&&(await l.fetchOffices(),m.value.office_id=l.Offices),e=="cde_id"&&(await l.fetchCdes(),m.value.cde_id=l.cdes)},O=async()=>{f.value=!0;const e={month:$(a.month).format("YYYY-MM"),capacitaciones:a.capacitaciones,participantes:a.participantes,empresas:a.empresas};try{let o,r=null;p.info?(o=`training/update-meta/${p.info.id}`,r="PUT"):(o="training/register-meta",r="POST");const _=await P({url:o,method:r,data:e});_.status===200&&(x.success(_.message),g(),w("closeDraw",!0))}catch(o){o.response&&o.response.data&&o.response.data.message?x.error(o.response.data.message):x.error("Ocurrió un error inesperado.");const r=document.getElementsByClassName("ant-drawer-body")[0];r&&(r.scrollTop=0)}finally{f.value=!1}},g=()=>{a.name=null,a.ocupation=null},y=async e=>{e&&(a.month=$(e.month,"YYYY-MM"),a.capacitaciones=e.capacitaciones,a.participantes=e.participantes,a.empresas=e.empresas)};return F(()=>{p.info&&y(p.info)}),Z(()=>p.info,e=>{e?y(e):g()}),H("formState",a),H("loadingState",f),(e,o)=>(b(),E("div",null,[t(ee,{fields:h.value,options:m.value,btnSaveName:S.value,onHandleInputEvent:T,resetSelect:D.value,onHandleChangeSelect:R,onHandleFocusSelect:A,onHandleChangeClock:N,onOnSubmit:O,mayus:!0},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const ce={class:""},re={class:"capacitaciones-content"},de={class:"cap-esp-box"},ue={style:{display:"flex","flex-direction":"column"}},pe={style:{"font-size":"12px",color:"#838383"}},fe={class:"capacitaciones-content"},me={class:"cap-esp-box"},ve={style:{display:"flex","flex-direction":"column"}},ge={class:"capacitaciones-content"},_e={class:"cap-esp-box"},he={style:{display:"flex","flex-direction":"column"}},Se={style:{"font-size":"13px",color:"#838383"}},ye={style:{"font-size":"13px",color:"#838383"}},Ce={style:{"font-size":"13px",color:"#838383"}},be={style:{"font-size":"13px",color:"#838383"}},Ee={__name:"panel-index",setup(G){$.locale("es");const I=i([]),h=i([]),w=i([]),p=i(!1),S=i(!1),a=i(!1),f=i(!1),l=i(!1),D=i(!1),m=i(null),T=i(null),N=i(null),R=()=>{p.value=!0},A=()=>{S.value=!0},O=()=>{a.value=!0},g=(d,n)=>{d=="especialistas"?(p.value=!0,m.value=n):d=="dimension"?(S.value=!0,T.value=n):d=="metas"&&(a.value=!0,N.value=n)},y=()=>{p.value=!1,r()},e=()=>{S.value=!1,B()},o=()=>{a.value=!1,ne()},r=async()=>{f.value=!0;try{const d=await P({url:"training/list-specialist",method:"GET"});d.status==200&&(I.value=d.data)}catch(d){console.error("Error de red:",d)}finally{f.value=!1}},_=async(d,n)=>{let v=null;d=="especialistas"?(v=`training/delete-specialist/${n}`,f.value=!0):d=="dimension"&&(v=`training/delete-dimension/${n}`,l.value=!0);try{const k=await P({url:v,method:"DELETE"});k.status==200&&(x.success(k.message),d=="especialistas"?(f.value=!1,r()):d=="dimension"&&(l.value=!1,B()))}catch(k){console.error("Error de red:",k)}},B=async()=>{l.value=!0;try{const d=await P({url:"training/list-dimension",method:"GET"});d.status==200&&(h.value=d.data)}catch(d){console.error("Error de red:",d)}finally{l.value=!1}},ne=async()=>{D.value=!0;try{const d=await P({url:"training/list-meta",method:"GET"});d.status==200&&(w.value=d.data)}catch(d){console.error("Error de red:",d)}finally{D.value=!1}};return F(async()=>{await r(),await B(),await ne()}),(d,n)=>{const v=q("a-button"),k=q("a-popconfirm"),U=q("a-spin"),z=q("a-col"),te=q("a-row"),L=q("a-drawer");return b(),E("div",ce,[n[16]||(n[16]=s("div",{class:"capacitaciones-title"},[s("h2",{class:""},"⚙️ Configuraciones")],-1)),t(te,{gutter:24},{default:c(()=>[t(z,{span:8},{default:c(()=>[s("div",re,[n[4]||(n[4]=s("h3",null,"👨‍⚕️ Especialistas ",-1)),t(U,{spinning:f.value},{default:c(()=>[(b(!0),E(j,null,X(I.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",de,[s("div",ue,[s("span",null,M(u.name),1),s("span",pe,M(u.ocupation),1)])]),s("div",null,[t(v,{type:"text",onClick:Y=>g("especialistas",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(k,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:Y=>_("especialistas",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),n[5]||(n[5]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:R},{icon:c(()=>[t(C(Q))]),default:c(()=>[n[3]||(n[3]=V(" AGREGAR "))]),_:1})])]),_:1}),t(z,{span:8},{default:c(()=>[s("div",fe,[n[7]||(n[7]=s("h3",null,"📐 Dimensiones",-1)),t(U,{spinning:l.value},{default:c(()=>[(b(!0),E(j,null,X(h.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",me,[s("div",ve,[s("span",null,M(u.name),1)])]),s("div",null,[t(v,{type:"text",onClick:Y=>g("dimension",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(k,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:Y=>_("dimension",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),n[8]||(n[8]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:A},{icon:c(()=>[t(C(Q))]),default:c(()=>[n[6]||(n[6]=V(" AGREGAR "))]),_:1})])]),_:1}),t(z,{span:8},{default:c(()=>[s("div",ge,[n[14]||(n[14]=s("h3",null,"📊 Metas",-1)),t(U,{spinning:l.value},{default:c(()=>[(b(!0),E(j,null,X(w.value,u=>(b(),E("div",{key:u.id,class:"capacitacion-especialista"},[s("div",_e,[s("div",he,[s("div",null,[n[9]||(n[9]=s("span",null,"Mes: ",-1)),s("span",Se,M(C($)(u.month).format("MMMM YYYY")),1)]),s("div",null,[n[10]||(n[10]=s("span",null,"Capacitaciones: ",-1)),s("span",ye,M(u.capacitaciones),1)]),s("div",null,[n[11]||(n[11]=s("span",null,"Participantes: ",-1)),s("span",Ce,M(u.participantes),1)]),s("div",null,[n[12]||(n[12]=s("span",null,"Empresas: ",-1)),s("span",be,M(u.empresas),1)])])]),s("div",null,[t(v,{type:"text",onClick:Y=>g("metas",u)},{icon:c(()=>[t(C(J))]),_:2},1032,["onClick"]),t(k,{title:"¿Seguro que deseas eliminar este registro?","ok-text":"Sí","cancel-text":"No",onConfirm:Y=>_("dimension",u.id)},{default:c(()=>[t(v,{type:"text",danger:""},{icon:c(()=>[t(C(K))]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["spinning"]),n[15]||(n[15]=s("br",null,null,-1)),t(v,{type:"dashed",block:"",onClick:O},{icon:c(()=>[t(C(Q))]),default:c(()=>[n[13]||(n[13]=V(" AGREGAR "))]),_:1})])]),_:1})]),_:1}),t(L,{title:"ESPECIALISTA",open:p.value,"onUpdate:open":n[0]||(n[0]=u=>p.value=u),placement:"right",width:"500px"},{default:c(()=>[t(oe,{onCloseDraw:y,info:m.value},null,8,["info"])]),_:1},8,["open"]),t(L,{title:"DIMENSIÓN",open:S.value,"onUpdate:open":n[1]||(n[1]=u=>S.value=u),placement:"right",width:"500px"},{default:c(()=>[t(le,{onCloseDraw:e,info:T.value},null,8,["info"])]),_:1},8,["open"]),t(L,{title:"METAS",open:a.value,"onUpdate:open":n[2]||(n[2]=u=>a.value=u),placement:"right",width:"500px"},{default:c(()=>[t(ie,{onCloseDraw:o,info:N.value},null,8,["info"])]),_:1},8,["open"])])}}},ke=se(Ee,[["__scopeId","data-v-5b9c8d10"]]);export{ke as default};
