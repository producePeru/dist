import{_ as N}from"./TableComponent-2f7b1d05.js";import{p as O,r as o,a as R,k as y,T as P,W as u,o as T,d as b,c as m,m as I,h as B,b as E,w,e as U}from"./index-f83297cf.js";import{_ as k}from"./FormComponent-49323c9e.js";import"./es-3a34cef2.js";import"./icoexcel-1b303edf.js";import"./selectes-9d20b055.js";import"./SyncOutlined-2dfb26a7.js";import"./MoreOutlined-0b36acdc.js";import"./quill.snow-5ac337ed.js";const $={class:"draw-mp-capacitador"},M={__name:"MujerProduceCapacitador",props:["info"],emits:["closeDraw"],setup(D,{emit:p}){O.locale("es");const f=o({dni:{type:"iText",label:"DNI DEL CAPACITADOR",name:"dni",required:!0,message:"Escribir DNI del capacitador",disabled:!1,max:8},name:{type:"iText",label:"NOMBRE DEL CAPACITADOR",name:"name",required:!0,message:"Escribir nombre del capacitador",disabled:!1,max:255}}),_=p,e=D,r=o("GUARDAR"),t=R({}),c=o(!1),s=async()=>{c.value=!0;try{const a={dni:t.dni,name:t.name},l=e.info?`mp/update-capacitador/${e.info.id}`:"mp/register-capacitador",A=e.info?"PUT":"POST",C=await I({url:l,method:A,data:a});C.status===200&&(B.success(C.message),h(),_("closeDraw",!0))}catch(a){console.error("Error:",a);const l=document.getElementsByClassName("ant-drawer-body")[0];l&&(l.scrollTop=0)}finally{c.value=!1}},h=()=>{t.dni=null,t.name=null},v=async a=>{a&&(t.dni=a.dni,t.name=a.name)};return y(()=>{e.info&&v(e.info)}),P(()=>e.info,a=>{a?v(a):h()}),u("formState",t),u("loadingState",c),(a,l)=>(T(),b("div",$,[m(k,{fields:f.value,btnSaveName:r.value,onOnSubmit:s,mayus:!1},null,8,["fields","btnSaveName"])]))}},H={class:"layout-content"},q=["onClick"],X={__name:"mp-capacitadores",setup(D){const p=o([]),f=o(0),_=o(150),e=o(!1),r=o(!1),t=o(null),c=o(!1),s=R({name:null,page:1}),h=[{title:"#",dataIndex:"idx",align:"center",width:10},{title:"NOMBRE DEL CAPACITADOR",dataIndex:"name",width:180},{title:"",dataIndex:"actions",width:10,align:"center",fixed:"right"}],v=n=>{t.value=n,e.value=!0},a=()=>{i(),e.value=!1},l=()=>{t.value=null,e.value=!0},A=async n=>{s.page=n,await i()},C=async n=>{n&&(s.page=1,await i())},i=async()=>{r.value=!0;try{const n={page:s.page};s.name&&(n.name=s.name);const g=await I({url:"mp/all-capacitadores",method:"GET",params:n}),{data:d}=g;p.value=d.data,f.value=d.total,_.value=d.per_page}catch(n){console.error("Error de red:",n)}finally{r.value=!1}};return y(async()=>{await i()}),u("search",s),u("loading",r),u("loadingFile",c),(n,g)=>{const d=E("a-menu-item"),x=E("a-drawer");return T(),b("div",H,[m(N,{title:"CAPACITADORES DE MUJER PRODUCE",new:!0,textNuevo:"NUEVO CAPACITADOR",placeholderSearch:"Buscar",columns:h,titleSearch:"BUSCAR",pageSize:_.value,nameTotal:"Capacitadores",dataSource:p.value,total:f.value,btnUpdate:!0,onHandleNew:l,onHandleCallFetchData:i,onHandleSearch:C,onHandlePaginator:A},{"custom-options":w(({record:S})=>[m(d,null,{default:w(()=>[U("a",{onClick:z=>v(S)},"Editar",8,q)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),m(x,{open:e.value,"onUpdate:open":g[0]||(g[0]=S=>e.value=S),title:t.value?"EDITAR CAPACITADOR":"REGISTRAR CAPACITADOR",placement:"right",width:"550"},{default:w(()=>[m(M,{onCloseDraw:a,info:t.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{X as default};
