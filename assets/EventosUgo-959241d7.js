import{p as _,r as b,E as K,a as Q,U as N,k as X,b as E,o as n,y as o,i as I,L as ee,d as P,c as A,w as c,e as ae,F as x,v as te,z as u,M as ie,j as le,t as se,m as re,h as y}from"./index-46c00c2f.js";import{u as ne}from"./selectes-cefacecb.js";import"./es-0d4ec0f0.js";const de={key:1},oe={class:"form-attendance"},ue="DD/MM/YYYY",Ae={__name:"EventosUgo",props:["dataRow"],emits:["closeDraw"],setup(h,{emit:F}){_.locale("es");const r=ne();r.$patch({cities:r.cities}),r.$patch({provinces:r.provinces}),r.$patch({districts:r.districts}),r.fetchCities(),r.fetchAsesores();const C=b(!1),p=h,w=F;K();const S=b(!0),e=Q({}),d=b({eventsoffice_id:{type:"iSelect",label:"TIPO DE ACTIVIDAD",name:"eventsoffice_id",required:!0,message:"Seleccionar un tipo de actividad",disabled:!0},title:{type:"iSelect",label:"NOMBRE DE ACTIVIDAD",name:"title",required:!0,message:"Escribir el nombre de la actividad",disabled:!0,max:100},theme:{type:"iText",label:"TEMA DE LA ACTIVIDAD",name:"theme",required:!0,message:"Seleccionar tema de actividad",disabled:!1},entidad:{type:"iText",label:"NOMBRE DE ENTIDAD ORGANIZADORA",name:"entidad",required:!0,message:"Escribir nombre de la entidad",disabled:!1},entidad_aliada:{type:"iText",label:"NOMBRE DE ENTIDAD O INSTITUCION ALIADA / PARTICIPANTE",name:"entidad_aliada",required:!0,message:"Escribir nombre de la entidad aliada",disabled:!1},people_id:{type:"iSelectWrite",label:"REPRESENTANTE DE PRODUCE QUE PARTICIPA (APELLIDOS Y NOMBRES)",name:"people_id",required:!0,message:"Seleccionar al asesor",disabled:!0},beneficiarios:{type:"iNumber",label:"MYPE Y/O EMPRENDEDORES BENEFICIADOS ESPERADOS",name:"beneficiarios",required:!0,message:"Escribir número de beneficiarios",disabled:!0},startDate:{type:"iDate",label:"FECHA INICIO DE LA ACTIVIDAD",name:"startDate",required:!0,message:"Seleccionar fecha de Inicio",disabled:!1},endDate:{type:"iDate",label:"FECHA CIERRE DE LA ACTIVIDAD",name:"endDate",required:!0,message:"Seleccionar fecha de Fin",disabled:!1,placeholder:"Ejemplo: Lunes 20 de enero"},modality:{type:"iSelect",label:"MODALIDAD",name:"modality",required:!0,message:"Seleccionar modalidad",disabled:!0}}),D=b([]),L=b([]),Y=[{label:"SI",value:"s"},{label:"NO",value:"n"}],V=[{label:"PRESENCIAL",value:"p"},{label:"VIRTUAL",value:"v"}],T=(a,i)=>{if(a=="eventsoffice_id"&&(console.log("00a0a0a00a",i),e.title=null,e.theme=null,d.value.theme.disabled=!1,i==12?(d.value.theme.type="iText",D.value=[{label:"POTENCIA TU EMPRESA - FORMALIZACIÓN",value:"POTENCIA TU EMPRESA - FORMALIZACIÓN"},{label:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL",value:"POTENCIA TU EMPRESA - GESTIÓN EMPRESARIAL"},{label:"POTENCIA TU EMPRESA - DIGITALIZACIÓN",value:"POTENCIA TU EMPRESA - DIGITALIZACIÓN"},{label:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO",value:"POTENCIA TU EMPRESA - DESAROLLO PRODUCTIVO"},{label:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO",value:"POTENCIA TU EMPRESA - ACCESO AL FINANCIAMIENTO"}]):i==13?D.value=[{label:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE",value:"DIFUSIÓN DE LOS SERVICIOS DEL PNTE"}]:i==14?D.value=[{label:"FORTALECE TU MERCADO",value:"FORTALECE TU MERCADO"}]:i==15?D.value=[{label:"CAMPAÑA DESPEGA TU EMPRESA",value:"CAMPAÑA DESPEGA TU EMPRESA"}]:D.value=[]),a=="title"&&(i=="DIFUSIÓN DE LOS SERVICIOS DEL PNTE"&&(d.value.theme.disabled=!0,d.value.theme.type="iText",e.theme="Brindar difusión de los servicios de los cinco componentes del PNTE"),i=="FORTALECE TU MERCADO"&&(d.value.theme.type="iSelect",L.value=[{label:"FLUJO DE CAJA",value:"FLUJO DE CAJA"},{label:"GESTIÓN EMPRESARIAL",value:"GESTIÓN EMPRESARIAL"},{label:"FINANCIAMIENTO",value:"FINANCIAMIENTO"},{label:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA",value:"CREA TU CATÁLOGO DIGITAL CON WHATSAPP BUSSINESS - MAIA"},{label:"DESTACA Y VENDE MÁS",value:"DESTACA Y VENDE MÁS"}]),i=="CAMPAÑA DESPEGA TU EMPRESA"&&(d.value.theme.disabled=!0,d.value.theme.type="iText",e.theme="Difusión, asesorías y formalización de MYPES")),a==="modality"){const m=["city_id","province_id","district_id","address","pasaje","monto"];O(m),i==="v"?U(m):i==="p"&&(d.value={...d.value,city_id:{type:"iSelectWrite",label:"REGIÓN DE LA ACTIVIDAD",name:"city_id",required:!0,message:"Seleccionar región",disabled:!1},province_id:{type:"iSelectWrite",label:"PROVINCIA DE LA ACTIVIDAD",name:"province_id",required:!0,message:"Seleccionar provincia",disabled:!1},district_id:{type:"iSelectWrite",label:"DISTRITO DE LA ACTIVIDAD",name:"district_id",required:!0,message:"Seleccionar distrito",disabled:!1},address:{type:"iText",label:"LUGAR DE LA ACTIVIDAD",name:"address",required:!0,message:"Escribir lugar de la actividad",disabled:!1,max:100,placeholder:"Ejemplo: Av. Los Incas 1234 - San Miguel"},pasaje:{type:"iSelect",label:"¿REQUERIRÁ PASAJES?",name:"pasaje",required:!0,message:"Seleccionar si requiere pasajes",disabled:!0},monto:{type:"iNumber",label:"COLOCAR SOLO EL MONTO DE GASTOS EN PASAJES EN SOLES IDA + VUELTA (INTERPROVINCIAL)",name:"monto",required:!0,message:"Escribir el monto de pasajes",disabled:!0}})}},O=a=>{a.forEach(i=>{e.hasOwnProperty(i)&&(e[i]=null)})},U=a=>{a.forEach(i=>delete d.value[i])};N(()=>e.startDate,a=>{e.endDate&&new Date(a)>new Date(e.endDate)&&(e.endDate=null)}),N(()=>e.endDate,a=>{e.startDate&&new Date(a)<new Date(e.startDate)&&(e.startDate=null)});const f=(a,i)=>{const m=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(m)},k=a=>{if(a=="modality")return V;if(a=="powerBy")return pertenece;if(a=="fairtype_id")return typeFair;if(a=="eventsoffice_id")return G();if(a=="pasaje")return Y;if(a=="title")return D.value;if(a=="theme")return L.value},G=()=>[{value:12,label:"CAPACITACIÓN"},{value:13,label:"DIFUSIÓN"},{value:14,label:"CICLO DE CAPACITACIONES"},{value:15,label:"DESPEGA TU EMPRESA Y PRODUCE"}],g=a=>{e.province_id=null,e.district_id=null,r.fetchProvinces(a)},M=a=>{e.district_id=null,r.fetchDistricts(a)},R=()=>{e.eventsoffice_id=null,e.title=null,e.theme=null,e.entidad=null,e.entidad_aliada=null,e.people_id=null,e.beneficiarios=null,e.startDate=null,e.endDate=null,e.modality=null,O(["city_id","province_id","district_id","address","pasaje","monto"])},j=async()=>{C.value=!0;const a={eventsoffice_id:e.eventsoffice_id,title:e.title,theme:e.theme,entidad:e.entidad,entidad_aliada:e.entidad_aliada,beneficiarios:e.beneficiarios,startDate:_(e.startDate).format("YYYY-MM-DD"),endDate:_(e.endDate).format("YYYY-MM-DD"),modality:e.modality,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,pasaje:e.pasaje,monto:e.monto,asesorId:e.people_id};try{const i=p.dataRow?"PUT":"POST",m=p.dataRow?`attendance/update/${p.dataRow.id}`:"attendance/create",s=await re({url:m,method:i,data:a});s.status==200&&(y.success(s.message),w("closeDraw"),R()),s.status==500&&(y.error(s.message),R()),s.status==403&&y.error(s.message)}catch(i){y.error("Se presentó un error, los valores son requeridos",i)}finally{C.value=!1}},B=a=>{const i=e[a]?e[a].trim():"";e[a]=i};function q(a){S.value=!0;try{if(T("eventsoffice_id",a.tipo_actividad_id),e.eventsoffice_id=a.tipo_actividad_id,e.title=a.nombre_actividad,e.theme=a.tema,e.entidad=a.entidad,e.entidad_aliada=a.entidad_aliada,e.people_id=a.people_id,e.beneficiarios=a.beneficiarios,e.startDate=a.startDate?_(a.startDate,"DD/MM/YYYY"):null,e.endDate=a.endDate?_(a.endDate,"DD/MM/YYYY"):null,e.modality=a.modality,T("modality",a.modality),a.modality=="PRESENCIAL")T("modality",a.modality=="PRESENCIAL"?"p":"v"),e.city_id=a.city_id,g(a.city_id),e.province_id=a.province_id,M(a.province_id),e.district_id=a.district_id,e.address=a.address,e.pasaje=a.pasaje,e.monto=a.monto;else{const i=["city_id","province_id","district_id","address","pasaje","monto"];O(i),U(i)}}catch(i){console.error("Error al cargar la información:",i)}finally{S.value=!1}}return X(()=>{p.dataRow?q(p.dataRow):S.value=!1}),N(()=>p.dataRow,a=>{a?q(a):R()}),(a,i)=>{const m=E("a-input"),s=E("a-form-item"),v=E("a-select"),z=E("a-textarea"),W=E("a-input-number"),J=E("a-date-picker"),Z=E("a-button"),$=E("a-form");return S.value?(n(),o(I(ee),{key:0,style:{color:"#00a6db"}})):(n(),P("div",de,[A($,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:j},{default:c(()=>[ae("div",oe,[(n(!0),P(x,null,te(d.value,(t,H)=>(n(),P(x,{key:H},[t.type==="iText"?(n(),o(s,{key:0,name:t.name,label:t.label,rules:[{required:t.required,message:t.message,max:t.max}]},{default:c(()=>[A(m,{disabled:t.disabled,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,maxlength:t.max,onBlur:l=>B(t.name),placeholder:t.placeholder},null,8,["disabled","value","onUpdate:value","maxlength","onBlur","placeholder"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iSelect"?(n(),o(s,{key:1,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[A(v,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:k(t.name),onChange:l=>T(t.name,l)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iTextarea"?(n(),o(s,{key:2,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[A(z,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,rows:8,maxlength:t.max},null,8,["value","onUpdate:value","maxlength"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iNumber"?(n(),o(s,{key:3,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[A(W,{value:e[t.name],"onUpdate:value":l=>e[t.name]=l,min:0,max:1e4,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iDate"?(n(),o(s,{key:4,name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[A(J,{locale:I(ie),value:e[t.name],"onUpdate:value":l=>e[t.name]=l,style:{width:"100%"},format:ue,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):u("",!0),t.type==="iSelectWrite"?(n(),o(s,{key:5,class:"item-max",name:t.name,label:t.label,rules:[{required:t.required,message:t.message}]},{default:c(()=>[t.name=="city_id"?(n(),o(v,{key:0,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).cities,"show-search":"","filter-option":f,onChange:g},null,8,["value","onUpdate:value","options"])):u("",!0),t.name=="province_id"?(n(),o(v,{key:1,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).provinces,"show-search":"","filter-option":f,onChange:M,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),t.name=="district_id"?(n(),o(v,{key:2,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).districts,"show-search":"","filter-option":f,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):u("",!0),t.name=="people_id"?(n(),o(v,{key:3,value:e[t.name],"onUpdate:value":l=>e[t.name]=l,options:I(r).asesores,"show-search":"","filter-option":f},null,8,["value","onUpdate:value","options"])):u("",!0)]),_:2},1032,["name","label","rules"])):u("",!0)],64))),128))]),A(s,null,{default:c(()=>[A(Z,{type:"primary","html-type":"submit",loading:C.value},{default:c(()=>[le(se(h.dataRow?"ACTUALIZAR":"GUARDAR"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))}}};export{Ae as _};
