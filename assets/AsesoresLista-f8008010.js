import{l as H,r as v,a as Q,b as u,o as s,x as i,w as o,c as r,e as C,d as N,F,s as ee,h as S,y as m,E as ae,t as X,i as E,I as J,m as P,M as re,p as Y,B as ge,j as be,G as ye,H as he}from"./index-8c375bbc.js";import{u as te}from"./selectes-189440ff.js";import"./es-a0d0c42b.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{f as xe}from"./nuevoUsuario-39eedf3b.js";import{M as we}from"./MoreOutlined-d45e5d7c.js";const Se={email:{type:"iText",label:"Correo",name:"email",required:!1,email:"email",message:"Escribe el correo del usuario",disabled:!0},documentnumber:{type:"iText",label:"Número de DNI",name:"documentnumber",required:!0,message:"Número de DNI",max:8,disabled:!1},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el apellido paterno"},lastname:{type:"iText",label:"Apellido paterno",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"Apellido materno",name:"middlename",required:!0,message:"Escribe el apellido paterno"},birthday:{type:"iDate",label:"Fecha de nacimiento",name:"birthday",required:!1,message:"año-mes-día",placeholder:"año-mes-día"},phone:{type:"iText",label:"Ingresar número celular",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},gender_id:{type:"iSelect",label:"Género",name:"gender_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},cde_id:{type:"iSelect",label:"CDE",name:"cde_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},office_id:{type:"iSelect",label:"Oficina",name:"office_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0}};const De={class:"grid-profile"},Ee="DD/MM/YYYY",Ue={__name:"DrawerEditarDatosAsesor",props:["record"],emits:["closeDraw"],setup(W,{emit:L}){H.locale("es");const n=te(),d=JSON.parse(localStorage.getItem("profile")),x=L;n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const D=W,z=v(!0),M=v(!1),R=v(Se),e=Q({name:null,lastname:null,middlename:null,birthday:null,sick:null,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:d.id}),T=b=>{var w;b&&(e.name=b.profile_name,e.lastname=b.profile_lastname,e.middlename=b.profile_middlename,e.documentnumber=b.profile_documentnumber,e.phone=b.profile_phone,e.gender_id=b.gender_id,e.cde_id=b.cde_id,e.office_id=b.office_id,e.email=b.email,b.profile_birthday&&(e.birthday=H(b.profile_birthday,"YYYY-MM-DD"))),(w=n.genders)!=null&&w.length&&(z.value=!1)},O=b=>{const w={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0};if(b===2)n.fetchSupervisores(),R.value={...R.value,supervisor_id:w};else{const{supervisor_id:U,...q}=R.value;R.value=q}},$=async()=>{M.value=!0;const b={name:e.name,lastname:e.lastname,middlename:e.middlename,birthday:e.birthday?H(e.birthday).format("YYYY-MM-DD"):null,sick:e.sick,phone:e.phone,gender_id:e.gender_id,cde_id:e.cde_id,office_id:e.office_id,user_id:d.id};try{const w=await J({url:`user/update/${D.record._id}`,method:"PUT",data:b});P.success(w.message),x("closeDraw")}catch(w){console.log("NOOo",w)}finally{M.value=!1}},G=()=>{P.error("Debes de completar todos los espacios requeridos")};return(b,w)=>{const U=u("a-select"),q=u("a-form-item"),_=u("a-input"),c=u("a-date-picker"),p=u("a-button"),f=u("a-form"),A=u("a-spin");return s(),i(A,{spinning:z.value},{default:o(()=>[r(f,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:$,onFinishFailed:G},{default:o(()=>[C("div",De,[(s(!0),N(F,null,ee(R.value,(l,k)=>(s(),N(F,{key:k},[l.type==="iSelect"?(s(),i(q,{key:0,class:"item-max",name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:o(()=>[l.name=="gender_id"?(s(),i(U,{key:0,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="cde_id"?(s(),i(U,{key:1,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).cdes},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="office_id"?(s(),i(U,{key:2,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).Offices},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="role_id"?(s(),i(U,{key:3,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).roles,onChange:O},null,8,["value","onUpdate:value","options"])):m("",!0),l.name=="supervisor_id"?(s(),i(U,{key:4,value:e[l.name],"onUpdate:value":g=>e[l.name]=g,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iText"?(s(),i(q,{key:1,name:l.name,label:l.label,rules:[{required:l.required,message:l.message,type:l.email}]},{default:o(()=>[r(_,{value:e[l.name],"onUpdate:value":g=>e[l.name]=g,maxlength:l.max,disabled:l.disabled},null,8,["value","onUpdate:value","maxlength","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),l.type==="iDate"?(s(),i(q,{key:2,name:l.name,label:l.label,rules:[{required:l.required,message:l.message}]},{default:o(()=>[r(c,{locale:S(ae),value:e[l.name],"onUpdate:value":g=>e[l.name]=g,style:{width:"100%"},format:Ee,placeholder:"día/mes/año"},null,8,["locale","value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),C("div",null,X(T(D.record)),1),r(q,null,{default:o(()=>[r(p,{class:"btn-produce",type:"primary","html-type":"submit",loading:M.value},{default:o(()=>w[0]||(w[0]=[E("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}},ke=ne(Ue,[["__scopeId","data-v-f5cfd002"]]);const Ie={class:"grid-item"},Re="DD/MM/YYYY",Oe={__name:"DrawerRegistrarAsesor",setup(W){H.locale("es");const L=JSON.parse(localStorage.getItem("profile")),n=te();n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const d=v(xe),x=v(null),D=v(!1),z=v(!1),M=v(!1);v(!1),v(null);const R=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],e=Q({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:L.user_id,email:null,password:null}),T=()=>{e.name=null,e.lastname=null,e.middlename=null,e.documentnumber=null,x.value=null,e.phone=null,e.gender_id=null,e.cde_id=null,e.office_id=null,e.email=null,e.password=null,e.role_id=null},O=_=>{e[_]=e[_].replace(/\D/g,"")},$=(_,c)=>{const p=_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(p)},G=_=>{const c={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},p={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},f={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},A={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},l={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(_===2){n.fetchSupervisores(),d.value={...d.value,supervisor_id:c};const{city:k,province:g,district:I,address:a,...y}=d.value;d.value=y}else if(_===7){d.value={...d.value,city:p,province:f,district:A,address:l};const{supervisor_id:k,...g}=d.value;d.value=g,d.value.cde_id.required=!1}else{let{city:k,province:g,district:I,address:a,supervisor_id:y,...t}=d.value;d.value=t}},b=async()=>{D.value=!0,e.email=e.name.replace(/\s/g,"").toLowerCase()+e.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",e.password=e.documentnumber,e.birthday=x.value?H(x.value).format("YYYY-MM-DD"):null;try{const _=await J({url:"user/create",method:"POST",data:e});re.success({title:"La cuenta ha sido registrada",content:Y("div",{},[Y("br"),Y("p",`Correo: ${e.email}`),Y("p","Contraseña es el número de DNI ingresado")]),onOk(){T(),P.success(_.message);const{supervisor_id:c,...p}=d.value;d.value=p}})}catch{P.error("No se pudo registrar este usuario")}finally{D.value=!1}},w=()=>{P.error("Debes de completar todos los espacios requeridos")},U=async _=>{console.log("Hello",_)},q=()=>{e.document_number=e.document_number.replace(/\D/g,"")};return(_,c)=>{const p=u("a-select"),f=u("a-form-item"),A=u("a-input-search"),l=u("a-input"),k=u("a-date-picker"),g=u("a-button"),I=u("a-form");return s(),N("div",null,[r(I,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:b,onFinishFailed:w},{default:o(()=>[C("div",Ie,[(s(!0),N(F,null,ee(d.value,(a,y)=>(s(),N(F,{key:y},[a.type==="iSelect"?(s(),i(f,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:o(()=>[a.name=="gender_id"?(s(),i(p,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="cde_id"?(s(),i(p,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).cdes},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="role_id"?(s(),i(p,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:R,onChange:G},null,8,["value","onUpdate:value"])):m("",!0),a.name=="supervisor_id"?(s(),i(p,{key:3,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="office_id"?(s(),i(p,{key:4,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,"show-search":"",options:S(n).Offices,"filter-option":$},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iSearch"?(s(),i(f,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:o(()=>[r(A,{maxlength:15,loading:z.value,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,onSearch:U,onInput:q,disabled:M.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iText"?(s(),i(f,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:o(()=>[a.name=="documentnumber"?(s(),i(l,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[0]||(c[0]=t=>O("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):a.name=="phone"?(s(),i(l,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[1]||(c[1]=t=>O("phone"))},null,8,["value","onUpdate:value","maxlength"])):(s(),i(l,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,disabled:a.disabled},null,8,["value","onUpdate:value","maxlength","disabled"]))]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iDate"?(s(),i(f,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:o(()=>[r(k,{locale:S(ae),value:x.value,"onUpdate:value":c[2]||(c[2]=t=>x.value=t),style:{width:"100%"},format:Re},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),r(f,null,{default:o(()=>[r(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:D.value},{default:o(()=>c[3]||(c[3]=[E("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},qe=ne(Oe,[["__scopeId","data-v-1f072082"]]),Ae={agente:{type:"iText",label:"ENTIDAD AGENTE ALIADO",name:"agente",required:!0,message:"Ingresar los nombres"},name:{type:"iText",label:"NOMBRE",name:"name",required:!0,message:"Ingresar los nombres"},lastname:{type:"iText",label:"APELLIDO PATERNO",name:"lastname",required:!0,message:"Escribe el apellido paterno"},middlename:{type:"iText",label:"APELLIDO MATERNO",name:"middlename",required:!0,message:"Escribe el apellido paterno"},documentnumber:{type:"iText",label:"NÚMERO DE DNI",name:"documentnumber",required:!0,message:"Ingresa el número de DNI",max:8},phone:{type:"iText",label:"NÚMERO CELULAR",name:"phone",required:!0,message:"Escribe número de documento",disabled:!1,max:9},email:{type:"iText",label:"CORREO ELECTRÓNICO",name:"email",required:!0,message:"Escribe número de documento",disabled:!1},gender_id:{type:"iSelect",label:"GÉNERO",name:"gender_id",required:!0,message:"Seleccionar un tipo de género",disabled:!0},none:{type:"iNone",label:""},cdename:{type:"iText",label:"CDE NOMBRE",placeholder:"Ejem. Lima Norte 2",name:"cdename",required:!0,message:"Seleccionar la sede",disabled:!1},cdecity:{type:"iText",label:"REGIÓN",name:"cdecity",required:!0,message:"Escribir la región",disabled:!1},cdeprovince:{type:"iText",label:"PROVINCIA",name:"cdeprovince",required:!0,message:"Escribir la provincia",disabled:!1},cdedistrict:{type:"iText",label:"DISTRITO",name:"cdedistrict",required:!0,message:"Escribir el distrito",disabled:!1},cdeaddress:{type:"iText",label:"DIRECCIÓN",name:"cdeaddress",required:!0,message:"Escribir la dirección",disabled:!1}};const Ce={class:"grid-item"},Ne="DD/MM/YYYY",Te={__name:"DrawerRegistrarAsesorAgente",setup(W){H.locale("es");const L=JSON.parse(localStorage.getItem("profile")),n=te();n.$patch({genders:n.genders}),n.$patch({cdes:n.cdes}),n.$patch({Offices:n.Offices}),n.$patch({roles:n.roles}),n.$patch({supervisores:n.supervisores}),n.fetchGenders(),n.fetchCdes(),n.fetchOffices(),n.fetchRoles();const d=v(Ae),x=v(null),D=v(!1),z=v(!1),M=v(!1);v(!1),v(null);const R=[{label:"SUPERVISOR",value:1},{label:"ASESOR",value:2}],e=Q({name:null,lastname:null,middlename:null,documentnumber:null,birthday:null,sick:2,phone:null,gender_id:null,cde_id:null,office_id:null,user_id:L.user_id,email:null,password:null}),T=()=>{e.name=null,e.lastname=null,e.middlename=null,e.documentnumber=null,x.value=null,e.phone=null,e.gender_id=null,e.cde_id=null,e.office_id=null,e.email=null,e.password=null,e.role_id=null},O=_=>{e[_]=e[_].replace(/\D/g,"")},$=(_,c)=>{const p=_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return c.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(p)},G=_=>{const c={type:"iSelect",label:"Supervisador",name:"supervisor_id",required:!0,message:"Seleccionar tipo de documento",disabled:!0},p={type:"iText",label:"Ciudad de la notaría",name:"city",required:!0,message:"Ciudad de la notaría",disabled:!1},f={type:"iText",label:"Provincia de la de la notaría",name:"province",required:!0,message:"Provincia de la de la notaría",disabled:!1},A={type:"iText",label:"Distrito de la notaría",name:"district",required:!0,message:"Distrito de la notaría",disabled:!1},l={type:"iText",label:"Dirección de la notaría",name:"address",required:!1,message:"Dirección de la notaría",disabled:!1};if(_===2){n.fetchSupervisores(),d.value={...d.value,supervisor_id:c};const{city:k,province:g,district:I,address:a,...y}=d.value;d.value=y}else if(_===7){d.value={...d.value,city:p,province:f,district:A,address:l};const{supervisor_id:k,...g}=d.value;d.value=g,d.value.cde_id.required=!1}else{let{city:k,province:g,district:I,address:a,supervisor_id:y,...t}=d.value;d.value=t}},b=async()=>{D.value=!0,e.email=e.name.replace(/\s/g,"").toLowerCase()+e.lastname.replace(/\s/g,"").toLowerCase()+"@pnte.com",e.password=e.documentnumber,e.birthday=x.value?H(x.value).format("YYYY-MM-DD"):null;const _={name:e.cdename,city:e.cdecity,province:e.cdeprovince,district:e.cdedistrict,address:e.cdeaddress},c=await J({url:"create/cde",method:"POST",data:_}),p={email:e.email,password:e.password,name:e.agente+" - "+e.name,lastname:e.lastname,middlename:e.middlename,documentnumber:e.documentnumber,sick:"no",phone:e.phone,email:e.email,gender_id:e.gender_id,cde_id:c.id,office_id:1,role_id:2};try{const f=await J({url:"user/create",method:"POST",data:p});re.success({title:"La cuenta ha sido registrada",content:Y("div",{},[Y("br"),Y("p",`Correo: ${e.email}`),Y("p","Contraseña es el número de DNI ingresado")]),onOk(){T(),P.success(f.message);const{supervisor_id:A,...l}=d.value;d.value=l}})}catch{P.error("No se pudo registrar este usuario")}finally{D.value=!1}},w=()=>{P.error("Debes de completar todos los espacios requeridos")},U=async _=>{console.log("Hello",_)},q=()=>{e.document_number=e.document_number.replace(/\D/g,"")};return(_,c)=>{const p=u("a-select"),f=u("a-form-item"),A=u("a-input-search"),l=u("a-input"),k=u("a-date-picker"),g=u("a-button"),I=u("a-form");return s(),N("div",null,[r(I,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:b,onFinishFailed:w},{default:o(()=>[C("div",Ce,[(s(!0),N(F,null,ee(d.value,(a,y)=>(s(),N(F,{key:y},[a.type==="iSelect"?(s(),i(f,{key:0,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:o(()=>[a.name=="gender_id"?(s(),i(p,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).genders},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="cde_id"?(s(),i(p,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).cdes},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="role_id"?(s(),i(p,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:R,onChange:G},null,8,["value","onUpdate:value"])):m("",!0),a.name=="supervisor_id"?(s(),i(p,{key:3,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,options:S(n).supervisores},null,8,["value","onUpdate:value","options"])):m("",!0),a.name=="office_id"?(s(),i(p,{key:4,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,"show-search":"",options:S(n).Offices,"filter-option":$},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iSearch"?(s(),i(f,{key:1,class:"item-max",name:a.name,label:a.label,rules:[{required:a.required,message:a.message,max:a.max}]},{default:o(()=>[r(A,{maxlength:15,loading:z.value,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,onSearch:U,onInput:q,disabled:M.value},null,8,["loading","value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iText"?(s(),i(f,{key:2,name:a.name,label:a.label,rules:[{required:a.required,message:a.message,type:a.email}]},{default:o(()=>[a.name=="documentnumber"?(s(),i(l,{key:0,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[0]||(c[0]=t=>O("documentnumber"))},null,8,["value","onUpdate:value","maxlength"])):a.name=="phone"?(s(),i(l,{key:1,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,onInput:c[1]||(c[1]=t=>O("phone"))},null,8,["value","onUpdate:value","maxlength"])):(s(),i(l,{key:2,value:e[a.name],"onUpdate:value":t=>e[a.name]=t,maxlength:a.max,disabled:a.disabled,placeholder:a.placeholder},null,8,["value","onUpdate:value","maxlength","disabled","placeholder"]))]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iDate"?(s(),i(f,{key:3,name:a.name,label:a.label,rules:[{required:a.required,message:a.message}]},{default:o(()=>[r(k,{locale:S(ae),value:x.value,"onUpdate:value":c[2]||(c[2]=t=>x.value=t),style:{width:"100%"},format:Ne},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):m("",!0),a.type==="iNone"?(s(),i(f,{key:4,class:"item-max",name:a.name,label:a.label},null,8,["name","label"])):m("",!0)],64))),128))]),r(f,null,{default:o(()=>[r(g,{class:"btn-produce",type:"primary","html-type":"submit",loading:D.value},{default:o(()=>c[3]||(c[3]=[E("GUARDAR")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},$e=ne(Te,[["__scopeId","data-v-edb940a7"]]);const Fe=["onClick"],Le=["onClick"],Me={class:"paginator"},He={__name:"AsesoresLista",setup(W){const L=v(50),n=v([]),d=v(!1),x=v(0),D=v({page:1}),z=v("user/list-asesories"),M=v(1200),R=v(window.innerHeight-100),e=v(!1),T=v(!1),O=v(!1),$=v(!1),G=v(null),b=v(null),w=[{title:"#",dataIndex:"idx",fixed:"left",align:"center",width:50},{title:"NOMBRES",dataIndex:"profile_name",width:160},{title:"APELLIDOS",dataIndex:"lastname",width:160},{title:"DNI",dataIndex:"profile_documentnumber",width:100,align:"center"},{title:"CELULAR",dataIndex:"profile_phone",width:100,align:"center"},{title:"CDE",dataIndex:"cde_name",width:160},{title:"FECHA NAC.",dataIndex:"profile_birthday",width:100,align:"center"},{title:"GÉNERO",dataIndex:"gender",width:120,align:"center"},{title:"OFICINA",dataIndex:"office_name",width:100,align:"center"},{title:"ROL",dataIndex:"role",width:140,align:"center"},{title:"CUENTA",dataIndex:"email",width:180},{title:"",dataIndex:"actions",align:"center",width:50,fixed:"right"}],U=()=>{R.value=window.innerHeight-300},q=y=>{e.value=!0,G.value=y},_=y=>{T.value=!0,b.value=y},c=()=>{e.value=!1,I()},p=Q({search:""}),f=Q({password:""}),A=async()=>{const y={id:b.value.user_id,password:f.password};try{const t=await J({url:"user/update-password",method:"POST",data:y});t.status===200&&(P.success(t.message),f.password=null,T.value=!1)}catch(t){console.error("Failed to update record",t)}},l=()=>{I({search:p.search})},k=()=>{p.search||I()},g=y=>{D.value.page=y,I()},I=async y=>{try{d.value=!0;const t=D.value.page===1?"":D.value,B=y?{...t,...y}:t,j=await J({url:z.value,method:"GET",params:B});n.value=j.data,x.value=j.total,L.value=j.per_page}catch(t){console.error("Error de red:",t)}finally{d.value=!1}},a=ge(()=>y=>(D.value.page-1)*L.value+y+1);return be(()=>{I(),window.addEventListener("resize",U),U()}),(y,t)=>{const B=u("a-button"),j=u("a-col"),le=u("a-input"),ie=u("a-input-group"),de=u("a-row"),K=u("a-tag"),se=u("a-menu-item"),ue=u("a-menu"),me=u("a-dropdown"),ce=u("a-table"),pe=u("a-pagination"),Z=u("a-drawer"),oe=u("a-form-item"),ve=u("a-form");return s(),N(F,null,[C("div",null,[t[18]||(t[18]=C("h3",{class:"title-produce"},"LISTA DE USUARIOS - UGO",-1)),r(de,{style:{margin:"1rem 0"}},{default:o(()=>[r(j,{xs:24,md:12,lg:18},{default:o(()=>[r(B,{type:"primary",onClick:t[0]||(t[0]=h=>O.value=!0),style:{"background-color":"#e20613"}},{default:o(()=>t[11]||(t[11]=[E("ASESOR PNTE")])),_:1}),r(B,{type:"primary",onClick:t[1]||(t[1]=h=>$.value=!0),style:{"background-color":"#00952f","margin-left":".8rem"}},{default:o(()=>t[12]||(t[12]=[E("ASESOR AGENTE")])),_:1})]),_:1}),r(j,{xs:24,md:12,lg:6},{default:o(()=>[r(ie,{compact:""},{default:o(()=>[r(le,{value:p.search,"onUpdate:value":t[2]||(t[2]=h=>p.search=h),style:{width:"calc(100% - 80px)"},onInput:k,onKeyup:ye(l,["enter"])},null,8,["value"]),r(B,{type:"primary",disabled:p.search==="",onClick:l},{default:o(()=>t[13]||(t[13]=[E("BUSCAR")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),r(ce,{bordered:"",scroll:{x:M.value,y:R.value},class:"table-users",columns:w,"data-source":n.value,pagination:!1,loading:d.value,size:"small"},{bodyCell:o(({column:h,record:V,index:_e})=>[h.dataIndex==="idx"?(s(),N(F,{key:0},[E(X(a.value(_e)),1)],64)):m("",!0),h.dataIndex==="lastname"?(s(),N(F,{key:1},[E(X(V.profile_lastname)+" "+X(V.profile_middlename),1)],64)):m("",!0),h.dataIndex==="role"?(s(),N(F,{key:2},[V.role_user==1?(s(),i(K,{key:0,color:"blue"},{default:o(()=>t[14]||(t[14]=[E("SUPERVISOR")])),_:1})):m("",!0),V.role_user==2?(s(),i(K,{key:1,color:"red"},{default:o(()=>t[15]||(t[15]=[E("ASESOR PNTE")])),_:1})):m("",!0),V.role_user==7?(s(),i(K,{key:2,color:"purple"},{default:o(()=>t[16]||(t[16]=[E("ASESOR - NOTARÍA")])),_:1})):m("",!0),V.role_user==13?(s(),i(K,{key:3,color:"green"},{default:o(()=>t[17]||(t[17]=[E("ASESOR - AGENTE")])),_:1})):m("",!0)],64)):m("",!0),h.dataIndex=="actions"?(s(),i(me,{key:3,trigger:["click"]},{overlay:o(()=>[r(ue,null,{default:o(()=>[r(se,null,{default:o(()=>[C("a",{onClick:fe=>q(V)},"Editar datos",8,Fe)]),_:2},1024),r(se,null,{default:o(()=>[C("a",{onClick:fe=>_(V)},"Resetear contraseña",8,Le)]),_:2},1024)]),_:2},1024)]),default:o(()=>[C("a",{class:"ant-dropdown-link",onClick:t[3]||(t[3]=he(()=>{},["prevent"]))},[r(B,{shape:"circle",icon:Y(S(we)),size:"small"},null,8,["icon"])])]),_:2},1024)):m("",!0)]),_:1},8,["scroll","data-source","loading"])]),C("div",Me,[C("span",null,[r(K,{color:"blue"},{default:o(()=>[C("b",null,X(x.value),1)]),_:1}),t[19]||(t[19]=E("Usuarios"))]),r(pe,{size:"small",total:x.value,pageSize:L.value,onChange:g,showSizeChanger:!1},null,8,["total","pageSize"])]),r(Z,{width:"550",open:e.value,"onUpdate:open":t[4]||(t[4]=h=>e.value=h),class:"draw",title:"Editar datos del asesor",placement:"right"},{default:o(()=>[r(ke,{onCloseDraw:c,record:G.value},null,8,["record"])]),_:1},8,["open"]),r(Z,{width:"550",open:O.value,"onUpdate:open":t[6]||(t[6]=h=>O.value=h),class:"draw",title:"REGISTRAR UN ASESOR",placement:"right"},{default:o(()=>[r(qe,{onCloseDraw:t[5]||(t[5]=h=>O.value=!1)})]),_:1},8,["open"]),r(Z,{width:"550",open:$.value,"onUpdate:open":t[8]||(t[8]=h=>$.value=h),class:"draw",title:"REGISTRAR UN ASESOR AGENTE",placement:"right"},{default:o(()=>[r($e,{onCloseDraw:t[7]||(t[7]=h=>$.value=!1)})]),_:1},8,["open"]),r(Z,{width:"350",open:T.value,"onUpdate:open":t[10]||(t[10]=h=>T.value=h),class:"draw",title:"Cambiar contraseña",placement:"right"},{default:o(()=>[r(ve,{layout:"vertical",model:f,name:"basic",autocomplete:"off",onFinish:A,onFinishFailed:y.onFinishFailed},{default:o(()=>[r(oe,{label:"Contraseña",name:"password",rules:[{required:!0,message:"Escribir contraseña"}]},{default:o(()=>[r(le,{value:f.password,"onUpdate:value":t[9]||(t[9]=h=>f.password=h)},null,8,["value"])]),_:1}),r(oe,null,{default:o(()=>[r(B,{type:"primary","html-type":"submit"},{default:o(()=>t[20]||(t[20]=[E("CAMBIAR")])),_:1})]),_:1})]),_:1},8,["model","onFinishFailed"])]),_:1},8,["open"])],64)}}};export{He as default};
