import{c as o,A as oe,l as w,r as i,a as Z,j as W,T as le,a5 as q,o as p,d as m,p as re,b as D,e as t,t as u,w as E,h as y,L as ie,f as J,F as de,q as ce,s as U,ag as ue,i as Y,v as pe,x as M,y as ve,z as me}from"./index-e79988f3.js";import"./es-31dcee15.js";import{_ as _e}from"./DrawResultados-6c2b9eb7.js";import{_ as fe}from"./FormComponent-b1abf375.js";import{u as he}from"./selectes-43282fae.js";import{F as ge,C as ye}from"./FilterOutlined-af869f55.js";import{H as be}from"./HomeOutlined-3f734e27.js";import{E as Oe}from"./EnvironmentOutlined-0a367d17.js";import{T as Se}from"./TeamOutlined-a9230ae1.js";import{U as Ce}from"./UserOutlined-988f1d88.js";import"./quill.snow-d9b7b900.js";var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};const Ee=De;function Q(_){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?Object(arguments[c]):{},f=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),f.forEach(function(v){ke(_,v,d[v])})}return _}function ke(_,c,d){return c in _?Object.defineProperty(_,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):_[c]=d,_}var B=function(c,d){var f=Q({},c,d.attrs);return o(oe,Q({},f,{icon:Ee}),null)};B.displayName="FormOutlined";B.inheritAttrs=!1;const Me=B;const we={class:"f-20"},Ae={__name:"EventosObservaciones",props:["info","idCde"],emits:["closeDraw"],setup(_,{emit:c}){w.locale("es");const d=i({obs_id:{type:"iSelect",label:"TIPO DE OBSERVACIÓN",name:"obs_id",required:!0,message:"Seleccionar una opción",disabled:!1}}),f=JSON.parse(localStorage.getItem("profile")),v=_,R=i("ACTUALIZAR"),r=Z({}),n=i(!1),b=he(),A=i(null),C=i({obs_id:[]}),I=l=>{console.log("handleInputEvent",l)},k=async l=>{l=="dateReception"&&(r.dateTramite&&(r.dateTramite=null),d.value.dateTramite.disabled=!1)},L=async l=>{l=="obs_id"&&r.obs_id==1&&(d.value.observation={type:"iQuillEditor",label:"ESCRIBIR MOTIVO DE LA CANCELACIÓN",name:"observation",message:"Seleccionar una opción"})},T=async l=>{l=="obs_id"&&x()},N=l=>{},x=()=>{C.value.obs_id=[{value:1,label:"CANCELADO"},{value:2,label:"REPROGRAMADO"}]},H=async()=>n.value=!0,F=async l=>{l&&(r.user_id=f.user_id,r.people_id=l.id,r.dni=f.documentnumber,r.cde_id=f.cde_id,r.address=l.address,await b.fetchCities(),C.value.city_id=b.cities,r.city_id=l.city_id,await b.fetchProvinces(r.city_id),C.value.province_id=b.provinces,d.value.province_id.disabled=!1,r.province_id=l.province_id,await b.fetchDistricts(r.province_id),C.value.district_id=b.districts,d.value.district_id.disabled=!1,r.district_id=l.district_id)};return W(()=>{v.info&&F(v.info)}),le(()=>v.info,l=>{l&&F(l)}),q("formState",r),q("loadingState",n),(l,$)=>(p(),m("div",we,[o(fe,{fields:d.value,options:C.value,btnSaveName:R.value,onHandleInputEvent:I,resetSelect:A.value,onHandleChangeSelect:L,onHandleFocusSelect:T,onHandleBlurSelect:N,onHandleChangeClock:k,onOnSubmit:H},null,8,["fields","options","btnSaveName","resetSelect"])]))}};const Te={class:"container-events"},Ne={class:"schedule"},Re={class:"schedule-header"},Ie={class:"schedule-date"},Le={class:"schedule-filter"},Fe={key:0,class:"event-time"},$e={key:1,class:"event-time"},Ve={class:"event-hour-2"},xe={class:"ugger-options"},He={class:"title"},Pe={class:"event-description"},Ue=["onClick"],Ye={class:"modal-calendar-detail"},Be={style:{"line-height":"1.3","margin-bottom":".5rem"}},ze=["innerHTML"],je={key:0},Ge={style:{"margin-left":".5rem"}},qe={key:1},Je={style:{"margin-left":".5rem"}},Qe={key:2},Ze={style:{"margin-left":".5rem"}},We={style:{"margin-left":".5rem"}},Xe={key:0},Ke={style:{"margin-left":".5rem"}},et={key:3},tt={style:{"margin-left":".5rem"}},at={key:4},nt=["href"],st={key:5},ot=["innerHTML"],ht={__name:"EventosCalendarioObs",setup(_){w.locale("es");const c=Z({value1:["ugo","ugse"]}),d=["ugo","ugse"],f=re(ie,{style:{fontSize:"24px"},spin:!0}),v=i(!1),R=i(null),r=i(!1);i(!1);const n=i(null),b=i(!1),A=i(null),C=i(null),I=i(new Date),k=i([]),L=i(null),T=i([]),N=i(!1),x=a=>{v.value=!0},H=a=>{const e={id:a.id,resultado:a.resultado};R.value=e,r.value=!0},F=a=>{n.value=a,b.value=!0},l=a=>{if(Array.isArray(a)&&a.length>0&&a[0].id){const e=a[0].id;A.value=e,L.value!==e&&(L.value=e,V(e))}else console.warn("⚠️ No se pudo detectar el cambio de mes.")},$=a=>({1:"#808080",2:"#f06464",3:"#fd9d0f",4:"#ffb74d",5:"#00b522",6:"#1546b0",7:"#9c27b0",8:"#ff07d8"})[a],z=a=>({1:"Despega tu empresa",2:"Ferias",3:"Fortalece tu Mercado",4:"Mujer Produce",5:"Potencia tu Empresa",6:"Ruta Digital",7:"Otros UGSE",8:"Difusión UGO"})[a],X=a=>{if(!Array.isArray(a)||a.length===0)return"";const e=w(a[0]).locale("es").format("DD [de] MMMM"),h=a.length>1?w(a[a.length-1]).locale("es").format("DD [de] MMMM"):null;return h?`Desde: ${e} Hasta: ${h}`:`${e}`},K=async()=>{A.value&&(await P("nodata"),await V(A.value))},P=async(a={date:w().format("YYYY-MM-DD")},e)=>{N.value=!0;const h=w(a.date).format("YYYY-MM-DD");C.value=w(a.date).format("dddd DD [de] MMMM [de] YYYY"),e!="nodata"&&k.value.length>0&&k.value[0].dates&&(k.value[0].dates=a.date);const O={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let S=[];c.value1.forEach(g=>{O[g]&&S.push(...O[g])}),S=[...new Set(S)];try{const g=await J({url:`pnte/events-day/${h}`,method:"GET",params:S});g.data&&Array.isArray(g.data)?T.value=g.data:console.warn("⚠️ Respuesta inesperada de la API:",g)}catch(g){console.error("❌ Error al obtener eventos:",g)}finally{N.value=!1}},V=async a=>{try{const e={ugo:["dte","ftm","pte","dif"],ugse:["ferias","mp","rd","ougse"]};let h=[];c.value1.forEach(S=>{e[S]&&h.push(...e[S])}),h=[...new Set(h)];const O=await J({url:`pnte/dots/${a}`,method:"GET",params:h});O.data&&Array.isArray(O.data)?k.value=[{key:"today",highlight:"",dates:[new Date]},...O.data]:console.warn("⚠️ Respuesta de API inesperada:",O)}catch(e){console.error("❌ Error al obtener eventos:",e)}},ee=async()=>{await P()};return W(()=>{ee()}),(a,e)=>{const h=D("VCalendar"),O=D("a-checkbox-group"),S=D("a-menu"),g=D("a-dropdown"),te=D("a-empty"),ae=D("a-spin"),ne=D("a-modal"),j=D("a-drawer");return p(),m("section",Te,[e[14]||(e[14]=t("h1",{class:"title-pc"},"CALENDARIO ADMIN PNTE 2025",-1)),t("div",null,[o(h,{ref:"calendar",modelValue:I.value,"onUpdate:modelValue":e[0]||(e[0]=s=>I.value=s),attributes:k.value,expanded:"",locale:"es",transparent:"",borderless:"","onUpdate:pages":l,onDayclick:P},null,8,["modelValue","attributes"])]),t("div",Ne,[t("div",Re,[e[7]||(e[7]=t("h4",null,"EVENTOS",-1)),t("span",Ie,u(C.value),1),o(g,{trigger:["click"]},{overlay:E(()=>[o(S,null,{default:E(()=>[t("div",Le,[o(O,{value:c.value1,"onUpdate:value":e[1]||(e[1]=s=>c.value1=s),options:d,onChange:K},null,8,["value"])])]),_:1})]),default:E(()=>[t("span",null,[o(y(ge))])]),_:1})]),o(ae,{indicator:y(f),spinning:N.value},{default:E(()=>[T.value.length>0?(p(!0),m(de,{key:0},ce(T.value,(s,se)=>(p(),m("div",{key:se,class:"event"},[s.start?(p(),m("div",$e,[t("div",null,u(s.start),1),e[9]||(e[9]=t("br",null,null,-1)),t("div",Ve,u(s.end),1)])):(p(),m("div",Fe,e[8]||(e[8]=[t("div",{style:{"text-align":"center","line-height":"1.2"}},"Todo el día",-1)]))),t("div",{class:"schedule-details",style:U({"border-color":$(s.id_pnte)})},[t("small",{class:"schedule-tag",style:U({"background-color":$(s.id_pnte)})},[t("span",null,u(z(s.id_pnte)),1)],4),t("div",xe,[t("span",null,[o(y(ue),{onClick:G=>x(s)},null,8,["onClick"])]),t("span",null,[o(y(Me),{onClick:G=>H(s)},null,8,["onClick"])])]),t("div",He,u(s.title),1),t("div",Pe,[Y(u(s.descriptionparse)+" ",1),t("span",{onClick:G=>F(s),style:{color:"#2196f3",cursor:"pointer"}},"Ver más",8,Ue)])],4)]))),128)):(p(),pe(te,{key:1,class:"no-events"},{description:E(()=>e[10]||(e[10]=[t("span",{class:"no-events-span"},"No hay eventos para este día",-1)])),_:1}))]),_:1},8,["indicator","spinning"])]),o(ne,{open:b.value,"onUpdate:open":e[2]||(e[2]=s=>b.value=s),title:"",footer:""},{default:E(()=>[t("div",Ye,[t("div",null,[t("h3",Be,u(n.value.titleComplete),1),t("small",{class:"modal-calendar-tag",style:U({"background-color":$(n.value.id_pnte)})},u(z(n.value.id_pnte)),5)]),t("div",{style:{"margin-bottom":"1rem",color:"#6c6c6c"},class:"html-format",innerHTML:n.value.descripionAll},null,8,ze),n.value.organiza?(p(),m("div",je,[o(y(be)),t("span",Ge,u(n.value.organiza),1)])):M("",!0),n.value.gps?(p(),m("div",qe,[o(y(Oe)),t("span",Je,u(n.value.gps),1)])):M("",!0),n.value.numMypes?(p(),m("div",Qe,[t("span",null,[o(y(Se))]),t("span",Ze,u(n.value.numMypes),1)])):M("",!0),t("div",null,[t("div",null,[o(y(ve)),t("span",We,u(X(n.value.dates)),1)]),n.value.start?(p(),m("div",Xe,[o(y(me)),t("span",Ke,u(n.value.start),1),e[11]||(e[11]=Y(" - ")),t("span",null,u(n.value.end),1)])):M("",!0)]),n.value.nameUser?(p(),m("div",et,[o(y(Ce)),t("span",tt,[Y(u(n.value.nameUser)+" ",1),e[12]||(e[12]=t("small",null,"(Representante)",-1))])])):M("",!0),n.value.link?(p(),m("div",at,[o(y(ye)),t("a",{style:{"margin-left":".5rem"},href:n.value.link,target:"_blank",rel:"noopener noreferrer"},"Link del evento",8,nt)])):M("",!0),n.value.resultado?(p(),m("div",st,[e[13]||(e[13]=t("h3",null,"Resultados",-1)),t("div",{style:{color:"#6c6c6c"},class:"html-format",innerHTML:n.value.resultado},null,8,ot)])):M("",!0)])]),_:1},8,["open"]),o(j,{open:r.value,"onUpdate:open":e[4]||(e[4]=s=>r.value=s),title:"RESULTADOS",placement:"right",width:"550"},{default:E(()=>[o(_e,{dataRow:R.value,onCloseDraw:e[3]||(e[3]=s=>{r.value=!1,V()})},null,8,["dataRow"])]),_:1},8,["open"]),o(j,{open:v.value,"onUpdate:open":e[6]||(e[6]=s=>v.value=s),title:"OBSERVACIONES",placement:"right",width:"550"},{default:E(()=>[o(Ae,{onCloseDraw:e[5]||(e[5]=s=>{v.value=!1,V()})})]),_:1},8,["open"])])}}};export{ht as default};
