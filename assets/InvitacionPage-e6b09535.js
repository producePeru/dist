import{_ as G}from"./tuempresa-7c20bfb9.js";import{R as V}from"./ModalRegistroMYPE-3e2a4294.js";import{k as B,u as j,r as h,a as S,l as A,b as u,o as C,d as P,e,c as s,i as c,t as _,w as i,m as v,n as k,f as D,s as Y,p as J,j as K}from"./index-663e7fda.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const l=f=>(J("data-v-5b3b7461"),f=f(),K(),f),W={class:"background"},X={class:"container"},Z={class:"questionary"},ee={class:"box"},oe=l(()=>e("div",{class:"text-center"},[e("img",{src:G,alt:""}),e("div",{class:"head-title"},[e("h2",{class:"title"},"Confirmación de asistencia a talleres de Ruta Digital")])],-1)),ae={class:"box-info-workshop"},te=l(()=>e("b",null,"Taller: ",-1)),ne=l(()=>e("b",null,"Expositor: ",-1)),se=l(()=>e("b",null,"Fecha del taller:",-1)),le={class:"box"},re={key:0,class:"personal-info"},ie=l(()=>e("h4",{class:"c-primary"},"Mis Datos",-1)),ce=l(()=>e("span",{class:"name"},"Nombres y Apellidos: ",-1)),ue=l(()=>e("span",{class:"name"},"Correo electrónico: ",-1)),de=l(()=>e("span",{class:"name"},"Número de contácto: ",-1)),pe=l(()=>e("br",null,null,-1)),_e={class:"box"},me=["innerHTML"],he=["innerHTML"],ve=l(()=>e("h3",{class:"box-title"},"¿Estas interesado en participar en este taller de Ruta Digital?",-1)),fe={class:"box"},ge=l(()=>e("span",{class:"box-mensagge"},"Opcional",-1)),be=l(()=>e("h3",{class:"box-title"},"¿Cómo te enteraste del taller?",-1)),ye={class:"box-btn"},we={__name:"InvitacionPage",setup(f){const M=B(),N=j(),T=h(null),g=h(!1),b=h(!1),y=h(!1),w=h([]),r=S({id:null,exponent:null,idIn:null,idOut:null,dateTestIn:null,dateTestOut:null,title:null,workShopDate:null}),a=S({name:null,email:null,phone:null,ruc:null,dni:null}),n=S({id_questionnaire:null,ruc:null,dni:null,attendance:null,social:null}),U=()=>{n.ruc=n.ruc.replace(/\D/g,"")},$=t=>{a.name=t.name_complete,a.email=t.email,a.phone=t.phone,a.ruc=t.ruc,a.dni=t.dni_number},E=async()=>{a.ruc=null,a.dni=null;let t=n.ruc;if(!t)return v.warning("Ingresa el número de RUC");b.value=!0;try{const{data:o}=await D({url:`/data-mype/${t}`,method:"GET"});o.ruc&&(a.ruc=o.ruc,a.name=o.name_complete,a.email=o.email,a.phone=o.phone,a.dni=o.dni_number)}catch(o){if(console.error("Error de red:",o.response.status),a.name=null,a.email=null,a.phone=null,a.dni=null,o.response.status==404)try{const{data:d}=await D({url:`/api-data-mype/${n.ruc}`,method:"GET"}),x={razonSocial:d.razonSocial,numeroDocumento:d.numeroDocumento};T.value=x,g.value=!0}catch(d){v.warning("El número de RUC no es válido"),console.error("Error de red:",d)}}finally{b.value=!1}},I=()=>{window.scrollTo({top:200,behavior:"smooth"})},F=async()=>{if(a.name==null&&a.dni==null&&a.ruc==null){E(),v.warning("Revisando sus datos"),I();return}const t={ruc_mype:a.ruc,dni_mype:a.dni,workshop_id:r.id,email:a.email,is_participant:n.attendance};y.value=!0;try{const o=await k({url:`/accept-invitation/${r.id}`,method:"POST",data:t});v.success(o.message),N.push({name:"enviado"}),await k({url:`/addPoint/${r.id}/${n.social}`,method:"PUT"})}catch(o){console.error("Error:",o.response.data.errors[0])}finally{y.value=!1}},H=()=>{v.error("Debes de completar todos los datos"),I()},L=async t=>{try{const{data:o}=await k({url:`/invitations/${t}`,method:"GET"});w.value=o,console.log(o)}catch(o){console.error("Error de red:",o)}};return A(async()=>{try{const t=await D({url:`/get-workshop-slug/${M.params.slug}`,method:"GET"});r.id=t.workshop.id,r.exponent=t.workshop.exponent_name,r.title=t.workshop.title,r.workShopDate=t.workshop.workshop_date,await L(t.workshop.id_invitation)}catch(t){console.error("Error de red:",t)}}),(t,o)=>{const d=u("a-divider"),x=u("a-input-search"),q=u("a-form-item"),m=u("a-radio"),R=u("a-radio-group"),O=u("a-button"),z=u("a-form");return C(),P("div",W,[e("section",X,[e("div",Z,[e("div",ee,[oe,s(d),e("div",ae,[e("span",null,[te,c(_(r.title),1)]),e("span",null,[ne,c(_(r.exponent),1)]),e("span",null,[se,c(" "+_(r.workShopDate),1)])])]),s(z,{layout:"vertical",model:n,autocomplete:"off",onFinish:F,onFinishFailed:H},{default:i(()=>[e("div",le,[s(q,{class:"search-ruc f-15",name:"ruc",label:"Número de RUC",rules:[{required:!0,message:"Es importante el número de RUC"}]},{default:i(()=>[s(x,{maxlength:15,loading:b.value,size:"large",value:n.ruc,"onUpdate:value":o[0]||(o[0]=p=>n.ruc=p),"enter-button":"",onSearch:E,onInput:U},null,8,["loading","value"])]),_:1}),a.name?(C(),P("div",re,[ie,e("div",null,[ce,e("span",null,_(a.name),1)]),e("div",null,[ue,e("span",null,_(a.email),1)]),e("div",null,[de,e("span",null,_(a.phone),1)]),pe])):Y("",!0)]),e("div",_e,[e("p",{class:"p-text",innerHTML:w.value.text1},null,8,me),e("p",{class:"p-text",innerHTML:w.value.text2},null,8,he),ve,s(R,{value:n.attendance,"onUpdate:value":o[1]||(o[1]=p=>n.attendance=p)},{default:i(()=>[s(m,{value:"si"},{default:i(()=>[c("SI")]),_:1}),s(m,{value:"no"},{default:i(()=>[c("NO")]),_:1})]),_:1},8,["value"])]),e("div",fe,[ge,be,s(R,{class:"group-radios",value:n.social,"onUpdate:value":o[2]||(o[2]=p=>n.social=p)},{default:i(()=>[s(m,{class:"item-radio",value:"rrss"},{default:i(()=>[c("Redes sociales")]),_:1}),s(m,{class:"item-radio",value:"sms"},{default:i(()=>[c("SMS")]),_:1}),s(m,{class:"item-radio",value:"correo"},{default:i(()=>[c("Correo")]),_:1})]),_:1},8,["value"])]),e("div",ye,[s(O,{type:"primary","html-type":"submit",size:"large",loading:y.value},{default:i(()=>[c("Enviar respuestas")]),_:1},8,["loading"])])]),_:1},8,["model"])])]),s(V,{open:g.value,onHandleCloseModal:o[3]||(o[3]=p=>g.value=!1),rucProp:T.value,onHandleSetData:$},null,8,["open","rucProp"])])}}},Ee=Q(we,[["__scopeId","data-v-5b3b7461"]]);export{Ee as default};
