import{_ as B}from"./TableComponent-894216a3.js";import{E as F,r as l,u as H,a as j,p as C,k as G,X as I,b as g,o as y,d as q,c as s,w as o,m as S,y as N,j as f,z as T,e as U,h as J}from"./index-46c00c2f.js";import{d as X}from"./downloadExcel-7902c967.js";import{g as Z}from"./publicInscripcion-623ff37e.js";import"./es-0d4ec0f0.js";import{_ as K}from"./ParticipanteSed-43b9fcc4.js";import"./icoexcel-1b303edf.js";import"./selectes-cefacecb.js";import"./SyncOutlined-f6a51ac1.js";import"./MoreOutlined-ada63420.js";import"./FormComponent-6905ae3b.js";import"./quill.snow-9b978557.js";const Q={class:"layout-content ugo-activities-table"},W=["onClick"],ee=["onClick"],_e={__name:"eventos-inscritos",setup(ae){const p=F();JSON.parse(localStorage.getItem("role"));const D=l([]),x=l(0),O=l(150);l(null);const _=l(!1);H();const v=l(!1),w=l(null),h=l(!1),E=l({name:"Cargando..."}),n=j({year:C("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),Y=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"TIPO DE DOCUMENTO",dataIndex:"typedocument_name",width:90},{title:"NÚMERO DE DOCUMENTO",dataIndex:"documentnumber",width:90},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:120},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:120},{title:"NOMBRES",dataIndex:"name",width:120},{title:"GÉNERO",dataIndex:"gender_name",align:"center",width:70},{title:"DISCAPACIDAD",dataIndex:"sick",align:"center",width:100},{title:"CORREO",dataIndex:"email",width:140},{title:"CELULAR",dataIndex:"phone",align:"center",width:100},{title:"PAÍS",dataIndex:"country_name",width:100},{title:"¿SE BRINDÓ ASESORÍA AL USUARIO DURANTE LA ACTIVIDAD?",dataIndex:"is_asesoria",align:"center",fixed:"right",width:120},{title:"¿SE FORMALIZO AL USUARIO DURANTE LA ACTIVIDAD?",dataIndex:"was_formalizado",align:"center",fixed:"right",width:120}],P=e=>{const a=new URLSearchParams(e).toString(),t=`${Z()}/mujer-produce?${a}`;window.open(t,"_blank")},k=()=>{u(),_.value=!1},L=()=>{w.value=null,_.value=!0},A=async(e,a,t)=>{const m={slug:p.params.slug,value:e,column:a,rowId:t.id};try{const d=await S({url:"attendance/update-values-select",method:"PUT",data:m});d.status==200&&console.log("status",d.message)}catch(d){console.error("Error de red:",d)}},b=async e=>{const a={event_slug:p.params.slug,participant_id:e.participant_id};try{const t=await S({url:"mp/delete-assistant",method:"POST",data:a});t.status==200&&(u(),J.success(t.message))}catch(t){console.error("Error de red:",t)}},M=async()=>{h.value=!0;try{const e={},a=p.params.slug;n.name&&(e.name=n.name);let t=`download/attendance/${a}`,m=`${E.value.name}`;await X(t,m,e)}catch(e){console.error("Error de red:",e)}finally{h.value=!1}},V=async e=>{n.page=e,await u()},$=async e=>{e&&(n.page=1,await u())},u=async()=>{try{v.value=!0;const e={page:n.page},a=p.params.slug;n.year&&(e.year=C(n.year).format("YYYY")),n.range&&(e.dateStart=n.range[0].format("YYYY/MM/DD"),e.dateEnd=n.range[1].format("YYYY/MM/DD")),n.name&&(e.name=n.name),n.orderby&&(e.orderby=n.orderby);const t=await S({url:`attendance/applicants/${a}`,method:"GET"});E.value.name=t.nameEvent,D.value=t.data.data,x.value=t.data.total,O.value=t.data.per_page}catch(e){console.error("Error de red:",e)}finally{v.value=!1}};return G(async()=>{await u()}),I("search",n),I("loading",v),I("loadingFile",h),(e,a)=>{var R;const t=g("a-select-option"),m=g("a-select"),d=g("a-menu-item"),z=g("a-drawer");return y(),q("div",Q,[s(B,{title:`✏ INSCRITOS EN : ${(R=E.value)==null?void 0:R.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugo/eventos",searchYear:!1,rangeDate:!1,columns:Y,titleSearch:"FILTRAR POR RUC O DNI",pageSize:O.value,nameTotal:"Inscritos",dataSource:D.value,total:x.value,btnUpdate:!0,onHandleNew:L,onHandleCallFetchData:u,onHandleDownloadExcel:M,onHandleSearch:$,onHandlePaginator:V},{"data-cell":o(({column:i,record:r})=>[i.dataIndex=="is_asesoria"?(y(),N(m,{key:0,value:r.is_asesoria,"onUpdate:value":c=>r.is_asesoria=c,style:{width:"100px"},onChange:c=>A(c,"is_asesoria",r)},{default:o(()=>[s(t,{value:"s"},{default:o(()=>a[1]||(a[1]=[f("SÍ")])),_:1}),s(t,{value:"n"},{default:o(()=>a[2]||(a[2]=[f("NO")])),_:1})]),_:2},1032,["value","onUpdate:value","onChange"])):T("",!0),i.dataIndex=="was_formalizado"?(y(),N(m,{key:1,value:r.was_formalizado,"onUpdate:value":c=>r.was_formalizado=c,style:{width:"100px"},onChange:c=>A(c,"was_formalizado",r)},{default:o(()=>[s(t,{value:"s"},{default:o(()=>a[3]||(a[3]=[f("SÍ")])),_:1}),s(t,{value:"n"},{default:o(()=>a[4]||(a[4]=[f("NO")])),_:1})]),_:2},1032,["value","onUpdate:value","onChange"])):T("",!0)]),"custom-options":o(({record:i})=>[s(d,null,{default:o(()=>[U("a",{onClick:r=>P(i)},"Editar",8,W)]),_:2},1024),s(d,null,{default:o(()=>[U("a",{onClick:r=>b(i)},"Eliminar",8,ee)]),_:2},1024)]),_:1},8,["title","pageSize","dataSource","total"]),s(z,{open:_.value,"onUpdate:open":a[0]||(a[0]=i=>_.value=i),title:w.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:o(()=>[s(K,{onCloseDraw:k,info:w.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{_e as default};
