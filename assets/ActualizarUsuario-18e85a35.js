import{H as V,y as Y,r as _,a as M,k as P,b as l,o as n,d as v,c as u,q as s,w as d,F as g,m as h,g as U,v as j,e as E,B as W,h as i,s as r,N as $,O as H,I as J,i as Z,p as K,j as Q}from"./index-245dffd0.js";import"./es-6abe5062.js";import{f as X,g as ee,d as ae,o as te,h as oe}from"./selects-56d2dd8e.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";const se={document_type:{type:"iSelect",label:"Tipo de documento",name:"document_type",required:!0,message:"Seleccionar tipo de documento",disabled:!0},document_number:{type:"iText",label:"Ingresar número",name:"document_number",required:!0,message:"Escribe número de documento",disabled:!0,max:8},last_name:{type:"iText",label:"Apellido paterno",name:"last_name",required:!0,message:"Escribe el apellido paterno"},middle_name:{type:"iText",label:"Apellido materno",name:"middle_name",required:!0,message:"Escribe el apellido materno"},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el nombre"},country_code:{type:"iSelectWrite",label:"País",name:"country_code",required:!0,message:"Seleccionar país"},email:{type:"iText",label:"Correo",name:"email",required:!0,email:"email",message:"Escribe el correo del usuario"},office_code:{type:"iSelect",label:"Oficina",name:"office_code",required:!0,message:"Seleccionar un tipo"},sede_code:{type:"iSelect",label:"Sede donde labora",name:"sede_code",required:!0,message:"Seleccionar un tipo"},gender:{type:"iSelect",label:"Género",name:"gender",required:!1,message:"Seleccionar tipo de documento"}};const re=b=>(K("data-v-a717fef4"),b=b(),Q(),b),le=re(()=>E("h3",null,"ACTUALIZAR USUARIO",-1)),ue={key:1,class:"user"},de={class:"grid-item"},ie="YYYY-MM-DD",me={__name:"ActualizarUsuario",setup(b){V.locale("es");const A=JSON.parse(localStorage.getItem("user")),q=Y(),S=_(!0),y=_(!1),k=_([]),w=_([]),x=_(null),a=M({birthdate:null,gender:null,lession:0,phone_number:null,document_type:1,document_number:null,last_name:null,middle_name:null,name:null,country_code:173,email:null,office_code:null,sede_code:1,updated_by:A.id}),N=async()=>{const t=a;y.value=!0;try{const m=await h({url:`user/${x.value}`,method:"PUT",data:t});U.success(m.message)}catch{U.error("No se pudo registrar este usuario")}finally{y.value=!1}},I=()=>{U.error("Debes de completar todos los espacios requeridos")},F=(t,m)=>{const f=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return m.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(f)},z=async()=>{try{const{data:t}=await j({url:"/countries",method:"GET"});k.value=t}catch(t){console.error("Error de red:",t)}},C=async()=>{try{const{data:t}=await h({url:"/sedes",method:"GET"});w.value=t,S.value=!1}catch(t){console.error("Error de red:",t)}},L=async()=>{try{const{data:t}=await h({url:`/user/${q.params.dni}`,method:"GET"});x.value=t.id,a.document_number=t.document_number,a.last_name=t.last_name,a.middle_name=t.middle_name,a.name=t.name,a.country_code=t.country_code,a.email=t.email,a.office_code=t.office_code,a.sede_code=t.sede_code,a.gender=t.gender}catch(t){console.error("Error de red:",t)}};return P(()=>{L(),z(),C()}),(t,m)=>{const f=l("a-divider"),D=l("a-spin"),c=l("a-select"),p=l("a-form-item"),T=l("a-input"),R=l("a-date-picker"),B=l("a-button"),G=l("a-form");return n(),v(g,null,[le,u(f),S.value?(n(),s(D,{key:0})):(n(),v("div",ue,[u(G,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:N,onFinishFailed:I},{default:d(()=>[E("div",de,[(n(!0),v(g,null,W(i(se),(e,O)=>(n(),v(g,{key:O},[e.type==="iSelect"?(n(),s(p,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[e.name=="document_type"?(n(),s(c,{key:0,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(X),disabled:e.disabled},null,8,["value","onUpdate:value","options","disabled"])):r("",!0),e.name=="gender"?(n(),s(c,{key:1,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(ee)},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="isDisabled"?(n(),s(c,{key:2,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(ae)},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="office_code"?(n(),s(c,{key:3,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(te)},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="sede_code"?(n(),s(c,{key:4,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:w.value},null,8,["value","onUpdate:value","options"])):r("",!0),e.name=="role"?(n(),s(c,{key:5,value:a[e.name],"onUpdate:value":o=>a[e.name]=o,options:i(oe)},null,8,["value","onUpdate:value","options"])):r("",!0)]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iText"?(n(),s(p,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:d(()=>[u(T,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,disabled:e.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iPassword"?$((n(),s(p,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[u(T,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])),[[H,!i(q).query.dni]]):r("",!0),e.type==="iSelectWrite"?(n(),s(p,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[u(c,{value:a[e.name],"onUpdate:value":o=>a[e.name]=o,"show-search":"",options:k.value,"filter-option":F},null,8,["value","onUpdate:value","options"])]),_:2},1032,["name","label","rules"])):r("",!0),e.type==="iDate"?(n(),s(p,{key:4,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:d(()=>[u(R,{locale:i(J),value:a.birthdate,"onUpdate:value":m[0]||(m[0]=o=>a.birthdate=o),style:{width:"100%"},format:ie},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):r("",!0)],64))),128))]),u(p,null,{default:d(()=>[u(B,{type:"primary","html-type":"submit",loading:y.value},{default:d(()=>[Z("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))],64)}}},ve=ne(me,[["__scopeId","data-v-a717fef4"]]);export{ve as default};
