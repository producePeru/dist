import{u as ue}from"./selectes-9e49387c.js";import{f as Ae,b as Re,c as ze,r as Ne,a as Fe}from"./asesorias-36bcf1a2.js";import{c as t,A as $e,x as ge,r as m,a as se,b as c,o,d as C,w as a,e as r,F as J,B as te,h as f,q as h,s as p,Y as oe,i as M,t as E,Z as _e,y as B,m as K,f as Oe,U as qe,W as Te,R as be,u as Ee,k as Pe,_ as Le,p as Me,j as Ve}from"./index-ad27d822.js";/* empty css                                                      */import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";import{S as Ge}from"./DrawerSolicitante.componente-0e4bc52c.js";import"./es-f325741d.js";var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const He=Ye;function ye(q){for(var A=1;A<arguments.length;A++){var x=arguments[A]!=null?Object(arguments[A]):{},l=Object.keys(x);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(x).filter(function(R){return Object.getOwnPropertyDescriptor(x,R).enumerable}))),l.forEach(function(R){je(q,R,x[R])})}return q}function je(q,A,x){return A in q?Object.defineProperty(q,A,{value:x,enumerable:!0,configurable:!0,writable:!0}):q[A]=x,q}var ve=function(A,x){var l=ye({},A,x.attrs);return t($e,ye({},l,{icon:He}),null)};ve.displayName="RedoOutlined";ve.inheritAttrs=!1;const Be=ve,Je={class:"wrapper-booking"},We={class:"grid-booking"},Ke={__name:"ReservaNombre",props:["info"],emits:["closeDraw"],setup(q,{emit:A}){const x=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),l=ge(),R=JSON.parse(localStorage.getItem("profile")),W=q,$=A,z=m(!1),k=m(null),N=m(null),s=m(!0),V=m(!1),e=ue();e.$patch({cities:e.cities}),e.$patch({modalities:e.modalities}),e.$patch({economicSectors:e.economicSectors}),e.$patch({comercialActivities:e.comercialActivities}),e.$patch({regimes:e.regimes}),e.fetchEconomicSectors(),e.fetchComercialActivities(),e.fetchRegimes(),e.fetchCities(),e.fetchModalities();const d=se({task:1,codesunarp:null,economicsector_id:null,comercialactivity_id:null,regime_id:null,city_id:null,province_id:null,district_id:null,address:null,modality_id:null,user_id:R.user_id}),P=()=>{var i;(i=e.regimes)!=null&&i.length&&(s.value=!1)},F=async()=>{try{z.value=!0;const i={name:k.value};(await B({url:"create/comercial-activities",method:"POST",data:i})).status==200&&(k.value=null,e.fetchComercialActivities())}catch(i){console.log(i)}finally{z.value=!1}},v=async()=>{try{z.value=!0;const i={name:N.value};(await B({url:"create/economic-sector",method:"POST",data:i})).status==200&&(N.value=null,e.fetchEconomicSectors())}catch(i){console.log(i)}finally{z.value=!1}},g=i=>{d.province_id=null,d.district_id=null,e.fetchProvinces(i)},D=i=>{d.district_id=null,e.fetchDistricts(i)},O=(i,S)=>{const I=i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},G=async()=>{V.value=!0,d.people_id=W.info.id;try{const i=await B({url:"formalization/ruc20-step1",method:"POST",data:d});if(i.status===200){if(l.query.formalizaciondigital){let S={id:+l.query.formalizaciondigital,documentnumber:l.query.number};await B({url:"formalization/digital/update-attended",method:"PUT",data:S})}K.success(i.message),d.codesunarp=null,d.economicsector_id=null,d.comercialactivity_id=null,d.regime_id=null,d.city_id=null,d.province_id=null,d.district_id=null,d.address=null,d.modality_id=null,$("closeDraw",!0)}}catch(i){console.log("Error: "+i)}finally{V.value=!1}},U=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(i,S)=>{const I=c("a-select"),b=c("a-form-item"),X=c("a-divider"),Y=c("a-input"),Z=c("a-button"),Q=c("a-space"),u=c("a-form"),ee=c("a-spin");return o(),C("div",Je,[t(ee,{spinning:s.value},{default:a(()=>[t(u,{layout:"vertical",model:d,name:"basic",autocomplete:"off",onFinish:G,onFinishFailed:U},{default:a(()=>[r("div",We,[(o(!0),C(J,null,te(f(Ae),(n,_)=>(o(),C(J,{key:_},[n.type==="iSelect"?(o(),h(b,{key:0,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:a(()=>[n.name=="regime_id"?(o(),h(I,{key:0,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,options:f(e).regimes,"show-search":"","filter-option":O},null,8,["value","onUpdate:value","options"])):p("",!0),n.name=="modality_id"?(o(),h(I,{key:1,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,options:f(e).modalities},null,8,["value","onUpdate:value","options"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0),n.type==="iSelectWrite"?(o(),h(b,{key:1,class:"item-max",name:n.name,label:n.label,rules:[{required:n.required,message:n.message}]},{default:a(()=>[n.name=="comercialactivity_id"?(o(),h(I,{key:0,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,"show-search":"",options:f(e).comercialActivities,"filter-option":O},{dropdownRender:a(({menuNode:T})=>[t(f(x),{vnodes:T},null,8,["vnodes"]),t(X,{style:{margin:"4px 0"}}),t(Q,{style:{padding:"4px 8px"}},{default:a(()=>[t(Y,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":S[0]||(S[0]=L=>k.value=L),placeholder:"Nueva actividad"},null,8,["value"]),t(Z,{type:"text",onClick:F,loading:z.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):p("",!0),n.name=="economicsector_id"?(o(),h(I,{key:1,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,"show-search":"",options:f(e).economicSectors,"filter-option":O},{dropdownRender:a(({menuNode:T})=>[t(f(x),{vnodes:T},null,8,["vnodes"]),t(X,{style:{margin:"4px 0"}}),t(Q,{style:{padding:"4px 8px"}},{default:a(()=>[t(Y,{ref_for:!0,ref:"inputRef",value:N.value,"onUpdate:value":S[1]||(S[1]=L=>N.value=L),placeholder:"Nuevo Sector"},null,8,["value"]),t(Z,{type:"text",onClick:v,loading:z.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):p("",!0),n.name=="city_id"?(o(),h(I,{key:2,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,"show-search":"",options:f(e).cities,"filter-option":O,onChange:g},null,8,["value","onUpdate:value","options"])):p("",!0),n.name=="province_id"?(o(),h(I,{key:3,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,"show-search":"",options:f(e).provinces,"filter-option":O,onChange:D,disabled:!d.city_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0),n.name=="district_id"?(o(),h(I,{key:4,value:d[n.name],"onUpdate:value":T=>d[n.name]=T,"show-search":"",options:f(e).districts,"filter-option":O,disabled:!d.province_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0),n.type==="iText"?(o(),h(b,{key:2,name:n.name,label:n.label,rules:[{required:n.required,message:n.message,type:n.email,max:n.max}]},{default:a(()=>[t(Y,{value:d[n.name],"onUpdate:value":T=>d[n.name]=T,disabled:n.disabled},null,8,["value","onUpdate:value","disabled"])]),_:2},1032,["name","label","rules"])):p("",!0)],64))),128))]),r("div",null,E(P()),1),t(b,null,{default:a(()=>[t(Z,{class:"btn-produce",type:"primary","html-type":"submit",loading:V.value},{default:a(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},Ze=ae(Ke,[["__scopeId","data-v-8c562e87"]]);const Qe={class:"wrapper-booking"},Xe={class:"grid-booking"},et={class:"select-notaries"},tt={class:"name"},at={class:"city"},ot={class:"address"},nt={__name:"ActoConstitutivo",props:["info","itemSelectedF20"],emits:["closeDraw"],setup(q,{emit:A}){const x=JSON.parse(localStorage.getItem("profile")),l=ue(),R=q,W=A;l.$patch({notaries:l.notaries}),l.$patch({cities:l.cities}),l.fetchNotaries(),l.fetchCities();const $=m(!0),z=m(!1),k=m(null),N=m(null),s=(g,D)=>{const O=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return D.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(O)},V=(g,D)=>{const O=g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return D.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(O)},e=se({task:2,name:null,numbernotary:null,notary_id:null,user_id:x.user_id,userupdated_id:x.id}),d=()=>{var g;(g=l.notaries)!=null&&g.length&&($.value=!1)},P=async()=>{try{const g={city_id:k.value},{data:D}=await Oe({url:"public/notaries-filters",method:"GET",params:g});N.value=null,e.notary_id=null;const O=D.map(G=>({value:G.id,name:G.name,city:G.city.name,province:G.province.name,district:G.district.name,address:G.address}));N.value=O}catch(g){console.error("Error de red:",g)}},F=async()=>{z.value=!0,e.people_id=R.info.id;try{let g=null;R.itemSelectedF20?g=`formalization/ruc20-step2/${R.itemSelectedF20.id}`:g="formalization/ruc20-step2/000";const D=await B({url:g,method:"POST",data:e});D.status===200&&(K.success(D.message),e.name=null,e.numbernotary=null,e.notary_id=null,W("closeDraw",!0))}catch(g){console.log("Error: "+g)}finally{z.value=!1}},v=()=>{K.error("Debes de completar todos los espacios requeridos")};return(g,D)=>{const O=c("a-select"),G=c("a-form-item"),U=c("a-input"),i=c("a-button"),S=c("a-form"),I=c("a-spin");return o(),C("div",Qe,[t(I,{spinning:$.value},{default:a(()=>[t(S,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:F,onFinishFailed:v},{default:a(()=>[r("div",Xe,[(o(!0),C(J,null,te(f(Re),(b,X)=>(o(),C(J,{key:X},[b.type==="iSelect"?(o(),h(G,{key:0,class:"item-max",name:b.name,label:b.label,rules:[{required:b.required,message:b.message}]},{default:a(()=>[b.name=="notary_id"?(o(),h(O,{key:0,value:e[b.name],"onUpdate:value":Y=>e[b.name]=Y,options:N.value,"option-label-prop":"name",disabled:!k.value,"show-search":"","filter-option":V},{option:a(({value:Y,name:Z,city:Q,province:u,district:ee,address:n})=>[r("div",et,[r("span",tt,E(Z),1),r("span",at,E(Q)+" - "+E(u)+" - "+E(ee),1),r("span",ot,E(n),1)])]),_:2},1032,["value","onUpdate:value","options","disabled"])):p("",!0),b.name=="city"?(o(),h(O,{key:1,placeholder:"Seleccionar una provincia para la notaría",style:{width:"350px"},value:k.value,"onUpdate:value":D[0]||(D[0]=Y=>k.value=Y),"show-search":"",options:f(l).cities,"filter-option":s,onChange:P},null,8,["value","options"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0),b.type==="iText"?(o(),h(G,{key:1,name:b.name,label:b.label,rules:[{required:b.required,message:b.message,type:b.email,max:b.max}]},{default:a(()=>[t(U,{value:e[b.name],"onUpdate:value":Y=>e[b.name]=Y},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):p("",!0)],64))),128))]),r("div",null,E(d()),1),t(G,null,{default:a(()=>[t(i,{class:"btn-produce",type:"primary","html-type":"submit",loading:z.value},{default:a(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},lt=ae(nt,[["__scopeId","data-v-246fbdd3"]]);const st={class:"wrapper-booking"},it={class:"grid-booking"},rt={class:"emp-20"},dt={__name:"MypeFinal",props:["itemSelectedF20"],emits:["closeDraw"],setup(q,{emit:A}){const x=q,l=A,R=m(!1),W=m(!0),$=se({task:3,ruc:null}),z=s=>{$[s]=$[s].replace(/\D/g,"")},k=async()=>{if(!x.itemSelectedF20)return K.error("Debes completar los pasos anteriores");R.value=!0,$.mype_id=x.itemSelectedF20.mype.id;try{const s=await B({url:`formalization/ruc20-step3/${x.itemSelectedF20.id}`,method:"POST",data:$});s.status===200&&(K.success(s.message),$.ruc=null,l("closeDraw",!0))}catch(s){console.log("Error: "+s)}finally{R.value=!1}},N=()=>{K.error("Debes de completar todos los espacios requeridos")};return(s,V)=>{const e=c("a-input"),d=c("a-form-item"),P=c("a-button"),F=c("a-form");return o(),C("div",st,[t(F,{layout:"vertical",model:$,name:"basic",autocomplete:"off",onFinish:k,onFinishFailed:N},{default:a(()=>[r("div",it,[(o(!0),C(J,null,te(f(ze),(v,g)=>(o(),C(J,{key:g},[v.type==="iText"?(o(),h(d,{key:0,name:v.name,label:v.label,rules:[{required:v.required,message:v.message,type:v.email,max:v.max,min:v.min}]},{default:a(()=>[t(e,{value:$[v.name],"onUpdate:value":D=>$[v.name]=D,disabled:v.disabled,maxlength:9,onInput:D=>z(v.name)},{prefix:a(()=>[qe(r("span",rt,"20",512),[[Te,W.value]])]),_:2},1032,["value","onUpdate:value","disabled","onInput"])]),_:2},1032,["name","label","rules"])):p("",!0)],64))),128))]),t(d,null,{default:a(()=>[t(P,{class:"btn-produce",type:"primary","html-type":"submit",loading:R.value},{default:a(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},ut=ae(dt,[["__scopeId","data-v-3ed3d126"]]);const ct={class:"wrapper-booking"},pt={class:"grid-booking"},mt={__name:"FormalizacionRUC10",props:["info"],emits:["closeDraw"],setup(q,{emit:A}){const x=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),l=JSON.parse(localStorage.getItem("profile")),R=q,W=A,$=m(!1),z=m(null),k=m(null),N=m(!1),s=ue(),V=m(!1);s.$patch({cities:s.cities}),s.$patch({provinces:s.provinces}),s.$patch({districts:s.districts}),s.$patch({modalities:s.modalities}),s.$patch({detailProcedures:s.detailProcedures}),s.$patch({economicSectors:s.economicSectors}),s.$patch({comercialActivities:s.comercialActivities}),s.fetchDetailProcedures(),s.fetchModalities(),s.fetchEconomicSectors(),s.fetchComercialActivities(),s.fetchCities();const e=se({detailprocedure_id:null,modality_id:null,economicsector_id:null,comercialactivity_id:null,city_id:null,province_id:null,district_id:null,user_id:l.user_id}),d=U=>{U=="ruc"&&(e[U]=e[U].replace(/\D/g,""))},P=async()=>{try{V.value=!0;const U={name:z.value};(await B({url:"create/comercial-activities",method:"POST",data:U})).status==200&&(z.value=null,s.fetchComercialActivities())}catch(U){console.log(U)}finally{V.value=!1}},F=U=>{e.province_id=null,e.district_id=null,s.fetchProvinces(U)},v=U=>{e.district_id=null,s.fetchDistricts(U)},g=(U,i)=>{const S=U.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(S)},D=async()=>{try{N.value=!0;const U={name:k.value};(await B({url:"create/economic-sector",method:"POST",data:U})).status==200&&(k.value=null,s.fetchEconomicSectors())}catch(U){console.log(U)}finally{N.value=!1}},O=async()=>{$.value=!0,e.people_id=R.info.id;try{const U=await B({url:"formalization/create-ruc-10",method:"POST",data:e});U.status===200&&(K.success(U.message),e.detailprocedure_id=null,e.modality_id=null,e.economicsector_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.ruc=null,W("closeDraw",!0))}catch(U){console.log("Error: "+U)}finally{$.value=!1}},G=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(U,i)=>{const S=c("a-select"),I=c("a-form-item"),b=c("a-input"),X=c("a-divider"),Y=c("a-button"),Z=c("a-space"),Q=c("a-form");return o(),C("div",ct,[t(Q,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:O,onFinishFailed:G},{default:a(()=>[r("div",pt,[(o(!0),C(J,null,te(f(Ne),(u,ee)=>(o(),C(J,{key:ee},[u.type==="iSelect"?(o(),h(I,{key:0,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:a(()=>[u.name=="detailprocedure_id"?(o(),h(S,{key:0,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,options:f(s).detailProcedures},null,8,["value","onUpdate:value","options"])):p("",!0),u.name=="modality_id"?(o(),h(S,{key:1,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,options:f(s).modalities},null,8,["value","onUpdate:value","options"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0),u.type==="iText"?(o(),h(I,{key:1,name:u.name,label:u.label,rules:[{required:u.required,message:u.message,type:u.email,max:u.max}]},{default:a(()=>[t(b,{value:e[u.name],"onUpdate:value":n=>e[u.name]=n,disabled:u.disabled,maxlength:u.max,onInput:n=>d(u.name)},null,8,["value","onUpdate:value","disabled","maxlength","onInput"])]),_:2},1032,["name","label","rules"])):p("",!0),u.type==="iSelectWrite"?(o(),h(I,{key:2,class:"item-max",name:u.name,label:u.label,rules:[{required:u.required,message:u.message}]},{default:a(()=>[u.name=="comercialactivity_id"?(o(),h(S,{key:0,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,"show-search":"",options:f(s).comercialActivities,"filter-option":g},{dropdownRender:a(({menuNode:n})=>[t(f(x),{vnodes:n},null,8,["vnodes"]),t(X,{style:{margin:"4px 0"}}),t(Z,{style:{padding:"4px 8px"}},{default:a(()=>[t(b,{ref_for:!0,ref:"inputRef",value:z.value,"onUpdate:value":i[0]||(i[0]=_=>z.value=_),placeholder:"Nueva actividad"},null,8,["value"]),t(Y,{type:"text",onClick:P,loading:V.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):p("",!0),u.name=="economicsector_id"?(o(),h(S,{key:1,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,"show-search":"",options:f(s).economicSectors,"filter-option":g},{dropdownRender:a(({menuNode:n})=>[t(f(x),{vnodes:n},null,8,["vnodes"]),t(X,{style:{margin:"4px 0"}}),t(Z,{style:{padding:"4px 8px"}},{default:a(()=>[t(b,{ref_for:!0,ref:"inputRef",value:k.value,"onUpdate:value":i[1]||(i[1]=_=>k.value=_),placeholder:"Nuevo registro"},null,8,["value"]),t(Y,{type:"text",onClick:D,loading:N.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):p("",!0),u.name=="city_id"?(o(),h(S,{key:2,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,"show-search":"",options:f(s).cities,"filter-option":g,onChange:F},null,8,["value","onUpdate:value","options"])):p("",!0),u.name=="province_id"?(o(),h(S,{key:3,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,"show-search":"",options:f(s).provinces,"filter-option":g,onChange:v,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0),u.name=="district_id"?(o(),h(S,{key:4,value:e[u.name],"onUpdate:value":n=>e[u.name]=n,"show-search":"",options:f(s).districts,"filter-option":g,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0)],64))),128))]),t(I,null,{default:a(()=>[t(Y,{type:"primary",class:"btn-produce","html-type":"submit",loading:$.value},{default:a(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},_t=ae(mt,[["__scopeId","data-v-b169c958"]]);const vt={class:"wrapper-booking"},ft={class:"grid-booking"},ht={__name:"AsesoriaNuevo",props:["info"],emits:["closeDraw"],setup(q,{emit:A}){const x=_e({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),l=ue(),R=JSON.parse(localStorage.getItem("profile")),W=m(!1),$=q,z=A,k=m(!1),N=m(null),s=m(null);l.$patch({components:l.components}),l.$patch({componentThemes:l.componentThemes}),l.$patch({modalities:l.modalities}),l.$patch({cities:l.cities}),l.fetchComponents(),l.fetchComponentThemes(),l.fetchModalities(),l.fetchCities(),l.fetchGenders();const V=m(!0),e=se({observations:null,user_id:R.user_id,people_id:null,component_id:null,theme_id:null,modality_id:null,city_id:null,province_id:null,district_id:null}),d=async()=>{try{k.value=!0;const i={name:N.value};(await B({url:"create/component",method:"POST",data:i})).status==200&&(N.value=null,l.fetchComponents())}catch(i){console.log(i)}finally{k.value=!1}},P=async()=>{try{k.value=!0;const i={component_id:e.component_id,name:s.value};(await B({url:"create/theme",method:"POST",data:i})).status==200&&(s.value=null,l.fetchComponentThemes(e.component_id))}catch(i){console.log(i)}finally{k.value=!1}},F=()=>{l.cities&&(V.value=!1)},v=i=>{e.theme_id=null,l.fetchComponentThemes(i)},g=i=>{e.province_id=null,e.district_id=null,l.fetchProvinces(i)},D=i=>{e.district_id=null,l.fetchDistricts(i)},O=(i,S)=>{const I=i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return S.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)},G=async()=>{W.value=!0,e.people_id=$.info.id;try{const i=await B({url:"advisory/create",method:"POST",data:e});i.status===200&&(K.success(i.message),e.component_id=null,e.theme_id=null,e.modality_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.observations=null,z("closeDraw",!0))}catch(i){console.log("Error: "+i)}finally{W.value=!1}},U=()=>{K.warning("Debes de completar todos los espacios requeridos")};return(i,S)=>{const I=c("a-select"),b=c("a-form-item"),X=c("a-textarea"),Y=c("a-divider"),Z=c("a-input"),Q=c("a-button"),u=c("a-space"),ee=c("a-form"),n=c("a-spin");return o(),C("div",vt,[t(n,{spinning:V.value},{default:a(()=>[t(ee,{layout:"vertical",model:e,name:"basic",autocomplete:"off",onFinish:G,onFinishFailed:U},{default:a(()=>[r("div",ft,[(o(!0),C(J,null,te(f(Fe),(_,T)=>(o(),C(J,{key:T},[_.type==="iSelect"?(o(),h(b,{key:0,class:"item-max",name:_.name,label:_.label,rules:[{required:_.required,message:_.message}]},{default:a(()=>[_.name=="modality_id"?(o(),h(I,{key:0,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,options:f(l).modalities},null,8,["value","onUpdate:value","options"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0),_.type==="iTextarea"?(o(),h(b,{key:1,name:_.name,label:_.label,rules:[{required:_.required,message:_.message}]},{default:a(()=>[t(X,{value:e[_.name],"onUpdate:value":L=>e[_.name]=L,rows:3},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):p("",!0),_.type==="iSelectWrite"?(o(),h(b,{key:2,class:"item-max",name:_.name,label:_.label,rules:[{required:_.required,message:_.message}]},{default:a(()=>[_.name=="city_id"?(o(),h(I,{key:0,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,"show-search":"",options:f(l).cities,"filter-option":O,onChange:g},null,8,["value","onUpdate:value","options"])):p("",!0),_.name=="province_id"?(o(),h(I,{key:1,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,"show-search":"",options:f(l).provinces,"filter-option":O,onChange:D,disabled:!e.city_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0),_.name=="district_id"?(o(),h(I,{key:2,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,"show-search":"",options:f(l).districts,"filter-option":O,disabled:!e.province_id},null,8,["value","onUpdate:value","options","disabled"])):p("",!0),_.name=="component_id"?(o(),h(I,{key:3,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,"show-search":"",options:f(l).components,"filter-option":O,onChange:v},{dropdownRender:a(({menuNode:L})=>[t(f(x),{vnodes:L},null,8,["vnodes"]),t(Y,{style:{margin:"4px 0"}}),t(u,{style:{padding:"4px 8px"}},{default:a(()=>[t(Z,{ref_for:!0,ref:"inputRef",value:N.value,"onUpdate:value":S[0]||(S[0]=ne=>N.value=ne),placeholder:"Nueva componente"},null,8,["value"]),t(Q,{type:"text",onClick:d,loading:k.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options"])):p("",!0),_.name=="theme_id"?(o(),h(I,{key:4,value:e[_.name],"onUpdate:value":L=>e[_.name]=L,"show-search":"",options:f(l).componentThemes,"filter-option":O,disabled:!e.component_id},{dropdownRender:a(({menuNode:L})=>[t(f(x),{vnodes:L},null,8,["vnodes"]),t(Y,{style:{margin:"4px 0"}}),t(u,{style:{padding:"4px 8px"}},{default:a(()=>[t(Z,{ref_for:!0,ref:"inputRef",value:s.value,"onUpdate:value":S[1]||(S[1]=ne=>s.value=ne),placeholder:"Nueva tema"},null,8,["value"]),t(Q,{type:"text",onClick:P,loading:k.value},{icon:a(()=>[t(f(oe))]),default:a(()=>[M(" Agregar ")]),_:1},8,["loading"])]),_:1})]),_:2},1032,["value","onUpdate:value","options","disabled"])):p("",!0)]),_:2},1032,["name","label","rules"])):p("",!0)],64))),128))]),r("div",null,E(F()),1),t(b,null,{default:a(()=>[t(Q,{type:"primary",class:"btn-produce","html-type":"submit",loading:W.value},{default:a(()=>[M("GUARDAR")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])}}},yt=ae(ht,[["__scopeId","data-v-7734f6f3"]]);const gt={key:0},bt={key:0},wt={key:0},xt={__name:"AsesoriasHistorial",props:["totaladvisories","totalformalization10","totalformalization20"],setup(q){const A=q,x=m("1"),l=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Componente",dataIndex:"component",width:100},{title:"Tema",dataIndex:"theme",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],R=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:40},{title:"Asesor",dataIndex:"asesor",width:100},{title:"Detalle del trámite",dataIndex:"detailprocedure",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Modalidad",dataIndex:"modality",align:"center",width:100},{title:"Ciudad",dataIndex:"city",width:40},{title:"Provincia",dataIndex:"province",width:40},{title:"Distrito",dataIndex:"district",width:40}],W=[{title:"#",dataIndex:"idx",width:50,align:"center"},{title:"Fecha registro",dataIndex:"date_start",width:120},{title:"Asesor",dataIndex:"asesor",width:150},{title:"Paso",dataIndex:"task",width:50},{title:"Código SUNARP",dataIndex:"codesunarp",width:100},{title:"Sector económico",dataIndex:"economicsector",width:100},{title:"Actividad comercial",dataIndex:"comercialactivity",width:100},{title:"Notaría",dataIndex:"numbernotary",width:100},{title:"Régimen",dataIndex:"regime",width:80,align:"center"},{title:"MYPE",dataIndex:"mypename",width:100},{title:"MYPE RUC",dataIndex:"myperuc",width:80},{title:"Modalidad",dataIndex:"modality",align:"center",width:80},{title:"Ciudad",dataIndex:"city",width:30},{title:"Provincia",dataIndex:"province",width:30},{title:"Distrito",dataIndex:"district",width:30},{title:"Dirección",dataIndex:"address",width:100}],$=z=>be(z).format("DD/MM/YYYY HH:mm A");return(z,k)=>{const N=c("a-table"),s=c("a-card"),V=c("a-tab-pane"),e=c("a-tabs");return o(),h(e,{activeKey:x.value,"onUpdate:activeKey":k[0]||(k[0]=d=>x.value=d),type:"card",class:"box-hist"},{default:a(()=>[t(V,{key:"1",tab:"ASESORÍAS"},{default:a(()=>[t(s,null,{default:a(()=>[t(N,{columns:l,"data-source":A.totaladvisories,bordered:"",pagination:!1,size:"small",scroll:{x:1600},"expand-column-width":100},{bodyCell:a(({index:d,column:P,record:F})=>[P.dataIndex==="idx"?(o(),C("span",gt,E(d+1),1)):p("",!0),P.dataIndex==="date_start"?(o(),C(J,{key:1},[M(E($(F.createDate)),1)],64)):p("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(V,{key:"2",tab:"RUC 10"},{default:a(()=>[t(s,null,{default:a(()=>[t(N,{columns:R,"data-source":A.totalformalization10,bordered:"",pagination:!1,size:"small",scroll:{x:1800},"expand-column-width":100},{bodyCell:a(({index:d,column:P,record:F})=>[P.dataIndex==="idx"?(o(),C("span",bt,E(d+1),1)):p("",!0),P.dataIndex==="date_start"?(o(),C(J,{key:1},[M(E($(F.createDate)),1)],64)):p("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(V,{key:"3",tab:"RUC 20"},{default:a(()=>[t(s,null,{default:a(()=>[t(N,{columns:W,"data-source":A.totalformalization20,bordered:"",pagination:!1,size:"small",scroll:{x:2200},"expand-column-width":100},{bodyCell:a(({index:d,column:P,record:F})=>[P.dataIndex==="idx"?(o(),C("span",wt,E(d+1),1)):p("",!0),P.dataIndex==="date_start"?(o(),C(J,{key:1},[M(E($(F.createDate)),1)],64)):p("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["activeKey"])}}},St=ae(xt,[["__scopeId","data-v-9962d363"]]);const H=q=>(Me("data-v-1c2f4e9a"),q=q(),Ve(),q),Ut={class:"asesorias"},kt=H(()=>r("h3",{class:"title-produce"},"REGISTRO DE FORMALIZACIONES Y ASESORÍAS",-1)),It=H(()=>r("br",null,null,-1)),Ct={class:"wrapper-s"},Dt=H(()=>r("label",{class:"label"},"Seleccione el tipo de documento",-1)),At=H(()=>r("label",{class:"label"},"Digite el número de documento",-1)),Rt={class:"column-2"},zt={class:"info-update"},Nt=H(()=>r("h4",{class:"title-produce"},"RESULTADO DE LA BÚSQUEDA",-1)),Ft={class:"info-personal"},$t=H(()=>r("span",null,"Apellidos y nombres: ",-1)),Ot=H(()=>r("span",null,"Número de celular:",-1)),qt=H(()=>r("span",null,"Correo electrónico:",-1)),Tt=H(()=>r("span",null,"Asesorías:",-1)),Et=H(()=>r("span",null,"Formalizaciones RUC 20:",-1)),Pt={class:"alert-incomplete"},Lt=H(()=>r("span",null,"Formalizaciones RUC 10:",-1)),Mt=H(()=>r("h4",{class:"title-produce"},"¿DESEA REGISTRAR UN NUEVO SERVICIO?",-1)),Vt={class:"card-as-btn"},Gt={key:0,class:"card-as",style:{padding:"1rem"}},Yt=H(()=>r("h4",{class:"title-produce"},"HISTORIAL",-1)),Ht={class:"steps-content"},jt=["onClick"],Bt={class:"pendient"},Jt={key:0,class:"info-tag"},Wt=H(()=>r("b",null,"Paso",-1)),Kt={key:1,class:"info-tag"},Zt=H(()=>r("b",null,"Siguiente paso",-1)),Qt={key:2,class:"info-tag"},Xt=H(()=>r("b",null,"Siguiente paso",-1)),ea={class:"info"},ta=H(()=>r("b",null,"Código SID SUNARP",-1)),aa={class:"code-number"},oa=H(()=>r("b",null,"Última consulta",-1)),na=H(()=>r("div",{style:{"text-align":"center"}},"NUEVO TRÁMITE",-1)),la=[na],sa={__name:"AsesoriasFormalizaciones",setup(q){const A=Ee(),x=ge(),l=m(0),R=m(null),W=m([{value:"asesoria",label:"ASESORÍA"},{value:"ruc20",label:"RUC 20"},{value:"ruc10",label:"RUC 10"}]),$=m(null),z=m(!1),k=m(null),N=m(!1),s=m(!1),V=m(!1),e=m(!1),d=m(!1),P=m(!1),F=m(""),v=m([]),g=m(!1),D=m(0),O=m(!1),G=m([]),U=m(null),i=m([]),S=m([]),I=m([]),b=m(!1),X=()=>{fe(F.value),z.value=!1},Y=j=>be(j).format("DD/MM/YYYY HH:mm A"),Z=()=>{u()},Q=()=>{F.value=F.value.replace(/\D/g,"")},u=()=>{F.value="",v.value=[],G.value=[],A.push({name:"asesorias-formalizaciones"})},ee=()=>{if(k.value=null,k.value=v.value,!R.value)return K.warning("Seleccionar un tipo de servicio");R.value=="asesoria"&&(P.value=!0),R.value=="ruc10"&&(d.value=!0),R.value=="ruc20"&&L()},n=[{title:"Reserva de nombre"},{title:"Acto constitutivo"},{title:"Final"}],_=()=>{$.value=v.value,z.value=!0},T=()=>{D.value=0,e.value=!0,s.value=!1},L=async()=>{try{O.value=!0;const j=await B({url:`formalization/list-ruc-20/${v.value.id}`,method:"GET"});if(j.length<1)return T();V.value=j,s.value=!0}catch(j){console.log(j)}finally{O.value=!1}},ne=async j=>{N.value=!0,D.value=j.task,U.value=j,setTimeout(()=>{N.value=!1,e.value=!0,s.value=!1},400)},le=async()=>{g.value=!0;const j=await B({url:`person/found/${l.value}/${F.value}`,method:"GET"});if(j.status==200)return v.value=j.data,he(v.value.id),g.value=!1},fe=async j=>{if(g.value=!0,!j)return K.warning("Ingresa un número de documento"),g.value=!1;if(l.value==0)return K.warning("Seleccionar el tipo de documento"),g.value=!1;if(l.value==1&&F.value.length<8){K.warning("El número de DNI está incompleto"),g.value=!1;return}const y=await B({url:`person/found/${l.value}/${F.value}`,method:"GET"});if(y.status==200)return v.value=y.data,he(y.data.id),g.value=!1;if(y.status===404){const ie={type:l.value,access:"asesorias",number:F.value};A.push({name:"registrar-persona",query:ie})}},he=async j=>{try{const{data:y}=await B({url:`historial/registers/${j}`,method:"GET"});i.value=y.advisories,S.value=y.formalization10,I.value=y.formalization20,b.value=!0}catch(y){console.error("Error de red:",y)}};return Pe(()=>{x.query.type&&(console.log("ooaoooaoaa",x.query.type),l.value=x.query.type,F.value=x.query.number)}),(j,y)=>{const ie=c("a-radio"),we=c("a-radio-group"),xe=c("a-input-search"),ce=c("a-card"),Se=c("a-select"),Ue=c("a-button"),ke=c("a-step"),Ie=c("a-steps"),re=c("a-drawer"),pe=c("a-tag"),Ce=c("a-spin"),De=c("a-modal");return o(),C(J,null,[r("div",Ut,[kt,It,t(ce,{class:"card-as card-gray"},{default:a(()=>[f(x).query.dni?(o(),h(f(Be),{key:0,class:"ico-reload",onClick:Z})):p("",!0),r("div",Ct,[r("div",null,[Dt,t(we,{value:l.value,"onUpdate:value":y[0]||(y[0]=w=>l.value=w),onChange:u,class:"radio-produce"},{default:a(()=>[t(ie,{value:"1"},{default:a(()=>[M("DNI")]),_:1}),t(ie,{value:"2"},{default:a(()=>[M("CE")]),_:1})]),_:1},8,["value"])]),r("div",null,[At,t(xe,{"enter-button":"BUSCAR",value:F.value,"onUpdate:value":y[1]||(y[1]=w=>F.value=w),placeholder:"",loading:g.value,onSearch:fe,onInput:Q,class:"search-produce",maxlength:l.value==1?8:20},null,8,["value","loading","maxlength"])])])]),_:1}),r("div",Rt,[v.value.length!=0?(o(),h(ce,{key:0,class:"card-as"},{default:a(()=>{var w,de,me;return[r("div",zt,[Nt,t(f(Le),{class:"ico-edit",onClick:_})]),r("div",Ft,[$t,r("span",null,E(v.value.lastname)+" "+E(v.value.middlename)+", "+E(v.value.name),1),Ot,r("span",null,[r("span",null,E(v.value.phone?v.value.phone:"-"),1)]),qt,r("span",null,E(v.value.email?v.value.email:"-"),1),Tt,r("b",null,E((w=v.value)==null?void 0:w.idadvisory.length),1),Et,r("div",Pt,[r("b",null,E((de=v.value)==null?void 0:de.idformalization20.length),1)]),Lt,r("b",null,E((me=v.value)==null?void 0:me.idformalization10.length),1)])]}),_:1})):p("",!0),v.value.length!=0?(o(),h(ce,{key:1,class:"card-as"},{default:a(()=>[Mt,r("div",Vt,[t(Se,{style:{"min-width":"200px"},value:R.value,"onUpdate:value":y[2]||(y[2]=w=>R.value=w),options:W.value},null,8,["value","options"]),t(Ue,{class:"btn-produce",type:"primary",onClick:ee},{default:a(()=>[M("REGISTRAR")]),_:1})])]),_:1})):p("",!0)]),b.value?(o(),C("div",Gt,[Yt,t(St,{totaladvisories:i.value,totalformalization10:S.value,totalformalization20:I.value},null,8,["totaladvisories","totalformalization10","totalformalization20"])])):p("",!0)]),r("section",null,[t(re,{width:"510",title:"Formalización con RUC 20",open:e.value,"onUpdate:open":y[7]||(y[7]=w=>e.value=w),placement:"right"},{default:a(()=>[t(Ie,{current:D.value,"onUpdate:current":y[3]||(y[3]=w=>D.value=w),size:"small",class:"steps"},{default:a(()=>[(o(),C(J,null,te(n,w=>t(ke,{key:w.title,title:w.title},null,8,["title"])),64))]),_:1},8,["current"]),r("div",Ht,[D.value==0?(o(),h(Ze,{key:0,info:k.value,onCloseDraw:y[4]||(y[4]=w=>(e.value=!1,le()))},null,8,["info"])):p("",!0),D.value==1?(o(),h(lt,{key:1,info:k.value,itemSelectedF20:U.value,onCloseDraw:y[5]||(y[5]=w=>(e.value=!1,le()))},null,8,["info","itemSelectedF20"])):p("",!0),D.value==2?(o(),h(ut,{key:2,itemSelectedF20:U.value,onCloseDraw:y[6]||(y[6]=w=>(e.value=!1,le()))},null,8,["itemSelectedF20"])):p("",!0)])]),_:1},8,["open"]),t(re,{title:"Formalización con RUC 10",open:d.value,"onUpdate:open":y[9]||(y[9]=w=>d.value=w),placement:"right"},{default:a(()=>[t(_t,{info:v.value,onCloseDraw:y[8]||(y[8]=w=>(d.value=!1,le()))},null,8,["info"])]),_:1},8,["open"]),t(re,{title:"Nueva asesoría",open:P.value,"onUpdate:open":y[11]||(y[11]=w=>P.value=w),placement:"right"},{default:a(()=>[t(yt,{info:v.value,onCloseDraw:y[10]||(y[10]=w=>(P.value=!1,le()))},null,8,["info"])]),_:1},8,["open"]),t(De,{open:s.value,"onUpdate:open":y[12]||(y[12]=w=>s.value=w),title:"Pendientes",closable:!0,cancelText:"Cerrar",footer:null,maskClosable:!1,width:"380px"},{default:a(()=>[t(Ce,{spinning:N.value},{default:a(()=>[(o(!0),C(J,null,te(V.value,(w,de)=>(o(),C("div",{key:de,onClick:me=>ne(w)},[r("div",Bt,[w.task==0?(o(),C("div",Jt,[Wt,M(),t(pe,{color:"error"},{default:a(()=>[M("Reserva de nombre")]),_:1})])):p("",!0),w.task==1?(o(),C("div",Kt,[Zt,M(),t(pe,{color:"warning"},{default:a(()=>[M("Acto constitutivo")]),_:1})])):p("",!0),w.task==2?(o(),C("div",Qt,[Xt,M(),t(pe,{color:"success"},{default:a(()=>[M("Formalizar")]),_:1})])):p("",!0),r("div",ea,[ta,r("span",null,[r("b",aa,E(w.codesunarp),1)]),oa,r("span",null,E(Y(w.updated_at)),1)])])],8,jt))),128)),r("div",{class:"pendient pendient-btn btn-produce",onClick:T},la)]),_:1},8,["spinning"])]),_:1},8,["open"]),t(re,{open:z.value,"onUpdate:open":y[13]||(y[13]=w=>z.value=w),class:"draw-notary","root-class-name":"root-class-name",title:"Datos del solicitante",placement:"right"},{default:a(()=>[t(Ge,{onCloseDraw:X,updateValues:$.value},null,8,["updateValues"])]),_:1},8,["open"])])],64)}}},_a=ae(sa,[["__scopeId","data-v-1c2f4e9a"]]);export{_a as default};
