import{_ as Q}from"./TableComponent-da8a001a.js";import{E as q,r as d,u as X,a as K,p as E,k as W,X as C,b as _,o,d as m,c,w as l,m as S,y as f,z as s,F as P,j as w,i as k,e as U,a2 as Z,h as ee}from"./index-4a64add0.js";import{d as te}from"./downloadExcel-f9b6c08b.js";import"./es-3d4e76ab.js";import{_ as ae}from"./ParticipanteSed-6baaa126.js";import{F as ne,I as oe}from"./InstagramOutlined-18732c00.js";import{C as se}from"./ChromeOutlined-47190863.js";import"./icoexcel-1b303edf.js";import"./selectes-733dc84b.js";import"./SyncOutlined-9c899f48.js";import"./MoreOutlined-45867abb.js";import"./FormComponent-2a90810a.js";import"./quill.snow-8c98ddfc.js";const re={class:"layout-content"},le={key:3,class:"sed-socials"},ie=["href"],de=["href"],ce=["href"],ue=["onClick"],Ye={__name:"mujer-produce-inscritos",setup(me){const x=q(),F=JSON.parse(localStorage.getItem("role"))||[],N=d([]),R=d(0),T=d(150),h=d(!1);X();const D=d(!1),y=d(null),v=d(!1),b=d({name:"Cargando..."}),a=K({year:E("2025","YYYY"),range:null,asesor:null,name:null,page:1,type:1,typeCde:null,orderby:null}),L=[{title:"#",fixed:"left",dataIndex:"idx",align:"center",width:70},{title:"ASISTIO",dataIndex:"asistio",width:80,align:"center",fixed:"left"},{title:"RUC",dataIndex:"ruc",fixed:"left",width:120,align:"center"},{title:"TIPO DE DOCUMENTO",dataIndex:"typedocument_name",fixed:"left",width:120,align:"center"},{title:"NÂ° DOCUMENTO",dataIndex:"documentnumber",width:120,align:"center",fixed:"left"},{title:"DISCAPACIDAD",dataIndex:"sick",width:120,align:"center"},{title:"NOMBRE",dataIndex:"name",width:150,align:"center"},{title:"APELLIDO PATERNO",dataIndex:"lastname",width:150,align:"center"},{title:"APELLIDO MATERNO",dataIndex:"middlename",width:150,align:"center"},{title:"GÃ‰NERO",dataIndex:"gender_name",width:120,align:"center"},{title:"TELÃ‰FONO",dataIndex:"phone",width:150,align:"center"},{title:"EMAIL",dataIndex:"email",width:200,align:"center"},{title:"FECHA DE NACIMIENTO",dataIndex:"birthday",width:150,align:"center"},{title:"REGISTRADO",dataIndex:"created_at",width:160,align:"center"},{title:"ASISTENCIA",dataIndex:"attended",width:160,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],$=e=>{y.value=e,h.value=!0},B=()=>{g(),h.value=!1},H=()=>{y.value=null,h.value=!0},V=async(e,t)=>{const u=x.params.slug,I=E().format("DD/MM/YYYY HH:mm"),Y={slug:u,documentnumber:t.documentnumber,check:e.target.checked,date:I};try{const p=await S({url:"fair/update-attended-status",method:"PUT",data:Y});p.status==200&&console.log("status",p.message)}catch(p){console.error("Error de red:",p)}},j=async e=>{try{const t=await S({url:`fair/sed-delete-user/${e.id}`,method:"DELETE"});t.status==200&&(g(),ee.success(t.message))}catch(t){console.error("Error de red:",t)}},z=async()=>{v.value=!0;try{const e={},t=x.params.slug;a.year&&(e.year=E(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name);let u=`download/sed-asistentes/${t}`;await te(u,"sed",e)}catch(e){console.error("Error de red:",e)}finally{v.value=!1}},G=async e=>{a.page=e,await g()},J=async e=>{e&&(a.page=1,await g())},A=e=>F.some(t=>e.includes(t.id)),g=async()=>{try{D.value=!0;const e={page:a.page},t=x.params.slug;a.year&&(e.year=E(a.year).format("YYYY")),a.range&&(e.dateStart=a.range[0].format("YYYY/MM/DD"),e.dateEnd=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);let u=`events-ugse/users-registered-list/${t}`;const r=await S({url:u,method:"GET",params:e});b.value=r.event,N.value=r.data.data,R.value=r.data.total,T.value=r.data.per_page}catch(e){console.error("Error de red:",e)}finally{D.value=!1}};return W(async()=>{await g()}),C("search",a),C("loading",D),C("loadingFile",v),(e,t)=>{var M;const u=_("a-checkbox"),r=_("a-tag"),I=_("a-menu-item"),Y=_("a-popconfirm"),p=_("a-drawer");return o(),m("div",re,[c(Q,{title:`MUJER PRODUCE - INSCRITOS ðŸ“€ ${(M=b.value)==null?void 0:M.name}`,new:!1,textNuevo:"NUEVO EVENTO",downloadExcel:!0,placeholderSearch:"Buscar",bread:!0,routeBack:"/admin/ugse/mujer-produce",searchYear:!0,rangeDate:!0,columns:L,titleSearch:"FILTRAR POR RUC O DNI",pageSize:T.value,nameTotal:"Inscritos SED",dataSource:N.value,total:R.value,btnUpdate:!0,onHandleNew:H,onHandleCallFetchData:g,onHandleDownloadExcel:z,onHandleSearch:J,onHandlePaginator:G},{"data-cell":l(({column:i,record:n})=>[i.dataIndex=="asistio"?(o(),f(u,{key:0,checked:n.asistio,"onUpdate:checked":O=>n.asistio=O,onChange:O=>V(O,n)},null,8,["checked","onUpdate:checked","onChange"])):s("",!0),i.dataIndex=="sick"?(o(),m(P,{key:1},[n.sick=="SI"?(o(),f(r,{key:0,color:"red"},{default:l(()=>t[1]||(t[1]=[w("SI")])),_:1})):s("",!0),n.sick=="NO"?(o(),f(r,{key:1,color:"green"},{default:l(()=>t[2]||(t[2]=[w("NO")])),_:1})):s("",!0)],64)):s("",!0),i.dataIndex=="typeAsistente"?(o(),m(P,{key:2},[n.typeAsistente==1?(o(),f(r,{key:0,color:"blue"},{default:l(()=>t[3]||(t[3]=[w("Representante")])),_:1})):s("",!0),n.typeAsistente==2?(o(),f(r,{key:1,color:"pink"},{default:l(()=>t[4]||(t[4]=[w("Invitado")])),_:1})):s("",!0)],64)):s("",!0),i.dataIndex=="redesSociales"?(o(),m("div",le,[n.instagram?(o(),m("a",{key:0,href:n.instagram,target:"_blank"},[c(k(ne),{class:"ico-sed-socials"})],8,ie)):s("",!0),n.facebook?(o(),m("a",{key:1,href:n.facebook,target:"_blank"},[c(k(oe),{class:"ico-sed-socials"})],8,de)):s("",!0),n.web?(o(),m("a",{key:2,href:n.web,target:"_blank"},[c(k(se),{class:"ico-sed-socials"})],8,ce)):s("",!0)])):s("",!0)]),"custom-options":l(({record:i})=>[A([1,5])?(o(),f(I,{key:0},{default:l(()=>[U("a",{onClick:n=>$(i)},"Editar",8,ue)]),_:2},1024)):s("",!0),A([1,5])?(o(),f(I,{key:1},{default:l(()=>[c(Y,{placement:"rightBottom",title:`Â¿Quieres eliminar ${i.documentnumber} ?`,onConfirm:n=>j(i)},{icon:l(()=>[c(k(Z),{style:{color:"red"}})]),default:l(()=>[t[5]||(t[5]=U("a",null,"Eliminar",-1))]),_:2},1032,["title","onConfirm"])]),_:2},1024)):s("",!0)]),_:1},8,["title","pageSize","dataSource","total"]),c(p,{open:h.value,"onUpdate:open":t[0]||(t[0]=i=>h.value=i),title:y.value?"EDITAR DATOS DEL PARTICIPANTE":"NUEVO REGISTRO",placement:"right",width:"650"},{default:l(()=>[c(ae,{onCloseDraw:B,info:y.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ye as default};
