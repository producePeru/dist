import{N as ye,ab as ge,r as m,a as K,k as ne,b as v,o as a,s as u,w as l,c as d,e as I,d as y,y as he,F as k,v as o,h as b,O as ke,i as _,t as S,B as G,m as V,u as xe,x as Ie,a3 as J,L as be,R as we,f as Ce}from"./index-74782dfc.js";import"./es-7ea590ce.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";import{Q as Ee}from"./quill.snow-f1b69108.js";import{V as Te}from"./VideoCameraOutlined-c9ab4faf.js";import{M as Ue}from"./MoreOutlined-ce8463ad.js";const De={title:{type:"iText",label:"Título del taller",name:"title",required:!0,message:"Escribe el título para el taller"},exponentId:{type:"iSelect",label:"Seleccinar expositor",name:"exponentId",required:!0,message:"Seleccionar un expositor"},workshopDate:{type:"iDate",label:"Fecha del taller",name:"workshopDate",required:!1,message:"Seleccionar la fecha del taller"},typeIntervention:{type:"iSelect",label:"Seleccinar tipo de intervención",name:"typeIntervention",required:!0,message:"Seleccionar un tipo"},slug:{type:"iText",label:"Slug",name:"slug",required:!0,message:"Escribe el título para el taller"},link:{type:"iText",label:"Link del taller",name:"link",required:!1,message:"Escribe el título para el taller"}};const Se={class:"grid-item"},qe={class:"wrapper-form_btn"},Me={__name:"NuevoTaller",props:["isIdUpdate"],emits:["handleCloseModal","refreshTable"],setup(Z,{emit:P}){ye.locale("es");const x=Z,q=P;ge(()=>{x.isIdUpdate?(t.title=x.isIdUpdate.title,t.exponentId=x.isIdUpdate.exponent_k,t.workshopDate=x.isIdUpdate.workshop_date,t.typeIntervention=x.isIdUpdate.type_intervention,t.slug=x.isIdUpdate.slug,t.link=x.isIdUpdate.link):(t.title=null,t.exponentId=null,t.workshopDate=null,t.typeIntervention=null,t.slug=null,t.link=null)});const C=m(!0),$=m(!1),t=K({title:null,exponentId:null,workshopDate:null,typeIntervention:null,slug:null,link:null,userId:1,testinId:null,testoutId:null,invitationId:null,status:1,registered:null,rrss:null,sms:null,correo:null}),O=m([]),N=[{label:"Marketing Digital",value:1},{label:"Comercio Electrónico",value:2},{label:"Gestión Empresarial",value:3},{label:"Analisis de datos",value:4},{label:"Medios de pago",value:5},{label:"Finanzas",value:6}],M=()=>{q("handleCloseModal",!0),C.value=!1},Y=()=>{t.title=null,t.exponentId=null,t.workshopDate=null,t.typeIntervention=null,t.slug=null,t.link=null,t.userId=1,t.testinId=null,t.testoutId=null,t.invitationId=null,t.status=null,t.registered=null,t.rrss=null,t.sms=null,t.correo=null},z=r=>{const f=new Date;return f.setHours(0,0,0,0),r&&r<f},B=(r,f)=>{t.workshopDate=f},E=r=>{if(typeof r=="string")return r.toLowerCase().replace(/\s+/g,"-");if(Array.isArray(r))return r.map(E);if(typeof r=="object"){const f={};for(const g in r)r.hasOwnProperty(g)&&(f[g]=E(r[g]));return f}else return r},L=async()=>{const r=E(t.slug),f=t;f.slug=r,$.value=!0;let g,w;x.isIdUpdate?(g=`/workshops/${x.isIdUpdate.id}`,w="PUT"):(g="/workshops",w="POST");try{const T=await G({url:g,method:w,data:f});Y(),q("refreshTable",!0),V.success(T.message),M()}catch{V.error("No se pudo registrar este taller")}finally{$.value=!1}};return ne(async()=>{try{const{data:r}=await G({url:"/enableds-exponents",method:"GET"});O.value=r}catch(r){console.error("Error de red:",r)}}),(r,f)=>{const g=v("a-select"),w=v("a-form-item"),T=v("a-input"),Q=v("a-date-picker"),R=v("a-button"),F=v("a-form"),W=v("a-modal");return a(),u(W,{open:C.value,"onUpdate:open":f[0]||(f[0]=i=>C.value=i),title:"Nuevo Taller",style:{top:"20px"},footer:"",onCancel:M,width:"700px"},{default:l(()=>[d(F,{layout:"vertical",model:t,name:"basic",autocomplete:"off",onFinish:L},{default:l(()=>[I("div",Se,[(a(!0),y(k,null,he(b(De),(i,X)=>(a(),y(k,{key:X},[i.type==="iSelect"?(a(),u(w,{key:0,class:"item-max",name:i.name,label:i.label,rules:[{required:i.required,message:i.message}]},{default:l(()=>[i.name=="typeIntervention"?(a(),u(g,{key:0,value:t[i.name],"onUpdate:value":U=>t[i.name]=U,options:N},null,8,["value","onUpdate:value"])):o("",!0),i.name=="exponentId"?(a(),u(g,{key:1,value:t[i.name],"onUpdate:value":U=>t[i.name]=U,options:O.value},null,8,["value","onUpdate:value","options"])):o("",!0)]),_:2},1032,["name","label","rules"])):o("",!0),i.type==="iText"?(a(),u(w,{key:1,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,type:i.email}]},{default:l(()=>[d(T,{value:t[i.name],"onUpdate:value":U=>t[i.name]=U},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):o("",!0),i.type==="iDate"?(a(),u(w,{key:2,name:i.name,label:i.label,rules:[{required:i.required,message:i.message,type:i.email}]},{default:l(()=>[d(Q,{locale:b(ke),class:"w-100","show-time":"",placeholder:t.workshopDate,onChange:B,"disabled-date":z,format:"DD-MM-YYYY HH:mm A"},null,8,["locale","placeholder"])]),_:2},1032,["name","label","rules"])):o("",!0)],64))),128))]),I("div",qe,[d(R,{type:"primary","html-type":"submit",loading:$.value},{default:l(()=>[_(S(x.isIdUpdate?"Actualizar":"Registrar")+" taller",1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open"])}}},ze=$e(Me,[["__scopeId","data-v-6226f246"]]);const Le=I("h3",null,"TALLERES DE RUTA DIGITAL",-1),Oe={class:"filters"},Ne=["href"],Ae=["href"],Re=["href"],Fe=["href"],Ge={key:9},Ve=["onClick"],Be={class:"paginator"},He={class:"wrapper-form_btn"},Ke={__name:"TalleresRD",setup(Z){const P="https://programa.soporte-pnte.com/",x="http://127.0.0.1:5173/",q=window.location.hostname=="127.0.0.1"?x:P,C=m(""),$=m(null),t=xe(),O=m([]),N=m(!1),M=m(!1),Y=m(1e3),z=m(!1),B=m(0);m(null);const E=m(!1),L=m(!1),A=m("Crear"),r=m(null),f=m(window.innerHeight-100),g=()=>{f.value=window.innerHeight-300};Ie(()=>{window.removeEventListener("resize",g)});const w={theme:"snow",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["clean"]]},contentType:"html"},T=m({page:1}),Q=[{title:"Nombre taller",dataIndex:"title",fixed:"left",width:190},{title:"Expositor",dataIndex:"expositor",width:170},{title:"Fecha taller",dataIndex:"workshop_date",align:"center",width:160},{title:"Intervención",dataIndex:"type_intervention",align:"center",width:160},{title:"Invitación",dataIndex:"invitation_id",align:"center",width:80},{title:"T. Entrada",dataIndex:"test_in",align:"center",width:80},{title:"T. Salida",dataIndex:"test_out",align:"center",width:80},{title:"Estado",dataIndex:"status",align:"center",width:100},{title:"Inscriptos",dataIndex:"registered_c",align:"center",width:100},{title:"Link",dataIndex:"link_sala",align:"center",width:80},{title:"RRSS",dataIndex:"rrss",align:"center",width:70},{title:"SMS",dataIndex:"sms",align:"center",width:70},{title:"Correo",dataIndex:"correo",align:"center",width:70},{title:"Detalles",dataIndex:"details",align:"center",width:120},{title:"",dataIndex:"options",align:"center",width:50}],R=K({reason:""}),F=K({text1:"",text2:""}),W=e=>{T.value.page=e,H()},i=e=>{e&&H()},X=e=>{const s={id:e.id,date:e.workshop_date,taller:e.title,exponent:`${e.exponent.first_name} ${e.exponent.last_name} ${e.exponent.middle_name}`};t.push({name:"test-entrada",query:s})},U=e=>{const s={id:e.id,date:e.workshop_date,taller:e.title,exponent:`${e.exponent.first_name} ${e.exponent.last_name} ${e.exponent.middle_name}`,test:e.testin_id};t.push({name:"editar-test-entrada",query:s})},le=e=>{const s={id:e.id,date:e.workshop_date,taller:e.title,exponent:`${e.exponent.first_name} ${e.exponent.last_name} ${e.exponent.middle_name}`};t.push({name:"test-salida",query:s})},oe=e=>{const s={id:e.id,date:e.workshop_date,taller:e.title,exponent:`${e.exponent.first_name} ${e.exponent.last_name} ${e.exponent.middle_name}`,test:e.testout_id};t.push({name:"editar-test-salida",query:s})},se=e=>{const s={id:e.id,date:e.workshop_date,taller:e.title,exponent:`${e.exponent.first_name} ${e.exponent.last_name} ${e.exponent.middle_name}`};t.push({name:"taller-descripcion",query:s})},j=async(e,s)=>{if(r.value=s,e==="create"&&(A.value="Crear"),e==="edit"){A.value="Editar";try{const{data:p}=await G({url:`/invitations/${r.value.invitation_id}`,method:"GET"});C.value=p.content,F.workshop_id=p.workshop_id}catch(p){console.error("Error de red:",p)}}L.value=!0},ie=()=>{$.value=null,z.value=!0},re=async e=>{try{const s=await Ce({url:`/get-workshop-slug/${e.slug}`,method:"GET"});$.value=s.workshop,z.value=!0}catch(s){console.error("Error de red:",s),V.warning("Error de red")}},de=async()=>{let e,s;A.value=="Editar"?(e=`/invitations/${r.value.invitation_id}`,s="PUT"):(e=`/create-invitation/${r.value.id}`,s="POST"),M.value=!0;try{const p={content:C.value,workshop_id:r.value.id!=null?r.value.id:F.workshop_id},h=await G({url:e,method:s,data:p});V.success(h.message),H()}catch(p){console.error("Error de red:",p),V.error("La invitación fue creada")}finally{M.value=!1,L.value=!1,r.value=null}},ue=()=>{E.value=!0},H=async()=>{try{N.value=!0;const e=await G({url:"/workshops",method:"GET",params:T.value});O.value=e.workshop.data,B.value=e.workshop.total}catch(e){console.error("Error de red:",e)}finally{N.value=!1}};return ne(()=>{H(),window.addEventListener("resize",g),g()}),(e,s)=>{const p=v("a-button"),h=v("a-tag"),ee=v("a-menu-item"),ce=v("a-menu"),pe=v("a-dropdown"),_e=v("a-table"),me=v("a-pagination"),te=v("a-form"),ae=v("a-modal"),ve=v("a-textarea"),fe=v("a-form-item");return a(),y(k,null,[I("div",null,[Le,I("div",Oe,[d(p,{type:"primary",onClick:ie},{default:l(()=>[_("NUEVO")]),_:1})]),d(_e,{bordered:"",class:"ant-table-striped",scroll:{x:Y.value,y:f.value},columns:Q,"data-source":O.value,pagination:!1,loading:N.value,size:"small"},{bodyCell:l(({column:c,record:n})=>[c.dataIndex=="expositor"?(a(),y(k,{key:0},[_(S(n.exponent.first_name)+" "+S(n.exponent.last_name)+" "+S(n.exponent.middle_name),1)],64)):o("",!0),c.dataIndex=="type_intervention"?(a(),y(k,{key:1},[n.type_intervention==1?(a(),u(h,{key:0,color:"red"},{default:l(()=>[_("Marketing Digital")]),_:1})):o("",!0),n.type_intervention==2?(a(),u(h,{key:1,color:"green"},{default:l(()=>[_("Comercio Electrónico")]),_:1})):o("",!0),n.type_intervention==3?(a(),u(h,{key:2,color:"blue"},{default:l(()=>[_("Gestión Empresarial")]),_:1})):o("",!0),n.type_intervention==4?(a(),u(h,{key:3,color:"purple"},{default:l(()=>[_("Analisis de datos")]),_:1})):o("",!0),n.type_intervention==5?(a(),u(h,{key:4,color:"pink"},{default:l(()=>[_("Medios de pago")]),_:1})):o("",!0),n.type_intervention==6?(a(),u(h,{key:5,color:"cyan"},{default:l(()=>[_("Finanzas")]),_:1})):o("",!0)],64)):o("",!0),c.dataIndex=="test_in"?(a(),y(k,{key:2},[n.testin_id?o("",!0):(a(),u(p,{key:0,size:"small",onClick:D=>X(n)},{default:l(()=>[_("Crear")]),_:2},1032,["onClick"])),n.testin_id?(a(),y(k,{key:1},[d(p,{type:"link"},{default:l(()=>[I("a",{href:`${b(q)}test-entrada/${n.slug}`,target:"_blank"},"Link",8,Ne)]),_:2},1024),d(b(J),{onClick:D=>U(n)},null,8,["onClick"])],64)):o("",!0)],64)):o("",!0),c.dataIndex=="test_out"?(a(),y(k,{key:3},[n.testout_id?o("",!0):(a(),u(p,{key:0,size:"small",onClick:D=>le(n)},{default:l(()=>[_("Crear")]),_:2},1032,["onClick"])),n.testout_id?(a(),y(k,{key:1},[d(p,{type:"link"},{default:l(()=>[I("a",{href:`${b(q)}test-salida/${n.slug}`,target:"_blank"},"Link",8,Ae)]),_:2},1024),d(b(J),{onClick:D=>oe(n)},null,8,["onClick"])],64)):o("",!0)],64)):o("",!0),c.dataIndex=="invitation_id"?(a(),y(k,{key:4},[n.invitation_id?o("",!0):(a(),u(p,{key:0,size:"small",onClick:D=>j("create",n)},{default:l(()=>[_("Crear")]),_:2},1032,["onClick"])),n.invitation_id?(a(),y(k,{key:1},[d(p,{type:"link"},{default:l(()=>[I("a",{href:`${b(q)}invitacion/${n.slug}`,target:"_blank"},"Link",8,Re)]),_:2},1024),d(b(J),{onClick:D=>j("edit",n)},null,8,["onClick"])],64)):o("",!0)],64)):o("",!0),c.dataIndex=="status"?(a(),y(k,{key:5},[n.status==1?(a(),u(h,{key:0,bordered:!1,color:"success"},{default:l(()=>[_("En proceso")]),_:1})):o("",!0),n.status==0?(a(),u(h,{key:1,bordered:!1,color:"error"},{default:l(()=>[_("Finalizado")]),_:1})):o("",!0),n.status==2?(a(),u(h,{key:2,bordered:!1,color:"warning"},{default:l(()=>[_("Cancelado")]),_:1})):o("",!0)],64)):o("",!0),c.dataIndex=="link_sala"?(a(),y("a",{key:6,href:n.link,target:"_blank"},[n.link?(a(),u(b(Te),{key:0,class:"pointer",style:{fontSize:"16px",color:"#08c"}})):o("",!0)],8,Fe)):o("",!0),c.dataIndex=="status"?(a(),y(k,{key:7},[n.status=="en curso"?(a(),u(h,{key:0,bordered:!1,color:"success"},{default:l(()=>[_(S(n.status),1)]),_:2},1024)):o("",!0),n.status=="finalizado"?(a(),u(h,{key:1,bordered:!1,color:"volcano"},{default:l(()=>[_(S(n.status),1)]),_:2},1024)):o("",!0)],64)):o("",!0),c.dataIndex=="details"?(a(),u(p,{key:8,size:"small",onClick:D=>se(n)},{default:l(()=>[_("Ver detalles")]),_:2},1032,["onClick"])):o("",!0),c.dataIndex=="registered_c"?(a(),y("b",Ge,S(n.registered_count),1)):o("",!0),c.dataIndex=="options"?(a(),u(pe,{key:10,trigger:["click"]},{overlay:l(()=>[d(ce,null,{default:l(()=>[d(ee,{key:"0"},{default:l(()=>[I("a",{onClick:D=>re(n)},"Editar",8,Ve)]),_:2},1024),d(ee,{key:"1"})]),_:2},1024)]),default:l(()=>[I("a",{class:"ant-dropdown-link",onClick:s[0]||(s[0]=be(()=>{},["prevent"]))},[d(p,{shape:"circle",icon:we(b(Ue)),size:"small"},null,8,["icon"])])]),_:2},1024)):o("",!0)]),_:1},8,["scroll","data-source","loading"])]),I("div",Be,[d(me,{size:"small",total:B.value,pageSize:20,onChange:W,showSizeChanger:!1},null,8,["total"])]),d(ze,{open:z.value,onHandleCloseModal:s[1]||(s[1]=c=>z.value=!1),isIdUpdate:$.value,onRefreshTable:i},null,8,["open","isIdUpdate"]),d(ae,{footer:"",open:L.value,"onUpdate:open":s[3]||(s[3]=c=>L.value=c),title:`${A.value} invitación`,width:"460px"},{default:l(()=>[d(te,{model:F,layout:"vertical",onFinish:de},{default:l(()=>[d(b(Ee),{class:"quill-editor",content:C.value,"onUpdate:content":s[2]||(s[2]=c=>C.value=c),options:w,contentType:"html"},null,8,["content"]),I("div",He,[d(p,{type:"primary","html-type":"submit",loading:M.value},{default:l(()=>[_("Guardar")]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["open","title"]),d(ae,{open:E.value,"onUpdate:open":s[5]||(s[5]=c=>E.value=c),title:"Cancelar taller",onOk:ue,width:"400px"},{default:l(()=>[d(te,{model:R,layout:"vertical"},{default:l(()=>[d(fe,{label:"Especificar motivo de la cancelación del taller"},{default:l(()=>[d(ve,{value:R.reason,"onUpdate:value":s[4]||(s[4]=c=>R.reason=c)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}};export{Ke as default};
