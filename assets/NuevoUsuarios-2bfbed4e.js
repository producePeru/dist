import{Y as $,M as J,U as F,r as U,u as K,a as q,Z as R,n as Q,b as _,o as n,d as w,c as i,e as b,w as p,i as v,F as M,h as x,m as k,f as X,v as ee,z as d,s as m,_ as ae,j as Y,p as te,k as oe}from"./index-8a26fd9f.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";var le={exports:{}};(function(f,h){(function(D,g){f.exports=g($())})(J,function(D){function g(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var a=g(D),N={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(l){return l+"º"}};return a.default.locale(N,null,!0),N})})(le);const re={nickName:{type:"iText",label:"Usuario",name:"nickName",required:!0,message:"Escribe cuenta de usuario"},password:{type:"iText",label:"Contraseña",name:"password",required:!0,message:"Registra la contraseña"},documentType:{type:"iSelect",label:"Tipo de documento",name:"documentType",required:!0,message:"Seleccionar tipo de documento"},documentNumber:{type:"iText",label:"Núm. de documento",name:"documentNumber",required:!0,message:"Error en el tipo de documento"},lastName:{type:"iText",label:"Apellido paterno",name:"lastName",required:!0,message:"Escribe el apellido paterno"},middleName:{type:"iText",label:"Apellido materno",name:"middleName",required:!0,message:"Escribe el apellido materno"},name:{type:"iText",label:"Nombres",name:"name",required:!0,message:"Escribe el nombre"},countryCode:{type:"iSelectWrite",label:"País",name:"countryCode",required:!0,message:"Seleccionar país"},email:{type:"iText",label:"Correo",name:"email",required:!0,email:"email",message:"Escribe el correo del usuario"},officeCode:{type:"iSelect",label:"Oficina",name:"officeCode",required:!0,message:"Seleccionar un tipo"},sedeCode:{type:"iSelect",label:"Sede donde labora",name:"sedeCode",required:!0,message:"Seleccionar un tipo"},role:{type:"iSelect",label:"Tipo de usuario",name:"role",required:!0,message:"Seleccionar un tipo"},birthdate:{type:"iDate",label:"Fecha de nacimiento",name:"birthdate",required:!1,message:"Seleccionar país"},gender:{type:"iSelect",label:"Género",name:"gender",required:!1,message:"Seleccionar tipo de documento"},isDisabled:{type:"iSelect",label:"¿Tiene discapacidad?",name:"isDisabled",required:!1,message:"Seleccionar un tipo"},phoneNumber:{type:"iText",label:"Celular",name:"phoneNumber",required:!1,message:"Escribe el celular del usuario"}},ne=[{label:"DNI",value:1},{label:"CE",value:2},{label:"PAS",value:3},{label:"PTP",value:4}],ue=[{label:"Masculino",value:1},{label:"Femenino",value:2},{label:"...",value:3}],ie=[{label:"Si",value:2},{label:"No",value:1}],de=[{label:"Administrador",value:"1"},{label:"Usuario",value:"2"},{label:"Invitado",value:"3"}],me=[{label:"UGO",value:1},{label:"UGSE",value:2},{label:"UGERR",value:3},{label:"Dirección",value:4},{label:"Comunicación",value:5}],ce=[{value:"Nuevo Usuario"},{value:"Lista"}],pe=[{value:"Reportes"},{value:"Calendario"},{value:"Talleres"},{value:"MYPE"},{value:"Expositores"}];const E=f=>(te("data-v-35d30a66"),f=f(),oe(),f),ve=E(()=>b("h3",null,"REGISTRO DE USUARIOS",-1)),_e={class:"user"},be={class:"grid-item"},ye={class:"roles"},fe=E(()=>b("br",null,null,-1)),ge=E(()=>b("br",null,null,-1)),I="YYYY-MM-DD",he={__name:"NuevoUsuarios",setup(f){F.locale("es");const h=U(!1),D=U([]),g=U([]);K();const a=q({nickName:null,password:null,documentType:1,documentNumber:null,middleName:null,name:null,countryCode:173,birthdate:U(F("2000-01-01T05:00:00.000Z",I)),gender:null,isDisabled:null,email:null,phoneNumber:null,role:null,officeCode:null,sedeCode:1,_id:R}),N=()=>{a.nickName="",a.password="",a.documentType=1,a.documentNumber="",a.lastName="",a.middleName="",a.name="",a.countryCode=173,a.birthdate=null,a.gender="",a.isDisabled=null,a.email="",a.phoneNumber="",a.role=null,a.officeCode=null,a.sedeCode=null,l.usuarios=[],l.rutaDigital=[],c.rutaDigital=!1,c.usuarios=!1},l=q({usuarios:[],rutaDigital:[]}),c=q({rutaDigital:!1,usuarios:!1}),L=t=>{l[t].length>0?c[t]=!0:c[t]=!1},C=t=>{if(typeof t=="string")return t.toLowerCase().replace(/\s+/g,"-");if(Array.isArray(t))return t.map(C);if(typeof t=="object"){const o={};for(const r in t)t.hasOwnProperty(r)&&(o[r]=C(t[r]));return o}else return t},G=t=>Object.keys(t).filter(r=>t[r]===!0).map(r=>r==="rutaDigital"?"ruta-digital":r),O=async t=>{let o=G(c),r=C(l);const u=[r.usuarios,r.rutaDigital],y=[].concat(...o,...u),T={_id:t,created:R,views:y,exclusions:null};try{const S=await x({url:"/permission",method:"POST",data:T});N(),console.log(S),S&&k.success("Usuario registrado con éxito")}catch{k.error("No se pudo registrar este usuario")}finally{h.value=!1}},P=async()=>{const t=a;h.value=!0;try{const o=await x({url:"/register",method:"POST",data:t});O(o.data),console.log("eeeee",o.data)}catch{k.error("No se pudo registrar este usuario")}finally{h.value=!1}},z=()=>{k.error("Debes de completar todos los espacios requeridos")},j=(t,o)=>{const r=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return o.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)},V=async()=>{try{const{data:t}=await X({url:"/countries",method:"GET"});D.value=t}catch(t){console.error("Error de red:",t)}},B=async()=>{try{const{data:t}=await x({url:"/sedes",method:"GET"});g.value=t}catch(t){console.error("Error de red:",t)}};return Q(()=>{V(),B()}),(t,o)=>{const r=_("a-divider"),u=_("a-select"),y=_("a-form-item"),T=_("a-input"),S=_("a-date-picker"),H=_("a-button"),W=_("a-form"),A=_("a-checkbox");return n(),w(M,null,[ve,i(r),b("div",_e,[i(W,{layout:"vertical",model:a,name:"basic",autocomplete:"off",onFinish:P,onFinishFailed:z},{default:p(()=>[b("div",be,[(n(!0),w(M,null,ee(v(re),(e,Z)=>(n(),w(M,{key:Z},[e.type==="iSelect"?(n(),d(y,{key:0,class:"item-max",name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:p(()=>[e.name=="documentType"?(n(),d(u,{key:0,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:v(ne)},null,8,["value","onUpdate:value","options"])):m("",!0),e.name=="gender"?(n(),d(u,{key:1,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:v(ue)},null,8,["value","onUpdate:value","options"])):m("",!0),e.name=="isDisabled"?(n(),d(u,{key:2,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:v(ie)},null,8,["value","onUpdate:value","options"])):m("",!0),e.name=="officeCode"?(n(),d(u,{key:3,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:v(me)},null,8,["value","onUpdate:value","options"])):m("",!0),e.name=="sedeCode"?(n(),d(u,{key:4,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:g.value},null,8,["value","onUpdate:value","options"])):m("",!0),e.name=="role"?(n(),d(u,{key:5,value:a[e.name],"onUpdate:value":s=>a[e.name]=s,options:v(de)},null,8,["value","onUpdate:value","options"])):m("",!0)]),_:2},1032,["name","label","rules"])):m("",!0),e.type==="iText"?(n(),d(y,{key:1,name:e.name,label:e.label,rules:[{required:e.required,message:e.message,type:e.email}]},{default:p(()=>[i(T,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s},null,8,["value","onUpdate:value"])]),_:2},1032,["name","label","rules"])):m("",!0),e.type==="iSelectWrite"?(n(),d(y,{key:2,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:p(()=>[i(u,{value:a[e.name],"onUpdate:value":s=>a[e.name]=s,"show-search":"",options:D.value,"filter-option":j},null,8,["value","onUpdate:value","options"])]),_:2},1032,["name","label","rules"])):m("",!0),e.type==="iDate"?(n(),d(y,{key:3,name:e.name,label:e.label,rules:[{required:e.required,message:e.message}]},{default:p(()=>[i(S,{locale:v(ae),value:a.birthdate,"onUpdate:value":o[0]||(o[0]=s=>a.birthdate=s),style:{width:"100%"},format:I},null,8,["locale","value"])]),_:2},1032,["name","label","rules"])):m("",!0)],64))),128))]),i(y,null,{default:p(()=>[i(H,{type:"primary","html-type":"submit",loading:h.value},{default:p(()=>[Y("Registrar usuario")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),b("section",ye,[b("div",null,[i(A,{checked:c.rutaDigital,"onUpdate:checked":o[1]||(o[1]=e=>c.rutaDigital=e)},{default:p(()=>[Y("Ruta Digital")]),_:1},8,["checked"]),i(u,{value:l.rutaDigital,"onUpdate:value":o[2]||(o[2]=e=>l.rutaDigital=e),mode:"multiple",style:{width:"100%"},placeholder:"Agrega vistas para este usuario",onChange:o[3]||(o[3]=e=>L("rutaDigital")),options:v(pe)},null,8,["value","options"])]),fe,b("div",null,[i(A,{checked:c.usuarios,"onUpdate:checked":o[4]||(o[4]=e=>c.usuarios=e)},{default:p(()=>[Y("Usuarios")]),_:1},8,["checked"]),i(u,{value:l.usuarios,"onUpdate:value":o[5]||(o[5]=e=>l.usuarios=e),mode:"multiple",style:{width:"100%"},placeholder:"Agrega vistas para este usuario",onChange:o[6]||(o[6]=e=>L("usuarios")),options:v(ce)},null,8,["value","options"])]),ge])])],64)}}},Ne=se(he,[["__scopeId","data-v-35d30a66"]]);export{Ne as default};
