import{_ as F}from"./TableComponent-dcafddd3.js";import{c as i,A as G,r as m,u as J,a as q,k as W,W as x,b as _,o as f,d as O,w as l,p as D,m as K,e as y,i as w,C as Q,j as I,y as C,z as h,F as X,t as N}from"./index-617fe921.js";import{_ as Z}from"./DrawMP-cd8d2f37.js";import"./downloadExcel-0e384af5.js";import"./es-aae8217e.js";import{g as ee}from"./publicInscripcion-623ff37e.js";import{G as te}from"./GlobalOutlined-83bc005e.js";import"./icoexcel-1b303edf.js";import"./selectes-25eab61a.js";import"./SyncOutlined-d7cd5980.js";import"./MoreOutlined-5f968098.js";import"./FormComponent-75459822.js";import"./quill.snow-52b1dbfa.js";import"./UpImage-f0616125.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./timezone-c197f371.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};const ne=ae;function R(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},c=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),c.forEach(function(o){oe(s,o,n[o])})}return s}function oe(s,t,n){return t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}var S=function(t,n){var c=R({},t,n.attrs);return i(G,R({},c,{icon:ne}),null)};S.displayName="VideoCameraOutlined";S.inheritAttrs=!1;const re=S;const le={class:"layout-content"},ie={href:"https://inscripcion.soporte-pnte.com/mujer-produce-eventos",target:"_blank",rel:"noopener noreferrer",class:"btn-more-events-mp"},se={key:3},de=["onClick"],Ne={__name:"mp-index",setup(s){JSON.parse(localStorage.getItem("role"));const t=m([]),n=m(0),c=m(150),o=m(!1);m(!1),J();const E=m(!1),v=m(null),T=m(!1),a=q({page:1}),A=[{title:"#",dataIndex:"idx",align:"center",width:50,fixed:"left"},{title:"LINK INSCRIPCIONES",dataIndex:"link",width:80,align:"center"},{title:"NOMBRE DEL EVENTO",dataIndex:"title",width:180},{title:"INSCRITOS",dataIndex:"count",width:100,align:"center"},{title:"REGIÓN",dataIndex:"city_name",width:120},{title:"LUGAR EVENTO",dataIndex:"place",width:180},{title:"FECHA DEL EVENTO",dataIndex:"date_format",width:120,align:"center"},{title:"HORARIO EVENTO",dataIndex:"hours",width:130,align:"center"},{title:"LINK SALA",dataIndex:"link_sala",width:50,align:"center"},{title:"",dataIndex:"actions",width:60,align:"center",fixed:"right"}],V=e=>e?D(e,["HH:mm:ss","HH:mm"]).format("hh:mm A"):null,H=e=>{v.value=e,o.value=!0},P=()=>{g(),o.value=!1},Y=()=>{v.value=null,o.value=!0},M=async()=>{},$=async e=>{a.page=e,await g()},z=async e=>{e&&(a.page=1,await g())},k=(e,r)=>{const u=`${ee()}/${r}/${e}`;window.open(u,"_blank")},g=async()=>{try{E.value=!0;const e={page:a.page};a.year&&(e.year=D(a.year).format("YYYY")),a.range&&(e.startDate=a.range[0].format("YYYY/MM/DD"),e.endDate=a.range[1].format("YYYY/MM/DD")),a.name&&(e.name=a.name),a.orderby&&(e.orderby=a.orderby);const r=await K({url:"mp/index-events",method:"GET",params:e}),{data:u}=r;t.value=u.data,n.value=u.total,c.value=u.per_page}catch(e){console.error("Error de red:",e)}finally{E.value=!1}};return W(async()=>{await g()}),x("search",a),x("loading",E),x("loadingFile",T),(e,r)=>{const u=_("a-button"),j=_("a-tag"),B=_("router-link"),b=_("a-menu-item"),L=_("a-drawer");return f(),O("div",le,[i(F,{title:"CAPACITACIONES MUJER PRODUCE",new:!0,textNuevo:"NUEVO EVENTO",placeholderSearch:"Buscar",searchYear:!0,rangeDate:!0,columns:A,titleSearch:"BUSCAR POR EVENTO",pageSize:c.value,nameTotal:"Capacitaciones",dataSource:t.value,total:n.value,btnUpdate:!0,onHandleNew:Y,onHandleCallFetchData:g,onHandleDownloadExcel:M,onHandleSearch:z,onHandlePaginator:$},{header:l(()=>[y("a",ie,[i(w(Q)),r[1]||(r[1]=I(" Ver todos los eventos "))])]),"data-cell":l(({column:d,record:p})=>[d.dataIndex=="link"?(f(),C(u,{key:0,onClick:U=>k(p.slug,"mujer-produce"),style:{color:"#f44336","font-size":"16px","margin-top":"-2px"},type:"text"},{default:l(()=>[i(w(te))]),_:2},1032,["onClick"])):h("",!0),d.dataIndex=="link_sala"?(f(),O(X,{key:1},[p.link?(f(),C(u,{key:0,onClick:U=>k(p.slug,"mujer-produce-sala-link"),style:{color:"#2196f3","font-size":"16px","margin-top":"-2px"},type:"text"},{default:l(()=>[i(w(re))]),_:2},1032,["onClick"])):h("",!0)],64)):h("",!0),d.dataIndex=="registered"?(f(),C(j,{key:2,color:"purple"},{default:l(()=>[I(N(p.registered),1)]),_:2},1024)):h("",!0),d.dataIndex=="hours"?(f(),O("span",se,[y("span",null,N(V(p.hourStart))+" – "+N(V(p.hourEnd)),1)])):h("",!0)]),"custom-options":l(({record:d})=>[i(b,null,{default:l(()=>[i(B,{to:`/admin/mp/inscritos/${d.slug}`},{default:l(()=>r[2]||(r[2]=[I(" Inscritos ")])),_:2},1032,["to"])]),_:2},1024),i(b,null,{default:l(()=>[y("a",{onClick:p=>H(d)},"Editar",8,de)]),_:2},1024)]),_:1},8,["pageSize","dataSource","total"]),i(L,{open:o.value,"onUpdate:open":r[0]||(r[0]=d=>o.value=d),title:v.value?"EDITAR EVENTO MP":"REGISTRAR UN EVENTO",placement:"right",width:"550"},{default:l(()=>[i(Z,{onCloseDraw:P,info:v.value},null,8,["info"])]),_:1},8,["open","title"])])}}};export{Ne as default};
